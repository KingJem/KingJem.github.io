<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/10/14/Untitled/"/>
    <url>/2024/10/14/Untitled/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>adb 常用命令</title>
    <link href="/2024/10/14/adb%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <url>/2024/10/14/adb%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h2 id="adb-设置代理"><a href="#adb-设置代理" class="headerlink" title="adb 设置代理"></a>adb 设置代理</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">设置代理：</span><br><br><br>adb shell settings put global http_proxy 127.0.0.1:8888<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">删除代理 重启后生效</span><br>adb shell settings delete global http_proxy<br><br>adb shell settings delete global global_http_proxy_host<br><br>adb shell settings delete global global_http_proxy_port<br></code></pre></td></tr></table></figure><h2 id="包名查询"><a href="#包名查询" class="headerlink" title="包名查询"></a>包名查询</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">adb shell pm list packages |grep twitter<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>clash 分流规则</title>
    <link href="/2024/10/14/clash%E7%9A%84%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99/"/>
    <url>/2024/10/14/clash%E7%9A%84%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99/</url>
    
    <content type="html"><![CDATA[<p>Clash.Meta DNS 解析流程</p><p><img src="https://s2.loli.net/2023/10/28/sR35TgJtoXZqbzL.png" alt="image-20231028134318125"></p><p><a href="https://wiki.metacubex.one/config/rules/geox/">https://wiki.metacubex.one/config/rules/geox/</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>clash</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>firewall</title>
    <link href="/2024/10/14/filewall/"/>
    <url>/2024/10/14/filewall/</url>
    
    <content type="html"><![CDATA[<p>设置alias fwc=firewall-cmd</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">fwc</span> <span class="hljs-built_in">--list-all</span> <span class="hljs-comment"># 获取所有规则 </span><br><span class="hljs-string">public</span> (<span class="hljs-string">active</span>)<br>  <span class="hljs-string">target</span>: <span class="hljs-string">default</span><br>  <span class="hljs-string">icmp-block-inversion</span>: <span class="hljs-string">no</span><br>  <span class="hljs-string">interfaces</span>: <span class="hljs-string">eth0</span><br>  <span class="hljs-string">sources</span>:<br>  <span class="hljs-string">services</span>: <span class="hljs-string">cockpit</span> <span class="hljs-string">dhcpv6-client</span> <span class="hljs-string">http</span> <span class="hljs-string">https</span> <span class="hljs-string">redis</span> <span class="hljs-string">ssh</span><br>  <span class="hljs-string">ports</span>: <span class="hljs-string">10136</span>/<span class="hljs-string">tcp</span> <span class="hljs-string">9998</span>/<span class="hljs-string">tcp</span> <span class="hljs-string">51574</span>/<span class="hljs-string">tcp</span> <span class="hljs-string">5180</span>/<span class="hljs-string">tcp</span> <span class="hljs-string">80</span>/<span class="hljs-string">tcp</span> <span class="hljs-string">443</span>/<span class="hljs-string">tcp</span> <span class="hljs-string">27861</span>/<span class="hljs-string">udp</span> <span class="hljs-string">41078</span>/<span class="hljs-string">tcp</span><br>  <span class="hljs-string">protocols</span>:<br>  <span class="hljs-string">forward</span>: <span class="hljs-string">no</span><br>  <span class="hljs-string">masquerade</span>: <span class="hljs-string">yes</span><br>  <span class="hljs-string">forward-ports</span>:<br>        <span class="hljs-string">port</span>=<span class="hljs-string">47000-48000:proto=</span><span class="hljs-string">udp:toport=</span><span class="hljs-string">27861:toaddr=</span><br>  <span class="hljs-string">source-ports</span>:<br>  <span class="hljs-string">icmp-blocks</span>:<br>  <span class="hljs-string">rich</span> <span class="hljs-string">rules</span>:<br><br><br><span class="hljs-string">fwc</span> <span class="hljs-built_in">--get-services</span> <span class="hljs-comment">## 获取服务</span><br><br> <br><span class="hljs-string">fwc</span> <span class="hljs-built_in">--get-services</span> <span class="hljs-comment">## 获取服务</span><br><span class="hljs-comment">#RH-Satellite-6 RH-Satellite-6-capsule  .... 一个服务对应一种默认端口</span><br><br><br><br><span class="hljs-string">fwc</span> <span class="hljs-built_in">--add-service</span> <span class="hljs-string">http</span> <span class="hljs-comment">## 临时放行 </span><br><span class="hljs-string">fwc</span> <span class="hljs-built_in">--remove-service</span> <span class="hljs-string">http</span>  <span class="hljs-comment"># 临时删除</span><br><span class="hljs-string">fwc</span> <span class="hljs-built_in">--add-port=2222/tcp</span> <span class="hljs-built_in">--per</span> <span class="hljs-comment">#永久放行</span><br><span class="hljs-string">fwc</span> <span class="hljs-built_in">--add-service</span> <span class="hljs-string">http</span> <span class="hljs-built_in">--permanent</span> <span class="hljs-comment">## 永久添加 或者 --per</span><br><span class="hljs-string">fwc</span> <span class="hljs-built_in">--reload</span> <span class="hljs-comment"># 重新加载配置文件</span><br><br> <br><span class="hljs-string">fwc</span> <span class="hljs-built_in">--remove-port=2222/tcp</span> <span class="hljs-built_in">--per</span> <span class="hljs-comment"># 永久放行 </span><br><span class="hljs-string">firewall-cmd</span> <span class="hljs-built_in">--zone=public</span> <span class="hljs-built_in">--add-forward-port=port=8080:proto=tcp:toport=8088</span><br><span class="hljs-string">firewall-cmd</span> <span class="hljs-built_in">--permanent</span> <span class="hljs-built_in">--add-forward-port=port=48000-49000:proto=udp:toport=27042</span><br><span class="hljs-string">firewall-cmd</span> <span class="hljs-built_in">--permanent</span> <span class="hljs-built_in">--remove-forward-port=port=48000-49000:proto=udp:toport=27042</span><br><span class="hljs-string">sudo</span> <span class="hljs-string">firewall-cmd</span> <span class="hljs-built_in">--reload</span><br><br><br><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>linux</tag>
      
      <tag>防火墙</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ideavimrc配置和解读</title>
    <link href="/2024/10/14/ideavimrc%E9%85%8D%E7%BD%AE%E5%92%8C%E8%A7%A3%E8%AF%BB/"/>
    <url>/2024/10/14/ideavimrc%E9%85%8D%E7%BD%AE%E5%92%8C%E8%A7%A3%E8%AF%BB/</url>
    
    <content type="html"><![CDATA[<h3 id="ideavim配置"><a href="#ideavim配置" class="headerlink" title="ideavim配置"></a>ideavim配置</h3><p>ideavim 是jetbrains 官方实现的插件和jetbrain 旗下的平台结合的很紧密，也可以通过设置实现vim 和jetbrains 旗下产品的深度绑定，但是只是实现vim 的部分功能。</p><p>无法通过 souce ~/.ideavimrc 来更新配置  必须通过再次打开软件来加载新的配置文件使其生效。</p><p><a href="https://github.com/JetBrains/ideavim#executing-ide-actions">官方仓库</a></p><p><a href="https://blog.jetbrains.com/zh-hans/webstorm/2022/10/ideavim-in-webstorm/">web-storm团队的一些入门介绍</a></p><p>Ideavim 有些插件可以通过官方仓库来安装，但是我看到ideavim 的仓库里这样介绍</p><p>If you reuse your existing <code>.vimrc</code> file using <code>source ~/.vimrc</code>, IdeaVim can parse and enable plugins that are defined using <a href="https://github.com/junegunn/vim-plug">vim-plug</a> or <a href="https://github.com/VundleVim/Vundle.vim">vundle</a>. No additional set commands in <code>~/.ideavimrc</code> are required</p><p>可以解析一部分vim 插件，插件是通过idea vim 模拟的。不是原生的vim 插件</p><p>支持的插件有以下这些</p><ul><li>vim-easymotion</li><li>NERDTree</li><li>vim-surround</li><li>vim-multiple-cursors</li><li>vim-commentary</li><li>argtextobj.vim</li><li>vim-textobj-entire</li><li>ReplaceWithRegister</li><li>vim-exchange</li><li>vim-highlightedyank</li><li>vim-paragraph-motion</li><li>vim-indent-object</li><li>match.it</li></ul><p>通过插件提供的 <code>IdeaVim: track action Ids</code> 来查找ID  两下<code>shift </code>  来查找 可以帮经常使用的快捷键录制下来，制作成常用的暗转</p><p><a href="https://github.com/JetBrains/ideavim/raw/master/assets/readme/track_action_light.gif">官方演示gif</a></p><figure class="highlight pony"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><code class="hljs pony"><br><br><span class="hljs-string">&quot; 搜索设置</span><br><span class="hljs-string">set incsearch</span><br><span class="hljs-string">set hlsearch</span><br><span class="hljs-string">set ignorecase &quot;</span>搜索时智能匹配大小写<br>set smartcase<br>set wrapscan  <span class="hljs-string">&quot;环形搜索</span><br><span class="hljs-string">&quot;</span>关闭搜索高亮<br>nnoremap &lt;leader&gt;/ :nohl&lt;<span class="hljs-type">CR</span>&gt;<br><br><br><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;</span> 通用设置<br><span class="hljs-string">&quot;语法高亮显示</span><br><span class="hljs-string">syntax on</span><br><span class="hljs-string">&quot;</span> 不使用兼容模式<br>set nocompatible<br><span class="hljs-string">&quot;显示行号</span><br><span class="hljs-string">set number</span><br><span class="hljs-string">&quot;</span>显示相对行号<br>set relativenumber<br><span class="hljs-string">&quot;显示光标所在位置的行号和列号</span><br><span class="hljs-string">set ruler</span><br><span class="hljs-string">&quot;</span>自动折行<br>set wrap<br><span class="hljs-string">&quot;移位操作 &gt;&gt; 或 &lt;&lt; 的缩进长度（以空格的数量表示）</span><br><span class="hljs-string">set shiftwidth=4</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;</span>设置文件里的制表符 (<span class="hljs-type">TAB</span>) 的宽度（以空格的数量表示<br>set tabstop=<span class="hljs-number">4</span><br>set softtabstop=<span class="hljs-number">4</span><br><span class="hljs-string">&quot;换行的时候下一行使用上一行的缩进</span><br><span class="hljs-string">set smartindent</span><br><span class="hljs-string">&quot;</span>将tab替换为相应数量空格<br>set expandtab<br>set backspace=<span class="hljs-number">2</span><br><span class="hljs-string">&quot; 上下滚动的时候保留5行</span><br><span class="hljs-string">set co=5</span><br><span class="hljs-string">&quot;</span>突出显示当前行<br>set cursorline<br><span class="hljs-string">&quot; 禁止创建备份文件</span><br><span class="hljs-string">set nobackup</span><br><span class="hljs-string">&quot;</span> 禁止创建交换文件 .swp 开头<br>set noswapfile<br><span class="hljs-string">&quot; Vim 的默认寄存器和系统剪贴板共享</span><br><span class="hljs-string">set clipboard+=unnamed</span><br><span class="hljs-string">&quot;</span> 显示当前的模式<br>set showmode<br><span class="hljs-string">&quot;光标距窗口上下保留 5 行</span><br><span class="hljs-string">set scrolloff=5</span><br><span class="hljs-string">&quot;</span>显示文件名、行号和列号<br>set laststatus=<span class="hljs-number">2</span><br><span class="hljs-string">&quot;创建undo文件</span><br><span class="hljs-string">&quot;</span>set undofile<br><span class="hljs-string">&quot;关闭错误响铃</span><br><span class="hljs-string">set noerrorbells</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;</span>屏幕命令显示<br>set showcmd<br><span class="hljs-string">&quot;当前所处的模式&quot;</span><br>set showmode<br><span class="hljs-string">&quot;显示匹配的括号&quot;</span><br>set showmatch<br><span class="hljs-string">&quot; 参考 https://linux265.com/news/3395.html </span><br><span class="hljs-string">&quot;</span> 参考 http:<span class="hljs-comment">//t.zoukankan.com/fuhai0815-p-9443916.html</span><br><br><br><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;</span> 通用设置 结束<br><br><br><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot; ideavim 插件配置</span><br><span class="hljs-string">&quot;</span>设置space为leader<br><span class="hljs-keyword">let</span> mapleader=<span class="hljs-string">&quot; &quot;</span><br><br><span class="hljs-string">&quot;sneak 插件 s/S &#123;char&#125;&#123;char&#125; 跳转</span><br><span class="hljs-string">set sneak</span><br><span class="hljs-string">&quot;</span> 启用vim surround功能<br>set surround<br><span class="hljs-string">&quot;启用e asymotin 插件</span><br><span class="hljs-string">set easymotion</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;</span>为<span class="hljs-type">IdeaVim</span>插件增加自动切换为英文输入法的功能<br><span class="hljs-string">&quot;set keep-english-in-normal</span><br><span class="hljs-string"></span><br><span class="hljs-string">Plug &#x27;preservim/nerdtree`</span><br><span class="hljs-string">map &lt;c-t&gt; :NERDTree&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span> ideavim 插件配置 结束<br><br><br><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="hljs-string">&quot; idea的动作映射&quot;</span><br><span class="hljs-string">&quot;idea的动作映射 https://github.com/JetBrains/ideavim#executing-ide-actions</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;</span> 撤回<br>nnoremap <span class="hljs-type">U</span> &lt;<span class="hljs-type">C</span>-r&gt;<br><span class="hljs-string">&quot; 复制到行尾</span><br><span class="hljs-string">nnoremap Y y$</span><br><span class="hljs-string">&quot;</span>格式化代码 \r<br>map \r &lt;<span class="hljs-type">Action</span>&gt;(<span class="hljs-type">ReformatCode</span>)<br><span class="hljs-string">&quot; Debug</span><br><span class="hljs-string">map &lt;leader&gt;d &lt;Action&gt;(Debug)</span><br><span class="hljs-string">&quot;</span>运行当前文件<br>nnoremap &lt;leader&gt;r :action <span class="hljs-type">RunClass</span>&lt;<span class="hljs-type">CR</span>&gt;<br><span class="hljs-string">&quot;改变量名</span><br><span class="hljs-string">nnoremap &lt;leader&gt;s :action RenameElement&lt;CR&gt;</span><br><span class="hljs-string">&quot;</span>新建一个文件<br>nnoremap &lt;leader&gt;n :action <span class="hljs-type">NewFile</span>&lt;<span class="hljs-type">CR</span>&gt;<br><span class="hljs-string">&quot;Ctrl + Shift + I查看快速定义</span><br><span class="hljs-string">nnoremap &lt;leader&gt;v :action QuickImplementations&lt;CR&gt;</span><br><span class="hljs-string">noremap &lt;leader&gt;gc :action GotoClass&lt;CR&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;</span>noremap / :action <span class="hljs-type">Find</span>&lt;<span class="hljs-type">CR</span>&gt;<br><span class="hljs-string">&quot;noremap f :action AceAction&lt;CR&gt;</span><br><span class="hljs-string">&quot;</span>noremap <span class="hljs-type">F</span> :action <span class="hljs-type">AceTargetAction</span>&lt;<span class="hljs-type">CR</span>&gt;<br><br><br><br><span class="hljs-string">&quot; 后退</span><br><span class="hljs-string">nnoremap [[ :action Back&lt;CR&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;</span>前进<span class="hljs-string">&quot;</span><br><span class="hljs-string"></span><br><span class="hljs-string">noremap  ]] :action Forward&lt;CR&gt;</span><br><span class="hljs-string"> &quot;</span> 弹出输入框，可以跳到指定类<br>nnoremap &lt;<span class="hljs-type">Space</span>&gt;gc :action <span class="hljs-type">GotoClass</span>&lt;<span class="hljs-type">CR</span>&gt;<br><span class="hljs-string">&quot; 弹出输入框，跳转到指定操作</span><br><span class="hljs-string">nnoremap &lt;Space&gt;ga :action GotoAction&lt;CR&gt;</span><br><span class="hljs-string">&quot;</span> 跳转到定义<br>nnoremap &lt;leader&gt;gd :action <span class="hljs-type">GotoDeclaration</span>&lt;<span class="hljs-type">CR</span>&gt;<br><span class="hljs-string">&quot; 跳转到实现</span><br><span class="hljs-string">nnoremap &lt;Space&gt;gi :action GotoImplementation&lt;CR&gt;</span><br><span class="hljs-string">&quot;</span> 跳转到指定的文件<br>nnoremap &lt;<span class="hljs-type">Space</span>&gt;gf :action <span class="hljs-type">GotoFile</span>&lt;<span class="hljs-type">CR</span>&gt;<br><span class="hljs-string">&quot; 跳转到方法的声明</span><br><span class="hljs-string">nnoremap &lt;Space&gt;gs :action GotoSuperMethod&lt;CR&gt;</span><br><span class="hljs-string">&quot;</span> 跳转到测试<br><span class="hljs-string">&quot;nnoremap &lt;Space&gt;gT :action GotoTest&lt;CR&gt;</span><br><span class="hljs-string">&quot;</span> 弹出输入框，跳转到符号<br>nnoremap &lt;<span class="hljs-type">Space</span>&gt;gS :action <span class="hljs-type">GotoSymbol</span>&lt;<span class="hljs-type">CR</span>&gt;<br><span class="hljs-string">&quot; 弹出输入框 跳转到文件结构  不是command +7</span><br><span class="hljs-string">noremap &lt;leader&gt;fs :action FileStructurePopup&lt;CR&gt;</span><br><span class="hljs-string">&quot;</span>noremap &lt;leader&gt;v :action <span class="hljs-type">VimVisualToggleBlockMode</span>&lt;<span class="hljs-type">CR</span>&gt;<br><span class="hljs-string">&quot; 查找使用</span><br><span class="hljs-string">nnoremap &lt;Space&gt;fu :action FindUsages&lt;CR&gt;</span><br><span class="hljs-string">&quot;</span> 显示使用<br>nnoremap &lt;<span class="hljs-type">Space</span>&gt;su :action <span class="hljs-type">ShowUsages</span>&lt;<span class="hljs-type">CR</span>&gt;<br><span class="hljs-string">&quot; 窗口切换</span><br><span class="hljs-string">nnoremap &lt;Space&gt;&lt;TAB&gt;:action Switcher&lt;CR&gt;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;</span> 查看文档  <span class="hljs-type">F1</span>键<br>nnoremap &lt;<span class="hljs-type">Space</span>&gt;h :action <span class="hljs-type">QuickJavaDoc</span>&lt;<span class="hljs-type">CR</span>&gt;<br><br><span class="hljs-string">&quot; 显示错误信息 鼠标悬停在错误页面上的效果</span><br><span class="hljs-string">nnoremap &lt;Space&gt;se :action ShowErrorDescription&lt;CR&gt;</span><br><span class="hljs-string">&quot;</span>nnoremap  :action <span class="hljs-type">ShowErrorDescription</span>  鼠标悬停在错误页面上的效果<br><br><br><br><span class="hljs-string">&quot; gh=go head, 映射vim中的^</span><br><span class="hljs-string">nnoremap gh ^</span><br><span class="hljs-string">&quot;</span> gl=go last，映射vim中的$<br>nnoremap gl $<br><br><span class="hljs-string">&quot; Window operation</span><br><span class="hljs-string">&quot;</span>nnoremap &lt;<span class="hljs-type">Space</span>&gt;ww &lt;<span class="hljs-type">C</span>-<span class="hljs-type">W</span>&gt;w  <span class="hljs-string">&quot;切换窗口&quot;</span><br><span class="hljs-string">&quot;nnoremap &lt;Space&gt;wc &lt;C-W&gt;c  &quot;</span>关闭窗口<span class="hljs-string">&quot;</span><br><span class="hljs-string">&quot;</span>nnoremap &lt;<span class="hljs-type">Space</span>&gt;wj &lt;<span class="hljs-type">C</span>-<span class="hljs-type">W</span>&gt;j<br><span class="hljs-string">&quot;nnoremap &lt;Space&gt;wk &lt;C-W&gt;k</span><br><span class="hljs-string">&quot;</span>nnoremap &lt;<span class="hljs-type">Space</span>&gt;wh &lt;<span class="hljs-type">C</span>-<span class="hljs-type">W</span>&gt;h<br><span class="hljs-string">&quot;nnoremap &lt;Space&gt;wl &lt;C-W&gt;l</span><br><span class="hljs-string">&quot;</span>nnoremap &lt;<span class="hljs-type">Space</span>&gt;ws &lt;<span class="hljs-type">C</span>-<span class="hljs-type">W</span>&gt;s<br><span class="hljs-string">&quot;nnoremap &lt;Space&gt;w- &lt;C-W&gt;-</span><br><span class="hljs-string">&quot;</span>nnoremap &lt;<span class="hljs-type">Space</span>&gt;w+ &lt;<span class="hljs-type">C</span>-<span class="hljs-type">W</span>&gt;+<br><br><br><br><br></code></pre></td></tr></table></figure><p>掘金上有篇文章介绍的还挺全的 但是我不是Java 开发有好些功能用不上<a href="https://juejin.cn/post/7086003739718811661">传送门</a>在这，还是根据自己的需要定制，适合自己的才是最好的</p><h2 id="插件用法介绍"><a href="#插件用法介绍" class="headerlink" title="插件用法介绍"></a>插件用法介绍</h2><p>Ace-jump 插件</p><p><a href="https://blog.csdn.net/phantom_dapeng/article/details/110391053"></a></p><p>Vim-surround</p><p><a href="https://blog.csdn.net/zwlove5280/article/details/108276285">https://blog.csdn.net/zwlove5280/article/details/108276285</a></p><p>参考文章</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><br><span class="hljs-string">&quot;https://javaforall.cn/186961.html</span><br><span class="hljs-string">&quot;</span>https://blog.csdn.net/weixin_33859844/article/details/91658609<br><span class="hljs-string">&quot;https://github.com/JetBrains/ideavim#executing-ide-actions</span><br><span class="hljs-string">&quot;</span>https://github.com/JetBrains/ideavim/wiki/%22set%22-commands<br><span class="hljs-string">&quot;https://blog.csdn.net/kl28978113/article/details/53980440</span><br><span class="hljs-string">&quot;</span>https://gist.github.com/AlexPl292/50a3ff4cef1badcbb23436b22cbd3cf4<span class="hljs-string">&quot;</span><br><span class="hljs-string">&quot;</span>https://blog.csdn.net/weixin_33859844/article/details/91658609<span class="hljs-string">&quot;</span><br><span class="hljs-string">&quot;</span>https://zhuanlan.zhihu.com/p/404818431<span class="hljs-string">&quot;</span><br><span class="hljs-string">&quot;</span>https://zhuanlan.zhihu.com/p/579636452<span class="hljs-string">&quot;</span><br><span class="hljs-string">&quot;</span>https://www.jianshu.com/p/ddd56ceeb83d<span class="hljs-string">&quot;</span><br><span class="hljs-string"></span><br></code></pre></td></tr></table></figure><p>isneedpay</p>]]></content>
    
    
    
    <tags>
      
      <tag>vim</tag>
      
      <tag>ideavim，jetbrains</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>jsrpc 框架使用</title>
    <link href="/2024/10/14/jsrpc-%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8%E5%92%8C%E4%BB%A3%E7%A0%81%E4%BF%AE%E6%94%B9/"/>
    <url>/2024/10/14/jsrpc-%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8%E5%92%8C%E4%BB%A3%E7%A0%81%E4%BF%AE%E6%94%B9/</url>
    
    <content type="html"><![CDATA[<p>jsrpc 框架运行报错</p><p>修改代码如下，修改一些函数为async </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Hlclient</span>(<span class="hljs-params">wsURL</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wsURL</span> = wsURL;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span> = &#123;&#125;;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span> = &#123;&#125;;<br><br>    <span class="hljs-keyword">if</span> (!wsURL) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;wsURL can not be empty!!&#x27;</span>)<br>    &#125;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">connect</span>()<br>&#125;<br><br><span class="hljs-title class_">Hlclient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">connect</span> =  <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;begin of connect to wsURL: &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">wsURL</span>);<br>    <span class="hljs-keyword">var</span> _this = <span class="hljs-variable language_">this</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>[<span class="hljs-string">&quot;ySocket&quot;</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">wsURL</span>);<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>[<span class="hljs-string">&quot;ySocket&quot;</span>].<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;send func&quot;</span>, <span class="hljs-keyword">await</span> e.<span class="hljs-property">data</span>.<span class="hljs-title function_">text</span>());<br>            _this.<span class="hljs-title function_">handlerRequest</span>(e.<span class="hljs-property">data</span>);<br>        &#125;<br>    &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;connection failed,reconnect after 10s&quot;</span>);<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            _this.<span class="hljs-title function_">connect</span>()<br>        &#125;, <span class="hljs-number">10000</span>)<br>    &#125;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>[<span class="hljs-string">&quot;ySocket&quot;</span>].<span class="hljs-property">onclose</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;connection failed,reconnect after 10s&quot;</span>);<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            _this.<span class="hljs-title function_">connect</span>()<br>        &#125;, <span class="hljs-number">10000</span>)<br>    &#125;<br><br>&#125;;<br><span class="hljs-title class_">Hlclient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">send</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">msg</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>[<span class="hljs-string">&quot;ySocket&quot;</span>].<span class="hljs-title function_">send</span>(msg)<br>&#125;<br><br><span class="hljs-title class_">Hlclient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">regAction</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">func_name, func</span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> func_name !== <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;an func_name must be string&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> func !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;must be function&quot;</span>);<br>    &#125;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;register func_name: &quot;</span> + func_name);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>[func_name] = func;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;<br><br>&#125;<br><span class="hljs-title class_">Hlclient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">handlerRequest</span> = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">requestJson</span>) &#123;<br>    <span class="hljs-keyword">var</span> _this = <span class="hljs-variable language_">this</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">await</span> requestJson.<span class="hljs-title function_">text</span>())<br>    <span class="hljs-keyword">var</span> result = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-keyword">await</span> requestJson.<span class="hljs-title function_">text</span>());<br>    <span class="hljs-keyword">if</span> (!result[<span class="hljs-string">&#x27;action&#x27;</span>]) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendResult</span>(<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;need request param &#123;action&#125;&#x27;</span>);<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    action = result[<span class="hljs-string">&quot;action&quot;</span>]<br>    <span class="hljs-keyword">var</span> theHandler = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>[action];<br>    <span class="hljs-keyword">if</span> (!theHandler || theHandler == <span class="hljs-literal">undefined</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendResult</span>(action, <span class="hljs-string">&#x27;action not found&#x27;</span>);<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">if</span> (!result[<span class="hljs-string">&quot;param&quot;</span>]) &#123;<br>            <span class="hljs-title function_">theHandler</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) &#123;<br>                _this.<span class="hljs-title function_">sendResult</span>(action, response);<br>            &#125;)<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-title function_">theHandler</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) &#123;<br>                _this.<span class="hljs-title function_">sendResult</span>(action, response);<br>            &#125;, result[<span class="hljs-string">&quot;param&quot;</span>])<br>        &#125;<br><br>    &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;error: &quot;</span> + e);<br>        _this.<span class="hljs-title function_">sendResult</span>(action + e);<br>    &#125;<br>&#125;<br><br><span class="hljs-title class_">Hlclient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sendResult</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">action, response</span>) &#123;<br>    <span class="hljs-keyword">var</span> responseJson;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> response == <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            responseJson = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(response);<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>()<br>        &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>            responseJson = &#123;&#125;;<br>            responseJson[<span class="hljs-string">&#x27;data&#x27;</span>] = response;<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> response == <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>        responseJson = response;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        responseJson = &#123;&#125;;<br>        responseJson[<span class="hljs-string">&#x27;data&#x27;</span>] = response;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(responseJson)) &#123;<br>        responseJson = &#123;<br>            <span class="hljs-attr">data</span>: responseJson,<br>            <span class="hljs-attr">code</span>: <span class="hljs-number">0</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (responseJson[<span class="hljs-string">&#x27;code&#x27;</span>]) &#123;<br>        responseJson[<span class="hljs-string">&#x27;code&#x27;</span>] = <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (responseJson[<span class="hljs-string">&#x27;status&#x27;</span>]) &#123;<br>        responseJson[<span class="hljs-string">&#x27;status&#x27;</span>] = <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        responseJson[<span class="hljs-string">&#x27;status&#x27;</span>] = <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">var</span> responseText = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(responseJson);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">send</span>(action + <span class="hljs-title function_">atob</span>(<span class="hljs-string">&quot;aGxeX14&quot;</span>) + responseText);<br>&#125;<br><br><span class="hljs-comment">// 连接通信</span><br><span class="hljs-comment">// var client = new Hlclient(&quot;ws://127.0.0.1:12080/ws?group=match20&amp;name=yuanrenxue&quot;);</span><br><span class="hljs-comment">// // 第二个参数为函数，resolve里面的值是想要的值(发送到服务器的)</span><br><span class="hljs-comment">// // param是可传参参数，可以忽略</span><br><span class="hljs-comment">// client.regAction(&quot;ShiGuang&quot;, function (resolve, param) &#123;</span><br><span class="hljs-comment">//     t = Date.parse(new Date());</span><br><span class="hljs-comment">//     var list = &#123;</span><br><span class="hljs-comment">//         &quot;page&quot;: String(param),</span><br><span class="hljs-comment">//         &quot;sign&quot;: window.sign(String(param) + &#x27;|&#x27; + t.toString()),</span><br><span class="hljs-comment">//         &quot;t&quot;: t,</span><br><span class="hljs-comment">//     &#125;</span><br><span class="hljs-comment">//     resolve(list)</span><br><span class="hljs-comment">// &#125;)</span><br><br><br><span class="hljs-keyword">let</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hlclient</span>(<span class="hljs-string">&quot;ws://127.0.0.1:12080/ws?group=shopee&amp;name=details&quot;</span>);<br><span class="hljs-comment">// // 第二个参数为函数，resolve里面的值是想要的值(发送到服务器的)</span><br><span class="hljs-comment">// param是可传参参数，可以忽略</span><br>client.<span class="hljs-title function_">regAction</span>(<span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">resolve, param</span>) &#123;<br>    <span class="hljs-keyword">let</span> url = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(param)[<span class="hljs-string">&#x27;url&#x27;</span>]<br>    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">fetch</span>(url, &#123;<br>        <span class="hljs-string">&quot;headers&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;User-Agent&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:107.0) Gecko/20100101 Firefox/107.0&quot;</span>,<br>            <span class="hljs-string">&quot;Accept&quot;</span>: <span class="hljs-string">&quot;application/json&quot;</span>,<br>            <span class="hljs-string">&quot;af-ac-enc-dat&quot;</span>: <span class="hljs-string">&quot;a&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;method&quot;</span>: <span class="hljs-string">&quot;GET&quot;</span><br>    &#125;)<br>        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-title function_">json</span>())<br>        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);<br>            <span class="hljs-title function_">resolve</span>(res)<br><br>        &#125;);<br>&#125;)<br><br><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>kitty Mac上常用快捷键和配置</title>
    <link href="/2024/10/14/kitty%20Mac%E4%B8%8A%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%92%8C%E9%85%8D%E7%BD%AE/"/>
    <url>/2024/10/14/kitty%20Mac%E4%B8%8A%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%92%8C%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>命令行</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">brew </span><span class="hljs-keyword">install </span>kitty<br></code></pre></td></tr></table></figure><p>kitty 的默认配置路径是<code>$HOME/.config/kitty/kitty.conf</code></p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>菜单栏上的按键很少，使用快捷键操作才是kitty的精髓</p><p><img src="https://s2.loli.net/2022/11/01/j49ykJGXweRhZqv.png" alt="image-20221101130733913"></p><p><img src="https://s2.loli.net/2022/11/01/t9gPiA53RWsDhJN.png" alt="image-20221101132218361"></p><p><img src="https://s2.loli.net/2022/11/01/SiJtcaXD1WF8gzN.png" alt="image-20221101132333228"></p><h2 id="kitty-配置"><a href="#kitty-配置" class="headerlink" title="kitty 配置"></a>kitty 配置</h2><p><a href="https://sw.kovidgoyal.net/kitty/conf/">配置官网</a></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">copy_on_select</span> <span class="hljs-literal">yes</span><br>tab_bar_edge top <span class="hljs-comment"># 状态栏在上面</span><br>macos_option_as_alt <span class="hljs-literal">yes</span>  mac os 上使用option 代替 alt<br>font_family font-hack-nerd-font<br><br><br></code></pre></td></tr></table></figure><h2 id="我的kitty-配置"><a href="#我的kitty-配置" class="headerlink" title="我的kitty 配置"></a>我的kitty 配置</h2><p> <a href="https://github.com/KingJem/dotfiles/blob/master/tmux/tmux.conf.local">github 地址</a></p><h2 id="文章参考"><a href="#文章参考" class="headerlink" title="文章参考"></a>文章参考</h2><p><a href="https://jdhao.github.io/2020/05/05/kitty_config_mac/">https://jdhao.github.io/2020/05/05/kitty_config_mac/</a></p><p><a href="https://www.escapelife.site/posts/8e342b57.html">https://www.escapelife.site/posts/8e342b57.html</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>kitty</tag>
      
      <tag>终端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>kitty Mac上常用快捷键和配置</title>
    <link href="/2024/10/14/kitty-md/"/>
    <url>/2024/10/14/kitty-md/</url>
    
    <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>命令行</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">brew </span><span class="hljs-keyword">install </span>kitty<br></code></pre></td></tr></table></figure><p>kitty 的默认配置路径是<code>$HOME/.config/kitty/kitty.conf</code></p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>菜单栏上的按键很少，使用快捷键操作才是kitty的精髓</p><p><img src="https://s2.loli.net/2022/11/01/j49ykJGXweRhZqv.png" alt="image-20221101130733913"></p><p><img src="https://s2.loli.net/2022/11/01/t9gPiA53RWsDhJN.png" alt="image-20221101132218361"></p><p><img src="https://s2.loli.net/2022/11/01/SiJtcaXD1WF8gzN.png" alt="image-20221101132333228"></p><h2 id="kitty自定义配置"><a href="#kitty自定义配置" class="headerlink" title="kitty自定义配置"></a>kitty自定义配置</h2><p><a href="https://sw.kovidgoyal.net/kitty/conf/">配置官网</a></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">copy_on_select</span> <span class="hljs-literal">yes</span><br>tab_bar_edge top <span class="hljs-comment"># 状态栏在上面</span><br>macos_option_as_alt <span class="hljs-literal">yes</span>  <span class="hljs-comment">#mac os 上使用option 代替 alt</span><br>font_family font-hack-nerd-font<br><br><br></code></pre></td></tr></table></figure><h2 id="文章参考"><a href="#文章参考" class="headerlink" title="文章参考"></a>文章参考</h2><p><a href="https://jdhao.github.io/2020/05/05/kitty_config_mac/">https://jdhao.github.io/2020/05/05/kitty_config_mac/</a></p><p><a href="https://www.escapelife.site/posts/8e342b57.html">https://www.escapelife.site/posts/8e342b57.html</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>kitty</tag>
      
      <tag>终端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>lxml解析html的不同实例化类的比较</title>
    <link href="/2024/10/14/lxml%E8%A7%A3%E6%9E%90html%E7%9A%84%E4%B8%8D%E5%90%8C%E5%AE%9E%E4%BE%8B%E5%8C%96%E7%B1%BB%E7%9A%84%E6%AF%94%E8%BE%83/"/>
    <url>/2024/10/14/lxml%E8%A7%A3%E6%9E%90html%E7%9A%84%E4%B8%8D%E5%90%8C%E5%AE%9E%E4%BE%8B%E5%8C%96%E7%B1%BB%E7%9A%84%E6%AF%94%E8%BE%83/</url>
    
    <content type="html"><![CDATA[<h2 id="lxml-etree-Element-对象"><a href="#lxml-etree-Element-对象" class="headerlink" title="lxml.etree._Element 对象"></a>lxml.etree._Element 对象</h2><figure class="highlight ipython"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs ipython"><span class="hljs-keyword">from</span> lxml <span class="hljs-keyword">import</span> etree<br><br><br>string = <span class="hljs-string">&#x27;&lt;div class=&quot;post&quot; id=&quot;123&quot;&gt;&lt;p class=&quot;para&quot;&gt;abc&lt;a href=&quot;/to-go&quot;&gt;link&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&#x27;</span><br>doc = etree.HTML(string)<br><br><br><br><span class="hljs-comment"># 查看方法</span><br><span class="hljs-built_in">print</span>([i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">dir</span>(doc) <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> i.startswith(<span class="hljs-string">&#x27;_&#x27;</span>)])<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(doc))<br><br><br><span class="hljs-comment"># [&#x27;addnext&#x27;, &#x27;addprevious&#x27;, &#x27;append&#x27;, &#x27;attrib&#x27;, &#x27;base&#x27;, &#x27;clear&#x27;, &#x27;cssselect&#x27;, &#x27;extend&#x27;, &#x27;find&#x27;, &#x27;findall&#x27;, &#x27;findtext&#x27;, &#x27;get&#x27;, #&#x27;getchildren&#x27;, &#x27;getiterator&#x27;, &#x27;getnext&#x27;, &#x27;getparent&#x27;, &#x27;getprevious&#x27;, &#x27;getroottree&#x27;, &#x27;index&#x27;, &#x27;insert&#x27;, &#x27;items&#x27;, &#x27;iter&#x27;, #&#x27;iterancestors&#x27;, &#x27;iterchildren&#x27;, &#x27;iterdescendants&#x27;, &#x27;iterfind&#x27;, &#x27;itersiblings&#x27;, &#x27;itertext&#x27;, &#x27;keys&#x27;, &#x27;makeelement&#x27;, &#x27;nsmap&#x27;, #&#x27;prefix&#x27;, &#x27;remove&#x27;, &#x27;replace&#x27;, &#x27;set&#x27;, &#x27;sourceline&#x27;, &#x27;tag&#x27;, &#x27;tail&#x27;, &#x27;text&#x27;, &#x27;values&#x27;, &#x27;xpath&#x27;]</span><br><br><br><span class="hljs-comment"># &lt;class &#x27;lxml.etree._Element&#x27;&gt;</span><br></code></pre></td></tr></table></figure><p><code>lxml.etree._Element</code> 的文档地址在这里   <a href="https://lxml.de/api/lxml.etree._Element-class.html">lxml.etree._Element 文档</a> </p><h2 id="lxml-html-HtmlElement-对象"><a href="#lxml-html-HtmlElement-对象" class="headerlink" title="lxml.html.HtmlElement 对象"></a>lxml.html.HtmlElement 对象</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> lxml <span class="hljs-keyword">import</span> html<br>string = <span class="hljs-string">&#x27;&lt;div class=&quot;post&quot; id=&quot;123&quot;&gt;&lt;p class=&quot;para&quot;&gt;abc&lt;a href=&quot;/to-go&quot;&gt;link&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&#x27;</span><br>doc = html.fromstring(string)<br><br><span class="hljs-built_in">print</span>([i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">dir</span>(doc) <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> i.startswith(<span class="hljs-string">&#x27;_&#x27;</span>)] )<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(doc))<br><span class="hljs-comment">#[&#x27;addnext&#x27;, &#x27;addprevious&#x27;, &#x27;append&#x27;, &#x27;attrib&#x27;, &#x27;base&#x27;, &#x27;base_url&#x27;, &#x27;body&#x27;, &#x27;classes&#x27;, &#x27;clear&#x27;, &#x27;cssselect&#x27;, &#x27;drop_tag&#x27;, &#x27;drop_tree&#x27;, #&#x27;extend&#x27;, &#x27;find&#x27;, &#x27;find_class&#x27;, &#x27;find_rel_links&#x27;, &#x27;findall&#x27;, &#x27;findtext&#x27;, &#x27;forms&#x27;, &#x27;get&#x27;, &#x27;get_element_by_id&#x27;, &#x27;getchildren&#x27;, #&#x27;getiterator&#x27;, &#x27;getnext&#x27;, &#x27;getparent&#x27;, &#x27;getprevious&#x27;, &#x27;getroottree&#x27;, &#x27;head&#x27;, &#x27;index&#x27;, &#x27;insert&#x27;, &#x27;items&#x27;, &#x27;iter&#x27;, &#x27;iterancestors&#x27;, #&#x27;iterchildren&#x27;, &#x27;iterdescendants&#x27;, &#x27;iterfind&#x27;, &#x27;iterlinks&#x27;, &#x27;itersiblings&#x27;, &#x27;itertext&#x27;, &#x27;keys&#x27;, &#x27;label&#x27;, &#x27;make_links_absolute&#x27;, #&#x27;makeelement&#x27;, &#x27;nsmap&#x27;, &#x27;prefix&#x27;, &#x27;remove&#x27;, &#x27;replace&#x27;, &#x27;resolve_base_href&#x27;, &#x27;rewrite_links&#x27;, &#x27;set&#x27;, &#x27;sourceline&#x27;, &#x27;tag&#x27;, &#x27;tail&#x27;, #&#x27;text&#x27;, &#x27;text_content&#x27;, &#x27;values&#x27;, &#x27;xpath&#x27;]</span><br><br><span class="hljs-comment">#&lt;class &#x27;lxml.html.HtmlElement&#x27;&gt;</span><br></code></pre></td></tr></table></figure><h2 id="lxml-etree-ElementTree"><a href="#lxml-etree-ElementTree" class="headerlink" title="lxml.etree._ElementTree"></a>lxml.etree._ElementTree</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> io <span class="hljs-keyword">import</span> BytesIO<br><span class="hljs-keyword">from</span> lxml <span class="hljs-keyword">import</span> etree<br><br>string = <span class="hljs-string">&quot;&quot;&quot;&lt;div class=&quot;post&quot; id=&quot;123&quot;&gt;&lt;p class=&quot;para&quot;&gt;abc&lt;a href=&quot;/to-go&quot;&gt;link&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&#x27;&quot;&quot;&quot;</span><br>bytes_string = <span class="hljs-built_in">bytes</span>(string,<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><br>html2 = etree.parse(BytesIO(bytes_string),etree.HTMLParser()) <br><br><br><span class="hljs-built_in">print</span>([i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">dir</span>(html2) <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> i.startswith(<span class="hljs-string">&#x27;_&#x27;</span>)]  )<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(html2))<br><span class="hljs-comment"># [&#x27;docinfo&#x27;, &#x27;find&#x27;, &#x27;findall&#x27;, &#x27;findtext&#x27;, &#x27;getelementpath&#x27;, &#x27;getiterator&#x27;, &#x27;getpath&#x27;, &#x27;getroot&#x27;, &#x27;iter&#x27;, &#x27;iterfind&#x27;, &#x27;parse&#x27;, #&#x27;parser&#x27;, &#x27;relaxng&#x27;, &#x27;write&#x27;, &#x27;write_c14n&#x27;, &#x27;xinclude&#x27;, &#x27;xmlschema&#x27;, &#x27;xpath&#x27;, &#x27;xslt&#x27;]</span><br><br><span class="hljs-comment">#&lt;class &#x27;lxml.etree._ElementTree&#x27;&gt;</span><br><br></code></pre></td></tr></table></figure><h2 id="遍历所有元素的元素绝对Xpath定位"><a href="#遍历所有元素的元素绝对Xpath定位" class="headerlink" title="遍历所有元素的元素绝对Xpath定位"></a>遍历所有元素的元素绝对Xpath定位</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> lxml <span class="hljs-keyword">import</span> html<br><span class="hljs-keyword">import</span> lxml <br><br>string = <span class="hljs-string">&#x27;&lt;div class=&quot;post&quot; id=&quot;123&quot;&gt;&lt;p class=&quot;para&quot;&gt;abc&lt;a href=&quot;/to-go&quot;&gt;link&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;&#x27;</span><br>doc = html.fromstring(string)<br>alist = doc.xpath(<span class="hljs-string">&quot;//a&quot;</span>)<br><span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> alist:<br>    tree = lxml.etree.ElementTree(a)<br>    <span class="hljs-built_in">print</span>(tree.getpath(a))<br><br></code></pre></td></tr></table></figure><h2 id="比较结论"><a href="#比较结论" class="headerlink" title="比较结论"></a>比较结论</h2><p><code>lxml.html.HtmlElement</code>是 <code>lxml.etree._Element</code> 的子类，又继承了HtmlMinin 类，是对<code>lxml.etree._Element</code> 的补充</p><p><code>lxml.etree._Element</code> 和 <code>lxml.html.HtmlElement</code> 的关系在官方文档 <a href="https://lxml.de/api/lxml.html.HtmlElement-class.html">地址</a></p><p>其中的继承图如下</p><p><img src="https://s2.loli.net/2022/11/25/XxPujEc935dekR7.png" alt="image-20221125161605643"></p><p>简书上有篇文章可以参考讲解的是 <code> lxml.html.HtmlElement</code> 的用法 <a href="https://www.jianshu.com/p/9b2139da371d/">传送门</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>爬虫</tag>
      
      <tag>解析</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mac开发环境配置</title>
    <link href="/2024/10/14/mac%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    <url>/2024/10/14/mac%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="Dotfile-管理"><a href="#Dotfile-管理" class="headerlink" title="Dotfile 管理"></a>Dotfile 管理</h2><p>.zshrc 文件是Oh My ZSH默认配置文件，其中会引用.zshrc.pre-oh-my-zsh</p><p>.zshrc.pre-oh-my-zsh 文件是安装Oh My ZSH 时自动把你的 ~/.zshrc 备份成这个名字</p><p><a href="https://github.com/anishathalye/dotbot">botdot 管理配置文件</a></p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">pip install dotbot<br><br>dotbot -c &lt;<span class="hljs-type">path</span> <span class="hljs-keyword">to</span> <span class="hljs-keyword">configuration</span> file&gt;<br></code></pre></td></tr></table></figure><h2 id="使用zplug-插件管理"><a href="#使用zplug-插件管理" class="headerlink" title="使用zplug 插件管理"></a>使用zplug 插件管理</h2><p> 安装 zplug</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;<br></code></pre></td></tr></table></figure><p>zshrc 配置 环境变量和alias 是单独配置的。 </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs zshrc"># zsh 插件加载<br>export ZPLUG_HOME=/opt/homebrew/opt/zplug<br>source $ZPLUG_HOME/init.zsh<br><br># === History config ===<br>HISTSIZE=10000<br>SAVEHIST=10000<br>HISTFILE=~/.zsh_history<br>setopt append_history<br>setopt share_history<br>setopt long_list_jobs<br>setopt hist_expire_dups_first<br>setopt hist_ignore_dups<br>setopt hist_ignore_all_dups<br>setopt hist_ignore_space<br>setopt hist_find_no_dups<br>setopt hist_reduce_blanks<br>setopt hist_verify<br>setopt hist_no_store<br>setopt interactivecomments<br>zstyle &#x27;:completion:*&#x27; rehash true<br><br><br><br># &gt; === zplug 插件安装 ===<br>zplug &#x27;zplug/zplug&#x27;, hook-build:&#x27;zplug --self-manage&#x27;<br>zplug &quot;plugins/git&quot;,   from:oh-my-zsh<br>zplug &quot;plugins/tmux&quot;,   from:oh-my-zsh<br>zplug &quot;plugins/safe-paste&quot;,   from:oh-my-zsh<br>zplug &quot;plugins/last-working-dir&quot;,   from:oh-my-zsh<br>zplug &quot;plugins/macos&quot;,   from:oh-my-zsh<br>zplug &quot;plugins/vscode&quot;,   from:oh-my-zsh<br>zplug &quot;plugins/z&quot;,   from:oh-my-zsh<br>zplug &quot;plugins/d&quot;,   from:oh-my-zsh<br>zplug &quot;plugins/extract&quot;,   from:oh-my-zsh<br>zplug &quot;plugins/git-open&quot;,   from:oh-my-zsh<br>zplug &quot;plugins/sudo&quot;,   from:oh-my-zsh<br>zplug &quot;plugins/cp&quot;,   from:oh-my-zsh<br>zplug &quot;plugins/web-search&quot;,   from:oh-my-zsh<br>zplug &quot;plugins/rand-quote&quot;, from:oh-my-zsh<br>zplug &quot;plugins/history-substring-search&quot;,  from:oh-my-zsh<br>zplug &quot;plugins/command-not-found&quot;,   from:oh-my-zsh<br>zplug &quot;zsh-users/zsh-syntax-highlighting&quot;<br>zplug &quot;zsh-users/zsh-autosuggestions&quot;<br>zplug &quot;voronkovich/gitignore.plugin.zsh&quot;<br>zplug &quot;zsh-users/zsh-history-substring-search&quot;<br>zplug &quot;lib/completion&quot;, from:oh-my-zsh<br>zplug &quot;plugins/man&quot;, from:oh-my-zsh<br>zplug &quot;plugins/colored-man-pages&quot;, from:oh-my-zsh<br>#zplug &quot;junegunn/fzf&quot;<br>#zplug &quot;junegunn/fzf-bin&quot;, \<br>#    from:gh-r, \<br>#    as:command, \<br>#    rename-to:fzf, \<br>#    use:&quot;*linux*amd64*&quot;<br>source $ZPLUG_HOME/repos/junegunn/fzf/shell/completion.zsh<br>source $ZPLUG_HOME/repos/junegunn/fzf/shell/key-bindings.zsh<br><br><br># &gt; zplug 安装检查<br>if ! zplug check --verbose; then<br>    printf &quot;Install? [y/N]: &quot;<br>    if read -q; then<br>        echo; zplug install<br>    fi<br>fi<br><br># &gt; zplug 安装<br>zplug load<br><br><br>[ -f ~/.fzf.zsh ] &amp;&amp; source ~/.fzf.zsh<br><br></code></pre></td></tr></table></figure><ul><li>powerlevel10k： 我使用的主题 </li><li>git: 提供很多 git 的快捷操作  安装之后是一系列alias 可以使用 alias |grep git 查看相关的aias  gaa gcmsg gpr gp gl 是我比较常用的</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">gaa = git add --all<br>gcmsg = git commit -m<br>ga = git add<br>gst = git status<br>gp = git push<br><br></code></pre></td></tr></table></figure><ul><li><p>macos: 在终端控制你的mac，如 spotify 切歌 </p></li><li><p>extract: 解压工具  </p><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm"><span class="hljs-keyword">x</span> filename.tar.gz<br></code></pre></td></tr></table></figure></li><li><p>git-open: </p></li><li><p>sudo: 摁两次esc，在命令前加 sudo </p></li><li><p>cp: 安全复制 使用 cpv 命令</p></li><li><p>web-search: 在终端中 google 或其他搜索引擎 </p></li><li><p>rand-quote: 随机一句quote，可以放在 zsh 加载的最后一行</p></li><li><p>history-substring-search: 查找匹配前缀的历史输入 </p></li><li><p>command-not-found</p></li><li><p>zsh-syntax-highlighting: zsh 高亮 </p></li><li><p>zsh-autosuggestions: 自动提示输入内容 </p></li><li><p>gitignore: 快速添加 <code>.gitignore</code></p></li></ul> <figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">gi python &gt; <span class="hljs-string">.gitignore</span>  <span class="hljs-comment"># 快速生成python 的忽略文件</span><br></code></pre></td></tr></table></figure><p>​    </p><ul><li><p>tmux  tmux 的alias   tl  ta ts    具体通过alias|grep tmux 查看</p></li><li><p> vi-mode 终端下使用vi </p></li></ul><table><thead><tr><th>插件名称</th><th>触发方式</th><th align="left">命令使用</th><th>插件作用</th></tr></thead><tbody><tr><td>zsh-autosuggestions</td><td>手动</td><td align="left">tab 补全</td><td>命令提示</td></tr><tr><td>autojump[已舍弃] 改用 zsh z</td><td>手动</td><td align="left">j [aid] dirname</td><td>快捷跳转目录</td></tr><tr><td>incr</td><td>自动</td><td align="left">无</td><td>命令提示</td></tr><tr><td>zsh-syntax-highlighting</td><td>自动</td><td align="left">无</td><td>Zsh语法高亮</td></tr><tr><td>safe-paste</td><td>自动</td><td align="left">无</td><td>粘贴命令不自动执行</td></tr><tr><td>last-working-dir</td><td>自动</td><td align="left">无</td><td>自动跳转到上次退出的目录</td></tr><tr><td>extarct</td><td>手动</td><td align="left">extract file.ext 或 x file.ext</td><td>tar, gz, zip, rar 等等一键解压缩</td></tr><tr><td>git</td><td>手动</td><td align="left">alias |grep git</td><td>git 的快捷命令 比如 gaa == git add all</td></tr></tbody></table><h2 id="终端工具"><a href="#终端工具" class="headerlink" title="终端工具"></a>终端工具</h2><ul><li><p>fzf  模糊搜索</p></li><li><p>bat  更美观的内容查看</p></li><li><p>fd   替换find </p></li><li><p>lazygit  命令行图形化的界面  不常用的 还是git 缩写用的多</p></li><li><p>ag  强化版的grep </p></li><li><p>tree以树形查看文件</p></li><li><p>pstree  树型查看进程</p></li><li><p>以树形查看brew 安装的软件及其依赖 <code>brew deps --include-build --tree $(brew leaves)</code></p></li><li><p>删除软件及其依赖rmtree </p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">brew tap beeftornado/rmtree #添加源<br>brew install brew-rmtree # 安装<br>brew rmtree maven # 卸载maven 及其依赖<br><br></code></pre></td></tr></table></figure><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://guojing.io/posts/zplug/">https://guojing.io/posts/zplug/</a></p><p><a href="https://macosdoc.googo.cc/enivironment/zhong-jian-kai-fa-huan-jing">https://macosdoc.googo.cc/enivironment/zhong-jian-kai-fa-huan-jing</a></p><p><a href="https://zbttl-github-io.vercel.app/huan-yong-zplug/">https://zbttl-github-io.vercel.app/huan-yong-zplug/</a></p><p><a href="https://github.com/wklken/config">https://github.com/wklken/config</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>终端</tag>
      
      <tag>shell</tag>
      
      <tag>ohmyzsh</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>mmdb 数据库</title>
    <link href="/2024/10/14/mmdb%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    <url>/2024/10/14/mmdb%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<p>mmdb 数据就是后缀名为.mmdb 的文件，它是MMDB（MaxMind DB）为MaxMind公司开发的一种轻量级的用于查询IP地址信息的格式和数据库文件。</p><p>MMDB数据库的设计只是简单的键值对，具有非常好的性能和扩展性。相比较传统的文本形式的IP数据库，MMDB更加适用于大型的数据查询。</p><p>因为MMDB数据库具备对IP地址的查询功能，所以在实际应用中，MMDB被广泛用于IP定位，可以帮助进行IP地址的精确定位。因此，MMDB在电商、金融、互联网广告等领域有广泛的应用。</p><p>MaxMind公司的<code>GeoIP2</code>和<code>GeoLite2</code> 是被广泛使用的IP 定位产品</p><p>MaxMind官网上有<a href="https://dev.maxmind.com/geoip/geolocate-an-ip/databases?lang=en">API 查询接口</a> 的详细示例，</p><p>这里提供另一个库的用法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span>  maxminddb<br><br>path = <span class="hljs-string">&#x27;/Users/king/Downloads/Country.mmdb&#x27;</span><br><br><span class="hljs-keyword">with</span> maxminddb.open_database(path) <span class="hljs-keyword">as</span> reader:<br>    <span class="hljs-built_in">print</span>(reader.get(<span class="hljs-string">&#x27;1.4.8.45&#x27;</span>))<br>    <span class="hljs-built_in">print</span>(reader.metadata())<br></code></pre></td></tr></table></figure><p>其他IP数据库的使用参考<a href="https://www.cnblogs.com/zccoming/p/13338493.html">这篇文章</a></p><p>（下载地址： <a href="https://sekiro.virjar.com/sekiro-doc/assets/sekiro_web_client.js%EF%BC%89">https://sekiro.virjar.com/sekiro-doc/assets/sekiro_web_client.js）</a> 注入到浏览器环境，然后通过 SekiroClient 和 Sekiro 服务器</p><h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h2><p><a href="https://support.maxmind.com/hc/en-us/articles/4408216157723-Database-Formats">maxmind 产品文档</a></p><p><a href="https://github.com/Hackl0us/GeoIP2-CN">GeoIP2-CN</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>mmdb</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python 使用链式代理</title>
    <link href="/2024/10/14/python%20%E9%93%BE%E5%BC%8F%E4%BB%A3%E7%90%86%E4%BD%BF%E7%94%A8/"/>
    <url>/2024/10/14/python%20%E9%93%BE%E5%BC%8F%E4%BB%A3%E7%90%86%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><br><span class="hljs-keyword">import</span> socket<br><span class="hljs-keyword">import</span> pyChainedProxy <span class="hljs-keyword">as</span> socks <span class="hljs-comment">#import pyChainedProxy</span><br><span class="hljs-keyword">import</span> requests<br><span class="hljs-comment"># Enable debugging</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">DEBUG</span>(<span class="hljs-params">msg</span>):<br>  <span class="hljs-built_in">print</span> (msg)<br><br>socks.DEBUG = DEBUG<br><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Check IP w/o proxyfying:  &quot;</span>,requests.get(<span class="hljs-string">&#x27;http://ip-api.com/json&#x27;</span>).content)<br><br><span class="hljs-comment"># Configure a default chain</span><br>chain = [<br>  <span class="hljs-string">&#x27;socks5://localhost:7890/&#x27;</span>, <br>  <span class="hljs-string">&#x27;http://testmidu-zone-adam:testmidu@43.153.102.235:6004&#x27;</span><br><br>]<br>socks.setdefaultproxy()<br><br><span class="hljs-keyword">for</span> hop <span class="hljs-keyword">in</span> chain:<br>   socks.adddefaultproxy(*socks.parseproxy(hop))<br><br><span class="hljs-comment"># Configure alternate routes (No proxy for localhost)</span><br>socks.setproxy(<span class="hljs-string">&#x27;localhost&#x27;</span>, socks.PROXY_TYPE_NONE)<br>socks.setproxy(<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>, socks.PROXY_TYPE_NONE)<br><br><br><span class="hljs-comment"># Monkey Patching whole socket class (everything will be proxified)</span><br>rawsocket = socket.socket<br>socket.socket = socks.socksocket<br><span class="hljs-comment"># Everything will be proxied!</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Check IP After proxyfying:  &quot;</span>,requests.get(<span class="hljs-string">&#x27;http://ip-api.com/json&#x27;</span>).content)<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>代理</tag>
      
      <tag>链式代理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python-logging配置</title>
    <link href="/2024/10/14/pythonlogging%E9%85%8D%E7%BD%AE/"/>
    <url>/2024/10/14/pythonlogging%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p><a href="https://docs.python.org/zh-cn/3.10/howto/logging-cookbook.html">logging-cookbook</a></p><p><a href="https://docs.python.org/zh-cn/3.10/library/logging.html?highlight=basicconfig#logger-objects">python 文档-logging 模块</a></p><h2 id="logging-的基础"><a href="#logging-的基础" class="headerlink" title="logging 的基础"></a>logging 的基础</h2><p>Python 标准库 logging 用作记录日志。</p><p>logging 的基础使用 </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><br>logging.debug(<span class="hljs-string">&quot;A quirky message only developers care about&quot;</span>)<br>logging.info(<span class="hljs-string">&quot;Curious users might want to know this&quot;</span>)<br>logging.warning(<span class="hljs-string">&quot;Something is wrong and any user should be informed&quot;</span>)<br>logging.error(<span class="hljs-string">&quot;Serious stuff, this is red for a reason&quot;</span>)<br>logging.critical(<span class="hljs-string">&quot;OH NO everything is on fire&quot;</span>)<br><br><span class="hljs-comment">#输出结果</span><br>WARNING:root:Something <span class="hljs-keyword">is</span> wrong <span class="hljs-keyword">and</span> <span class="hljs-built_in">any</span> user should be informed<br>ERROR:root:Serious stuff, this <span class="hljs-keyword">is</span> red <span class="hljs-keyword">for</span> a reason<br>CRITICAL:root:OH NO everything <span class="hljs-keyword">is</span> on fire<br></code></pre></td></tr></table></figure><p> 如果没有特殊配置 logging 有默认配置，日志级别为 warning ,<code>root</code> 为根记录器 </p><h3 id="logging-的日志级别"><a href="#logging-的日志级别" class="headerlink" title="logging 的日志级别"></a>logging 的日志级别</h3><p>默认分为六种日志级别（括号为级别对应的数值），NOTSET（0）、DEBUG（10）、INFO（20）、WARNING（30）、ERROR（40）、CRITICAL（50）。我们自定义日志级别时注意不要和默认的日志级别数值相同，logging 执行时输出大于等于设置的日志级别的日志信息，如设置日志级别是 INFO，则 INFO、WARNING、ERROR、CRITICAL 级别的日志都会输出。</p><p><img src="https://s2.loli.net/2023/02/09/M57HNfkoIJcmDGA.png" alt="image-20230209111133743"></p><p>可以通过<code>logging.DEBUG</code> 等等查看，在命名习惯上这个值为常量</p><p>默认级别为30，loggg.info 的级别为20， 只有当每条日志的日志级别大于等于全局的才会输出</p><p>​      </p><h2 id="python-logging-配置"><a href="#python-logging-配置" class="headerlink" title="python logging 配置"></a>python logging 配置</h2><h3 id="使用basicconfig-配置"><a href="#使用basicconfig-配置" class="headerlink" title="使用basicconfig 配置"></a>使用basicconfig 配置</h3><p><code>logging.``basicConfig</code>(**<em>kwargs</em>)<a href="https://docs.python.org/zh-cn/3.10/library/logging.html?highlight=basicconfig#logging.basicConfig">¶</a></p><p>通过使用默认的 <a href="https://docs.python.org/zh-cn/3.10/library/logging.html?highlight=basicconfig#logging.Formatter"><code>Formatter</code></a> 创建一个 <a href="https://docs.python.org/zh-cn/3.10/library/logging.handlers.html#logging.StreamHandler"><code>StreamHandler</code></a> 并将其加入根日志记录器来为日志记录系统执行基本配置。 如果没有为根日志记录器定义处理器则 <a href="https://docs.python.org/zh-cn/3.10/library/logging.html?highlight=basicconfig#logging.debug"><code>debug()</code></a>, <a href="https://docs.python.org/zh-cn/3.10/library/logging.html?highlight=basicconfig#logging.info"><code>info()</code></a>, <a href="https://docs.python.org/zh-cn/3.10/library/logging.html?highlight=basicconfig#logging.warning"><code>warning()</code></a>, <a href="https://docs.python.org/zh-cn/3.10/library/logging.html?highlight=basicconfig#logging.error"><code>error()</code></a> 和 <a href="https://docs.python.org/zh-cn/3.10/library/logging.html?highlight=basicconfig#logging.critical"><code>critical()</code></a> 等函数将自动调用 <a href="https://docs.python.org/zh-cn/3.10/library/logging.html?highlight=basicconfig#logging.basicConfig"><code>basicConfig()</code></a>。</p><p>如果根日志记录器已配置了处理器则此函数将不执行任何操作，除非关键字参数 <em>force</em> 被设为 <code>True</code>。</p><p>支持以下关键字参数。</p><table><thead><tr><th align="left">格式</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><em>filename</em></td><td align="left">使用指定的文件名创建一个 <a href="https://docs.python.org/zh-cn/3.10/library/logging.handlers.html#logging.FileHandler"><code>FileHandler</code></a>，而不是 <a href="https://docs.python.org/zh-cn/3.10/library/logging.handlers.html#logging.StreamHandler"><code>StreamHandler</code></a>。</td></tr><tr><td align="left"><em>filemode</em></td><td align="left">如果指定了 <em>filename</em>，则用此 <a href="https://docs.python.org/zh-cn/3.10/library/functions.html#filemodes">模式</a> 打开该文件。 默认模式为 <code>&#39;a&#39;</code>。</td></tr><tr><td align="left"><em>format</em></td><td align="left">使用指定的格式字符串作为处理器。 默认为属性以冒号分隔的 <code>levelname</code>, <code>name</code> 和 <code>message</code>。</td></tr><tr><td align="left"><em>datefmt</em></td><td align="left">使用指定的日期/时间格式，与 <a href="https://docs.python.org/zh-cn/3.10/library/time.html#time.strftime"><code>time.strftime()</code></a> 所接受的格式相同。</td></tr><tr><td align="left"><em>style</em></td><td align="left">如果指定了 <em>format</em>，将为格式字符串使用此风格。 <code>&#39;%&#39;</code>, <code>&#39;&#123;&#39;</code> 或 <code>&#39;$&#39;</code> 分别对应于 <a href="https://docs.python.org/zh-cn/3.10/library/stdtypes.html#old-string-formatting">printf 风格</a>, <a href="https://docs.python.org/zh-cn/3.10/library/stdtypes.html#str.format"><code>str.format()</code></a> 或 <a href="https://docs.python.org/zh-cn/3.10/library/string.html#string.Template"><code>string.Template</code></a>。 默认为 <code>&#39;%&#39;</code>。</td></tr><tr><td align="left"><em>level</em></td><td align="left">设置根记录器级别为指定的 <a href="https://docs.python.org/zh-cn/3.10/library/logging.html?highlight=basicconfig#levels">level</a>.</td></tr><tr><td align="left"><em>stream</em></td><td align="left">使用指定的流初始化 <a href="https://docs.python.org/zh-cn/3.10/library/logging.handlers.html#logging.StreamHandler"><code>StreamHandler</code></a>。 请注意此参数与 <em>filename</em> 不兼容 —— 如果两者同时存在，则会引发 <code>ValueError</code>。</td></tr><tr><td align="left"><em>handlers</em></td><td align="left">如果指定，这应为一个包含要加入根日志记录器的已创建处理器的可迭代对象。 任何尚未设置格式描述符的处理器将被设置为在此函数中创建的默认格式描述符。 请注意此参数与 <em>filename</em> 或 <em>stream</em> 不兼容 —— 如果两者同时存在，则会引发 <code>ValueError</code>。</td></tr><tr><td align="left"><em>force</em></td><td align="left">如果将此关键字参数指定为 true，则在执行其他参数指定的配置之前，将移除并关闭附加到根记录器的所有现有处理器。</td></tr><tr><td align="left"><em>encoding</em></td><td align="left">如果此关键字参数与 <em>filename</em> 一同被指定，则其值会在创建 <a href="https://docs.python.org/zh-cn/3.10/library/logging.handlers.html#logging.FileHandler"><code>FileHandler</code></a> 时被使用，因而也会在打开输出文件时被使用。</td></tr><tr><td align="left"><em>errors</em></td><td align="left">如果此关键字参数与 <em>filename</em> 一同被指定，则其值会在创建 <a href="https://docs.python.org/zh-cn/3.10/library/logging.handlers.html#logging.FileHandler"><code>FileHandler</code></a> 时被使用，因而也会在打开输出文件时被使用。 如果未指定，则会使用值 ‘backslashreplace’。 请注意如果指定为 <code>None</code>，它将被原样传给 <a href="https://docs.python.org/zh-cn/3.10/library/functions.html#open"><code>open()</code></a>，这意味着它将会当作传入 ‘errors’ 一样处理。</td></tr></tbody></table><p>format 的参数修改自 <a href="https://docs.python.org/zh-cn/3/library/logging.html#logrecord-attributes">python 文档</a>，删除了用户不可格式化的属性。</p><table><thead><tr><th align="left">属性名称</th><th align="left">格式</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">asctime</td><td align="left"><code>%(asctime)s</code></td><td align="left">表示人类易读的 <a href="https://docs.python.org/zh-cn/3/library/logging.html#logging.LogRecord"><code>LogRecord</code></a> 生成时间。 默认形式为 ‘2003-07-08 16:49:45,896’ （逗号之后的数字为时间的毫秒部分）。</td></tr><tr><td align="left">created</td><td align="left"><code>%(created)f</code></td><td align="left"><a href="https://docs.python.org/zh-cn/3/library/logging.html#logging.LogRecord"><code>LogRecord</code></a> 被创建的时间（即 <a href="https://docs.python.org/zh-cn/3/library/time.html#time.time"><code>time.time()</code></a> 的返回值）。</td></tr><tr><td align="left">filename</td><td align="left"><code>%(filename)s</code></td><td align="left"><code>pathname</code> 的文件名部分。</td></tr><tr><td align="left">funcName</td><td align="left"><code>%(funcName)s</code></td><td align="left">函数名包括调用日志记录.</td></tr><tr><td align="left">levelname</td><td align="left"><code>%(levelname)s</code></td><td align="left">消息文本记录级别（<code>&#39;DEBUG&#39;</code>，<code>&#39;INFO&#39;</code>，<code>&#39;WARNING&#39;</code>，<code>&#39;ERROR&#39;</code>，<code>&#39;CRITICAL&#39;</code>）。</td></tr><tr><td align="left">levelno</td><td align="left"><code>%(levelno)s</code></td><td align="left">消息数字的记录级别 (<code>DEBUG</code>, <code>INFO</code>, <code>WARNING</code>, <code>ERROR</code>, <code>CRITICAL</code>).</td></tr><tr><td align="left">lineno</td><td align="left"><code>%(lineno)d</code></td><td align="left">发出日志记录调用所在的源行号（如果可用）。</td></tr><tr><td align="left">message</td><td align="left"><code>%(message)s</code></td><td align="left">记入日志的消息，即 <code>msg % args</code> 的结果。 这是在发起调用 <a href="https://docs.python.org/zh-cn/3/library/logging.html#logging.Formatter.format"><code>Formatter.format()</code></a> 时设置的。</td></tr><tr><td align="left">module</td><td align="left"><code>%(module)s</code></td><td align="left">模块 (<code>filename</code> 的名称部分)。</td></tr><tr><td align="left">msecs</td><td align="left"><code>%(msecs)d</code></td><td align="left"><a href="https://docs.python.org/zh-cn/3/library/logging.html#logging.LogRecord"><code>LogRecord</code></a> 被创建的时间的毫秒部分。</td></tr><tr><td align="left">name</td><td align="left"><code>%(name)s</code></td><td align="left">用于记录调用的日志记录器名称。</td></tr><tr><td align="left">pathname</td><td align="left"><code>%(pathname)s</code></td><td align="left">发出日志记录调用的源文件的完整路径名（如果可用）。</td></tr><tr><td align="left">process</td><td align="left"><code>%(process)d</code></td><td align="left">进程ID（如果可用）</td></tr><tr><td align="left">processName</td><td align="left"><code>%(processName)s</code></td><td align="left">进程名（如果可用）</td></tr><tr><td align="left">relativeCreated</td><td align="left"><code>%(relativeCreated)d</code></td><td align="left">以毫秒数表示的 LogRecord 被创建的时间，即相对于 logging 模块被加载时间的差值。</td></tr><tr><td align="left">thread</td><td align="left"><code>%(thread)d</code></td><td align="left">线程ID（如果可用）</td></tr><tr><td align="left">threadName</td><td align="left"><code>%(threadName)s</code></td><td align="left">线程名（如果可用）</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br>LOG_FORMAT = <span class="hljs-string">&quot;%(asctime)s - %(levelname)s - %(message)s&quot;</span><br>logging.basicConfig(filename=<span class="hljs-string">&#x27;my.log&#x27;</span>, level=logging.DEBUG, <span class="hljs-built_in">format</span>=LOG_FORMAT)<br><br>logging.debug(<span class="hljs-string">&quot;A quirky message only developers care about&quot;</span>)<br>logging.info(<span class="hljs-string">&quot;Curious users might want to know this&quot;</span>)<br>logging.warning(<span class="hljs-string">&quot;Something is wrong and any user should be informed&quot;</span>)<br>logging.error(<span class="hljs-string">&quot;Serious stuff, this is red for a reason&quot;</span>)<br>logging.critical(<span class="hljs-string">&quot;OH NO everything is on fire&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="logging-的四大组件"><a href="#logging-的四大组件" class="headerlink" title="logging 的四大组件"></a>logging 的四大组件</h2><p><img src="https://s2.loli.net/2023/02/09/DGSghLlQ5CUxJpu.png" alt="img"></p><h2 id="logging-字典配置"><a href="#logging-字典配置" class="headerlink" title="logging 字典配置"></a>logging 字典配置</h2><p><a href="https://blog.csdn.net/Yohohaha/article/details/77777864">参考</a></p><p><a href="https://docs.python.org/zh-cn/3/library/logging.config.html#configuration-dictionary-schema">配置字典架构</a></p><ul><li>version - 用数字表示的模式版本，当前有效值只能为1，主要是为了后续配置升级后提供兼容性</li><li>formatters - 格式化对象，值还是一个dict，该dict的键为格式化对象的id，值为一个dict，存储了formatter对象的配置内容<ul><li><code>format</code>: None</li><li><code>datefmt</code>: None</li></ul></li><li>filters - 过滤器对象，逻辑同formatters<ul><li><code>name</code>: <code>&#39;&#39;</code></li></ul></li><li>handlers - 逻辑同formatters<ul><li><code>class</code>(必须的)： handler类的全限定名</li><li><code>level</code>(可选的)： handler对象级别</li><li><code>formatter</code>(可选的)：为formatters中定义的formatter对象id</li><li><code>filters</code>(可选的)：为一个filter对象的列表，里面存放filters中定义的filter对象id<br>也可以存入其他的参数，视实际handler对象而定</li></ul></li><li>loggers - 逻辑同formatters，该logger对象的id也是logger name<ul><li><code>level</code>(可选的)：logger对象级别</li><li><code>propagate</code>(可选的)：logger对象的消息传递设置</li><li><code>filters</code>(可选的)：为一个filter对象的列表，里面存放filters中定义的filter对象id</li><li><code>handlers</code>(可选的)：为一个handler对象的列表，里面存放handlers中定义的handler对象id</li></ul></li><li>root - 值为dict，存放root这个logger对象的配置，但是<code>propagate</code>这个值对root没用</li><li>incremental - 该配置文件的配置是否作为已有配置的一个补充，该值默认为<code>False</code>，即覆盖原有配置，如果为<code>True</code>，也不是完全覆盖，因为filter对象和formatter对象是匿名的，无法获取到具体的对象，也就无法修改，但是可以替代logger对象的<code>level</code>和<code>propagate</code>属性，handler对象的<code>level</code>属性</li><li>disable_existing_loggers - 是否禁用已存在的logger对象，默认是<code>True</code>，如果<em>incremental</em>是<code>True</code>的话，该值就会被忽略</li></ul><h2 id="logging-输出颜色的几种方案"><a href="#logging-输出颜色的几种方案" class="headerlink" title="logging 输出颜色的几种方案"></a>logging 输出颜色的几种方案</h2><h3 id="使用颜色控制码输出颜色"><a href="#使用颜色控制码输出颜色" class="headerlink" title="使用颜色控制码输出颜色"></a>使用颜色控制码输出颜色</h3><p>先看以下代码及其运行效果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">from</span> logging <span class="hljs-keyword">import</span> config<br><br><br>dict_config = &#123;<br>    <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&quot;formatters&quot;</span>: &#123;<br>        <span class="hljs-string">&#x27;detail&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;format&#x27;</span>: <span class="hljs-string">&#x27;\033[0;32;40m[%(asctime)s]\033[0m %(filename)s -&gt; %(funcName)s line:%(lineno)d [%(levelname)s] : %(message)s&#x27;</span>,<br>        &#125;,<br>    &#125;,<br>    <span class="hljs-string">&quot;handlers&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;stream&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;logging.StreamHandler&quot;</span>,<br>            <span class="hljs-string">&quot;formatter&quot;</span>: <span class="hljs-string">&quot;detail&quot;</span>,<br>            <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>            <span class="hljs-string">&quot;stream&quot;</span>: <span class="hljs-string">&quot;ext://sys.stdout&quot;</span><br>        &#125;,<br><br>    &#125;,<br><br>    <span class="hljs-string">&quot;root&quot;</span>: &#123;<br>        <span class="hljs-string">&#x27;handlers&#x27;</span>: [<span class="hljs-string">&#x27;stream&#x27;</span>, ],<br>        <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    logging.config.dictConfig(dict_config)<br>    log = logging.getLogger()<br>    log.debug(<span class="hljs-string">&quot;A quirky message only developers care about&quot;</span>)<br>    log.info(<span class="hljs-string">&quot;Curious users might want to know this&quot;</span>)<br>    log.warning(<span class="hljs-string">&quot;Something is wrong and any user should be informed&quot;</span>)<br>    log.error(<span class="hljs-string">&quot;Serious stuff, this is red for a reason&quot;</span>)<br>    log.critical(<span class="hljs-string">&quot;OH NO everything is on fire&quot;</span>)<br><br></code></pre></td></tr></table></figure><p><code>\033[</code> 是控制码开始，’;’是分割符用来分割，显示样式;前景色;背景色 <code>\033[0m </code>是控制码结束</p><p>查下与之对应的颜色对照表，可以使用这种方式自定义颜色配置，日志颜色的配置的频率不高，一次查阅之后，就可以不用改响应的配置，下次可以直接使用。</p><p>具体的8位色，256色，truecolor 以及响应的颜色控制码不再赘述，给出响应的资料感兴趣的，可参考以下文章或者自行搜索 </p><p><a href="https://news.sangniao.com/p/2550532343">这篇文章</a>  <a href="https://answerrrrrrrrr.github.io/2016/10/12/python-termcolor/">这篇文章</a>或者<a href="https://news.sangniao.com/p/2550532343">维基百科中的详细解释</a>，</p><p>这个博文解释的更全面些 不过是英文的  <a href="https://www.lihaoyi.com/post/BuildyourownCommandLinewithANSIescapecodes.html">链接在此</a></p><h3 id="使用颜色封装库输出颜色"><a href="#使用颜色封装库输出颜色" class="headerlink" title="使用颜色封装库输出颜色"></a>使用颜色封装库输出颜色</h3><p>需要先安装 <code>colorama</code>  </p><p>运行以下命令进行安装<code>pip install colorama</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># colorama_demo.py</span><br><span class="hljs-keyword">from</span> colorama <span class="hljs-keyword">import</span> init, Fore, Back, Style<br><br><span class="hljs-comment"># 初始化Colorama</span><br>init(autoreset=<span class="hljs-literal">True</span>)<br><br><span class="hljs-built_in">print</span>(Style.BRIGHT + Back.YELLOW + Fore.RED + <span class="hljs-string">&quot;CHEESY&quot;</span>)<br></code></pre></td></tr></table></figure><p>colorama 是对颜色控制码的语义化封装，使颜色控制变得更人性化</p><p>来看例子</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">from</span> logging.config <span class="hljs-keyword">import</span> dictConfig<br><span class="hljs-keyword">from</span> colorama <span class="hljs-keyword">import</span> Fore, Back, Style<br><br>dict_config = &#123;<br>    <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&quot;formatters&quot;</span>: &#123;<br>        <span class="hljs-string">&#x27;color&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;format&#x27;</span>: <span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;Fore.GREEN&#125;</span>%(asctime)s - <span class="hljs-subst">&#123;Fore.CYAN&#125;</span> %(name)s - %(levelname)s - %(message)s&#x27;</span>,<br>            <span class="hljs-string">&#x27;datefmt&#x27;</span>: <span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S&quot;</span><br>        &#125;<br><br>    &#125;,<br><br>    <span class="hljs-string">&quot;handlers&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;stream&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;logging.StreamHandler&quot;</span>,<br>            <span class="hljs-string">&quot;formatter&quot;</span>: <span class="hljs-string">&quot;color&quot;</span>,<br>            <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>            <span class="hljs-string">&quot;stream&quot;</span>: <span class="hljs-string">&quot;ext://sys.stdout&quot;</span><br><br>        &#125;,<br><br>    &#125;,<br><br>    <span class="hljs-string">&quot;root&quot;</span>: &#123;<br>        <span class="hljs-string">&#x27;handlers&#x27;</span>: [<span class="hljs-string">&#x27;stream&#x27;</span>, ],<br>        <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>    &#125;<br>&#125;<br><br>dictConfig(dict_config)<br><br>log = logging.getLogger()<br><br>log.debug(<span class="hljs-string">&quot;A quirky message only developers care about&quot;</span>)<br>log.info(<span class="hljs-string">&quot;Curious users might want to know this&quot;</span>)<br>log.warning(<span class="hljs-string">&quot;Something is wrong and any user should be informed&quot;</span>)<br>log.error(<span class="hljs-string">&quot;Serious stuff, this is red for a reason&quot;</span>)<br>log.critical(<span class="hljs-string">&quot;OH NO everything is on fire&quot;</span>)<br><br><br></code></pre></td></tr></table></figure><p>输出如下</p><p><img src="https://s2.loli.net/2023/02/03/C9BiKj57dyVgsx2.png" alt="image-20230203224822763">但是以上代码所有级别看起来都是一个颜色，不同级别的提示需要看登记区分，不如登记按照颜色区分方便。</p><h3 id="使用三方库，实现按照日志等级区分颜色"><a href="#使用三方库，实现按照日志等级区分颜色" class="headerlink" title="使用三方库，实现按照日志等级区分颜色"></a>使用三方库，实现按照日志等级区分颜色</h3><p>下面来实现一个根据日志级别输出不同色彩的 config</p><p>先运行代码 <code>python3 -m pip install colorlog</code> 安装三方库</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># coding=utf-8</span><br><span class="hljs-keyword">from</span> logging <span class="hljs-keyword">import</span> config<br><span class="hljs-keyword">import</span> logging.config<br><br><br>log_config_dict = &#123;<br>    <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&quot;disable_existing_loggers&quot;</span>: <span class="hljs-literal">False</span>,<br>    <span class="hljs-string">&quot;formatters&quot;</span>: &#123;<br>        <span class="hljs-comment">#  使用模块做到的输出带颜色的日志  python3 -m pip install colorlog</span><br>        <span class="hljs-string">&quot;colored&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;()&quot;</span>: <span class="hljs-string">&quot;colorlog.ColoredFormatter&quot;</span>,<br>            <span class="hljs-comment"># &quot;format&quot;: &quot;%(log_color)s%(levelname)s:%(name)s:%(message)s&quot;,</span><br>            <span class="hljs-comment"># &#x27;format&#x27;: &quot;%(log_color)s%(levelname)-8s%(reset)s %(blue)s%(message)s&quot;,</span><br>            <span class="hljs-string">&#x27;format&#x27;</span>: <span class="hljs-string">&quot;%(log_color)s%(asctime)s %(filename)s  %(funcName)s [line:%(lineno)d] %(levelname)s %(message)s&quot;</span>,<br>            <span class="hljs-string">&quot;log_colors&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;DEBUG&quot;</span>: <span class="hljs-string">&quot;cyan&quot;</span>,<br>                <span class="hljs-string">&quot;INFO&quot;</span>: <span class="hljs-string">&quot;green&quot;</span>,<br>                <span class="hljs-string">&quot;WARNING&quot;</span>: <span class="hljs-string">&quot;yellow&quot;</span>,<br>                <span class="hljs-string">&quot;ERROR&quot;</span>: <span class="hljs-string">&quot;red&quot;</span>,<br>                <span class="hljs-string">&quot;CRITICAL&quot;</span>: <span class="hljs-string">&quot;red,bg_white&quot;</span><br>            &#125;,<br>        &#125;,<br>    &#125;,<br><br>    <span class="hljs-string">&quot;handlers&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;stream&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;logging.StreamHandler&quot;</span>,<br>            <span class="hljs-string">&quot;formatter&quot;</span>: <span class="hljs-string">&quot;colored&quot;</span>,<br>            <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>        &#125;,<br>    &#125;,<br>    <span class="hljs-string">&quot;root&quot;</span>: &#123;<br>        <span class="hljs-string">&#x27;handlers&#x27;</span>: [<span class="hljs-string">&#x27;stream&#x27;</span>, ],<br>        <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>    &#125;<br>&#125;<br><br>config.dictConfig(log_config_dict)<br><br>log = logging.getLogger()<br><br>log.debug(<span class="hljs-string">&quot;A quirky message only developers care about&quot;</span>)<br>log.info(<span class="hljs-string">&quot;Curious users might want to know this&quot;</span>)<br>log.warning(<span class="hljs-string">&quot;Something is wrong and any user should be informed&quot;</span>)<br>log.error(<span class="hljs-string">&quot;Serious stuff, this is red for a reason&quot;</span>)<br>log.critical(<span class="hljs-string">&quot;OH NO everything is on fire&quot;</span>)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/02/04/lrx8y6PneJYGFLg.png" alt="image-20230204113211127"></p><h3 id="使用自定义Formatter-的方式实现按照日志等级区分颜色"><a href="#使用自定义Formatter-的方式实现按照日志等级区分颜色" class="headerlink" title="使用自定义Formatter 的方式实现按照日志等级区分颜色"></a>使用自定义Formatter 的方式实现按照日志等级区分颜色</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">from</span> logging <span class="hljs-keyword">import</span> config<br><br><span class="hljs-keyword">from</span> colorama <span class="hljs-keyword">import</span> Fore, Back, Style<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomFormatter</span>(logging.Formatter):<br>    <span class="hljs-string">&quot;&quot;&quot;Logging colored formatter, adapted from https://stackoverflow.com/a/56944256/3638629&quot;&quot;&quot;</span><br>    level_color = <span class="hljs-string">&#x27;&#x27;</span><br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, fmt, datefmt=<span class="hljs-literal">None</span>, style=<span class="hljs-string">&#x27;%&#x27;</span>, validate=<span class="hljs-literal">True</span></span>):<br>        <span class="hljs-built_in">super</span>().__init__(fmt, datefmt=<span class="hljs-literal">None</span>, style=<span class="hljs-string">&#x27;%&#x27;</span>, validate=<span class="hljs-literal">True</span>)<br>        self.fmt = fmt<br>        self.datefmt = datefmt<br>        self.base_formatter = <span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;Fore.GREEN&#125;</span> %(asctime)s-<span class="hljs-subst">&#123;Fore.CYAN&#125;</span>[%(name)s]-|%(filename)s|%(funcName)s|%(lineno)d|level_color[%(levelname)9s ]<span class="hljs-subst">&#123;Fore.CYAN&#125;</span>-%(message)s&#x27;</span><br><br>        self.FORMATS = &#123;<br>            logging.DEBUG: self.base_formatter.replace(<span class="hljs-string">&#x27;level_color&#x27;</span>, Fore.WHITE),<br>            logging.INFO: self.base_formatter.replace(<span class="hljs-string">&#x27;level_color&#x27;</span>, Fore.BLUE),<br>            logging.WARNING: self.base_formatter.replace(<span class="hljs-string">&#x27;level_color&#x27;</span>, Fore.YELLOW),<br>            logging.ERROR: self.base_formatter.replace(<span class="hljs-string">&#x27;level_color&#x27;</span>, Fore.RED),<br>            logging.CRITICAL: <span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;Fore.GREEN&#125;</span> %(asctime)s-<span class="hljs-subst">&#123;Fore.CYAN&#125;</span>[%(name)s]-|%(filename)s|%(funcName)s|%(lineno)d|<span class="hljs-subst">&#123;Style.BRIGHT&#125;</span><span class="hljs-subst">&#123;Fore.RED&#125;</span>[%(levelname)9s ]<span class="hljs-subst">&#123;Fore.CYAN&#125;</span>-%(message)s&#x27;</span><br>        &#125;<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">format</span>(<span class="hljs-params">self, record</span>):<br>        log_fmt = self.FORMATS.get(record.levelno)<br>        formatter = logging.Formatter(log_fmt, datefmt=self.datefmt)<br>        <span class="hljs-keyword">return</span> formatter.<span class="hljs-built_in">format</span>(record)<br><br>dict_config = &#123;<br>    <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&quot;formatters&quot;</span>: &#123;<br>        <span class="hljs-string">&#x27;color_by_level&#x27;</span>: &#123;<br>            <span class="hljs-string">&quot;()&quot;</span>: CustomFormatter,  <span class="hljs-comment"># 自定义调用的实例化类，以下参数会被传递给实例化类</span><br>            <span class="hljs-string">&#x27;fmt&#x27;</span>: <span class="hljs-string">&quot;%(asctime)s - %(name)s - %(levelname) s - %(message)s&quot;</span>,  <span class="hljs-comment"># 键名之所以是fmt，是CustomFormatter的参数是fmt</span><br>            <span class="hljs-string">&#x27;datefmt&#x27;</span>: <span class="hljs-string">&#x27;%H:%M:%S&#x27;</span><br>        &#125;,<br><br>    &#125;,<br><br>    <span class="hljs-string">&quot;handlers&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;stream&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;logging.StreamHandler&quot;</span>,<br>            <span class="hljs-string">&quot;formatter&quot;</span>: <span class="hljs-string">&quot;color_by_level&quot;</span>,<br>            <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>            <span class="hljs-string">&quot;stream&quot;</span>: <span class="hljs-string">&quot;ext://sys.stdout&quot;</span><br><br>        &#125;,<br><br>    &#125;,<br><br>    <span class="hljs-string">&quot;root&quot;</span>: &#123;<br>        <span class="hljs-string">&#x27;handlers&#x27;</span>: [<span class="hljs-string">&#x27;stream&#x27;</span>, ],<br>        <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br><br>    logging.config.dictConfig(dict_config)<br>    log = logging.getLogger()<br>    log.debug(<span class="hljs-string">&quot;A quirky message only developers care about&quot;</span>)<br>    log.info(<span class="hljs-string">&quot;Curious users might want to know this&quot;</span>)<br>    log.warning(<span class="hljs-string">&quot;Something is wrong and any user should be informed&quot;</span>)<br>    log.error(<span class="hljs-string">&quot;Serious stuff, this is red for a reason&quot;</span>)<br>    log.critical(<span class="hljs-string">&quot;OH NO everything is on fire&quot;</span>)<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/02/03/f2PgyNKrFJWaXlH.png" alt="image-20230203235140037"></p><h2 id="logging-和异常捕获"><a href="#logging-和异常捕获" class="headerlink" title="logging  和异常捕获"></a>logging  和异常捕获</h2><p>logging 中的异常捕获</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">from</span> logging <span class="hljs-keyword">import</span> config<br><br>dict_config = &#123;<br>    <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&quot;formatters&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;simple&quot;</span>: &#123;<br>            <span class="hljs-string">&#x27;format&#x27;</span>: <span class="hljs-string">&quot;%(asctime)s - %(levelname)s - %(user)s[%(ip)s] - %(message)s&quot;</span>,<br>            <span class="hljs-string">&#x27;datefmt&#x27;</span>: <span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S&quot;</span><br>        &#125;,<br>    &#125;,<br><br>    <span class="hljs-string">&quot;handlers&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;stream&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;logging.StreamHandler&quot;</span>,<br>            <span class="hljs-string">&quot;formatter&quot;</span>: <span class="hljs-string">&quot;simple&quot;</span>,<br>            <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>            <span class="hljs-string">&quot;stream&quot;</span>: <span class="hljs-string">&quot;ext://sys.stdout&quot;</span><br><br>        &#125;,<br><br>    &#125;,<br><br>    <span class="hljs-string">&quot;root&quot;</span>: &#123;<br>        <span class="hljs-string">&#x27;handlers&#x27;</span>: [<span class="hljs-string">&#x27;stream&#x27;</span>, ],<br>        <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>    &#125;<br>&#125;<br><br>config.dictConfig(dict_config)<br>log = logging.getLogger()<br><br><span class="hljs-keyword">try</span>:<br>    <span class="hljs-keyword">assert</span> <span class="hljs-number">1</span> == <span class="hljs-number">2</span><br><span class="hljs-keyword">except</span>:<br>    log.exception(<span class="hljs-string">&quot;Some one delete the log file.&quot;</span>, exc_info=<span class="hljs-literal">True</span>, extra=&#123;<span class="hljs-string">&#x27;user&#x27;</span>: <span class="hljs-string">&#x27;Tom&#x27;</span>, <span class="hljs-string">&#x27;ip&#x27;</span>: <span class="hljs-string">&#x27;47.98.53.222&#x27;</span>&#125;,<br>                  stack_info=<span class="hljs-literal">False</span>)<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/02/04/h3Agmn4sNwlTcMY.png" alt="image-20230204120514526"></p><p><code>logging.exception</code> 是对<code>logging.error</code>的封装 ，有个默认值 exec_info=True,会默认输出Traceback 信息</p><p><img src="https://s2.loli.net/2023/02/04/4hDw2okUPbgEGuQ.png" alt="image-20230204121612310"></p><p>其他关键的关键词参数有：</p><p><code>extra</code> : 向logrecord中添加指定的字段</p><p><code>exec_info</code>: 打印traceback 信息</p><p><code>stack_info</code> 打印stack 信息</p><p>修改logging.excetion 的参数如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">log.exception(<span class="hljs-string">&quot;Some one delete the log file.&quot;</span>, exc_info=<span class="hljs-literal">False</span>, extra=&#123;<span class="hljs-string">&#x27;user&#x27;</span>: <span class="hljs-string">&#x27;Tom&#x27;</span>, <span class="hljs-string">&#x27;ip&#x27;</span>: <span class="hljs-string">&#x27;47.98.53.222&#x27;</span>&#125;,<br>              stack_info=<span class="hljs-literal">True</span>)<br><br></code></pre></td></tr></table></figure><p>执行结果为：</p><p>![image-20230204122023336](/Users/king/Library/Application Support/typora-user-images/image-20230204122023336.png)</p><p>在实际运行的过程中，代码可能会比上面的demo 更加复杂，传入的参数很多，引起错误的原因也不太好定位，这样记录日志只会知道代码有报错，但是具体的代码的参数是什么，哪个参数引起的报错，无从得知。如果复现debug 的时间长，过程繁琐 。。。。。 不说了已经开始头疼了</p><h4 id="使用better-exceptions-显示函数的参数值"><a href="#使用better-exceptions-显示函数的参数值" class="headerlink" title="使用better_exceptions 显示函数的参数值"></a>使用better_exceptions 显示函数的参数值</h4><p><a href="https://github.com/Qix-/better-exceptions">github 地址</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> better_exceptions<br>better_exceptions.hook()<br><br>request = <span class="hljs-string">&quot;test test test&quot;</span>  <span class="hljs-comment"># 从request中获取到数据</span><br>a, b, c, d = request.split()  <span class="hljs-comment"># 处理数据</span><br></code></pre></td></tr></table></figure><p>![image-20230204123509091](/Users/king/Library/Application Support/typora-user-images/image-20230204123509091.png)</p><p>可以看到代码提示中有参数输出，对于复杂程序的定位还是很有帮助的</p><p>better_exception 还有个设置就是控制变量的字符数， 在<code>0.3.3</code>版本汇总 MAX_LENGTH 有如下默认值</p><p>better_exceptions.MAX_LENGTH   = 128 </p><p>better_exceptions.MAX_LENGTH = None 表示无限制</p><p><code>better_exceptions</code> 是怎么实现参数打印的呢</p><p><img src="https://s2.loli.net/2023/02/04/QC3XtRKePrgv2Wa.png" alt="image-20230204180853544"></p><p><code>better_exceptions</code>中的<code>hook </code>方法把 sys.excepthook 函数定义成自己的<code>excepthook</code> 方法 ,调用了 自己的格式化方法给错误信息添加上了变量和颜色设置 </p><p>从代码中也可以看到，这种错误信息值输出到了屏幕，虽然有hook logging,但是只在没有</p><h2 id="loggging-自定义异常处理"><a href="#loggging-自定义异常处理" class="headerlink" title="loggging 自定义异常处理"></a>loggging 自定义异常处理</h2><p>先简单说一下:</p><ul><li>logging模块在输出一个异常的时候,会调用<code>handler</code>的<code>formater</code>的<code>formatException</code>函数来格式化异常.</li><li><code>better_exceptions</code>有个<code>format_exception</code>方法会将异常调用栈变量值输出,就是 上面例子的那种输出.</li></ul><p>我们的思路就是在handler 在调用 formater 的formatException 是返回 better_exceptions.format_exception 方法的返回值</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># -*- encoding: utf-8 -*-</span><br><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">from</span> logging <span class="hljs-keyword">import</span> config<br><br><span class="hljs-keyword">from</span> logging <span class="hljs-keyword">import</span> FileHandler<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LogExceptionFormatter</span>(logging.Formatter):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">formatException</span>(<span class="hljs-params">self, exc_info</span>):<br>        <span class="hljs-keyword">from</span> better_exceptions <span class="hljs-keyword">import</span> format_exception<br>        result = format_exception(*exc_info)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#x27;</span>.join(result)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">format</span>(<span class="hljs-params">self, record</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().<span class="hljs-built_in">format</span>(record)<br><br><br>config.dictConfig(<br>    &#123;<br>        <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-string">&quot;formatters&quot;</span>: &#123;<br><br>            <span class="hljs-string">&#x27;log_exception&#x27;</span>: &#123;<br>                <span class="hljs-string">&#x27;()&#x27;</span>: LogExceptionFormatter,<br>                <span class="hljs-string">&#x27;format&#x27;</span>: <span class="hljs-string">&#x27;%(asctime)s [%(threadName)s:%(thread)d] [%(name)s:%(lineno)d] [%(levelname)s]- %(message)s&#x27;</span>,<br>            &#125;,<br><br>        &#125;,<br><br>        <span class="hljs-string">&quot;handlers&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;file&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;logging.FileHandler&quot;</span>,<br>                <span class="hljs-string">&quot;formatter&quot;</span>: <span class="hljs-string">&quot;log_exception&quot;</span>,<br>                <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>                <span class="hljs-string">&quot;filename&quot;</span>: <span class="hljs-string">&#x27;test.log&#x27;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;console&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;logging.StreamHandler&quot;</span>,<br>                <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>                <span class="hljs-string">&quot;formatter&quot;</span>: <span class="hljs-string">&quot;log_exception&quot;</span>,<br>                <span class="hljs-string">&quot;stream&quot;</span>: <span class="hljs-string">&quot;ext://sys.stdout&quot;</span><br>            &#125;,<br><br>        &#125;,<br><br>        <span class="hljs-string">&quot;root&quot;</span>: &#123;<br>            <span class="hljs-string">&#x27;handlers&#x27;</span>: [<span class="hljs-string">&#x27;console&#x27;</span>, <span class="hljs-string">&#x27;file&#x27;</span>],<br>            <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>        &#125;<br>    &#125;<br>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_student_infos</span>(<span class="hljs-params">logs</span>):<br>    student_infos = []<br>    <span class="hljs-keyword">for</span> log <span class="hljs-keyword">in</span> logs:<br>        name, catgory, grade = log.split(<span class="hljs-string">&#x27; &#x27;</span>)<br>        student_infos.append(&#123;<br>            <span class="hljs-string">&#x27;name&#x27;</span>: name,<br>            <span class="hljs-string">&#x27;catgory&#x27;</span>: catgory,<br>            <span class="hljs-string">&#x27;grade&#x27;</span>: grade,<br><br>        &#125;)<br>    <span class="hljs-keyword">return</span> student_infos<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    logger = logging.getLogger()<br>    exam_logs = [<br>        <span class="hljs-string">&#x27;zhangsan math 60&#x27;</span>,<br>        <span class="hljs-string">&#x27;lisi english 80&#x27;</span>,<br>        <span class="hljs-string">&#x27;wangwu chinese 90&#x27;</span>,<br>        <span class="hljs-string">&#x27;qianliu music&#x27;</span><br>    ]<br>    <span class="hljs-keyword">try</span>:<br>        get_student_infos(exam_logs)<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        logger.exception(e)<br><br></code></pre></td></tr></table></figure><p>文件内容如下 其中类如 ESC[36m 是相关的颜色控制码</p><p><img src="https://s2.loli.net/2023/02/04/vBdUg9NrYAC1y5z.png" alt="image-20230204174501618"></p><p>在终端使用cat 命令查看日志，会显示下面的效果</p><p><img src="https://s2.loli.net/2023/02/04/n2ro8QGOVUFBH3f.png" alt="image-20230204175310487"></p><h3 id="使用loguru-中的-异常处理"><a href="#使用loguru-中的-异常处理" class="headerlink" title="使用loguru 中的 异常处理"></a>使用loguru 中的 异常处理</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># -*- encoding: utf-8 -*-</span><br><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">from</span> logging <span class="hljs-keyword">import</span> config<br><br><span class="hljs-keyword">from</span> loguru._better_exceptions <span class="hljs-keyword">import</span> ExceptionFormatter<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoguruExceptionFormatter</span>(logging.Formatter):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, *args, **kwargs</span>):<br>        <span class="hljs-built_in">super</span>().__init__(*args, **kwargs)<br>        self.exception_formatter = ExceptionFormatter(colorize=<span class="hljs-literal">True</span>, backtrace=<span class="hljs-literal">True</span>, diagnose=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">formatException</span>(<span class="hljs-params">self, exc_info</span>):<br>        result = self.exception_formatter.format_exception(*exc_info, from_decorator=<span class="hljs-literal">False</span>)<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#x27;</span>.join([i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> result])<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">format</span>(<span class="hljs-params">self, record</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().<span class="hljs-built_in">format</span>(record)<br><br><br>config.dictConfig(<br>    &#123;<br>        <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-string">&quot;formatters&quot;</span>: &#123;<br>            <span class="hljs-string">&#x27;log_exception&#x27;</span>: &#123;<br>                <span class="hljs-string">&#x27;()&#x27;</span>: LoguruExceptionFormatter,<br>                <span class="hljs-string">&#x27;format&#x27;</span>: <span class="hljs-string">&#x27;%(asctime)s [%(threadName)s:%(thread)d] [%(name)s:%(lineno)d][%(levelname)s]- %(message)s&#x27;</span>,<br>            &#125;,<br><br>        &#125;,<br><br>        <span class="hljs-string">&quot;handlers&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;file&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;logging.FileHandler&quot;</span>,<br>                <span class="hljs-string">&quot;formatter&quot;</span>: <span class="hljs-string">&quot;log_exception&quot;</span>,<br>                <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>                <span class="hljs-string">&quot;filename&quot;</span>: <span class="hljs-string">&#x27;test.log&#x27;</span><br>            &#125;,<br>            <span class="hljs-string">&quot;console&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;logging.StreamHandler&quot;</span>,<br>                <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>                <span class="hljs-string">&quot;formatter&quot;</span>: <span class="hljs-string">&quot;log_exception&quot;</span>,<br>                <span class="hljs-string">&quot;stream&quot;</span>: <span class="hljs-string">&quot;ext://sys.stdout&quot;</span><br>            &#125;,<br><br>        &#125;,<br><br>        <span class="hljs-string">&quot;root&quot;</span>: &#123;<br>            <span class="hljs-string">&#x27;handlers&#x27;</span>: [<span class="hljs-string">&#x27;console&#x27;</span>],<br>            <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>        &#125;<br>    &#125;<br>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_student_infos</span>(<span class="hljs-params">logs</span>):<br>    student_infos = []<br>    <span class="hljs-keyword">for</span> log <span class="hljs-keyword">in</span> logs:<br>        name, catgory, grade = log.split(<span class="hljs-string">&#x27; &#x27;</span>)<br>        student_infos.append(&#123;<br>            <span class="hljs-string">&#x27;name&#x27;</span>: name,<br>            <span class="hljs-string">&#x27;catgory&#x27;</span>: catgory,<br>            <span class="hljs-string">&#x27;grade&#x27;</span>: grade,<br><br>        &#125;)<br>    <span class="hljs-keyword">return</span> student_infos<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    logger = logging.getLogger()<br>    exam_logs = [<br>        <span class="hljs-string">&#x27;zhangsan math 60&#x27;</span>,<br>        <span class="hljs-string">&#x27;lisi english 80&#x27;</span>,<br>        <span class="hljs-string">&#x27;wangwu chinese 90&#x27;</span>,<br>        <span class="hljs-string">&#x27;qianliu music&#x27;</span><br>    ]<br>    <span class="hljs-keyword">try</span>:<br>        get_student_infos(exam_logs)<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        logger.exception(e)<br><br></code></pre></td></tr></table></figure><p>使用loguru 中的<code>_better_exceptions</code> 原理与上面类似</p><p><img src="https://s2.loli.net/2023/02/04/dqRYCwoTGleBr7L.png" alt="image-20230204202328707"></p><h3 id="rich-中的RichHandler"><a href="#rich-中的RichHandler" class="headerlink" title="rich 中的RichHandler"></a>rich 中的RichHandler</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">from</span> logging <span class="hljs-keyword">import</span> config<br><br>config.dictConfig(<br>    &#123;<br>        <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-string">&quot;formatters&quot;</span>: &#123;<br>            <span class="hljs-string">&#x27;rich&#x27;</span>: &#123;<br>                <span class="hljs-string">&quot;format&quot;</span>: <span class="hljs-string">&quot;%(message)s&quot;</span><br>            &#125;<br>        &#125;,<br><br>        <span class="hljs-string">&quot;handlers&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;rich&quot;</span>: &#123;<br>                <span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;rich.logging.RichHandler&quot;</span>,<br>                <span class="hljs-string">&quot;formatter&quot;</span>: <span class="hljs-string">&quot;rich&quot;</span>,<br>                <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>                <span class="hljs-string">&quot;rich_tracebacks&quot;</span>: <span class="hljs-literal">True</span>,<br>                <span class="hljs-string">&quot;tracebacks_show_locals&quot;</span>: <span class="hljs-literal">True</span>,<br>                <span class="hljs-string">&quot;locals_max_length&quot;</span>: <span class="hljs-number">5</span>,<br>            &#125;,<br>        &#125;,<br><br>        <span class="hljs-string">&quot;root&quot;</span>: &#123;<br>            <span class="hljs-string">&#x27;handlers&#x27;</span>: [<span class="hljs-string">&#x27;rich&#x27;</span>],<br>            <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>        &#125;<br>    &#125;<br>)<br><br><br>log = logging.getLogger()<br><br>log.debug(<span class="hljs-string">&quot;A quirky message only developers care about&quot;</span>)<br>log.info(<span class="hljs-string">&quot;Curious users might want to know this&quot;</span>)<br>log.warning(<span class="hljs-string">&quot;Something is wrong and any user should be informed&quot;</span>)<br>log.error(<span class="hljs-string">&quot;Serious stuff, this is red for a reason&quot;</span>)<br>log.critical(<span class="hljs-string">&quot;OH NO everything is on fire&quot;</span>)<br><br>x = <span class="hljs-number">1</span><br>y = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">try</span>:<br>    t = x / y<br><br><span class="hljs-keyword">except</span> Exception:<br>    log.exception(<span class="hljs-string">&#x27;e&#x27;</span>)<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/02/04/7oYSvgkLuc9MTqH.png" alt="image-20230204183950065"></p><p>rich 中的RichHandler 也能实现 打印堆栈和局部变量的功能，但是遗憾的是我只找到了的 rich 使用 console 实例保存文件的方法，保存后，里面的内容是渲染好的html 并不适合保存到日志文件中。</p><p>有关rich中RichHandler 的参数可以参考rich 文档中关于traceback的主题和Richhandler 的主题 <a href="https://rich.readthedocs.io/en/stable/reference/traceback.html">传送门</a> </p><h2 id="logging-中的RotatingFileHandler"><a href="#logging-中的RotatingFileHandler" class="headerlink" title="logging 中的RotatingFileHandler"></a>logging 中的<code>RotatingFileHandler</code></h2><p><a href="https://docs.python.org/zh-cn/3/library/logging.handlers.html#rotatingfilehandler">官方文档</a></p><p><code>RotatingFileHandler</code> 可以按照文件大小旋转日志</p><blockquote><p>class logging.handlers.RotatingFileHandler(filename, mode=‘a’, maxBytes=0, backupCount=0, encoding=None, delay=False, errors=None)</p></blockquote><p>返回一个 RotatingFileHandler 类的新实例。 将打开指定的文件并将其用作日志记录流。 如果未指定 mode，则会使用 ‘a’。 如果 encoding 不为 None，则会将其用作打开文件的编码格式。 如果 delay 为真值，则文件打开会被推迟至第一次调用 emit()。 默认情况下，文件会无限增长。 如果提供了 errors，它会被用于确定编码格式错误的处理方式。</p><p>你可以使用 maxBytes 和 backupCount 值来允许文件以预定的大小执行 rollover。 当即将超出预定大小时，将关闭旧文件并打开一个新文件用于输出。 只要当前日志文件长度接近 maxBytes 就会发生轮换；但是如果 maxBytes 或 backupCount 两者之一的值为零，就不会发生轮换，因此你通常要设置 backupCount 至少为 1，而 maxBytes 不能为零。 当 backupCount 为非零值时，系统将通过为原文件名添加扩展名 ‘.1’, ‘.2’ 等来保存旧日志文件。 例如，当 backupCount 为 5 而基本文件名为 app.log 时，你将得到 app.log, app.log.1, app.log.2 直至 app.log.5。 当前被写入的文件总是 app.log。 当此文件写满时，它会被关闭并重户名为 app.log.1，而如果文件 app.log.1, app.log.2 等存在，则它们会被分别重命名为 app.log.2, app.log.3 等等。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">from</span> logging.config <span class="hljs-keyword">import</span> dictConfig<br><br>LOGGER = &#123;<br>    <span class="hljs-string">&#x27;version&#x27;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&#x27;formatters&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;format&#x27;</span>: <span class="hljs-string">&#x27;[%(asctime)s] %(levelname)s in %(module)s: %(message)s&#x27;</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-string">&#x27;handlers&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;file&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;class&#x27;</span>: <span class="hljs-string">&#x27;logging.handlers.RotatingFileHandler&#x27;</span>,<br>            <span class="hljs-string">&#x27;formatter&#x27;</span>: <span class="hljs-string">&#x27;default&#x27;</span>,<br>            <span class="hljs-string">&#x27;filename&#x27;</span>: <span class="hljs-string">&#x27;../logs/app.log&#x27;</span>,<br>            <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&#x27;DEBUG&#x27;</span>,<br>            <span class="hljs-string">&#x27;maxBytes&#x27;</span>: <span class="hljs-number">1</span>,<br>            <span class="hljs-string">&#x27;backupCount&#x27;</span>: <span class="hljs-number">5</span>,<br>          <span class="hljs-string">&#x27;encoding&#x27;</span>: <span class="hljs-string">&#x27;utf8&#x27;</span>,<br>            <span class="hljs-string">&#x27;delay&#x27;</span>: <span class="hljs-literal">True</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-string">&#x27;root&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&#x27;INFO&#x27;</span>,<br>        <span class="hljs-string">&#x27;handlers&#x27;</span>: [<span class="hljs-string">&#x27;file&#x27;</span>]<br>    &#125;<br>&#125;<br><br>dictConfig(LOGGER)<br><br><br>log = logging.getLogger()<br>log.setLevel(logging.DEBUG)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>    log.debug(<span class="hljs-string">f&quot;A quirky message only developers care about <span class="hljs-subst">&#123;i&#125;</span>&quot;</span>)<br><br><br><br></code></pre></td></tr></table></figure><p>结果展示</p><p><img src="https://s2.loli.net/2023/02/05/XAq4uaoS2nrDQZT.png" alt="image-20230205210252540"></p><p><img src="https://s2.loli.net/2023/02/05/AbpiJz4LMthw9DX.png" alt="image-20230205210424080"></p><p>不算当前文件名，日志只会保留五个备份，会舍弃一部分日志，日志文件具体大小，文件路径可以根据自身情况来配置</p><h3 id="logging-的TimedRotatingFileHandler"><a href="#logging-的TimedRotatingFileHandler" class="headerlink" title="logging 的TimedRotatingFileHandler"></a>logging 的<code>TimedRotatingFileHandler</code></h3><blockquote><p><em>class</em> logging.handlers.<strong>TimedRotatingFileHandler</strong>(<em>filename</em>, <em>when=’h’</em>, <em>interval=1</em>, <em>backupCount=0</em>, <em>encoding=None</em>, <em>delay=False</em>, <em>utc=False</em>, <em>atTime=None</em>, <em>errors=None</em>)</p></blockquote><p>返回一个新的 <a href="https://docs.python.org/zh-cn/3/library/logging.handlers.html#logging.handlers.TimedRotatingFileHandler"><code>TimedRotatingFileHandler</code></a> 类实例。 指定的文件会被打开并用作日志记录的流。 对于轮换操作它还会设置文件名前缀。 轮换的发生是基于 <em>when</em> 和 <em>interval</em> 的积。</p><p>你可以使用 <em>when</em> 来指定 <em>interval</em> 的类型。 可能的值列表如下。 请注意它们不是大小写敏感的。</p><table><thead><tr><th align="left">值</th><th align="left">间隔类型</th><th align="left">如果/如何使用 <em>atTime</em></th></tr></thead><tbody><tr><td align="left"><code>&#39;S&#39;</code></td><td align="left">秒</td><td align="left">忽略</td></tr><tr><td align="left"><code>&#39;M&#39;</code></td><td align="left">分钟</td><td align="left">忽略</td></tr><tr><td align="left"><code>&#39;H&#39;</code></td><td align="left">小时</td><td align="left">忽略</td></tr><tr><td align="left"><code>&#39;D&#39;</code></td><td align="left">天</td><td align="left">忽略</td></tr><tr><td align="left"><code>&#39;W0&#39;-&#39;W6&#39;</code></td><td align="left">工作日(0=星期一)</td><td align="left">用于计算初始轮换时间</td></tr><tr><td align="left"><code>&#39;midnight&#39;</code></td><td align="left">如果未指定 <em>atTime</em> 则在午夜执行轮换，否则将使用 <em>atTime</em>。</td><td align="left">用于计算初始轮换时间</td></tr></tbody></table><p>当使用基于星期的轮换时，星期一为 ‘W0’，星期二为 ‘W1’，以此类推直至星期日为 ‘W6’。 在这种情况下，传入的 <em>interval</em> 值不会被使用。</p><p>系统将通过为文件名添加扩展名来保存旧日志文件。 扩展名是基于日期和时间的，根据轮换间隔的长短使用 strftime 格式 <code>%Y-%m-%d_%H-%M-%S</code> 或是其中有变动的部分。</p><p>当首次计算下次轮换的时间时（即当处理程序被创建时），现有日志文件的上次被修改时间或者当前时间会被用来计算下次轮换的发生时间。</p><p>如果 <em>utc</em> 参数为真值，将使用 UTC 时间；否则会使用本地时间。</p><p>如果 <em>backupCount</em> 不为零，则最多将保留 <em>backupCount</em> 个文件，而如果当轮换发生时创建了更多的文件，则最旧的文件会被删除。 删除逻辑使用间隔时间来确定要删除的文件，因此改变间隔时间可能导致旧文件被继续保留。</p><p>如果 <em>delay</em> 为真值，则会将文件打开延迟到首次调用 <a href="https://docs.python.org/zh-cn/3/library/logging.handlers.html#logging.handlers.TimedRotatingFileHandler.emit"><code>emit()</code></a> 的时候。</p><p>如果 <em>atTime</em> 不为 <code>None</code>，则它必须是一个 <code>datetime.time</code> 的实例，该实例指定轮换在一天内的发生时间，用于轮换被设为“在午夜”或“在每星期的某一天”之类的情况。 请注意在这些情况下，<em>atTime</em> 值实际上会被用于计算 <em>初始</em> 轮换，而后续轮换将会通过正常的间隔时间计算来得出。</p><p>如果指定了 <em>errors</em>，它会被用来确定编码错误的处理方式。</p><p><a href="https://docs.python.org/zh-cn/3/library/logging.handlers.html#timedrotatingfilehandler">函数解释copy 于官网</a></p><p>运行demo 示例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> logging.config <span class="hljs-keyword">import</span> dictConfig<br><br>LOGGER = &#123;<br>    <span class="hljs-string">&#x27;version&#x27;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&#x27;formatters&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;default&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;format&#x27;</span>: <span class="hljs-string">&#x27;[%(asctime)s] %(levelname)s in %(module)s: %(message)s&#x27;</span><br>        &#125;<br>    &#125;,<br>    <span class="hljs-string">&#x27;handlers&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;file&#x27;</span>: &#123;<br>            <span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;logging.handlers.TimedRotatingFileHandler&quot;</span>,<br>            <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;DEBUG&quot;</span>,<br>            <span class="hljs-string">&quot;formatter&quot;</span>: <span class="hljs-string">&quot;default&quot;</span>,<br>            <span class="hljs-string">&quot;filename&quot;</span>: <span class="hljs-string">&quot;../logs/test.log&quot;</span>,<br>            <span class="hljs-string">&quot;backupCount&quot;</span>: <span class="hljs-number">5</span>,<br>            <span class="hljs-string">&#x27;interval&#x27;</span>: <span class="hljs-number">1</span>,<br>            <span class="hljs-string">&quot;encoding&quot;</span>: <span class="hljs-string">&quot;utf8&quot;</span>,<br>            <span class="hljs-string">&quot;when&quot;</span>: <span class="hljs-string">&quot;s&quot;</span>,<br>            <span class="hljs-string">&#x27;delay&#x27;</span>: <span class="hljs-literal">True</span>,<br>        &#125;,<br>    &#125;,<br>    <span class="hljs-string">&#x27;root&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&#x27;INFO&#x27;</span>,<br>        <span class="hljs-string">&#x27;handlers&#x27;</span>: [<span class="hljs-string">&#x27;file&#x27;</span>]<br>    &#125;<br>&#125;<br><br>dictConfig(LOGGER)<br><br>log = logging.getLogger()<br>log.setLevel(logging.DEBUG)<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>):<br>    log.debug(<span class="hljs-string">f&quot;A quirky message only developers care about <span class="hljs-subst">&#123;i&#125;</span>&quot;</span>)<br>    time.sleep(<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/02/05/gTAUI1YwsMZmEeS.png" alt="image-20230205212400281"></p><h2 id="在多进程下写入单文件的问题"><a href="#在多进程下写入单文件的问题" class="headerlink" title="在多进程下写入单文件的问题"></a>在多进程下写入单文件的问题</h2><p>按照<a href="https://docs.python.org/2/library/logging.html#thread-safety">官方文档</a>的介绍，logging 是线程安全的，也就是说，在一个进程内的多个线程同时往同一个文件写日志是安全的。但是（对，这里有个但是）多个进程往同一个文件写日志不是安全的。官方的说法是这样的：</p><blockquote><p>Because there is no standard way to serialize access to a single file across multiple processes in Python. If you need to log to a single file from multiple processes, one way of doing this is to have all the processes log to a SocketHandler, and have a separate process which implements a socket server which reads from the socket and logs to file. (If you prefer, you can dedicate one thread in one of the existing processes to perform this function.)</p></blockquote><p>对于这种方式写入日志 <a href="https://docs.python.org/zh-cn/3.10/howto/logging-cookbook.html#logging-to-a-single-file-from-multiple-processes">cookbook</a> 的翻译如下 </p><p>尽管 logging 是线程安全的，将单个进程中的多个线程日志记录至单个文件也 <em>是</em> 受支持的，但将 <em>多个进程</em> 中的日志记录至单个文件则 <em>不是</em> 受支持的，因为在 Python 中并没有在多个进程中实现对单个文件访问的序列化的标准方案。 如果你需要将多个进程中的日志记录至单个文件，有一个方案是让所有进程都将日志记录至一个 <code>SocketHandler</code>，然后用一个实现了套接字服务器的单独进程一边从套接字中读取一边将日志记录至文件。 （如果愿意的话，你可以在一个现有进程中专门开一个线程来执行此项功能。） <a href="https://docs.python.org/zh-cn/3.10/howto/logging-cookbook.html#network-logging">这一部分</a> 文档对此方式有更详细的介绍，并包含一个可用的套接字接收器，你自己的应用可以在此基础上进行适配。</p><p>你也可以编写你自己的处理程序，让其使用 <a href="https://docs.python.org/zh-cn/3.10/library/multiprocessing.html#module-multiprocessing"><code>multiprocessing</code></a> 模块中的 <a href="https://docs.python.org/zh-cn/3.10/library/multiprocessing.html#multiprocessing.Lock"><code>Lock</code></a> 类来顺序访问你的多个进程中的文件。 现有的 <code>FileHandler</code> 及其子类目前并不使用 <a href="https://docs.python.org/zh-cn/3.10/library/multiprocessing.html#module-multiprocessing"><code>multiprocessing</code></a>，尽管它们将来可能会这样做。 请注意在目前，<a href="https://docs.python.org/zh-cn/3.10/library/multiprocessing.html#module-multiprocessing"><code>multiprocessing</code></a> 模块并未在所有平台上都提供可用的锁功能 (参见 <a href="https://bugs.python.org/issue3770)%E3%80%82">https://bugs.python.org/issue3770)。</a></p><p>使用多进程进程写入单文件时会导致：</p><p>进程之间的写入会导致日志中乱序. 这个其他还可以接受 因为看日志的时候，都是使用的grep 命令筛选的</p><ol><li>日志丢失 </li><li>文件旋转的速度和预期的速度不一致</li><li>文件大小不是设定的值</li></ol><p>解决办法： </p><ol><li><p>使用官方推荐的<code>SocketHandler</code> </p></li><li><p>自定义实现多进程写入的handler</p></li></ol><p>这里推荐几个三方库</p><p><a href="https://pypi.org/project/logging-process/">logging-process</a>  支持按时间和按文件大小旋转，</p><p><a href="https://github.com/Preston-Landers/concurrent-log-handler">concurrent-log-handler</a>   推荐更新时间在近期，对rotating 参数做了扩展，只能按照文件大小分割</p><p><a href="https://pypi.org/project/ConcurrentLogHandler/0.9.1/">ConcurrentLogHandler</a> 好久没更新，python3.8 能正常跑起来</p><p><a href="https://github.com/di/mrfh">mrfh</a> 好久没更新</p><p>最后给出自己配置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># coding=utf-8</span><br><span class="hljs-keyword">import</span> datetime<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> logging<br><span class="hljs-keyword">from</span> logging <span class="hljs-keyword">import</span> config<br><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path<br><span class="hljs-keyword">from</span> platform <span class="hljs-keyword">import</span> platform<br><br><span class="hljs-keyword">from</span> loguru._better_exceptions <span class="hljs-keyword">import</span> ExceptionFormatter<br><span class="hljs-keyword">from</span> colorama <span class="hljs-keyword">import</span> Fore, Style<br><br><span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;linux&#x27;</span> <span class="hljs-keyword">in</span> platform().lower():<br>    LOG_DIR = <span class="hljs-string">&#x27;/tmp/spider_log&#x27;</span><br><span class="hljs-keyword">else</span>:<br>    LOG_DIR = os.path.join(Path(__file__).parent.parent.parent, <span class="hljs-string">&#x27;logs&#x27;</span>)<br><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(LOG_DIR):<br>    os.makedirs(LOG_DIR)  <span class="hljs-comment"># 创建路径</span><br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">Loggers：记录器，提供应用程序代码能直接使用的接口；</span><br><span class="hljs-string"></span><br><span class="hljs-string">Handlers：处理器，将记录器产生的日志发送至目的地；</span><br><span class="hljs-string"></span><br><span class="hljs-string">Filters：过滤器，提供更好的粒度控制，决定哪些日志会被输出；</span><br><span class="hljs-string"></span><br><span class="hljs-string">Formatters：格式化器，设置日志内容的组成结构和消息字段。</span><br><span class="hljs-string">        %(name)s Logger的名字         #也就是其中的.getLogger里的路径,或者我们用他的文件名看我们填什么</span><br><span class="hljs-string">        %(levelno)s 数字形式的日志级别  #日志里面的打印的对象的级别</span><br><span class="hljs-string">        %(levelname)s 文本形式的日志级别 #级别的名称</span><br><span class="hljs-string">        %(pathname)s 调用日志输出函数的模块的完整路径名，可能没有</span><br><span class="hljs-string">        %(filename)s 调用日志输出函数的模块的文件名</span><br><span class="hljs-string">        %(module)s 调用日志输出函数的模块名</span><br><span class="hljs-string">        %(funcName)s 调用日志输出函数的函数名</span><br><span class="hljs-string">        %(lineno)d 调用日志输出函数的语句所在的代码行</span><br><span class="hljs-string">        %(created)f 当前时间，用UNIX标准的表示时间的浮 点数表示</span><br><span class="hljs-string">        %(relativeCreated)d 输出日志信息时的，自Logger创建以 来的毫秒数</span><br><span class="hljs-string">        %(asctime)s 字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒</span><br><span class="hljs-string">        %(thread)d 线程ID。可能没有</span><br><span class="hljs-string">        %(threadName)s 线程名。可能没有</span><br><span class="hljs-string">        %(process)d 进程ID。可能没有</span><br><span class="hljs-string">        %(message)s用户输出的消息</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ColorByLevelSimple</span>(logging.Formatter):<br>    <span class="hljs-string">&quot;&quot;&quot;Logging colored formatter, adapted from https://stackoverflow.com/a/56944256/3638629</span><br><span class="hljs-string">    参考loguru颜色设置，实现自定义的颜色配置，loguru 的错误输出。</span><br><span class="hljs-string"></span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    level_color = <span class="hljs-string">&#x27;&#x27;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, <span class="hljs-built_in">format</span>, datefmt=<span class="hljs-literal">None</span>, style=<span class="hljs-string">&#x27;%&#x27;</span>, validate=<span class="hljs-literal">True</span></span>):<br>        <span class="hljs-built_in">super</span>().__init__(<span class="hljs-built_in">format</span>, datefmt=<span class="hljs-literal">None</span>, style=<span class="hljs-string">&#x27;%&#x27;</span>, validate=<span class="hljs-literal">True</span>)<br>        self.fmt = <span class="hljs-built_in">format</span><br>        self.datefmt = datefmt<br>        self.base_formatter = <span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;Fore.GREEN&#125;</span> %(asctime)s-<span class="hljs-subst">&#123;Fore.CYAN&#125;</span>[%(name)s]-|%(filename)s|%(funcName)s|%(lineno)d|level_color[%(levelname)9s ]<span class="hljs-subst">&#123;Fore.WHITE&#125;</span>-%(message)s&#x27;</span><br>        self.error_formatter = ExceptionFormatter(colorize=<span class="hljs-literal">True</span>, backtrace=<span class="hljs-literal">True</span>, diagnose=<span class="hljs-literal">True</span>)<br><br>        self.FORMATS = &#123;<br>            logging.DEBUG: self.base_formatter.replace(<span class="hljs-string">&#x27;level_color&#x27;</span>, Fore.WHITE),<br>            logging.INFO: self.base_formatter.replace(<span class="hljs-string">&#x27;level_color&#x27;</span>, Fore.BLUE),<br>            logging.WARNING: self.base_formatter.replace(<span class="hljs-string">&#x27;level_color&#x27;</span>, Fore.YELLOW),<br>            logging.ERROR: self.base_formatter.replace(<span class="hljs-string">&#x27;level_color&#x27;</span>, Fore.RED),<br>            logging.CRITICAL: <span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;Fore.GREEN&#125;</span> %(asctime)s-<span class="hljs-subst">&#123;Fore.CYAN&#125;</span>[%(name)s]-|%(filename)s|%(funcName)s|%(lineno)d|<span class="hljs-subst">&#123;Style.BRIGHT&#125;</span><span class="hljs-subst">&#123;Fore.RED&#125;</span>[%(levelname)9s ]<span class="hljs-subst">&#123;Fore.CYAN&#125;</span>-%(message)s&#x27;</span><br>        &#125;<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">format</span>(<span class="hljs-params">self, record</span>):<br>        log_fmt = self.FORMATS.get(record.levelno)<br>        formatter = logging.Formatter(log_fmt, datefmt=self.datefmt)<br>        <span class="hljs-keyword">if</span> record.exc_info:<br>            record.exc_text = <span class="hljs-string">&#x27;&#x27;</span>.join(self.error_formatter.format_exception(*record.exc_info))<br>        <span class="hljs-keyword">return</span> formatter.<span class="hljs-built_in">format</span>(record)<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoguruExceptionFormatter</span>(logging.Formatter):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, *args, **kwargs</span>):<br>        <span class="hljs-built_in">super</span>(LoguruExceptionFormatter, self).__init__(*args, **kwargs)<br>        self.exception_formatter = ExceptionFormatter(colorize=<span class="hljs-literal">True</span>, backtrace=<span class="hljs-literal">True</span>, diagnose=<span class="hljs-literal">True</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">formatException</span>(<span class="hljs-params">self, exc_info</span>):<br>        result = self.exception_formatter.format_exception(*exc_info)<br>        <span class="hljs-built_in">print</span>(result)<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#x27;</span>.join([i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> result])<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DisableErrorFilter</span>(logging.Filter):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">filter</span>(<span class="hljs-params">self, record</span>):<br>        flag = <span class="hljs-literal">False</span> <span class="hljs-keyword">if</span> record.levelname == <span class="hljs-string">&quot;ERROR&quot;</span> <span class="hljs-keyword">else</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">return</span> flag<br><br><br>simple_format = <span class="hljs-string">&#x27;%(asctime)s %(levelname)s [%(filename)s:%(lineno)d] - %(message)s&#x27;</span><br>detail_format = <span class="hljs-string">&#x27;%(asctime)s [%(threadName)s:%(thread)d] [%(name)s:%(lineno)d] [%(levelname)s]- %(message)s&#x27;</span><br>verbose_format = <span class="hljs-string">&quot;%(asctime)s - %(process)d - %(processName)s - %(thread)d - %(threadName)s - %(levelname)s -:%(lineno)d] %(message)s&quot;</span><br><br>datefmt = <span class="hljs-string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span><br><br>log_config_dict = &#123;<br>    <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-number">1</span>,<br>    <span class="hljs-string">&quot;disable_existing_loggers&quot;</span>: <span class="hljs-literal">False</span>,<br>    <span class="hljs-string">&#x27;incremental&#x27;</span>: <span class="hljs-literal">False</span>,<br>    <span class="hljs-string">&#x27;filters&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;disable_error_filter&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;()&#x27;</span>: DisableErrorFilter,<br>        &#125;<br>    &#125;,<br>    <span class="hljs-string">&quot;formatters&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;simple&quot;</span>: &#123;<br>            <span class="hljs-string">&#x27;format&#x27;</span>: simple_format,<br>            <span class="hljs-string">&#x27;datefmt&#x27;</span>: datefmt,<br>        &#125;,<br>        <span class="hljs-string">&#x27;detail&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;format&#x27;</span>: detail_format,<br>            <span class="hljs-string">&#x27;datefmt&#x27;</span>: datefmt,<br>        &#125;,<br>        <span class="hljs-string">&#x27;verbose&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;format&#x27;</span>: verbose_format,<br>            <span class="hljs-string">&#x27;datefmt&#x27;</span>: datefmt,<br>        &#125;,<br>        <span class="hljs-string">&#x27;color_by_level&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;()&#x27;</span>: ColorByLevelSimple,<br>            <span class="hljs-string">&#x27;format&#x27;</span>: detail_format,<br>            <span class="hljs-string">&#x27;datefmt&#x27;</span>: datefmt,<br><br>        &#125;,<br>        <span class="hljs-string">&#x27;rich&#x27;</span>: &#123;<br>            <span class="hljs-string">&quot;format&quot;</span>: <span class="hljs-string">&quot;%(message)s&quot;</span><br>        &#125;,<br>        <span class="hljs-comment"># &quot;json&quot;: &#123;</span><br>        <span class="hljs-comment">#     &quot;()&quot;: jsonlogger.JsonFormatter,</span><br>        <span class="hljs-comment">#     # pip install python-json-logger      from pythonjsonlogger import jsonlogger</span><br>        <span class="hljs-comment">#     &quot;format&quot;: &quot;%(levelname)s %(asctime)s %(name)s %(filename)s %(lineno)s %(funcName)s %(message)s&quot;,</span><br>        <span class="hljs-comment"># &#125;,</span><br>    &#125;,<br><br>    <span class="hljs-string">&quot;handlers&quot;</span>: &#123;<br>        <span class="hljs-string">&quot;console&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;logging.StreamHandler&quot;</span>,<br>            <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>            <span class="hljs-string">&quot;formatter&quot;</span>: <span class="hljs-string">&quot;color_by_level&quot;</span>,<br>            <span class="hljs-string">&quot;stream&quot;</span>: <span class="hljs-string">&quot;ext://sys.stdout&quot;</span><br>        &#125;,<br>        <span class="hljs-string">&quot;rich&quot;</span>: &#123;<br>            <span class="hljs-string">&quot;class&quot;</span>: <span class="hljs-string">&quot;rich.logging.RichHandler&quot;</span>,<br>            <span class="hljs-string">&quot;formatter&quot;</span>: <span class="hljs-string">&quot;rich&quot;</span>,<br>            <span class="hljs-string">&quot;level&quot;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>            <span class="hljs-string">&quot;rich_tracebacks&quot;</span>: <span class="hljs-literal">True</span>,<br>            <span class="hljs-string">&quot;tracebacks_show_locals&quot;</span>: <span class="hljs-literal">True</span>,<br>            <span class="hljs-string">&quot;locals_max_length&quot;</span>: <span class="hljs-number">5</span>,<br>        &#125;,<br>        <span class="hljs-string">&#x27;info_log&#x27;</span>: &#123;<br>            <span class="hljs-string">&#x27;class&#x27;</span>: <span class="hljs-string">&#x27;logging_process.clog.MyRotatingFileHandler&#x27;</span>,<br>            <span class="hljs-string">&#x27;maxBytes&#x27;</span>: <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">512</span>,<br>            <span class="hljs-string">&#x27;backupCount&#x27;</span>: <span class="hljs-number">20</span>,<br>            <span class="hljs-string">&#x27;filename&#x27;</span>: os.path.join(LOG_DIR, <span class="hljs-string">&#x27;info.log&#x27;</span>),<br>            <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&#x27;INFO&#x27;</span>,<br>            <span class="hljs-string">&#x27;formatter&#x27;</span>: <span class="hljs-string">&#x27;color_by_level&#x27;</span>,<br>            <span class="hljs-string">&#x27;encoding&#x27;</span>: <span class="hljs-string">&#x27;utf-8&#x27;</span>,<br>            <span class="hljs-string">&#x27;filters&#x27;</span>: [<span class="hljs-string">&#x27;disable_error_filter&#x27;</span>],<br>            <span class="hljs-string">&#x27;delay&#x27;</span>: <span class="hljs-literal">True</span>,<br>        &#125;,<br>        <span class="hljs-string">&quot;error_log&quot;</span>: &#123;<br>            <span class="hljs-string">&#x27;class&#x27;</span>: <span class="hljs-string">&#x27;logging_process.clog.MyRotatingFileHandler&#x27;</span>,<br>            <span class="hljs-string">&#x27;maxBytes&#x27;</span>: <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">512</span>,<br>            <span class="hljs-string">&#x27;backupCount&#x27;</span>: <span class="hljs-number">10</span>,<br>            <span class="hljs-string">&#x27;filename&#x27;</span>: os.path.join(LOG_DIR, <span class="hljs-string">&#x27;error.log&#x27;</span>),<br>            <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&#x27;ERROR&#x27;</span>,<br>            <span class="hljs-string">&#x27;formatter&#x27;</span>: <span class="hljs-string">&#x27;color_by_level&#x27;</span>,<br>            <span class="hljs-string">&#x27;encoding&#x27;</span>: <span class="hljs-string">&#x27;utf-8&#x27;</span>,<br>            <span class="hljs-string">&#x27;delay&#x27;</span>: <span class="hljs-literal">True</span>,<br>        &#125;,<br><br>    &#125;,<br>    <span class="hljs-string">&#x27;loggers&#x27;</span>: &#123;<br>        <span class="hljs-string">&#x27;facebook&#x27;</span>: &#123;<br>            <span class="hljs-string">&quot;handlers&quot;</span>: [<span class="hljs-string">&#x27;info_log&#x27;</span>, <span class="hljs-string">&#x27;error_log&#x27;</span>],<br>            <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>            <span class="hljs-string">&quot;propagate&quot;</span>: <span class="hljs-literal">False</span>,<br>        &#125;,<br><br>    &#125;,<br>    <span class="hljs-string">&quot;root&quot;</span>: &#123;<br>        <span class="hljs-string">&#x27;handlers&#x27;</span>: [<span class="hljs-string">&#x27;rich&#x27;</span>],<br>        <span class="hljs-string">&#x27;level&#x27;</span>: <span class="hljs-string">&quot;INFO&quot;</span>,<br>    &#125;<br>&#125;<br><br>config.dictConfig(log_config_dict)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>logging</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/10/14/wg%E7%9B%B8%E5%85%B3%E7%94%9F%E6%80%81/"/>
    <url>/2024/10/14/wg%E7%9B%B8%E5%85%B3%E7%94%9F%E6%80%81/</url>
    
    <content type="html"><![CDATA[<p>monius/docker-warp-socks  docker 中运行wg 暴露socks5 代理<br>pufferffish/wireproxy  同上<br>vx3r/wg-gen-web   wg 公网服务器配置工具<br>wg-easy/wg-easy  同上<br>place1/wg-access-server  同上</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run --privileged --restart=always -itd --name warp_socks_passwd -e SOCK_USER=monius -e SOCK_PWD=passwd --cap-add NET_ADMIN --cap-add SYS_MODULE --sysctl net.ipv6.conf.all.disable_ipv6=0 --sysctl net.ipv4.conf.all.src_valid_mark=1 -v /lib/modules:/lib/modules -p 9091:9091 monius/docker-warp-socks<br></code></pre></td></tr></table></figure><p>在国外的vps 上跑不起来<br>在orbStack 上也跑不起来</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker run -d \<br>  --name=wg-easy \<br>  -e WG_HOST=47.123.5.13 \<br>  -e PASSWORD=passwd123\<br>  -e WG_DEFAULT_ADDRESS=10.0.8.x\<br>  -e WG_DEFAULT_DNS=114.114.114.114\<br>  -e WG_ALLOWED_IPS=10.0.8.0/24）\<br>  -e WG_PERSISTENT_KEEPALIVE=25\<br>  -v ~/.wg-easy:/etc/wireguard \<br>  -p 51820:51820/udp \<br>  -p 51821:51821/tcp \<br>  --cap-add=NET_ADMIN \<br>  --cap-add=SYS_MODULE \<br>  --sysctl=<span class="hljs-string">&quot;net.ipv4.conf.all.src_valid_mark=1&quot;</span> \<br>  --sysctl=<span class="hljs-string">&quot;net.ipv4.ip_forward=1&quot;</span> \<br>  --restart unless-stopped \<br>  weejewel/wg-easy<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>转载- frida检测及其应对方法</title>
    <link href="/2024/10/14/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91--frida%E6%A3%80%E6%B5%8B%E5%8F%8A%E5%85%B6%E5%BA%94%E5%AF%B9%E6%96%B9%E6%B3%95/"/>
    <url>/2024/10/14/%E3%80%90%E8%BD%AC%E8%BD%BD%E3%80%91--frida%E6%A3%80%E6%B5%8B%E5%8F%8A%E5%85%B6%E5%BA%94%E5%AF%B9%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="1-检测原理"><a href="#1-检测原理" class="headerlink" title="1.检测原理"></a>1.检测原理</h1><h2 id="1-1-进程名检测"><a href="#1-1-进程名检测" class="headerlink" title="1.1 进程名检测"></a>1.1 进程名检测</h2><p>当你的手机上启动了frida-server，在当前app的进程中就有相应的痕迹。</p><p><img src="https://s2.loli.net/2024/03/05/f4igulUQ7Wh3rkx.png" alt="image-20230308110400132"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkRunningProcesses</span><span class="hljs-params">()</span> &#123;<br>  <span class="hljs-type">boolean</span> <span class="hljs-variable">returnValue</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>  <span class="hljs-comment">// Get currently running application processes</span><br>  List&lt;RunningServiceInfo&gt; list = manager.getRunningServices(<span class="hljs-number">300</span>);<br>  <span class="hljs-keyword">if</span>(list != <span class="hljs-literal">null</span>)&#123;<br>    String tempName;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;list.size();++i)&#123;<br>      tempName = list.get(i).process;<br>      <span class="hljs-keyword">if</span>(tempName.contains(<span class="hljs-string">&quot;frida-server&quot;</span>)) &#123;<br>        returnValue = <span class="hljs-literal">true</span>;<br>      &#125;<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> returnValue;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>如何绕过？</strong></p><p>修改下文件名的名称即可，例如：<code>frida-server-16.0.1-android-arm64</code> 改成 <code>fdd</code></p><p><img src="https://s2.loli.net/2024/03/05/8qOvVJfHne19Lir.png" alt="image-20230308110502818"></p><h2 id="1-2-端口监测"><a href="#1-2-端口监测" class="headerlink" title="1.2 端口监测"></a>1.2 端口监测</h2><p>frida默认使用的端口是 27042，有app就会去监测是否开放了此端口。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c">boolean <span class="hljs-title function_">is_frida_server_listening</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">sockaddr_in</span> <span class="hljs-title">sa</span>;</span><br>    <span class="hljs-built_in">memset</span>(&amp;sa, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(sa));<br>    sa.sin_family = AF_INET;<br>    sa.sin_port = htons(<span class="hljs-number">27042</span>);<br>    inet_aton(<span class="hljs-string">&quot;127.0.0.1&quot;</span>, &amp;(sa.sin_addr));<br>    <span class="hljs-type">int</span> sock = socket(AF_INET , SOCK_STREAM , <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">if</span> (connect(sock , (<span class="hljs-keyword">struct</span> sockaddr*)&amp;sa , <span class="hljs-keyword">sizeof</span> sa) != <span class="hljs-number">-1</span>) &#123;<br>      <span class="hljs-comment">/* Frida server detected. Do something… */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>如何绕过？</strong></p><p>让frida-server在运行时，更换下端口即可。【<strong>注意</strong>：建议使用 frida-server-14.2.18 】</p><ul><li><p>在手段端运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./fdd -l 0.0.0.0:8877<br></code></pre></td></tr></table></figure></li><li><p>在电脑上</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs stylus">端口转发<br>adb forward tcp:<span class="hljs-number">8877</span> tcp:<span class="hljs-number">8877</span><br><br>脚本运行：<br>    frida -H <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">8877</span> -l  jd<span class="hljs-selector-class">.js</span>   -f<br>frida -H <span class="hljs-number">127.0</span>.<span class="hljs-number">0.1</span>:<span class="hljs-number">8877</span> -l  jd<span class="hljs-selector-class">.js</span>  -f com<span class="hljs-selector-class">.che168</span><span class="hljs-selector-class">.autotradercloud</span> <span class="hljs-attr">--no-pause</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> frida<br><span class="hljs-keyword">import</span> sys<br><br>str_host = <span class="hljs-string">&quot;127.0.0.1:8877&quot;</span><br>manager = frida.get_device_manager()<br>rdev = manager.add_remote_device(str_host)<br>session = rdev.attach(<span class="hljs-string">&quot;com.che168.autotradercloud&quot;</span>)<br><br>scr = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">Java.perform(function () &#123;</span><br><span class="hljs-string">    console.log(&quot;加载&quot;);</span><br><span class="hljs-string">&#125;);</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>script = session.create_script(scr)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">on_message</span>(<span class="hljs-params">message, data</span>):<br>    <span class="hljs-built_in">print</span>(message, data)<br><br><br>script.on(<span class="hljs-string">&quot;message&quot;</span>, on_message)<br>script.load()<br>sys.stdin.read()<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> frida<br><span class="hljs-keyword">import</span> sys<br><br>str_host = <span class="hljs-string">&quot;127.0.0.1:8877&quot;</span><br>manager = frida.get_device_manager()<br>rdev = manager.add_remote_device(str_host)<br><span class="hljs-comment"># rdev = frida.get_remote_device()</span><br>pid = rdev.spawn([<span class="hljs-string">&quot;com.che168.autotradercloud&quot;</span>])<br>session = rdev.attach(pid)<br><br>scr = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    Java.perform(function () &#123;</span><br><span class="hljs-string"></span><br><span class="hljs-string">    &#125;);</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>script = session.create_script(scr)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">on_message</span>(<span class="hljs-params">message, data</span>):<br>    <span class="hljs-built_in">print</span>(message, data)<br><br><br>script.on(<span class="hljs-string">&quot;message&quot;</span>, on_message)<br>script.load()<br>rdev.resume(pid)<br>sys.stdin.read()<br></code></pre></td></tr></table></figure></li></ul><h2 id="1-3-D-Bus协议通信"><a href="#1-3-D-Bus协议通信" class="headerlink" title="1.3 D-Bus协议通信"></a>1.3 D-Bus协议通信</h2><p>frida-server使用D-Bus网络协议通信，有些app就会遍历内部所有端口，向端口发送消息，如果端口回复了<code>REJECT</code>则表示此端口就是 frida-server，也证明了你在使用frida进行调试。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span> ; i &lt;= <span class="hljs-number">65535</span> ; i++) &#123;<br>    sock = socket(AF_INET , SOCK_STREAM , <span class="hljs-number">0</span>);<br>    sa.sin_port = htons(i);<br>    <span class="hljs-keyword">if</span> (connect(sock , (<span class="hljs-keyword">struct</span> sockaddr*)&amp;sa , <span class="hljs-keyword">sizeof</span> sa) != <span class="hljs-number">-1</span>) &#123;<br>        __android_log_print(ANDROID_LOG_VERBOSE, APPNAME,  <span class="hljs-string">&quot;FRIDA DETECTION [1]: Open Port: %d&quot;</span>, i);<br>        <span class="hljs-built_in">memset</span>(res, <span class="hljs-number">0</span> , <span class="hljs-number">7</span>);<br>        <span class="hljs-comment">// send a D-Bus AUTH message. Expected answer is “REJECT&quot;</span><br>        send(sock, <span class="hljs-string">&quot;\x00&quot;</span>, <span class="hljs-number">1</span>, <span class="hljs-literal">NULL</span>);<br>        send(sock, <span class="hljs-string">&quot;AUTH\r\n&quot;</span>, <span class="hljs-number">6</span>, <span class="hljs-literal">NULL</span>);<br>        usleep(<span class="hljs-number">100</span>);<br>        <span class="hljs-keyword">if</span> (ret = recv(sock, res, <span class="hljs-number">6</span>, MSG_DONTWAIT) != <span class="hljs-number">-1</span>) &#123;<br>            <span class="hljs-comment">// 判断是否返回 REJECT</span><br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(res, <span class="hljs-string">&quot;REJECT&quot;</span>) == <span class="hljs-number">0</span>) &#123;<br>               <span class="hljs-comment">/* Frida server detected. Do something… */</span><br>            &#125;<br>        &#125;<br>    &#125;<br>    close(sock);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>如何绕过呢？</strong></p><p>可以Hook C语言中用于  strstr 和  strcmp 方法，如果出现 <code>REJECT</code> 则返回</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">replace_str</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> pt_strstr = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libc.so&quot;</span>, <span class="hljs-string">&#x27;strstr&#x27;</span>);<br>    <span class="hljs-keyword">var</span> pt_strcmp = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libc.so&quot;</span>, <span class="hljs-string">&#x27;strcmp&#x27;</span>);<br><br><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(pt_strstr, &#123;<br>        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>            <span class="hljs-keyword">var</span> str1 = args[<span class="hljs-number">0</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">var</span> str2 = args[<span class="hljs-number">1</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">if</span> (str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;REJECT&quot;</span>) !== -<span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-comment">//console.log(&quot;strcmp--&gt;&quot;, str1, str2);</span><br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span> = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span>) &#123;<br>                retval.<span class="hljs-title function_">replace</span>(<span class="hljs-number">0</span>);<br>            &#125;<br>        &#125;<br>    &#125;);<br><br><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(pt_strcmp, &#123;<br>        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>            <span class="hljs-keyword">var</span> str1 = args[<span class="hljs-number">0</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">var</span> str2 = args[<span class="hljs-number">1</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">if</span> (str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;REJECT&quot;</span>) !== -<span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-comment">//console.log(&quot;strcmp--&gt;&quot;, str1, str2);</span><br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span> = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span>) &#123;<br>                retval.<span class="hljs-title function_">replace</span>(<span class="hljs-number">0</span>);<br>            &#125;<br>        &#125;<br>    &#125;)<br><br>&#125;<br><br><span class="hljs-title function_">replace_str</span>();<br></code></pre></td></tr></table></figure><h2 id="1-4-maps文件"><a href="#1-4-maps文件" class="headerlink" title="1.4 maps文件"></a>1.4 maps文件</h2><p>当APP在手机上运行时，在  <code>/proc/进程ID/...</code> 目录下会创建很多跟app运行相关的文件。</p><p>先启动起来APP，然后查看他的进程ID：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> frida<br><span class="hljs-keyword">import</span> requests<br><br><span class="hljs-comment"># 获取设备信息</span><br>rdev = frida.get_remote_device()<br><br><span class="hljs-comment"># 获取在前台运行的APP</span><br>front_app = rdev.get_frontmost_application()<br><span class="hljs-built_in">print</span>(front_app)<br><br><span class="hljs-comment"># Application(identifier=&quot;com.che168.autotradercloud&quot;, name=&quot;车智赢+&quot;, pid=24606, parameters=&#123;&#125;)</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/03/05/q4X5VcvSjknB2Gd.png" alt="image-20230308135900353"></p><p>然后就可以通过adb进入目录查看生成相应的文件：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">ps</span> -A|<span class="hljs-keyword">grep</span> <span class="hljs-keyword">com</span>.che168.autotradercloud<br><span class="hljs-keyword">cd</span> /proc/<span class="hljs-number">24606</span>/<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/03/05/jW4qMtKeBCd6wyR.png" alt="image-20230308140013901"></p><p>这个maps文件中存储的是APP运行时加载的依赖：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">cat</span> maps<br><span class="hljs-keyword">cat</span> maps |<span class="hljs-keyword">grep</span> native-lib<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/03/05/hWvmN4lLknGsQdX.png" alt="image-20230308140818820"></p><p>当启动frida后，在maps文件中就会存在 <code>frida-agent-64.so</code>、<code>frida-agent-32.so</code>  文件。</p><p><img src="https://s2.loli.net/2024/03/05/JEj5fUgW6uyDVRt.png" alt="image-20230308141249527"></p><p>所以，在一些APP中就会去读取maps文件的内容，看看是否有frida来监测是否有被frida调试。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> line[<span class="hljs-number">512</span>];<br>FILE* fp;<br>fp = fopen(<span class="hljs-string">&quot;/proc/self/maps&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>);<br><span class="hljs-keyword">if</span> (fp) &#123;<br>    <span class="hljs-keyword">while</span> (fgets(line, <span class="hljs-number">512</span>, fp)) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strstr</span>(line, <span class="hljs-string">&quot;frida&quot;</span>)) &#123;<br>            <span class="hljs-comment">/* Evil library is loaded. Do something… */</span><br>        &#125;<br>    &#125;<br>    fclose(fp);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>       <span class="hljs-comment">/* Error opening /proc/self/maps. If this happens, something is off. */</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>如何绕过呢？</strong></p><p>Hook C语言中的 strstr    strcmp 来进行判断  <code>frida-agent-64.so</code> 或 <code>re.frida.server</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">replace_str_maps</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> pt_strstr = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libc.so&quot;</span>, <span class="hljs-string">&#x27;strstr&#x27;</span>);<br>    <span class="hljs-keyword">var</span> pt_strcmp = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libc.so&quot;</span>, <span class="hljs-string">&#x27;strcmp&#x27;</span>);<br><br><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(pt_strstr, &#123;<br>        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>            <span class="hljs-keyword">var</span> str1 = args[<span class="hljs-number">0</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">var</span> str2 = args[<span class="hljs-number">1</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">if</span> (str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;REJECT&quot;</span>) !== -<span class="hljs-number">1</span>  || str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;frida&quot;</span>) !== -<span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span> = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span>) &#123;<br>                retval.<span class="hljs-title function_">replace</span>(<span class="hljs-number">0</span>);<br>            &#125;<br>        &#125;<br>    &#125;);<br><br><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(pt_strcmp, &#123;<br>        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>            <span class="hljs-keyword">var</span> str1 = args[<span class="hljs-number">0</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">var</span> str2 = args[<span class="hljs-number">1</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">if</span> (str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;REJECT&quot;</span>) !== -<span class="hljs-number">1</span>  || str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;frida&quot;</span>) !== -<span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span> = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span>) &#123;<br>                retval.<span class="hljs-title function_">replace</span>(<span class="hljs-number">0</span>);<br>            &#125;<br>        &#125;<br>    &#125;)<br><br>&#125;<br><br><span class="hljs-title function_">replace_str</span>();<br></code></pre></td></tr></table></figure><h2 id="1-5-task目录"><a href="#1-5-task目录" class="headerlink" title="1.5 task目录"></a>1.5 task目录</h2><p><img src="https://s2.loli.net/2024/03/05/SOW3bnJEYF1pjKe.png" alt="image-20230308143148838"></p><p>可以在运行frida和未运行frida时，进行对比，看看frida的启动创建了哪些线程。</p><ul><li>未运行frida<br><img src="https://s2.loli.net/2024/03/05/bfOh89MPnIp3vQB.png" alt="image-20230308143748368"></li><li>运行frida<br><img src="https://s2.loli.net/2024/03/05/c3Lg9t18uAaYhVl.png" alt="image-20230308143828697"></li></ul><p><img src="https://s2.loli.net/2024/03/05/M84p3aJDFRoNIwY.png" alt="image-20230308144040636"></p><p>对上述的线程ID进行比较，发现由于frida的运行新增了的线程ID：</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">&#123;&#x27;<span class="hljs-number">2616</span>3&#x27;, &#x27;<span class="hljs-number">2616</span>4&#x27;, &#x27;<span class="hljs-number">2616</span>6&#x27;, &#x27;<span class="hljs-number">2616</span>7&#x27;, &#x27;<span class="hljs-number">2616</span>5&#x27;&#125;<br></code></pre></td></tr></table></figure><p>在某些app中就会去读取 <code>/proc/stask/线程ID/status</code> 文件，如果是运行frida产生的，则进行反调试。</p><p>例如：<code>gmain/gdbus/gum-js-loop/pool-frida</code>等</p><p><img src="https://s2.loli.net/2024/03/05/BH8XmMv4F6lEfZz.png" alt="image-20230308144442592"></p><p>如何绕过？</p><p>Hook C语言中的 strstr    strcmp 来进行判断 <code>gmain</code> 、<code>gdbus</code>等字符串。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">replace_str</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> pt_strstr = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libc.so&quot;</span>, <span class="hljs-string">&#x27;strstr&#x27;</span>);<br>    <span class="hljs-keyword">var</span> pt_strcmp = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libc.so&quot;</span>, <span class="hljs-string">&#x27;strcmp&#x27;</span>);<br><br><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(pt_strstr, &#123;<br>        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>            <span class="hljs-keyword">var</span> str1 = args[<span class="hljs-number">0</span>].<span class="hljs-title function_">readCString</span>();<br><br>            <span class="hljs-keyword">var</span> str2 = args[<span class="hljs-number">1</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">if</span> (str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;tmp&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;frida&quot;</span>) !== -<span class="hljs-number">1</span> || <br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gum-js-loop&quot;</span>) !== -<span class="hljs-number">1</span> || <br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gmain&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gdbus&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;pool-frida&quot;</span>) !== -<span class="hljs-number">1</span>||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;linjector&quot;</span>) !== -<span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-comment">//console.log(&quot;strcmp--&gt;&quot;, str1, str2);</span><br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span> = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span>) &#123;<br>                retval.<span class="hljs-title function_">replace</span>(<span class="hljs-number">0</span>);<br>            &#125;<br>        &#125;<br>    &#125;);<br><br><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(pt_strcmp, &#123;<br>        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>            <span class="hljs-keyword">var</span> str1 = args[<span class="hljs-number">0</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">var</span> str2 = args[<span class="hljs-number">1</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">if</span> (str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;tmp&quot;</span>) !== -<span class="hljs-number">1</span> || <br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;frida&quot;</span>) !== -<span class="hljs-number">1</span> || <br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gum-js-loop&quot;</span>) !== -<span class="hljs-number">1</span> || <br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gmain&quot;</span>) !== -<span class="hljs-number">1</span> || <br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gdbus&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;pool-frida&quot;</span>) !== -<span class="hljs-number">1</span>|| <br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;linjector&quot;</span>) !== -<span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-comment">//console.log(&quot;strcmp--&gt;&quot;, str1, str2);</span><br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span> = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span>) &#123;<br>                retval.<span class="hljs-title function_">replace</span>(<span class="hljs-number">0</span>);<br>            &#125;<br>        &#125;<br>    &#125;)<br><br>&#125;<br><br><span class="hljs-title function_">replace_str</span>();<br><br></code></pre></td></tr></table></figure><h2 id="1-6-fd目录"><a href="#1-6-fd目录" class="headerlink" title="1.6 fd目录"></a>1.6 fd目录</h2><p>记录app都打开的了哪些文件。</p><p><img src="https://s2.loli.net/2024/03/05/cSV4bKsXlxIy7Jk.png" alt="image-20230308153508092"></p><p><img src="https://s2.loli.net/2024/03/05/cFC3s2H4vj8ZDeq.png" alt="image-20230308153521696"></p><h2 id="1-7-frida-server启动"><a href="#1-7-frida-server启动" class="headerlink" title="1.7 frida-server启动"></a>1.7 frida-server启动</h2><p>当frida-server启动时，在 <code>/data/local/tmp/</code>目录下会生成一个文件夹并且会生成一下带有frida的特征。</p><p><img src="https://s2.loli.net/2024/03/05/XqMBgzoQe1mai4R.png" alt="image-20230308152327490"></p><p><strong>如何绕过？</strong></p><p>使用将 <code>hluda-server</code>，在运行frida之后就不会出现frida等字眼了。</p><p><img src="https://s2.loli.net/2024/03/05/6fEYay17XVkxWIM.png" alt="image-20230308164214258"></p><p>当使用了 <code>hluda-server</code>后，由于 <code>/data/local/tmp/</code> 目录下文件夹和文件的名称改变了，所以在使用了<code>hluda-server</code>后相当于</p><p>解决了：</p><ul><li>fd目录问题， <code>/data/local/tmp/re.frida.server/linjector</code></li><li>maps文件问题，<code>/data/local/tmp/re.frida.server/frida-agent-64.so</code></li></ul><p>未解决：</p><ul><li>task目录问题，Hook： <code>gmain</code> 、<code>gdbus</code>等</li><li>D-Bus协议问题，Hook：<code>REJECT</code></li><li>端口问题，切换端口</li><li>进程名问题，更换文件名</li></ul><h1 id="2-实战案例"><a href="#2-实战案例" class="headerlink" title="2.实战案例"></a>2.实战案例</h1><h2 id="2-1-frida版本"><a href="#2-1-frida版本" class="headerlink" title="2.1 frida版本"></a>2.1 frida版本</h2><p>在逆向时，请务必使用  <code>hluda-server-14.2.18</code> + <code>python3.8</code> 来对常见frida的特征进行隐藏。</p><p><strong>注意：其他高版本不好使。</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">pip</span> install frida==<span class="hljs-number">14</span>.<span class="hljs-number">2</span>.<span class="hljs-number">18</span><br><span class="hljs-attribute">pip</span> install frida-tools==<span class="hljs-number">9</span>.<span class="hljs-number">2</span>.<span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/03/05/i1OAU9HuKNCqVkY.png" alt="image-20230922164243197"></p><p>安装过程中如果需要用到下载egg相关文件，请点击：</p><p><a href="https://pypi.doubanio.com/simple/frida/">https://pypi.doubanio.com/simple/frida/</a></p><p><img src="https://s2.loli.net/2024/03/05/AnoF3QcY4ErLHaM.png" alt="image-20230313213113367"></p><h2 id="2-2-第一类：识货、得物、唯品会等"><a href="#2-2-第一类：识货、得物、唯品会等" class="headerlink" title="2.2 第一类：识货、得物、唯品会等"></a>2.2 第一类：识货、得物、唯品会等</h2><p>代表APP有：识货、得物、唯品会、豆瓣、豆瓣、雷速体育</p><h3 id="1-加载so"><a href="#1-加载so" class="headerlink" title="1.加载so"></a>1.加载so</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> dlopen = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;dlopen&quot;</span>);<br><span class="hljs-keyword">var</span> android_dlopen_ext = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;android_dlopen_ext&quot;</span>);<br><br><span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(dlopen, &#123;<br>    <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>        <span class="hljs-keyword">var</span> path_ptr = args[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">var</span> path = <span class="hljs-title function_">ptr</span>(path_ptr).<span class="hljs-title function_">readCString</span>();<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;[dlopen:]&quot;</span>, path);<br>    &#125;,<br>    <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br><br>    &#125;<br>&#125;);<br><br><span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(android_dlopen_ext, &#123;<br>    <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>        <span class="hljs-keyword">var</span> path_ptr = args[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">var</span> path = <span class="hljs-title function_">ptr</span>(path_ptr).<span class="hljs-title function_">readCString</span>();<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;[dlopen_ext:]&quot;</span>, path);<br>    &#125;,<br>    <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br><br>    &#125;<br>&#125;);<br><br><br><span class="hljs-comment">// frida -U -f com.hupu.shihuo -l load_so.js --no-pause</span><br><span class="hljs-comment">// frida -U -f com.shizhuang.duapp -l load_so.js --no-pause</span><br><span class="hljs-comment">// frida -U -f com.achievo.vipshop -l load_so.js --no-pause</span><br><span class="hljs-comment">// frida -U -f com.leisu.sports -l load_so.js --no-pause</span><br><span class="hljs-comment">// frida -U -f com.douban.frodo -l load_so.js --no-pause</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/03/05/eZt3aqNuywxcVlU.png" alt="image-20230313215530556"></p><h3 id="2-删除so【搞定】"><a href="#2-删除so【搞定】" class="headerlink" title="2.删除so【搞定】"></a>2.删除so【搞定】</h3><p>先尝试删除可能的so文件，看看app是否可正常运行。</p><p>有些app的监测是在一个单独的so文件中，但删除后业务功能不受任何影响。</p><ul><li><p>识货、得物、唯品会，<strong>删除</strong>后可以绕过。</p></li><li><p>豆瓣、雷速体育，<strong>删除</strong>后<strong>无法正常</strong>运行（闪退或白屏）</p></li></ul><h3 id="3-尝试Hook关键词【可选】"><a href="#3-尝试Hook关键词【可选】" class="headerlink" title="3.尝试Hook关键词【可选】"></a>3.尝试Hook关键词【可选】</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">replace_str</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> pt_strstr = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libc.so&quot;</span>, <span class="hljs-string">&#x27;strstr&#x27;</span>);<br>    <span class="hljs-keyword">var</span> pt_strcmp = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libc.so&quot;</span>, <span class="hljs-string">&#x27;strcmp&#x27;</span>);<br><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(pt_strstr, &#123;<br>        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>            <span class="hljs-keyword">var</span> str1 = args[<span class="hljs-number">0</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">var</span> str2 = args[<span class="hljs-number">1</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">if</span> (<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;REJECT&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;tmp&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;frida&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gum-js-loop&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gmain&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;linjector&quot;</span>) !== -<span class="hljs-number">1</span><br>            ) &#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;strstr--&gt;&quot;</span>, str1, str2);<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span> = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span>) &#123;<br>                retval.<span class="hljs-title function_">replace</span>(<span class="hljs-number">0</span>);<br>            &#125;<br>        &#125;<br>    &#125;);<br><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(pt_strcmp, &#123;<br>        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>            <span class="hljs-keyword">var</span> str1 = args[<span class="hljs-number">0</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">var</span> str2 = args[<span class="hljs-number">1</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">if</span> (<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;REJECT&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;tmp&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;frida&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gum-js-loop&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gmain&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;linjector&quot;</span>) !== -<span class="hljs-number">1</span><br>            ) &#123;<br>                <span class="hljs-comment">//console.log(&quot;strcmp--&gt;&quot;, str1, str2);</span><br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span> = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span>) &#123;<br>                retval.<span class="hljs-title function_">replace</span>(<span class="hljs-number">0</span>);<br>            &#125;<br>        &#125;<br>    &#125;)<br><br>&#125;<br><br><span class="hljs-title function_">replace_str</span>();<br><br><span class="hljs-comment">// frida -U  -l 5.绕过.js -f com.hupu.shihuo --no-pause</span><br><span class="hljs-comment">// frida -U  -l 5.绕过.js -f com.shizhuang.duapp --no-pause</span><br><span class="hljs-comment">// frida -U  -l 5.绕过.js -f com.achievo.vipshop --no-pause</span><br><span class="hljs-comment">// frida -U  -l 5.绕过.js -f com.leisu.sports --no-pause</span><br><span class="hljs-comment">// frida -U  -l hook.js -f com.leisu.sports --no-pause</span><br><span class="hljs-comment">// frida -U  -l hook.js -f com.douban.frodo --no-pause</span><br></code></pre></td></tr></table></figure><h2 id="2-3-第二类：e充电"><a href="#2-3-第二类：e充电" class="headerlink" title="2.3 第二类：e充电"></a>2.3 第二类：e充电</h2><p>代表APP有：e充电（含ROOT监测）</p><h3 id="1-加载so-1"><a href="#1-加载so-1" class="headerlink" title="1.加载so"></a>1.加载so</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> dlopen = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;dlopen&quot;</span>);<br><span class="hljs-keyword">var</span> android_dlopen_ext = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;android_dlopen_ext&quot;</span>);<br><br><span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(dlopen, &#123;<br>    <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>        <span class="hljs-keyword">var</span> path_ptr = args[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">var</span> path = <span class="hljs-title function_">ptr</span>(path_ptr).<span class="hljs-title function_">readCString</span>();<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;[dlopen:]&quot;</span>, path);<br>    &#125;,<br>    <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br><br>    &#125;<br>&#125;);<br><br><span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(android_dlopen_ext, &#123;<br>    <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>        <span class="hljs-keyword">var</span> path_ptr = args[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">var</span> path = <span class="hljs-title function_">ptr</span>(path_ptr).<span class="hljs-title function_">readCString</span>();<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;[dlopen_ext:]&quot;</span>, path);<br>    &#125;,<br>    <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br><br>    &#125;<br>&#125;);<br><br><br><span class="hljs-comment">// frida -U -f  com.sgcc.evs.echarge -l 3.加载so.js --no-pause</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/03/05/wdK8u5qXhgSCpae.png" alt="image-20230313220627675"></p><h3 id="2-删除so【报错】"><a href="#2-删除so【报错】" class="headerlink" title="2.删除so【报错】"></a>2.删除so【报错】</h3><p>删除so文件后，无法运行。</p><h3 id="3-尝试Hook关键词【搞定】"><a href="#3-尝试Hook关键词【搞定】" class="headerlink" title="3.尝试Hook关键词【搞定】"></a>3.尝试Hook关键词【搞定】</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">replace_str</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> pt_strstr = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libc.so&quot;</span>, <span class="hljs-string">&#x27;strstr&#x27;</span>);<br>    <span class="hljs-keyword">var</span> pt_strcmp = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libc.so&quot;</span>, <span class="hljs-string">&#x27;strcmp&#x27;</span>);<br><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(pt_strstr, &#123;<br>        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>            <span class="hljs-keyword">var</span> str1 = args[<span class="hljs-number">0</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">var</span> str2 = args[<span class="hljs-number">1</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">if</span> (<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;REJECT&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;tmp&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;frida&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gum-js-loop&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gmain&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;linjector&quot;</span>) !== -<span class="hljs-number">1</span><br>            ) &#123;<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;strstr--&gt;&quot;</span>, str1, str2);<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span> = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span>) &#123;<br>                retval.<span class="hljs-title function_">replace</span>(<span class="hljs-number">0</span>);<br>            &#125;<br>        &#125;<br>    &#125;);<br><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(pt_strcmp, &#123;<br>        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>            <span class="hljs-keyword">var</span> str1 = args[<span class="hljs-number">0</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">var</span> str2 = args[<span class="hljs-number">1</span>].<span class="hljs-title function_">readCString</span>();<br>            <span class="hljs-keyword">if</span> (<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;REJECT&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;tmp&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;frida&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gum-js-loop&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;gmain&quot;</span>) !== -<span class="hljs-number">1</span> ||<br>                str2.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;linjector&quot;</span>) !== -<span class="hljs-number">1</span><br>            ) &#123;<br>                <span class="hljs-comment">//console.log(&quot;strcmp--&gt;&quot;, str1, str2);</span><br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span> = <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">hook</span>) &#123;<br>                retval.<span class="hljs-title function_">replace</span>(<span class="hljs-number">0</span>);<br>            &#125;<br>        &#125;<br>    &#125;)<br><br>&#125;<br><br><span class="hljs-title function_">replace_str</span>();<br><br><span class="hljs-comment">// frida -U  -l hook.js -f com.sgcc.evs.echarge --no-pause</span><br></code></pre></td></tr></table></figure><h2 id="2-4-第三类：安吉星、ibox、贵旅优品"><a href="#2-4-第三类：安吉星、ibox、贵旅优品" class="headerlink" title="2.4 第三类：安吉星、ibox、贵旅优品"></a>2.4 第三类：安吉星、ibox、贵旅优品</h2><p>代表APP有：安吉星（含ROOT检测）、ibox（含ROOT检测）、贵旅优品（含ROOT检测）</p><h3 id="1-加载so-2"><a href="#1-加载so-2" class="headerlink" title="1.加载so"></a>1.加载so</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> dlopen = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;dlopen&quot;</span>);<br><span class="hljs-keyword">var</span> android_dlopen_ext = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&quot;android_dlopen_ext&quot;</span>);<br><br><span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(dlopen, &#123;<br>    <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>        <span class="hljs-keyword">var</span> path_ptr = args[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">var</span> path = <span class="hljs-title function_">ptr</span>(path_ptr).<span class="hljs-title function_">readCString</span>();<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;[dlopen:]&quot;</span>, path);<br>    &#125;,<br>    <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br><br>    &#125;<br>&#125;);<br><br><span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(android_dlopen_ext, &#123;<br>    <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>        <span class="hljs-keyword">var</span> path_ptr = args[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">var</span> path = <span class="hljs-title function_">ptr</span>(path_ptr).<span class="hljs-title function_">readCString</span>();<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;[dlopen_ext:]&quot;</span>, path);<br>    &#125;,<br>    <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br><br>    &#125;<br>&#125;);<br><br><br><span class="hljs-comment">// frida -U -f com.shanghaionstar -l load_so.js --no-pause</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/03/05/txHewCIrVPiv4K5.png" alt="image-20230313220953748"></p><h3 id="2-pthread-create【搞定】"><a href="#2-pthread-create【搞定】" class="headerlink" title="2.pthread_create【搞定】"></a>2.pthread_create【搞定】</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">hook_pthread_create</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> pt_create_func = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libc.so&quot;</span>, <span class="hljs-string">&#x27;pthread_create&#x27;</span>);<br><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(pt_create_func, &#123;<br>        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>            <span class="hljs-comment">// 是那个so文件调用我，创建线程</span><br>            <span class="hljs-keyword">var</span> so_name = <span class="hljs-title class_">Process</span>.<span class="hljs-title function_">findModuleByAddress</span>(args[<span class="hljs-number">2</span>]).<span class="hljs-property">name</span>;<br>            <span class="hljs-keyword">if</span> (so_name.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;libDexHelper.so&quot;</span>) != -<span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">replace</span>(args[<span class="hljs-number">2</span>], <span class="hljs-keyword">new</span> <span class="hljs-title class_">NativeCallback</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;replace success&#x27;</span>);<br>                        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>                    &#125;, <span class="hljs-string">&#x27;void&#x27;</span>, [<span class="hljs-string">&quot;void&quot;</span>]));<br>                &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br><br>                &#125;<br><br>            &#125;<br>        &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>        &#125;<br>    &#125;)<br>&#125;<br><br><span class="hljs-title function_">hook_pthread_create</span>();<br><br><span class="hljs-comment">// frida -U  -l pthread_create.js -f  com.shanghaionstar --no-pause</span><br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">hook_pthread_create</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> pt_create_func = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libc.so&quot;</span>, <span class="hljs-string">&#x27;pthread_create&#x27;</span>);<br><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(pt_create_func, &#123;<br>        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>            <span class="hljs-comment">// 是那个so文件调用我，创建线程</span><br>            <span class="hljs-keyword">var</span> so_name = <span class="hljs-title class_">Process</span>.<span class="hljs-title function_">findModuleByAddress</span>(args[<span class="hljs-number">2</span>]).<span class="hljs-property">name</span>;<br>            <span class="hljs-keyword">if</span> (so_name.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;libDexHelper.so&quot;</span>) != -<span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">replace</span>(args[<span class="hljs-number">2</span>], <span class="hljs-keyword">new</span> <span class="hljs-title class_">NativeCallback</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;replace success&#x27;</span>);<br>                        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>                    &#125;, <span class="hljs-string">&#x27;void&#x27;</span>, [<span class="hljs-string">&quot;void&quot;</span>]));<br>                &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br><br>                &#125;<br><br>            &#125;<br>        &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>        &#125;<br>    &#125;)<br>&#125;<br><br><span class="hljs-title function_">hook_pthread_create</span>();<br><br><span class="hljs-comment">// frida -U  -l pthread_create.js -f com.box.art  --no-pause</span><br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">hook_pthread_create</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> pt_create_func = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libc.so&quot;</span>, <span class="hljs-string">&#x27;pthread_create&#x27;</span>);<br><br>    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(pt_create_func, &#123;<br>        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>) &#123;<br>            <span class="hljs-comment">// 是那个so文件调用我，创建线程</span><br>            <span class="hljs-keyword">var</span> so_name = <span class="hljs-title class_">Process</span>.<span class="hljs-title function_">findModuleByAddress</span>(args[<span class="hljs-number">2</span>]).<span class="hljs-property">name</span>;<br><br>            <span class="hljs-keyword">if</span> (so_name.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;libexec.so&quot;</span>) != -<span class="hljs-number">1</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    <span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">replace</span>(args[<span class="hljs-number">2</span>], <span class="hljs-keyword">new</span> <span class="hljs-title class_">NativeCallback</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>                        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;replace success&#x27;</span>);<br>                        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>                    &#125;, <span class="hljs-string">&#x27;void&#x27;</span>, [<span class="hljs-string">&quot;void&quot;</span>]));<br>                &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br><br>                &#125;<br><br>            &#125;<br>        &#125;, <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">retval</span>) &#123;<br>        &#125;<br>    &#125;)<br>&#125;<br><br><span class="hljs-title function_">hook_pthread_create</span>();<br><br><span class="hljs-comment">// frida -U  -l pthread_create.js -f  com.gzlex.hui.guoziwei.travel  --no-pause</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>安卓逆向</tag>
      
      <tag>frida</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>五秒盾对抗系列</title>
    <link href="/2024/10/14/%E4%BA%94%E7%A7%92%E7%9B%BE%E5%AF%B9%E6%8A%97/"/>
    <url>/2024/10/14/%E4%BA%94%E7%A7%92%E7%9B%BE%E5%AF%B9%E6%8A%97/</url>
    
    <content type="html"><![CDATA[<h2 id="CloudFlare-五秒盾介绍"><a href="#CloudFlare-五秒盾介绍" class="headerlink" title="CloudFlare 五秒盾介绍"></a>CloudFlare 五秒盾介绍</h2><p>  <code>CloudFlare</code> js challage 业界俗称五秒盾。<code>CloudFlare</code> 是一个做CDN 内容分发的服务商, 被人戏称为网络菩萨，其名下有非常著名产品 VPN软件<code>Warp+</code>, 提供DNS查询<code>1.1.1.1</code>，还有常被用来加速的<code>CloudFlare Worker</code> 等等等等。</p><h2 id="开启CloudFlare-免费防护"><a href="#开启CloudFlare-免费防护" class="headerlink" title="开启CloudFlare 免费防护"></a>开启CloudFlare 免费防护</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>网站开启<code>CloudFlare</code> 防护之前，会将DNS 服务托管到<code>CloudFlare</code>的DNS服务器，在输入网址的时候 会返回一个带js 的网站，在浏览器执行完js 之后，会在本地生成cookie，然后刷新网页，带着cookie 访问网站，cf 检验通过之后，才会返回被防护的网站内容。 </p><h2 id="CloudFlare特征"><a href="#CloudFlare特征" class="headerlink" title="CloudFlare特征"></a>CloudFlare特征</h2><h3 id="免费版本"><a href="#免费版本" class="headerlink" title="免费版本"></a>免费版本</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-keyword">import</span> requests<br><br><br>headers = &#123;<br>    <span class="hljs-string">&quot;User-Agent&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36&quot;</span><br>&#125;<br>url = <span class="hljs-string">&quot;https://pincong.rocks/&quot;</span><br><br>os.environ[<span class="hljs-string">&#x27;HTTPS_PROXY&#x27;</span>] = <span class="hljs-string">&#x27;http://127.0.0.1:7890&#x27;</span><br>response = requests.get(url, headers=headers,)<br><br><span class="hljs-built_in">print</span>(response.text)<br><span class="hljs-built_in">print</span>(response)<br><span class="hljs-built_in">print</span>(response.status_code)<br><br><span class="hljs-comment">#html &lt;title&gt;: Just a moment...</span><br><span class="hljs-comment">#status_code: 403</span><br></code></pre></td></tr></table></figure><p>这个在体验上无感的和在浏览器打开瑞数保护的网站一样</p><h3 id="付费版本"><a href="#付费版本" class="headerlink" title="付费版本"></a>付费版本</h3><p><img src="https://s2.loli.net/2023/11/14/slhnAuyjT4xtUCL.png" alt="image-20231114204658454"></p><p>需要点击<code>input</code> 输入框，这个对于纯代码实现的爬虫来说，做出这样的交互有点困难。</p><h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3><p>使用cloudflare 防护的网站一般会有一个/cdn-cgi/trace 的路由</p><p>比如我访问 <code>https://nowsecure.nl/cdn-cgi/trace</code> 会有响应如下</p><p><img src="https://s2.loli.net/2023/11/14/CzcIwX4vQf1h2ab.png" alt="image-20231114171337064"></p><ul><li><code>fl</code>：Cloudflare 服务器实例</li><li><code>h</code>：网站域名</li><li><code>ip</code>：当前访问者的IP地址</li><li><code>ts</code>：时间戳，格式为“秒.毫秒”（bash中生成同款时间戳的命令为<code>date +%s.%3N</code>）</li><li><code>visit_scheme</code>：访问者使用的协议</li><li><code>usg</code>：访问者使用的UserAgent信息</li><li><code>colo</code>：被访问的Cloudflare数据中心的所在位置，此处是由<a href="https://en.wikipedia.org/wiki/IATA_airport_code">IANA定义的机场代码</a></li><li><code>sliver</code>：请求是否被拆分成多个部分进行处理或传输</li><li><code>http</code>：访问者使用的HTTP协议版本</li><li><code>loc</code>：访问者的所在地（国家）</li><li><code>tls</code>：访问者与服务器建立连接使用的TLS版本</li><li><code>sni</code>：SNI加密或明文传输</li><li><code>warp</code>：访问者是否使用了<a href="https://cloudflarewarp.com/">Warp</a>服务</li><li><code>gateway</code>：访问者是否使用了<a href="https://www.cloudflare.com/teams/gateway/">Cloudflare Gateway</a>服务</li><li><code>rbi</code>：访问者是否使用了<a href="https://www.cloudflare.com/learning/access-management/what-is-browser-isolation/">Cloudflares Remote Browser Isolation(RBI)</a>服务</li><li><code>kex</code>：TLS密钥交换过程中使用的交换方式</li></ul><p>来源: [Lxn-Chan 的博客]<a href="https://lxnchan.cn/cloudflare-trace.html">https://lxnchan.cn/cloudflare-trace.html</a></p><h2 id="CloudFlare-网站收集"><a href="#CloudFlare-网站收集" class="headerlink" title="CloudFlare 网站收集"></a>CloudFlare 网站收集</h2><table><thead><tr><th>网站</th><th>CloudFlare 版本</th></tr></thead><tbody><tr><td><a href="https://nowsecure.nl/">https://nowsecure.nl/</a></td><td>付费</td></tr><tr><td><a href="https://lululemon.co.jp/">https://lululemon.co.jp</a></td><td>付费</td></tr><tr><td><a href="https://pingcong.rock/">https://pingcong.rock</a></td><td>免费</td></tr><tr><td><a href="https://www.amiami.jp/">https://www.amiami.jp/</a></td><td>付费</td></tr><tr><td></td><td></td></tr></tbody></table><p><a href="https://nowsecure.nl/">https://nowsecure.nl/</a> 作为测试网站</p><p>短时间内请求同一个ip 请求次数过多，会由原来的无感验证码转化为需要点击的验证码。</p><p>我总共抓取了96条数据，每次请求中间会睡眠2秒钟，到第97条的时候就会需要点击验证。</p><h2 id="解决方案一览"><a href="#解决方案一览" class="headerlink" title="解决方案一览"></a>解决方案一览</h2><table><thead><tr><th>解决方案</th><th>部署/使用方式</th><th align="center">实现原理简介</th></tr></thead><tbody><tr><td><a href="https://github.com/Anorov/cloudflare-scrape">cloudflare-scrape</a></td><td>python 库</td><td align="center">nodejs 执行 js代码</td></tr><tr><td><a href="https://github.com/VeNoMouS/cloudscraper">cloudscraper</a></td><td>python 库</td><td align="center">多种js 执行引擎可选、三方验证码解决方案接口</td></tr><tr><td><a href="https://github.com/yifeikong/curl_cffi">curl-cffi</a></td><td>python 库</td><td align="center">使用curl-impersonate 的binding 模拟浏览器的指纹</td></tr><tr><td><a href="https://github.com/ultrafunkamsterdam/undetected-chromedriver">undetected-chromedriver</a></td><td>python 库</td><td align="center">使用脚本抹除chromedriver 的特征,防止检测</td></tr><tr><td>CDP 协议</td><td></td><td align="center">调试协议，无webdriver 特征</td></tr><tr><td>warp+ 网络</td><td>接入warp 网络</td><td align="center">使用warp 内部流量，/cdn-cgi/trace 中会 warp=on</td></tr><tr><td>直接访问网站ip</td><td>直接使用</td><td align="center">使用网络空间测绘引擎、搜索扫描到的ip和证书，如果能找到</td></tr></tbody></table><p>基于CDP 调试协议的方案</p><table><thead><tr><th>库名</th><th>部署/使用方式</th><th>优势</th></tr></thead><tbody><tr><td><a href="https://github.com/FlareSolverr/FlareSolverr">flaresolverr</a></td><td>docker部署，API 调用,其他语言调用</td><td></td></tr><tr><td>browserless</td><td>docker部署，API 调用</td><td></td></tr><tr><td>ichrome</td><td></td><td></td></tr><tr><td><a href="https://github.com/fate0/pychrome">pychrome</a></td><td></td><td></td></tr><tr><td>DP</td><td>可以使用session  或者使用</td><td>国人开发  有很好的支持 可以加QQ群</td></tr></tbody></table><p>其他方案</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vim">scrappey.<span class="hljs-keyword">com</span><br>puppteer.<span class="hljs-keyword">cm</span><br>chrome<br>pyppteer <br><span class="hljs-keyword">botright</span><br></code></pre></td></tr></table></figure><h2 id="使用-flaresolverr"><a href="#使用-flaresolverr" class="headerlink" title="使用 flaresolverr"></a>使用 flaresolverr</h2><h3 id="python-脚本"><a href="#python-脚本" class="headerlink" title="python 脚本"></a>python 脚本</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>data = &#123;<span class="hljs-string">&quot;cmd&quot;</span>: <span class="hljs-string">&quot;request.get&quot;</span>, <span class="hljs-string">&quot;url&quot;</span>: <span class="hljs-string">&quot;https://www.singtao.ca&quot;</span>, <span class="hljs-string">&quot;maxTimeout&quot;</span>: <span class="hljs-number">60000</span>,<br>        <span class="hljs-string">&quot;proxy&quot;</span>: &#123;<span class="hljs-string">&quot;url&quot;</span>: <span class="hljs-string">&quot;http://172.17.4.181:7890&quot;</span>&#125;&#125;<br><br><span class="hljs-comment"># proxy 是clash verge 的内网监听端口</span><br>response = requests.post(<span class="hljs-string">&#x27;http://localhost:8191/v1&#x27;</span>, json=data)<br><br><span class="hljs-built_in">print</span>(response.text)<br></code></pre></td></tr></table></figure><h3 id="添加granfana-监控"><a href="#添加granfana-监控" class="headerlink" title="添加granfana 监控"></a>添加granfana 监控</h3><p><a href="https://grafana.com/grafana/dashboards/19363-flaresolverr/">granfana 官方地址</a></p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs livescript">docker run -d <span class="hljs-string">\</span><br>  --name=flaresolverr <span class="hljs-string">\</span><br>  -p <span class="hljs-number">8191</span>:<span class="hljs-number">8191</span> <span class="hljs-string">\</span><br>  -e LOG_LEVEL=info <span class="hljs-string">\</span><br>  --restart <span class="hljs-keyword">unless</span>-stopped <span class="hljs-string">\</span><br>  ghcr.io/flaresolverr/flaresolverr:latest<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>五秒盾</tag>
      
      <tag>“cloudflare”</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>使用CloudFlare 的DoH服务进行DNS查询</title>
    <link href="/2024/10/14/%E4%BD%BF%E7%94%A8CloudFlare-%E7%9A%84DoH%E6%9C%8D%E5%8A%A1%E8%BF%9B%E8%A1%8CDNS%E6%9F%A5%E8%AF%A2/"/>
    <url>/2024/10/14/%E4%BD%BF%E7%94%A8CloudFlare-%E7%9A%84DoH%E6%9C%8D%E5%8A%A1%E8%BF%9B%E8%A1%8CDNS%E6%9F%A5%E8%AF%A2/</url>
    
    <content type="html"><![CDATA[<p>dns 使用的是http协议，即使使用的是<code>https</code>协议，也要在链接之前将域名转化为ip, 而这个dns 也是使用的http。</p><p>而 DoH （DNS over HTTPS）即使用安全的 HTTPS 协议运行 DNS ，主要目的是增强用户的安全性和隐私性，dns 解析过程中的域名对于isp 不再可见，防止了DNS劫持和DNS污染。</p><p>以下代码是使用<code>python</code> 作为编程工具，使用 <code>CloudFlare</code> 作为<code>DNS</code> 基于<code>DoH</code>的 dns 查询。</p><p>其中 <code>dns-json</code> 作为 RFC 草案，还没有被推广，cloudflare(1.1.1.1)和Google(8.8.8.8)的dns都支持JSON格式的响应。 </p><p>程序非常简单，并且能够被扩展到其他编程语言中。</p><p>以下使用了代理，因为1.1.1.1 在中国大陆被封锁了。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>url = <span class="hljs-string">&quot;https://1.1.1.1/dns-query&quot;</span><br>headers = &#123;<br>    <span class="hljs-string">&quot;accept&quot;</span>: <span class="hljs-string">&quot;application/dns-json&quot;</span>,<br>&#125;<br><br>proxies = &#123;<br>    <span class="hljs-string">&#x27;http&#x27;</span>: <span class="hljs-string">&#x27;http://127.0.0.1:7890&#x27;</span>,<br>    <span class="hljs-string">&#x27;https&#x27;</span>: <span class="hljs-string">&#x27;http://127.0.0.1:7890&#x27;</span>,<br>&#125;<br>params = &#123;<br>    <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;google.com&quot;</span>,<br>    <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;A&quot;</span>,<br>&#125;<br><br>response = requests.get(url, params=params, headers=headers, proxies=proxies)<br><br><span class="hljs-keyword">if</span> response.status_code == <span class="hljs-number">200</span>:<br>    data = response.json()<br>    <span class="hljs-built_in">print</span>(data)<br>    <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;Answer&quot;</span> <span class="hljs-keyword">in</span> data:<br>        <span class="hljs-keyword">for</span> answer <span class="hljs-keyword">in</span> data[<span class="hljs-string">&quot;Answer&quot;</span>]:<br>            <span class="hljs-keyword">if</span> <span class="hljs-string">&quot;data&quot;</span> <span class="hljs-keyword">in</span> answer:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;IP地址: <span class="hljs-subst">&#123;answer[<span class="hljs-string">&#x27;data&#x27;</span>]&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;未找到IP地址&quot;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;请求失败，状态码: <span class="hljs-subst">&#123;response.status_code&#125;</span>&quot;</span>)<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>唯品会搜索接口逆向</title>
    <link href="/2024/10/14/%E5%94%AF%E5%93%81%E4%BC%9A%E6%90%9C%E7%B4%A2%E6%8E%A5%E5%8F%A3%E9%80%86%E5%90%91/"/>
    <url>/2024/10/14/%E5%94%AF%E5%93%81%E4%BC%9A%E6%90%9C%E7%B4%A2%E6%8E%A5%E5%8F%A3%E9%80%86%E5%90%91/</url>
    
    <content type="html"><![CDATA[<p>使用小黄鸟电脑版配合手机抓包</p><p>![image-20240229111942491](/Users/king/Library/Application Support/typora-user-images/image-20240229111942491.png)</p><p>搜索之前会有个设备注册的动作</p><p><img src="https://s2.loli.net/2024/02/29/UPyGjMvSBk2Dacz.png" alt="image-20240229112709847"></p><p>搜索接口为<code>https://mapi.appvipshop.com/vips-mobile/rest/shopping/search/product/list/v1</code></p><p>上述参数为中keyword 为洗面奶 更改洗面奶关键词 函数签名不正常，无法正常返回响应，这里考虑逆向</p><h2 id="设备注册"><a href="#设备注册" class="headerlink" title="设备注册"></a>设备注册</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br><br>headers = &#123;<br>    <span class="hljs-string">&quot;User-Agent&quot;</span>: <span class="hljs-string">&quot;okhttp/4.9.1&quot;</span>,<br>    <span class="hljs-string">&quot;Accept-Encoding&quot;</span>: <span class="hljs-string">&quot;gzip&quot;</span>,<br>    <span class="hljs-string">&quot;authorization&quot;</span>: <span class="hljs-string">&quot;OAuth api_sign=a47258d0f2ba0045f0c16bb1b9089ee3f857f58f&quot;</span>,<br>    <span class="hljs-string">&quot;x-vip-host&quot;</span>: <span class="hljs-string">&quot;mp.appvipshop.com&quot;</span><br>&#125;<br>url = <span class="hljs-string">&quot;https://mp.appvipshop.com/apns/device_reg&quot;</span><br>params = &#123;<br>    <span class="hljs-string">&quot;app_name&quot;</span>: <span class="hljs-string">&quot;achievo_ad&quot;</span>,<br>    <span class="hljs-string">&quot;app_version&quot;</span>: <span class="hljs-string">&quot;7.83.3&quot;</span>,<br>    <span class="hljs-string">&quot;device_token&quot;</span>: <span class="hljs-string">&quot;ed0f0e40-4788-324b-8000-79a11b44f6ee&quot;</span>,<br>    <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,<br>    <span class="hljs-string">&quot;warehouse&quot;</span>: <span class="hljs-string">&quot;VIP_SH&quot;</span>,<br>    <span class="hljs-string">&quot;manufacturer&quot;</span>: <span class="hljs-string">&quot;Google&quot;</span>,<br>    <span class="hljs-string">&quot;device&quot;</span>: <span class="hljs-string">&quot;Pixel 4 XL&quot;</span>,<br>    <span class="hljs-string">&quot;os_version&quot;</span>: <span class="hljs-string">&quot;29&quot;</span>,<br>    <span class="hljs-string">&quot;channel&quot;</span>: <span class="hljs-string">&quot;oziq7dxw:::&quot;</span>,<br>    <span class="hljs-string">&quot;vipruid&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-string">&quot;regPlat&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,<br>    <span class="hljs-string">&quot;regid&quot;</span>: <span class="hljs-string">&quot;null&quot;</span>,<br>    <span class="hljs-string">&quot;rom&quot;</span>: <span class="hljs-string">&quot;Dalvik/2.1.0 (Linux; U; Android 10; Pixel 4 XL Build/QQ3A.200805.001)&quot;</span>,<br>    <span class="hljs-string">&quot;skey&quot;</span>: <span class="hljs-string">&quot;6692c461c3810ab150c9a980d0c275ec&quot;</span><br>&#125;<br>response = requests.get(url, headers=headers, params=params)<br><br><span class="hljs-built_in">print</span>(response.text)<br><span class="hljs-built_in">print</span>(response)<br></code></pre></td></tr></table></figure><p>其他参数都是可以根据有意义的，只有 <code>device_token</code> 是变动的，这里逆向APP</p><p><img src="https://s2.loli.net/2024/02/29/EdZsGpPQKUt9mH3.png" alt="image-20230404185007842"></p><p><img src="https://s2.loli.net/2024/02/29/gj4dfsTQINKAEcH.png" alt="image-20230404185025328"></p><p><img src="https://s2.loli.net/2024/02/29/NWeRDYTVnCSAz6h.png" alt="image-20230404185053382"></p><p><img src="https://s2.loli.net/2024/02/29/wThM5byHsCALBoU.png" alt="image-20230404185109244"></p><p><img src="https://s2.loli.net/2024/02/29/4OwbvW8NjeIpPCu.png" alt="image-20230404185203390"></p><p><img src="https://s2.loli.net/2024/02/29/n1LCETi4z5OlcUD.png" alt="image-20230404185214860"></p><p><img src="https://s2.loli.net/2024/02/29/bOwC9KUDRPgoF63.png" alt="image-20230404185244195"></p><p>所以，直接就是UUID</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> uuid<br>device_token = <span class="hljs-built_in">str</span>(uuid.uuid4())<br></code></pre></td></tr></table></figure><h2 id="设备注册逆向"><a href="#设备注册逆向" class="headerlink" title="设备注册逆向"></a>设备注册逆向</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> uuid<br><br>device_token = <span class="hljs-built_in">str</span>(uuid.uuid4())<br><br><span class="hljs-comment"># device_token=&quot;ed0f0e40-4788-324b-8000-79a11b44f6ee&quot;</span><br><br>headers = &#123;<br>    <span class="hljs-string">&quot;User-Agent&quot;</span>: <span class="hljs-string">&quot;okhttp/4.9.1&quot;</span>,<br>    <span class="hljs-string">&quot;Accept-Encoding&quot;</span>: <span class="hljs-string">&quot;gzip&quot;</span>,<br>    <span class="hljs-string">&quot;authorization&quot;</span>: <span class="hljs-string">&quot;OAuth api_sign=a47258d0f2ba0045f0c16bb1b9089ee3f857f58f&quot;</span>,<br>    <span class="hljs-string">&quot;x-vip-host&quot;</span>: <span class="hljs-string">&quot;mp.appvipshop.com&quot;</span><br>&#125;<br>url = <span class="hljs-string">&quot;https://mp.appvipshop.com/apns/device_reg&quot;</span><br>params = &#123;<br>    <span class="hljs-string">&quot;app_name&quot;</span>: <span class="hljs-string">&quot;achievo_ad&quot;</span>,<br>    <span class="hljs-string">&quot;app_version&quot;</span>: <span class="hljs-string">&quot;7.83.3&quot;</span>,<br>    <span class="hljs-string">&quot;device_token&quot;</span>: device_token,<br>    <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,<br>    <span class="hljs-string">&quot;warehouse&quot;</span>: <span class="hljs-string">&quot;VIP_SH&quot;</span>,<br>    <span class="hljs-string">&quot;manufacturer&quot;</span>: <span class="hljs-string">&quot;Google&quot;</span>,<br>    <span class="hljs-string">&quot;device&quot;</span>: <span class="hljs-string">&quot;Pixel 4 XL&quot;</span>,<br>    <span class="hljs-string">&quot;os_version&quot;</span>: <span class="hljs-string">&quot;29&quot;</span>,<br>    <span class="hljs-string">&quot;channel&quot;</span>: <span class="hljs-string">&quot;oziq7dxw:::&quot;</span>,<br>    <span class="hljs-string">&quot;vipruid&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-string">&quot;regPlat&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,<br>    <span class="hljs-string">&quot;regid&quot;</span>: <span class="hljs-string">&quot;null&quot;</span>,<br>    <span class="hljs-string">&quot;rom&quot;</span>: <span class="hljs-string">&quot;Dalvik/2.1.0 (Linux; U; Android 10; Pixel 4 XL Build/QQ3A.200805.001)&quot;</span>,<br>    <span class="hljs-string">&quot;skey&quot;</span>: <span class="hljs-string">&quot;6692c461c3810ab150c9a980d0c275ec&quot;</span><br>&#125;<br>response = requests.get(url, headers=headers, params=params)<br><br><span class="hljs-built_in">print</span>(response.text)<br><span class="hljs-comment"># &#123;&quot;result&quot;:&quot;ok&quot;,&quot;msg&quot;:&quot;注册成功&quot;&#125;</span><br><br></code></pre></td></tr></table></figure><h2 id="搜索接口逆向"><a href="#搜索接口逆向" class="headerlink" title="搜索接口逆向"></a>搜索接口逆向</h2><figure class="highlight scilab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs scilab">curl -X POST <span class="hljs-string">&#x27;https://mapi.appvipshop.com/vips-mobile/rest/shopping/search/product/list/v1&#x27;</span> -H <span class="hljs-string">&#x27;User-Agent: okhttp/4.9.1&#x27;</span> -H <span class="hljs-string">&#x27;Accept-Encoding: gzip&#x27;</span> -H <span class="hljs-string">&#x27;Content-Type: application/x-www-form-urlencoded&#x27;</span> -H <span class="hljs-string">&#x27;authorization: OAuth api_sign=c551d27c3ec7a539d030b835ab29007706fd9672&#x27;</span> -H <span class="hljs-string">&#x27;x-vip-host: mapi.appvipshop.com&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;api_key=23e7f28019e8407b98b84cd05b5aef2c&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;app_name=shop_android&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;app_version=7.83.3&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;bigSaleTagIds=&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;brandIds=&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;brandStoreSns=&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;categoryId=&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;channelId=1&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;channel_flag=0_1&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;client=android&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;client_type=android&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;darkmode=0&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;deeplink_cps=&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;device_model=Google Pixel 4 XL&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;did=0.0.8210935aac88ed2c795168a927fbc377.b54cd1&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;elder=0&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;extParams=&#123;&quot;</span>priceVer<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">2</span><span class="hljs-string">&quot;,&quot;</span>mclabel<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>cmpStyle<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>statusVer<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">2</span><span class="hljs-string">&quot;,&quot;</span>ic2label<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>video<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">2</span><span class="hljs-string">&quot;,&quot;</span>uiVer<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">2</span><span class="hljs-string">&quot;,&quot;</span>preheatTipsVer<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">4</span><span class="hljs-string">&quot;,&quot;</span>floatwin<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>superHot<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>exclusivePrice<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>router<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>coupons<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>needVideoExplain<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>rank<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">2</span><span class="hljs-string">&quot;,&quot;</span>needVideoGive<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>bigBrand<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>couponVer<span class="hljs-string">&quot;:&quot;</span>v2<span class="hljs-string">&quot;,&quot;</span>videoExplainUrl<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>live<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>sellpoint<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>reco<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>vreimg<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>search_tag<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">2</span><span class="hljs-string">&quot;,&quot;</span>tpl<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>stdSizeVids<span class="hljs-string">&quot;:&quot;</span><span class="hljs-string">&quot;,&quot;</span>labelVer<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">2</span><span class="hljs-string">&quot;&#125;&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;fdc_area_id=103101101113&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;functions=RTRecomm,flagshipInfo,feedback,otdAds,zoneCode,slotOp,survey,hasTabs,floaterParams&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;harmony_app=0&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;harmony_os=0&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;headTabType=all&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;height=2984&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;isMultiTab=0&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;keyword=洗面奶&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;lastPageProperty=&#123;&quot;</span>isBgToFront<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">0</span><span class="hljs-string">&quot;,&quot;</span>suggest_text<span class="hljs-string">&quot;:&quot;</span>洗面奶<span class="hljs-string">&quot;,&quot;</span>scene_entry_id<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">-99</span><span class="hljs-string">&quot;,&quot;</span>refer_page_id<span class="hljs-string">&quot;:&quot;</span>page_te_globle_classify_search_1709112203190<span class="hljs-string">&quot;,&quot;</span>text<span class="hljs-string">&quot;:&quot;</span>洗面奶<span class="hljs-string">&quot;,&quot;</span>tag<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">1</span><span class="hljs-string">&quot;,&quot;</span>module_name<span class="hljs-string">&quot;:&quot;</span>com.achievo.vipshop.search<span class="hljs-string">&quot;,&quot;</span><span class="hljs-built_in">type</span><span class="hljs-string">&quot;:&quot;</span>all<span class="hljs-string">&quot;,&quot;</span><span class="hljs-built_in">typename</span><span class="hljs-string">&quot;:&quot;</span>全部<span class="hljs-string">&quot;,&quot;</span>is_back_page<span class="hljs-string">&quot;:&quot;</span><span class="hljs-number">0</span><span class="hljs-string">&quot;&#125;&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;maker=GOOGLE&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;mars_cid=ed0f0e40-4788-324b-8000-79a11b44f6ee&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;mobile_channel=oziq7dxw:::&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;mobile_platform=3&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;net=WIFI&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;operator=45406&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;os=Android&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;osv=10&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;otddid=&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;other_cps=&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;page_id=page_te_commodity_search_1709112205099&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;phone_model=pixel 4 xl&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;priceMax=&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;priceMin=&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;props=&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;province_id=103101&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;referer=com.achievo.vipshop.search.activity.TabSearchProductListActivity&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;rom=Dalvik/2.1.0 (Linux; U; Android 10; Pixel 4 XL Build/QQ3A.200805.001)&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;sd_tuijian=0&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;service_provider=45406&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;session_id=ed0f0e40-4788-324b-8000-79a11b44f6ee_shop_android_1709111748547&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;skey=6692c461c3810ab150c9a980d0c275ec&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;sort=0&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;source=app&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;source_app=android&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;standby_id=oziq7dxw:::&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;sys_version=29&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;timestamp=1709112205&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;union_mark=blank&amp;_&amp;blank&amp;_&amp;oziq7dxw:::&amp;_&amp;blank&amp;_&amp;blank&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;vipService=&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;warehouse=VIP_SH&#x27;</span> --data-urlencode <span class="hljs-string">&#x27;width=1440&#x27;</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>headers = &#123;<br>    <span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;okhttp/4.9.1&#x27;</span>,<br>    <span class="hljs-comment"># &#x27;Accept-Encoding&#x27;: &#x27;gzip&#x27;,</span><br>    <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/x-www-form-urlencoded&#x27;</span>,<br>    <span class="hljs-string">&#x27;authorization&#x27;</span>: <span class="hljs-string">&#x27;OAuth api_sign=c551d27c3ec7a539d030b835ab29007706fd9672&#x27;</span>,<br>    <span class="hljs-string">&#x27;x-vip-host&#x27;</span>: <span class="hljs-string">&#x27;mapi.appvipshop.com&#x27;</span>,<br>&#125;<br><br>data = &#123;<br>    <span class="hljs-string">&#x27;api_key&#x27;</span>: <span class="hljs-string">&#x27;23e7f28019e8407b98b84cd05b5aef2c&#x27;</span>,<br>    <span class="hljs-string">&#x27;app_name&#x27;</span>: <span class="hljs-string">&#x27;shop_android&#x27;</span>,<br>    <span class="hljs-string">&#x27;app_version&#x27;</span>: <span class="hljs-string">&#x27;7.83.3&#x27;</span>,<br>    <span class="hljs-string">&#x27;bigSaleTagIds&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;brandIds&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;brandStoreSns&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;categoryId&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;channelId&#x27;</span>: <span class="hljs-string">&#x27;1&#x27;</span>,<br>    <span class="hljs-string">&#x27;channel_flag&#x27;</span>: <span class="hljs-string">&#x27;0_1&#x27;</span>,<br>    <span class="hljs-string">&#x27;client&#x27;</span>: <span class="hljs-string">&#x27;android&#x27;</span>,<br>    <span class="hljs-string">&#x27;client_type&#x27;</span>: <span class="hljs-string">&#x27;android&#x27;</span>,<br>    <span class="hljs-string">&#x27;darkmode&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;deeplink_cps&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;device_model&#x27;</span>: <span class="hljs-string">&#x27;Google Pixel 4 XL&#x27;</span>,<br>    <span class="hljs-string">&#x27;did&#x27;</span>: <span class="hljs-string">&#x27;0.0.8210935aac88ed2c795168a927fbc377.b54cd1&#x27;</span>,<br>    <span class="hljs-string">&#x27;elder&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;extParams&#x27;</span>: <span class="hljs-string">&#x27;&#123;&quot;priceVer&quot;:&quot;2&quot;,&quot;mclabel&quot;:&quot;1&quot;,&quot;cmpStyle&quot;:&quot;1&quot;,&quot;statusVer&quot;:&quot;2&quot;,&quot;ic2label&quot;:&quot;1&quot;,&quot;video&quot;:&quot;2&quot;,&quot;uiVer&quot;:&quot;2&quot;,&quot;preheatTipsVer&quot;:&quot;4&quot;,&quot;floatwin&quot;:&quot;1&quot;,&quot;superHot&quot;:&quot;1&quot;,&quot;exclusivePrice&quot;:&quot;1&quot;,&quot;router&quot;:&quot;1&quot;,&quot;coupons&quot;:&quot;1&quot;,&quot;needVideoExplain&quot;:&quot;1&quot;,&quot;rank&quot;:&quot;2&quot;,&quot;needVideoGive&quot;:&quot;1&quot;,&quot;bigBrand&quot;:&quot;1&quot;,&quot;couponVer&quot;:&quot;v2&quot;,&quot;videoExplainUrl&quot;:&quot;1&quot;,&quot;live&quot;:&quot;1&quot;,&quot;sellpoint&quot;:&quot;1&quot;,&quot;reco&quot;:&quot;1&quot;,&quot;vreimg&quot;:&quot;1&quot;,&quot;search_tag&quot;:&quot;2&quot;,&quot;tpl&quot;:&quot;1&quot;,&quot;stdSizeVids&quot;:&quot;&quot;,&quot;labelVer&quot;:&quot;2&quot;&#125;&#x27;</span>,<br>    <span class="hljs-string">&#x27;fdc_area_id&#x27;</span>: <span class="hljs-string">&#x27;103101101113&#x27;</span>,<br>    <span class="hljs-string">&#x27;functions&#x27;</span>: <span class="hljs-string">&#x27;RTRecomm,flagshipInfo,feedback,otdAds,zoneCode,slotOp,survey,hasTabs,floaterParams&#x27;</span>,<br>    <span class="hljs-string">&#x27;harmony_app&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;harmony_os&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;headTabType&#x27;</span>: <span class="hljs-string">&#x27;all&#x27;</span>,<br>    <span class="hljs-string">&#x27;height&#x27;</span>: <span class="hljs-string">&#x27;2984&#x27;</span>,<br>    <span class="hljs-string">&#x27;isMultiTab&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;keyword&#x27;</span>: <span class="hljs-string">&#x27;洗面奶&#x27;</span>,<br>    <span class="hljs-string">&#x27;lastPageProperty&#x27;</span>: <span class="hljs-string">&#x27;&#123;&quot;isBgToFront&quot;:&quot;0&quot;,&quot;suggest_text&quot;:&quot;洗面奶&quot;,&quot;scene_entry_id&quot;:&quot;-99&quot;,&quot;refer_page_id&quot;:&quot;page_te_globle_classify_search_1709112203190&quot;,&quot;text&quot;:&quot;洗面奶&quot;,&quot;tag&quot;:&quot;1&quot;,&quot;module_name&quot;:&quot;com.achievo.vipshop.search&quot;,&quot;type&quot;:&quot;all&quot;,&quot;typename&quot;:&quot;全部&quot;,&quot;is_back_page&quot;:&quot;0&quot;&#125;&#x27;</span>,<br>    <span class="hljs-string">&#x27;maker&#x27;</span>: <span class="hljs-string">&#x27;GOOGLE&#x27;</span>,<br>    <span class="hljs-string">&#x27;mars_cid&#x27;</span>: <span class="hljs-string">&#x27;ed0f0e40-4788-324b-8000-79a11b44f6ee&#x27;</span>,<br>    <span class="hljs-string">&#x27;mobile_channel&#x27;</span>: <span class="hljs-string">&#x27;oziq7dxw:::&#x27;</span>,<br>    <span class="hljs-string">&#x27;mobile_platform&#x27;</span>: <span class="hljs-string">&#x27;3&#x27;</span>,<br>    <span class="hljs-string">&#x27;net&#x27;</span>: <span class="hljs-string">&#x27;WIFI&#x27;</span>,<br>    <span class="hljs-string">&#x27;operator&#x27;</span>: <span class="hljs-string">&#x27;45406&#x27;</span>,<br>    <span class="hljs-string">&#x27;os&#x27;</span>: <span class="hljs-string">&#x27;Android&#x27;</span>,<br>    <span class="hljs-string">&#x27;osv&#x27;</span>: <span class="hljs-string">&#x27;10&#x27;</span>,<br>    <span class="hljs-string">&#x27;otddid&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;other_cps&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;page_id&#x27;</span>: <span class="hljs-string">&#x27;page_te_commodity_search_1709112205099&#x27;</span>,<br>    <span class="hljs-string">&#x27;phone_model&#x27;</span>: <span class="hljs-string">&#x27;pixel 4 xl&#x27;</span>,<br>    <span class="hljs-string">&#x27;priceMax&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;priceMin&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;props&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;province_id&#x27;</span>: <span class="hljs-string">&#x27;103101&#x27;</span>,<br>    <span class="hljs-string">&#x27;referer&#x27;</span>: <span class="hljs-string">&#x27;com.achievo.vipshop.search.activity.TabSearchProductListActivity&#x27;</span>,<br>    <span class="hljs-string">&#x27;rom&#x27;</span>: <span class="hljs-string">&#x27;Dalvik/2.1.0 (Linux; U; Android 10; Pixel 4 XL Build/QQ3A.200805.001)&#x27;</span>,<br>    <span class="hljs-string">&#x27;sd_tuijian&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;service_provider&#x27;</span>: <span class="hljs-string">&#x27;45406&#x27;</span>,<br>    <span class="hljs-string">&#x27;session_id&#x27;</span>: <span class="hljs-string">&#x27;ed0f0e40-4788-324b-8000-79a11b44f6ee_shop_android_1709111748547&#x27;</span>,<br>    <span class="hljs-string">&#x27;skey&#x27;</span>: <span class="hljs-string">&#x27;6692c461c3810ab150c9a980d0c275ec&#x27;</span>,<br>    <span class="hljs-string">&#x27;sort&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;source&#x27;</span>: <span class="hljs-string">&#x27;app&#x27;</span>,<br>    <span class="hljs-string">&#x27;source_app&#x27;</span>: <span class="hljs-string">&#x27;android&#x27;</span>,<br>    <span class="hljs-string">&#x27;standby_id&#x27;</span>: <span class="hljs-string">&#x27;oziq7dxw:::&#x27;</span>,<br>    <span class="hljs-string">&#x27;sys_version&#x27;</span>: <span class="hljs-string">&#x27;29&#x27;</span>,<br>    <span class="hljs-string">&#x27;timestamp&#x27;</span>: <span class="hljs-string">&#x27;1709112205&#x27;</span>,<br>    <span class="hljs-string">&#x27;union_mark&#x27;</span>: <span class="hljs-string">&#x27;blank&amp;_&amp;blank&amp;_&amp;oziq7dxw:::&amp;_&amp;blank&amp;_&amp;blank&#x27;</span>,<br>    <span class="hljs-string">&#x27;vipService&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;warehouse&#x27;</span>: <span class="hljs-string">&#x27;VIP_SH&#x27;</span>,<br>    <span class="hljs-string">&#x27;width&#x27;</span>: <span class="hljs-string">&#x27;1440&#x27;</span>,<br>&#125;<br><br>response = requests.post(<br>    <span class="hljs-string">&#x27;https://mapi.appvipshop.com/vips-mobile/rest/shopping/search/product/list/v1&#x27;</span>,<br>    headers=headers,<br>    data=data,<br>)<br><br><span class="hljs-built_in">print</span>(response.json())<br></code></pre></td></tr></table></figure><p>先逆向请求头中的authorization 参数，因为这个参数是对请求体中data 的加密，我们只有把这个hash 算法搞定了之后，才能定向修改data 中的值尝试修改</p><p><img src="https://s2.loli.net/2024/02/29/6HiTLoDbGl943Ee.png" alt="image-20240229151036566"></p><p><img src="https://s2.loli.net/2024/02/29/OGWVU9zy6RDAEdh.png" alt="image-20240229151123147"></p><p><img src="https://s2.loli.net/2024/02/29/4budUznAJf2evNo.png" alt="image-20240229151215912"></p><p><img src="https://s2.loli.net/2024/02/29/wCF813D6AWXLsfu.png" alt="image-20240229151314277"></p><p><img src="https://s2.loli.net/2024/02/29/Rnh2rXb5MzAmdHT.png" alt="image-20240229151455144"></p><p><img src="https://s2.loli.net/2024/02/29/pumt5PJzMIWFDbL.png" alt="image-20240229151550668"></p><p>这里这个反射可以看到是属于 <code>clazz</code> 是<code>keyinfo</code> 的实例 <code>gs</code> 也就是<code>keyinfo</code> 类中的<code>gs</code></p><img src="https://s2.loli.net/2024/02/29/loJ5qDKUN8z2uAS.png" alt="image-20240229152036882" style="zoom:50%;" /><p>可以看到这里是一个nativate 方法</p><p>尝试去hook 改函数的时候APP直接闪退</p><p><img src="https://s2.loli.net/2024/02/29/cJNQ1S5zxsnp7vy.png" alt="image-20240229154532494"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> os<br><br><span class="hljs-keyword">import</span> frida<br><span class="hljs-keyword">import</span> sys<br><br>os.system(<span class="hljs-string">&quot;adb forward tcp:27042 tcp:27042&quot;</span>)<br>os.system(<span class="hljs-string">&quot;adb forward tcp:27043 tcp:27043&quot;</span>)<br><br>package_name = <span class="hljs-string">&#x27;com.achievo.vipshop&#x27;</span><br>rdev = frida.get_remote_device()<br>pid = rdev.spawn([package_name, ])<br>session = rdev.attach(pid)<br><br>scr = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">Java.perform(function () &#123;</span><br><span class="hljs-string"></span><br><span class="hljs-string">    var dlopen = Module.findExportByName(null, &quot;dlopen&quot;);</span><br><span class="hljs-string">    var android_dlopen_ext = Module.findExportByName(null, &quot;android_dlopen_ext&quot;);</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Interceptor.attach(dlopen, &#123;</span><br><span class="hljs-string">        onEnter: function (args) &#123;</span><br><span class="hljs-string">            var path_ptr = args[0];</span><br><span class="hljs-string">            var path = ptr(path_ptr).readCString();</span><br><span class="hljs-string">            console.log(&quot;[dlopen:]&quot;, path);</span><br><span class="hljs-string">        &#125;,</span><br><span class="hljs-string">        onLeave: function (retval) &#123;</span><br><span class="hljs-string"></span><br><span class="hljs-string">        &#125;</span><br><span class="hljs-string">    &#125;);</span><br><span class="hljs-string"></span><br><span class="hljs-string">    Interceptor.attach(android_dlopen_ext, &#123;</span><br><span class="hljs-string">        onEnter: function (args) &#123;</span><br><span class="hljs-string">            var path_ptr = args[0];</span><br><span class="hljs-string">            var path = ptr(path_ptr).readCString();</span><br><span class="hljs-string">            console.log(&quot;[dlopen_ext:]&quot;, path);</span><br><span class="hljs-string">        &#125;,</span><br><span class="hljs-string">        onLeave: function (retval) &#123;</span><br><span class="hljs-string"></span><br><span class="hljs-string">        &#125;</span><br><span class="hljs-string">    &#125;);</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">&#125;);</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br>script = session.create_script(scr)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">on_message</span>(<span class="hljs-params">message, data</span>):<br>    <span class="hljs-built_in">print</span>(message, data)<br><br><br>script.on(<span class="hljs-string">&quot;message&quot;</span>, on_message)<br>script.load()<br>rdev.resume(pid)<br>sys.stdin.read()<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">[dlopen_ext:] <span class="hljs-regexp">/vendor/</span>lib<span class="hljs-regexp">/hw/g</span>ralloc.msmnile.so<br>[dlopen:] libEGL_adreno.so<br>[dlopen:] libGLESv2_adreno.so<br>[dlopen:] libGLESv1_CM_adreno.so<br>[dlopen_ext:] <span class="hljs-regexp">/data/</span>app<span class="hljs-regexp">/com.achievo.vipshop-0huhC8wq2vbEuvlIGGxkLQ==/</span>lib<span class="hljs-regexp">/arm/</span>libmsaoaidsec.so<br>[dlopen_ext:] <span class="hljs-regexp">/vendor/</span>lib<span class="hljs-regexp">/hw/</span>android.hardware.graphics.mapper@<span class="hljs-number">3.0</span>-impl-qti-display.so<br><br></code></pre></td></tr></table></figure><p>可以看到加载了几个so 文件之后直接闪退，有很大可能frida 检测的代码就在上面几个库中</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure><p>关于frida 检测绕过还有好多思路这里直接选择删除这个so 文件，其他可以参考</p><blockquote><p><a href="https://www.cnblogs.com/gradyblog/p/17219605.html">【Android 逆向】frida 检测绕过 - 明月照江江 - 博客园</a><br><a href="https://blog.csdn.net/weixin_56039202/article/details/130441119">绕过bili frida反调试</a></p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">adb shell rm -rf <span class="hljs-regexp">/data/</span>app<span class="hljs-regexp">/com.achievo.vipshop-0huhC8wq2vbEuvlIGGxkLQ==/</span>lib<span class="hljs-regexp">/arm/</span>libmsaoaidsec.so<br><br>frida -U -f com.achievo.vipshop -l <span class="hljs-regexp">/Users/</span>king<span class="hljs-regexp">/code/</span>reverse_engine<span class="hljs-regexp">/reapp/</span>vip/hook.js --no-pause<br><br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//hook.js </span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">hook</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">perform</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">let</span> <span class="hljs-title class_">KeyInfo</span> = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&quot;com.vip.vcsp.KeyInfo&quot;</span>);<br>        <span class="hljs-title class_">KeyInfo</span>[<span class="hljs-string">&quot;gs&quot;</span>].<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context, map, str, z10</span>) &#123;<br>            <span class="hljs-keyword">var</span> <span class="hljs-title class_">TreeMap</span> = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;java.util.TreeMap&#x27;</span>);<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;map：&quot;</span> + <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">cast</span>(map, <span class="hljs-title class_">TreeMap</span>).<span class="hljs-title function_">toString</span>());<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`KeyInfo.gs is called str=<span class="hljs-subst">$&#123;str&#125;</span>, z10=<span class="hljs-subst">$&#123;z10&#125;</span>`</span>);<br>            <span class="hljs-keyword">let</span> result = <span class="hljs-variable language_">this</span>[<span class="hljs-string">&quot;gs&quot;</span>](context, map, str, z10);<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`KeyInfo.gs result=<span class="hljs-subst">$&#123;result&#125;</span>`</span>);<br><br>            <span class="hljs-keyword">return</span> result;<br>        &#125;;<br>    &#125;)<br>&#125;<br><br><span class="hljs-title function_">setImmediate</span>(hook);<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/02/29/CtKnJ9ykWpshLNE.png" alt="image-20240229160529575"></p><p><img src="https://s2.loli.net/2024/02/29/kJxpmDATbr28gn5.png" alt="image-20240229161831805"></p><p>根据ida 函数点击跳转看到是使用了sha1 哈希算法</p><p>这里尝试使用hook 内存来查看机密的参数是多少</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><br><span class="hljs-keyword">var</span> addr = <span class="hljs-title class_">Module</span>.<span class="hljs-title function_">findExportByName</span>(<span class="hljs-string">&quot;libkeyinfo.so&quot;</span>, <span class="hljs-string">&quot;getByteHash&quot;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(addr); <span class="hljs-comment">//0xb696387d</span><br><br><br><br><span class="hljs-title class_">Interceptor</span>.<span class="hljs-title function_">attach</span>(addr,&#123;<br>    <span class="hljs-attr">onEnter</span>:<span class="hljs-keyword">function</span> (<span class="hljs-params">args</span>)&#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">args_2</span> = args[<span class="hljs-number">2</span>];<br>    &#125;,<br>    <span class="hljs-attr">onLeave</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">retval</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;--------------------&quot;</span>)<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;args_2 is &quot;</span> + <span class="hljs-title class_">Memory</span>.<span class="hljs-title function_">readCString</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">args_2</span>));<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;retval is &quot;</span> + <span class="hljs-title class_">Memory</span>.<span class="hljs-title function_">readCString</span>(retval));<br>    &#125;<br><br>&#125;)<br><br><span class="hljs-comment">// frida -UF -l hook_memory.js</span><br></code></pre></td></tr></table></figure><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs dts">args_2 is aee4c425dbb2288b80c71347cc37d04bapi_<span class="hljs-attr">key</span><span class="hljs-operator">=</span><span class="hljs-number">23e7</span>f28019e8407b98b84cd05b5aef2c<span class="hljs-variable">&amp;app_name</span>=shop_android<span class="hljs-variable">&amp;app_version</span>=<span class="hljs-number">7.83</span><span class="hljs-number">.3</span><span class="hljs-variable">&amp;channel_flag</span>=<span class="hljs-number">0</span>_1<span class="hljs-variable">&amp;client</span>=android<span class="hljs-variable">&amp;client_type</span>=android<span class="hljs-variable">&amp;darkmode</span>=<span class="hljs-number">0</span><span class="hljs-variable">&amp;deeplink_cps</span>=<span class="hljs-variable">&amp;did</span>=<span class="hljs-number">0.0</span><span class="hljs-number">.8210935</span>aac88ed2c795168a927fbc377.b54cd1<span class="hljs-variable">&amp;elder</span>=<span class="hljs-number">0</span><span class="hljs-variable">&amp;fdc_area_id</span>=<span class="hljs-number">103101101113</span><span class="hljs-variable">&amp;harmony_app</span>=<span class="hljs-number">0</span><span class="hljs-variable">&amp;harmony_os</span>=<span class="hljs-number">0</span><span class="hljs-variable">&amp;mars_cid</span>=ed0f0e40<span class="hljs-number">-4788</span><span class="hljs-number">-324</span>b<span class="hljs-number">-8000</span><span class="hljs-number">-79</span>a11b44f6ee<span class="hljs-variable">&amp;mobile_channel</span>=oziq7dxw:::<span class="hljs-variable">&amp;mobile_platform</span>=<span class="hljs-number">3</span><span class="hljs-variable">&amp;newcustomer</span>=<span class="hljs-number">1</span><span class="hljs-variable">&amp;other_cps</span>=<span class="hljs-variable">&amp;page_id</span>=page_channel_1709195210228<span class="hljs-variable">&amp;phone_model</span>=pixel <span class="hljs-number">4</span> xl<span class="hljs-variable">&amp;province_id</span>=<span class="hljs-number">103101</span><span class="hljs-variable">&amp;referer</span>=com.achievo.vipshop.homepage.activity.MainActivity<span class="hljs-variable">&amp;rom</span>=Dalvik/<span class="hljs-number">2.1</span><span class="hljs-number">.0</span> (L<span class="hljs-attr">inux</span><span class="hljs-punctuation">;</span> U<span class="hljs-punctuation">;</span> Android <span class="hljs-number">10</span><span class="hljs-punctuation">;</span> Pixel <span class="hljs-number">4</span> XL Build/QQ3A<span class="hljs-number">.200805</span><span class="hljs-number">.001</span>)<span class="hljs-variable">&amp;sd_tuijian</span>=<span class="hljs-number">0</span><span class="hljs-variable">&amp;session_id</span>=ed0f0e40<span class="hljs-number">-4788</span><span class="hljs-number">-324</span>b<span class="hljs-number">-8000</span><span class="hljs-number">-79</span>a11b44f6ee_shop_android_1709195544425<span class="hljs-variable">&amp;skey</span>=<span class="hljs-number">6692</span>c461c3810ab150c9a980d0c275ec<span class="hljs-variable">&amp;source_app</span>=android<span class="hljs-variable">&amp;standby_id</span>=oziq7dxw:::<span class="hljs-variable">&amp;sys_version</span>=<span class="hljs-number">29</span><span class="hljs-variable">&amp;timestamp</span>=<span class="hljs-number">1709195216</span><span class="hljs-variable">&amp;union_mark</span>=blank<span class="hljs-variable">&amp;_</span><span class="hljs-variable">&amp;blank</span><span class="hljs-variable">&amp;_</span><span class="hljs-variable">&amp;oziq7dxw</span>:::<span class="hljs-variable">&amp;_</span><span class="hljs-variable">&amp;blank</span><span class="hljs-variable">&amp;_</span><span class="hljs-variable">&amp;blank</span><span class="hljs-variable">&amp;warehouse</span>=VIP_SH<br>retval is <span class="hljs-number">25</span>af90f18ad599d8826d8e9c3df2b469d95ba290<br>--------------------<br>args_2 is aee4c425dbb2288b80c71347cc37d04b25af90f18ad599d8826d8e9c3df2b469d95ba290<br>retval is <span class="hljs-number">0606</span>bdac18eabcb5d8680dbe3828f02b61eef32d<br><br></code></pre></td></tr></table></figure><p>参数应该是有两次加盐的sha1加密搞出来的</p><p>使用算法还原</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> hashlib<br><br>data_string = <span class="hljs-string">&quot;aee4c425dbb2288b80c71347cc37d04bapi_key=23e7f28019e8407b98b84cd05b5aef2c&amp;app_name=shop_android&amp;app_version=7.83.3&amp;channel_flag=0_1&amp;client=android&amp;client_type=android&amp;darkmode=0&amp;deeplink_cps=&amp;did=0.0.8210935aac88ed2c795168a927fbc377.b54cd1&amp;elder=0&amp;fdc_area_id=103101101113&amp;harmony_app=0&amp;harmony_os=0&amp;mars_cid=ed0f0e40-4788-324b-8000-79a11b44f6ee&amp;mobile_channel=oziq7dxw:::&amp;mobile_platform=3&amp;newcustomer=1&amp;other_cps=&amp;page_id=page_channel_1709195210228&amp;phone_model=pixel 4 xl&amp;province_id=103101&amp;referer=com.achievo.vipshop.homepage.activity.MainActivity&amp;rom=Dalvik/2.1.0 (Linux; U; Android 10; Pixel 4 XL Build/QQ3A.200805.001)&amp;sd_tuijian=0&amp;session_id=ed0f0e40-4788-324b-8000-79a11b44f6ee_shop_android_1709195544425&amp;skey=6692c461c3810ab150c9a980d0c275ec&amp;source_app=android&amp;standby_id=oziq7dxw:::&amp;sys_version=29&amp;timestamp=1709195216&amp;union_mark=blank&amp;_&amp;blank&amp;_&amp;oziq7dxw:::&amp;_&amp;blank&amp;_&amp;blank&amp;warehouse=VIP_SH&quot;</span><br><span class="hljs-comment"># sha1加密</span><br>hash_object = hashlib.sha1()<br>hash_object.update(data_string.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br>arg7 = hash_object.hexdigest()<br><span class="hljs-built_in">print</span>(arg7)<br><br>x = <span class="hljs-string">&quot;aee4c425dbb2288b80c71347cc37d04b&quot;</span>+arg7<br><span class="hljs-comment"># sha1加密</span><br>hash_object = hashlib.sha1()<br>hash_object.update(x.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br>arg7 = hash_object.hexdigest()<br><span class="hljs-built_in">print</span>(arg7)<br></code></pre></td></tr></table></figure><p>此时注册设备接口应该是是</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> uuid<br><br><span class="hljs-keyword">import</span> hashlib<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sha1</span>(<span class="hljs-params">data_string</span>):<br>    <span class="hljs-comment"># sha1加密</span><br>    hash_object = hashlib.sha1()<br>    hash_object.update(data_string.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br>    arg7 = hash_object.hexdigest()<br>    <span class="hljs-keyword">return</span> arg7<br><br><br>device_token = <span class="hljs-built_in">str</span>(uuid.uuid4())<br>url = <span class="hljs-string">&quot;https://mp.appvipshop.com/apns/device_reg&quot;</span><br>params = &#123;<br>    <span class="hljs-string">&quot;app_name&quot;</span>: <span class="hljs-string">&quot;achievo_ad&quot;</span>,<br>    <span class="hljs-string">&quot;app_version&quot;</span>: <span class="hljs-string">&quot;7.83.3&quot;</span>,<br>    <span class="hljs-string">&quot;device_token&quot;</span>: <span class="hljs-string">&quot;ed0f0e40-4788-324b-8000-79a11b44f6ee&quot;</span>,<br>    <span class="hljs-string">&quot;status&quot;</span>: <span class="hljs-string">&quot;1&quot;</span>,<br>    <span class="hljs-string">&quot;warehouse&quot;</span>: <span class="hljs-string">&quot;VIP_SH&quot;</span>,<br>    <span class="hljs-string">&quot;manufacturer&quot;</span>: <span class="hljs-string">&quot;Google&quot;</span>,<br>    <span class="hljs-string">&quot;device&quot;</span>: <span class="hljs-string">&quot;Pixel 4 XL&quot;</span>,<br>    <span class="hljs-string">&quot;os_version&quot;</span>: <span class="hljs-string">&quot;29&quot;</span>,<br>    <span class="hljs-string">&quot;channel&quot;</span>: <span class="hljs-string">&quot;oziq7dxw:::&quot;</span>,<br>    <span class="hljs-string">&quot;vipruid&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,<br>    <span class="hljs-string">&quot;regPlat&quot;</span>: <span class="hljs-string">&quot;0&quot;</span>,<br>    <span class="hljs-string">&quot;regid&quot;</span>: <span class="hljs-string">&quot;null&quot;</span>,<br>    <span class="hljs-string">&quot;rom&quot;</span>: <span class="hljs-string">&quot;Dalvik/2.1.0 (Linux; U; Android 10; Pixel 4 XL Build/QQ3A.200805.001)&quot;</span>,<br>    <span class="hljs-string">&quot;skey&quot;</span>: <span class="hljs-string">&quot;6692c461c3810ab150c9a980d0c275ec&quot;</span><br>&#125;<br><br>ordered_string = <span class="hljs-string">&quot;&amp;&quot;</span>.join([<span class="hljs-string">&quot;&#123;&#125;=&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(key, params[key]) <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> <span class="hljs-built_in">sorted</span>(params.keys())])<br><br>salt = <span class="hljs-string">&quot;aee4c425dbb2288b80c71347cc37d04b&quot;</span><br>tmp = sha1(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;salt&#125;</span><span class="hljs-subst">&#123;ordered_string&#125;</span>&quot;</span>)<br>api_sign = sha1(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;salt&#125;</span><span class="hljs-subst">&#123;tmp&#125;</span>&quot;</span>)<br><br>res = requests.get(<br>    url=url,<br>    params=params,<br>    headers=&#123;<br>        <span class="hljs-string">&quot;Authorization&quot;</span>: <span class="hljs-string">&quot;OAuth api_sign=&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(api_sign)<br>    &#125;<br>)<br><span class="hljs-built_in">print</span>(res.text)<br></code></pre></td></tr></table></figure><p>搜索接口最后结果</p><p>更改keyword 就可以更改要搜索的结果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> hashlib<br><br><span class="hljs-keyword">import</span> requests<br><br>headers = &#123;<br>    <span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;okhttp/4.9.1&#x27;</span>,<br>    <span class="hljs-comment"># &#x27;Accept-Encoding&#x27;: &#x27;gzip&#x27;,</span><br>    <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/x-www-form-urlencoded&#x27;</span>,<br>    <span class="hljs-string">&#x27;authorization&#x27;</span>: <span class="hljs-string">&#x27;OAuth api_sign=c551d27c3ec7a539d030b835ab29007706fd9672&#x27;</span>,<br>    <span class="hljs-string">&#x27;x-vip-host&#x27;</span>: <span class="hljs-string">&#x27;mapi.appvipshop.com&#x27;</span>,<br>&#125;<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sha1</span>(<span class="hljs-params">data_string</span>):<br>    <span class="hljs-comment"># sha1加密</span><br>    hash_object = hashlib.sha1()<br>    hash_object.update(data_string.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br>    arg7 = hash_object.hexdigest()<br>    <span class="hljs-keyword">return</span> arg7<br><br><br>data = &#123;<br>    <span class="hljs-string">&#x27;api_key&#x27;</span>: <span class="hljs-string">&#x27;23e7f28019e8407b98b84cd05b5aef2c&#x27;</span>,<br>    <span class="hljs-string">&#x27;app_name&#x27;</span>: <span class="hljs-string">&#x27;shop_android&#x27;</span>,<br>    <span class="hljs-string">&#x27;app_version&#x27;</span>: <span class="hljs-string">&#x27;7.83.3&#x27;</span>,<br>    <span class="hljs-string">&#x27;bigSaleTagIds&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;brandIds&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;brandStoreSns&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;categoryId&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;channelId&#x27;</span>: <span class="hljs-string">&#x27;1&#x27;</span>,<br>    <span class="hljs-string">&#x27;channel_flag&#x27;</span>: <span class="hljs-string">&#x27;0_1&#x27;</span>,<br>    <span class="hljs-string">&#x27;client&#x27;</span>: <span class="hljs-string">&#x27;android&#x27;</span>,<br>    <span class="hljs-string">&#x27;client_type&#x27;</span>: <span class="hljs-string">&#x27;android&#x27;</span>,<br>    <span class="hljs-string">&#x27;darkmode&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;deeplink_cps&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;device_model&#x27;</span>: <span class="hljs-string">&#x27;Google Pixel 4 XL&#x27;</span>,<br>    <span class="hljs-comment"># &#x27;did&#x27;: &#x27;0.0.8210935aac88ed2c795168a927fbc377.b54cd1&#x27;,</span><br>    <span class="hljs-string">&#x27;elder&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;extParams&#x27;</span>: <span class="hljs-string">&#x27;&#123;&quot;priceVer&quot;:&quot;2&quot;,&quot;mclabel&quot;:&quot;1&quot;,&quot;cmpStyle&quot;:&quot;1&quot;,&quot;statusVer&quot;:&quot;2&quot;,&quot;ic2label&quot;:&quot;1&quot;,&quot;video&quot;:&quot;2&quot;,&quot;uiVer&quot;:&quot;2&quot;,&quot;preheatTipsVer&quot;:&quot;4&quot;,&quot;floatwin&quot;:&quot;1&quot;,&quot;superHot&quot;:&quot;1&quot;,&quot;exclusivePrice&quot;:&quot;1&quot;,&quot;router&quot;:&quot;1&quot;,&quot;coupons&quot;:&quot;1&quot;,&quot;needVideoExplain&quot;:&quot;1&quot;,&quot;rank&quot;:&quot;2&quot;,&quot;needVideoGive&quot;:&quot;1&quot;,&quot;bigBrand&quot;:&quot;1&quot;,&quot;couponVer&quot;:&quot;v2&quot;,&quot;videoExplainUrl&quot;:&quot;1&quot;,&quot;live&quot;:&quot;1&quot;,&quot;sellpoint&quot;:&quot;1&quot;,&quot;reco&quot;:&quot;1&quot;,&quot;vreimg&quot;:&quot;1&quot;,&quot;search_tag&quot;:&quot;2&quot;,&quot;tpl&quot;:&quot;1&quot;,&quot;stdSizeVids&quot;:&quot;&quot;,&quot;labelVer&quot;:&quot;2&quot;&#125;&#x27;</span>,<br>    <span class="hljs-string">&#x27;fdc_area_id&#x27;</span>: <span class="hljs-string">&#x27;103101101113&#x27;</span>,<br>    <span class="hljs-string">&#x27;functions&#x27;</span>: <span class="hljs-string">&#x27;RTRecomm,flagshipInfo,feedback,otdAds,zoneCode,slotOp,survey,hasTabs,floaterParams&#x27;</span>,<br>    <span class="hljs-string">&#x27;harmony_app&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;harmony_os&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;headTabType&#x27;</span>: <span class="hljs-string">&#x27;all&#x27;</span>,<br>    <span class="hljs-string">&#x27;height&#x27;</span>: <span class="hljs-string">&#x27;2984&#x27;</span>,<br>    <span class="hljs-string">&#x27;isMultiTab&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;keyword&#x27;</span>: <span class="hljs-string">&#x27;玩具&#x27;</span>,<br>    <span class="hljs-comment"># &#x27;lastPageProperty&#x27;: &#x27;&#123;&quot;isBgToFront&quot;:&quot;0&quot;,&quot;suggest_text&quot;:&quot;洗面奶&quot;,&quot;scene_entry_id&quot;:&quot;-99&quot;,&quot;refer_page_id&quot;:&quot;page_te_globle_classify_search_1709112203190&quot;,&quot;text&quot;:&quot;洗面奶&quot;,&quot;tag&quot;:&quot;1&quot;,&quot;module_name&quot;:&quot;com.achievo.vipshop.search&quot;,&quot;type&quot;:&quot;all&quot;,&quot;typename&quot;:&quot;全部&quot;,&quot;is_back_page&quot;:&quot;0&quot;&#125;&#x27;,</span><br>    <span class="hljs-comment"># &#x27;maker&#x27;: &#x27;GOOGLE&#x27;,</span><br>    <span class="hljs-string">&#x27;mars_cid&#x27;</span>: <span class="hljs-string">&#x27;1b82eaf8-0357-48d3-9956-882b38de39b8&#x27;</span>,<br>    <span class="hljs-string">&#x27;mobile_channel&#x27;</span>: <span class="hljs-string">&#x27;oziq7dxw:::&#x27;</span>,<br>    <span class="hljs-string">&#x27;mobile_platform&#x27;</span>: <span class="hljs-string">&#x27;3&#x27;</span>,<br>    <span class="hljs-string">&#x27;net&#x27;</span>: <span class="hljs-string">&#x27;WIFI&#x27;</span>,<br>    <span class="hljs-string">&#x27;operator&#x27;</span>: <span class="hljs-string">&#x27;45406&#x27;</span>,<br>    <span class="hljs-string">&#x27;os&#x27;</span>: <span class="hljs-string">&#x27;Android&#x27;</span>,<br>    <span class="hljs-string">&#x27;osv&#x27;</span>: <span class="hljs-string">&#x27;10&#x27;</span>,<br>    <span class="hljs-string">&#x27;otddid&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;other_cps&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;page_id&#x27;</span>: <span class="hljs-string">&#x27;page_te_commodity_search_1709112205099&#x27;</span>,<br>    <span class="hljs-comment"># &#x27;phone_model&#x27;: &#x27;pixel 4 xl&#x27;,</span><br>    <span class="hljs-comment"># &#x27;priceMax&#x27;: &#x27;&#x27;,</span><br>    <span class="hljs-comment"># &#x27;priceMin&#x27;: &#x27;&#x27;,</span><br>    <span class="hljs-comment"># &#x27;props&#x27;: &#x27;&#x27;,</span><br>    <span class="hljs-comment"># &#x27;province_id&#x27;: &#x27;103101&#x27;,</span><br>    <span class="hljs-string">&#x27;referer&#x27;</span>: <span class="hljs-string">&#x27;com.achievo.vipshop.search.activity.TabSearchProductListActivity&#x27;</span>,<br>    <span class="hljs-string">&#x27;rom&#x27;</span>: <span class="hljs-string">&#x27;Dalvik/2.1.0 (Linux; U; Android 10; Pixel 4 XL Build/QQ3A.200805.001)&#x27;</span>,<br>    <span class="hljs-string">&#x27;sd_tuijian&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;service_provider&#x27;</span>: <span class="hljs-string">&#x27;45406&#x27;</span>,<br>    <span class="hljs-string">&#x27;session_id&#x27;</span>: <span class="hljs-string">&#x27;ed0f0e40-4788-324b-8000-79a11b44f6ee_shop_android_1709111748547&#x27;</span>,<br>    <span class="hljs-string">&#x27;skey&#x27;</span>: <span class="hljs-string">&#x27;6692c461c3810ab150c9a980d0c275ec&#x27;</span>,<br>    <span class="hljs-string">&#x27;sort&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>    <span class="hljs-string">&#x27;source&#x27;</span>: <span class="hljs-string">&#x27;app&#x27;</span>,<br>    <span class="hljs-string">&#x27;source_app&#x27;</span>: <span class="hljs-string">&#x27;android&#x27;</span>,<br>    <span class="hljs-string">&#x27;standby_id&#x27;</span>: <span class="hljs-string">&#x27;oziq7dxw:::&#x27;</span>,<br>    <span class="hljs-string">&#x27;sys_version&#x27;</span>: <span class="hljs-string">&#x27;29&#x27;</span>,<br>    <span class="hljs-string">&#x27;timestamp&#x27;</span>: <span class="hljs-string">&#x27;1709112205&#x27;</span>,<br>    <span class="hljs-string">&#x27;union_mark&#x27;</span>: <span class="hljs-string">&#x27;blank&amp;_&amp;blank&amp;_&amp;oziq7dxw:::&amp;_&amp;blank&amp;_&amp;blank&#x27;</span>,<br>    <span class="hljs-string">&#x27;vipService&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-string">&#x27;warehouse&#x27;</span>: <span class="hljs-string">&#x27;VIP_SH&#x27;</span>,<br>    <span class="hljs-string">&#x27;width&#x27;</span>: <span class="hljs-string">&#x27;1440&#x27;</span>,<br>&#125;<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_api_signe</span>(<span class="hljs-params">data:<span class="hljs-built_in">dict</span></span>):<br>    ordered_string = <span class="hljs-string">&quot;&amp;&quot;</span>.join([<span class="hljs-string">&quot;&#123;&#125;=&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(key, data[key]) <span class="hljs-keyword">for</span> key <span class="hljs-keyword">in</span> <span class="hljs-built_in">sorted</span>(data.keys())])<br>    salt = <span class="hljs-string">&quot;aee4c425dbb2288b80c71347cc37d04b&quot;</span><br>    tmp = sha1(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;salt&#125;</span><span class="hljs-subst">&#123;ordered_string&#125;</span>&quot;</span>)<br>    api_sign = sha1(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;salt&#125;</span><span class="hljs-subst">&#123;tmp&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">return</span> api_sign<br><br>response = requests.post(<br>    <span class="hljs-string">&#x27;https://mapi.appvipshop.com/vips-mobile/rest/shopping/search/product/list/v1&#x27;</span>,<br>    data=data,<br>    headers=&#123;<br>        <span class="hljs-string">&quot;Authorization&quot;</span>: <span class="hljs-string">&quot;OAuth api_sign=&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(get_api_signe(data))<br>    &#125;<br>)<br><br><span class="hljs-built_in">print</span>(response.json())<br><br></code></pre></td></tr></table></figure><p>尝试过随机生成的uuid，没有注册设备放在搜索参数里面，发现可以使用，猜测风控应该不严的，而且设备也没有登录，具体校验哪些参数需要使用</p>]]></content>
    
    
    
    <tags>
      
      <tag>安卓逆向</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python日期时间库</title>
    <link href="/2024/10/14/%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E5%BA%93/"/>
    <url>/2024/10/14/%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2023/02/25/FGPZdHgNCDhiUoM.png" alt="img"></p><h1 id="time-模块"><a href="#time-模块" class="headerlink" title="time 模块"></a>time 模块</h1><h2 id="本地时间和utc时间"><a href="#本地时间和utc时间" class="headerlink" title="本地时间和utc时间"></a>本地时间和utc时间</h2><p><code>time.localtime</code> <code>time.gtime[secs]</code> 会返回一个<code>struct_time</code> 时间元组，属性为只读,可以通过索引取值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">10</span>]: time.localtime()<br>Out[<span class="hljs-number">10</span>]: time.struct_time(tm_year=<span class="hljs-number">2023</span>, tm_mon=<span class="hljs-number">2</span>, tm_mday=<span class="hljs-number">25</span>, tm_hour=<span class="hljs-number">17</span>, tm_min=<span class="hljs-number">9</span>, tm_sec=<span class="hljs-number">42</span>, tm_wday=<span class="hljs-number">5</span>, tm_yday=<span class="hljs-number">56</span>, tm_isdst=<span class="hljs-number">0</span>)<br><br><br>In [<span class="hljs-number">11</span>]: t = time.localtime()<br>In [<span class="hljs-number">13</span>]: t[<span class="hljs-number">0</span>] = <span class="hljs-number">2010</span><br>---------------------------------------------------------------------------<br>TypeError   Traceback (most recent call last)<br>Cell In[<span class="hljs-number">13</span>], line <span class="hljs-number">1</span><br>----&gt; <span class="hljs-number">1</span> t[<span class="hljs-number">0</span>] = <span class="hljs-number">2010</span><br><br>TypeError: <span class="hljs-string">&#x27;time.struct_time&#x27;</span> <span class="hljs-built_in">object</span> does <span class="hljs-keyword">not</span> support item assignment<br><br>In [<span class="hljs-number">14</span>]: t[<span class="hljs-number">1</span>]<br>Out[<span class="hljs-number">14</span>]: <span class="hljs-number">2</span><br><br></code></pre></td></tr></table></figure><p><code>time.mktime([struct_time])</code> 转换为时间戳</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">17</span>]: time.mktime(time.localtime())<br>Out[<span class="hljs-number">17</span>]: <span class="hljs-number">1677317212.0</span><br></code></pre></td></tr></table></figure><h2 id="时间格式化"><a href="#时间格式化" class="headerlink" title="时间格式化"></a>时间格式化</h2><p><code>strftime(format,[struct_time])</code> 可以进行时间格式化，没指定时间元组默认是本地时间</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">16</span>]: time.strftime(<span class="hljs-string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)<br>Out[<span class="hljs-number">16</span>]: <span class="hljs-string">&#x27;2023-02-25 17:16:20&#x27;</span><br></code></pre></td></tr></table></figure><p>用到的格式有如下</p><p>%Y  Year with century as a decimal number.<br>%m  Month as a decimal number [01,12].<br>%d  Day of the month as a decimal number [01,31].<br>%H  Hour (24-hour clock) as a decimal number [00,23].<br>%M  Minute as a decimal number [00,59].<br>%S  Second as a decimal number [00,61].<br>%z  Time zone offset from UTC.<br>%a  Locale’s abbreviated weekday name.<br>%A  Locale’s full weekday name.<br>%b  Locale’s abbreviated month name.<br>%B  Locale’s full month name.<br>%c  Locale’s appropriate date and time representation.<br>%I  Hour (12-hour clock) as a decimal number [01,12].<br>%p  Locale’s equivalent of either AM or PM.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">18</span>]: time.strptime?<br>Docstring:<br>strptime(string, <span class="hljs-built_in">format</span>) -&gt; struct_time<br><br>Parse a string to a time <span class="hljs-built_in">tuple</span> according to a <span class="hljs-built_in">format</span> specification.<br>See the library reference manual <span class="hljs-keyword">for</span> formatting codes (same <span class="hljs-keyword">as</span><br>strftime()).<br><br><br>In [<span class="hljs-number">19</span>]: strtime = <span class="hljs-string">&#x27;2023-02-25 17:16:20&#x27;</span><br><br>In [<span class="hljs-number">20</span>]: time.strptime(strtime,<span class="hljs-string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)<br>Out[<span class="hljs-number">20</span>]: time.struct_time(tm_year=<span class="hljs-number">2023</span>, tm_mon=<span class="hljs-number">2</span>, tm_mday=<span class="hljs-number">25</span>, tm_hour=<span class="hljs-number">17</span>, tm_min=<span class="hljs-number">16</span>, tm_sec=<span class="hljs-number">20</span>, tm_wday=<span class="hljs-number">5</span>, tm_yday=<span class="hljs-number">56</span>, tm_isdst=-<span class="hljs-number">1</span>)<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/02/25/8jriZY4XqDWVTuG.png" alt="image-20230225170445545"></p><h1 id="datetime-模块"><a href="#datetime-模块" class="headerlink" title="datetime 模块"></a>datetime 模块</h1><p><a href="https://www.cnblogs.com/tkqasn/p/6001134.html">https://www.cnblogs.com/tkqasn/p/6001134.html</a></p><p><a href="https://www.liujiangblog.com/course/python/69">https://www.liujiangblog.com/course/python/69</a></p><p><a href="https://opensource.com/article/17/5/understanding-datetime-python-primer">https://opensource.com/article/17/5/understanding-datetime-python-primer</a></p><p><a href="https://zhuanlan.zhihu.com/p/37164491">https://zhuanlan.zhihu.com/p/37164491</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>猿人学APP09-证书验证闯关</title>
    <link href="/2024/10/14/%E7%8C%BF%E4%BA%BA%E5%AD%A6APP09%E5%AE%9E%E6%88%98/"/>
    <url>/2024/10/14/%E7%8C%BF%E4%BA%BA%E5%AD%A6APP09%E5%AE%9E%E6%88%98/</url>
    
    <content type="html"><![CDATA[<h2 id="尝试"><a href="#尝试" class="headerlink" title="尝试"></a>尝试</h2><p>平常常见的关键词 cert password  都搜索不到</p><p>不起作用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">objection -g  com.yuanrenxue.challenge  explore --startup-command &quot;android hooking watch class_method java.io.File.$init  –-dump-args –-dump-backtrace –-dump-return&quot;<br></code></pre></td></tr></table></figure><h2 id="代码审查"><a href="#代码审查" class="headerlink" title="代码审查"></a>代码审查</h2><p>搜索关键词  借问酒家何处有跳转到相关的组件中进行代码审查</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle bundle)</span> &#123;<br>    <span class="hljs-built_in">super</span>.onCreate(bundle);<br>    <span class="hljs-keyword">try</span> &#123;<br>        C9174oo0o0Oo.<span class="hljs-type">C9175OooO00o</span> <span class="hljs-variable">OoooO002</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">C9174oo0o0Oo</span>().OooOoO0().OoooO00(<span class="hljs-literal">false</span>);<br>        <span class="hljs-type">TimeUnit</span> <span class="hljs-variable">timeUnit</span> <span class="hljs-operator">=</span> TimeUnit.SECONDS;<br>        C9174oo0o0Oo.<span class="hljs-type">C9175OooO00o</span> <span class="hljs-variable">OoooO0O2</span> <span class="hljs-operator">=</span> OoooO002.OooO0o0(<span class="hljs-number">60</span>, timeUnit).Oooo(<span class="hljs-number">60</span>, timeUnit).OoooO0O(<span class="hljs-number">60</span>, timeUnit);<br>        <span class="hljs-type">TrustManagerFactory</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());<br>        instance.init(OooOooO());<br>        TrustManager[] trustManagers = instance.getTrustManagers();<br>        <span class="hljs-keyword">if</span> (trustManagers.length == <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-type">TrustManager</span> <span class="hljs-variable">trustManager</span> <span class="hljs-operator">=</span> trustManagers[<span class="hljs-number">0</span>];<br>            <span class="hljs-keyword">if</span> (trustManager <span class="hljs-keyword">instanceof</span> X509TrustManager) &#123;<br>                <span class="hljs-type">KeyStore</span> <span class="hljs-variable">instance2</span> <span class="hljs-operator">=</span> KeyStore.getInstance(C8385o00O0O.OooO00o(-<span class="hljs-number">5190684656253612251L</span>));<br>                instance2.load(getContext().getApplicationContext().getAssets().open(C8385o00O0O.OooO00o(-<span class="hljs-number">5190684673433481435L</span>)), C8385o00O0O.OooO00o(-<span class="hljs-number">5190684729268056283L</span>).toCharArray());<br>                <span class="hljs-type">KeyManagerFactory</span> <span class="hljs-variable">instance3</span> <span class="hljs-operator">=</span> KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());<br>                instance3.init(instance2, C8385o00O0O.OooO00o(-<span class="hljs-number">5190684802282500315L</span>).toCharArray());<br>                <span class="hljs-type">SSLContext</span> <span class="hljs-variable">instance4</span> <span class="hljs-operator">=</span> SSLContext.getInstance(C8385o00O0O.OooO00o(-<span class="hljs-number">5190684875296944347L</span>));<br>                instance4.init(instance3.getKeyManagers(), trustManagers, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecureRandom</span>());<br>                OoooO0O2.OoooO0(instance4.getSocketFactory(), (X509TrustManager) trustManager);<br>                OoooO0O2.Oooo0o0(<span class="hljs-keyword">new</span> <span class="hljs-title class_">C6642oo000o</span>(<span class="hljs-built_in">this</span>));<br>                <span class="hljs-built_in">this</span>.f12034OooO0o = OoooO0O2.OooO0OO();<br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(C8385o00O0O.OooO00o(-<span class="hljs-number">5190684505929756891L</span>) + Arrays.toString(trustManagers));<br>    &#125; <span class="hljs-keyword">catch</span> (Exception unused) &#123;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="找到相关代码"><a href="#找到相关代码" class="headerlink" title="找到相关代码"></a>找到相关代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">instance2.load(getContext().getApplicationContext().getAssets().open(C8385o00O0O.OooO00o(-<span class="hljs-number">5190684673433481435L</span>)), C8385o00O0O.OooO00o(-<span class="hljs-number">5190684729268056283L</span>).toCharArray());<br></code></pre></td></tr></table></figure><p>发现不是明文，补<code>C8385o00O0O.OooO00o</code>环境</p><p><img src="https://s2.loli.net/2023/12/29/L9cRipkIuW2bsPC.png" alt="image-20231229182603589"></p><p><img src="https://s2.loli.net/2023/12/29/rIjLEi7CJ236NU8.png" alt="image-20231229161050587"></p><p>文件名是： ./clientCA.bks</p><p>密码是：MZ4cozY8Qu32UzGe</p><h2 id="证书转换"><a href="#证书转换" class="headerlink" title="证书转换"></a>证书转换</h2><p>bks 不是标准的jks 文件需要安装 BouncyCastleProvider 密码学组件</p><p>官网地址:<a href="https://www.bouncycastle.org/latest_releases.html">https://www.bouncycastle.org/latest_releases.html</a></p><p>1.8到17 版本的jar包 <a href="https://www.bouncycastle.org/download/bcprov-ext-jdk18on-177.jar">https://www.bouncycastle.org/download/bcprov-ext-jdk18on-177.jar</a></p><p>jdk17 不支持 lib/ext/ 目录</p><p><a href="https://stackoverflow.com/questions/67302528/java-security-keystoreexception-when-running-my-app-with-docker-compose">openjdk version “1.8.0_292” 有bug</a></p><p>本文使用的是 <code>openjdk version &quot;1.8.0_392&quot;</code> 版本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo cp ~/Downloads/bcprov-jdk18on-177.jar/Library/Java/JavaVirtualMachines/openjdk1.8.392/Contents/Home/jre/lib/ext<br><br>sudo vim /Library/Java/JavaVirtualMachines/openjdk1.8.392/Contents/Home/jre/lib/security/java.security<br><br><br><br>增加 security.provider.11=org.bouncycastle.jce.provider.BouncyCastleProvider #这一行<br><br>11 代表行数  如果有11 这一行，这个编号就往后加<br></code></pre></td></tr></table></figure><p>将bks 文件转换为 p12</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">keytool -importkeystore -srckeystore ./clientCA.bks -srcstoretype BKS -destkeystore clientCA.p12 -deststoretype PKCS12<br></code></pre></td></tr></table></figure><p>将p12 文件转换为 pem </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">openssl pkcs12 -in clientCA.p12 -out clientCA.pem<br></code></pre></td></tr></table></figure><p>密码是上面解出来的 <code>MZ4cozY8Qu32UzGe</code> </p><h2 id="抓包"><a href="#抓包" class="headerlink" title="抓包"></a>抓包</h2><p>mitmproxy 没有起作用 </p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">mitmweb  -<span class="hljs-selector-tag">p</span> <span class="hljs-number">9998</span> <span class="hljs-attr">--certs</span> ./clientCA<span class="hljs-selector-class">.pem</span> <span class="hljs-attr">--cert-passphrase</span> MZ4cozY8Qu32UzGe<br></code></pre></td></tr></table></figure><p>这里使用的是新版的BurpSuite 社区版,点击右上角<code>settings</code> 搜索<code>SSL</code> 在<code>TLS</code>中配置证书</p><p><img src="https://s2.loli.net/2023/12/30/Rix8qWBuo5CZvGm.png" alt="image-20231230165018837"></p><p><img src="https://s2.loli.net/2023/12/30/AoZjDtVvxgl29pd.png" alt="image-20231230165206011"></p><h2 id="转换证书"><a href="#转换证书" class="headerlink" title="转换证书"></a>转换证书</h2><p>在python 中使用自定义证书</p><p>requests 不支持p12 证书需要进行转换</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">openssl pkcs12 -clcerts -nokeys -out cer<span class="hljs-selector-class">.pem</span> -<span class="hljs-keyword">in</span> ./clientCA<span class="hljs-selector-class">.p12</span><br><br>openssl pkcs12 -nocerts -out key<span class="hljs-selector-class">.pem</span> -<span class="hljs-keyword">in</span> ./clientCA<span class="hljs-selector-class">.p12</span> -nodes  <br><br></code></pre></td></tr></table></figure><p>在这里,我们通过**-in<strong>参数指定传入的文件名称,而</strong>-out<strong>文件指定输出的文件名称,而</strong>-nodes**参数表示不对私钥进行加密。在这个过程中,我们需要输入签名时的密码。</p><h2 id="在requests-中使用"><a href="#在requests-中使用" class="headerlink" title="在requests 中使用"></a>在requests 中使用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>cert_file = <span class="hljs-string">&#x27;/Users/king/cer.pem&#x27;</span><br>cert_password = <span class="hljs-string">&#x27;/Users/king/key.pem&#x27;</span><br><br>headers = &#123;<br>    <span class="hljs-string">&#x27;Host&#x27;</span>: <span class="hljs-string">&#x27;180.76.60.244:8443&#x27;</span>,<br>    <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/x-www-form-urlencoded&#x27;</span>,<br>    <span class="hljs-comment"># &#x27;Content-Length&#x27;: &#x27;6&#x27;,</span><br>    <span class="hljs-comment"># &#x27;Accept-Encoding&#x27;: &#x27;gzip, deflate, br&#x27;,</span><br>    <span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;okhttp/4.9.1&#x27;</span>,<br>    <span class="hljs-string">&#x27;Connection&#x27;</span>: <span class="hljs-string">&#x27;close&#x27;</span>,<br>&#125;<br><br>data = &#123;<br>    <span class="hljs-string">&#x27;page&#x27;</span>: <span class="hljs-string">&#x27;1&#x27;</span>,<br>&#125;<br><br>response = requests.post(<span class="hljs-string">&#x27;https://180.76.60.244:8443/api/app9&#x27;</span>, headers=headers, data=data, verify=<span class="hljs-literal">False</span>,<br>                         cert=(cert_file, cert_password))<br><br><span class="hljs-built_in">print</span>(response)<br><span class="hljs-built_in">print</span>(response.text)<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2023/12/30/uDjkzEflZcHUpe2.png" alt="image-20231230165520348"></p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p>1.<a href="https://www.ucloud.cn/yun/9438.html">使用 OpenSSL 实现私钥和证书的转换</a></p><p>2.<a href="https://bbs.kanxue.com/thread-265404.htm">安卓APP抓包之双向认证突破</a></p><p>3.<a href="https://www.secpulse.com/archives/177572.html">双向认证APP自吐证书密码与抓包</a></p><p>4.<a href="https://www.ssl.com/zh-CN/%E5%A6%82%E4%BD%95/%E4%BD%BF%E7%94%A8openssl%E4%BB%8Epkcs12%E6%96%87%E4%BB%B6%E4%B8%AD%E5%AF%BC%E5%87%BA%E8%AF%81%E4%B9%A6%E7%A7%81%E9%92%A5/">使用openssl从pkcs12文件中导出证书私钥</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>APP逆向</tag>
      
      <tag>证书逆向</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>猿人学APP10-ReactNative</title>
    <link href="/2024/10/14/%E7%8C%BF%E4%BA%BA%E5%AD%A6APP10%E5%AE%9E%E6%88%98/"/>
    <url>/2024/10/14/%E7%8C%BF%E4%BA%BA%E5%AD%A6APP10%E5%AE%9E%E6%88%98/</url>
    
    <content type="html"><![CDATA[<p>React Native 混合开发APP </p><p>没有找到文字提示的的组件，定位<code>AndroidManifest.xml</code> 搜索<code>facebook</code> 找到相关的信息<code>com.yuanrenxue.challenge.activity.RNActivity</code></p><p><img src="https://s2.loli.net/2024/01/04/Mm8x5hKPzvOREwo.png" alt="image-20240104145136691"></p><p>然后搜索该类找到<code>RNActivity</code> 审查代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript">public final <span class="hljs-keyword">void</span> <span class="hljs-title class_">OoooO</span>() &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">f11641OooO0o</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactRootView</span>(<span class="hljs-variable language_">this</span>);<br>        C2419OooO00o <span class="hljs-title class_">OooO0O02</span> = C2419OooO00o.<span class="hljs-title class_">OooOOO0</span>().<span class="hljs-title class_">OooO0Oo</span>(<span class="hljs-title function_">getApplication</span>()).<span class="hljs-title class_">OooO0</span>o(<span class="hljs-variable language_">this</span>).<span class="hljs-title class_">OooO0</span>o0(<span class="hljs-string">&quot;index.android.bundle&quot;</span>).<span class="hljs-title class_">OooO0</span>oo(<span class="hljs-string">&quot;index&quot;</span>).<span class="hljs-title class_">OooO00</span>o(<span class="hljs-keyword">new</span> <span class="hljs-title function_">C4456OooO00o</span>()).<span class="hljs-title class_">OooO</span>(<span class="hljs-literal">false</span>).<span class="hljs-title class_">OooO0</span>oO(<span class="hljs-title class_">LifecycleState</span>.<span class="hljs-property">RESUMED</span>).<span class="hljs-title class_">OooO0O0</span>();<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">f11643OooO0oO</span> = <span class="hljs-title class_">OooO0O02</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">f11641OooO0o</span>.<span class="hljs-title class_">OooOOOO</span>(<span class="hljs-title class_">OooO0O02</span>, <span class="hljs-string">&quot;rn_module&quot;</span>);<br>    &#125;<br></code></pre></td></tr></table></figure><p>定位到关键词<code>index.android.bundle</code></p><p>在资源文件夹中找到，然后该文件，然后格式化后搜索<code>sign</code> 找到相关的代码，把sign 的代码抠出来就行了 </p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs prolog">var n = <span class="hljs-number">8</span>;<br><br>function t(n, t) &#123;<br>    n[t &gt;&gt; <span class="hljs-number">5</span>] |= <span class="hljs-number">128</span> &lt;&lt; t <span class="hljs-comment">% 32,</span><br>        n[<span class="hljs-number">14</span> + (t + <span class="hljs-number">64</span> &gt;&gt;&gt; <span class="hljs-number">9</span> &lt;&lt; <span class="hljs-number">4</span>)] = t;<br>    for (var u = <span class="hljs-number">1732584193</span>,<br>             i = <span class="hljs-number">-271733879</span>,<br>             h = <span class="hljs-number">-1732584194</span>,<br>             v = <span class="hljs-number">271733878</span>,<br>             d = <span class="hljs-number">0</span>; d &lt; n.length; d += <span class="hljs-number">16</span>) &#123;<br>        var l = u,<br>            <span class="hljs-symbol">A</span> = i,<br>            <span class="hljs-symbol">_</span> = h,<br>            b = v;<br>        i = o(i = o(i = o(i = o(i = f(i = f(i = f(i = f(i = c(i = c(i = c(i = c(i, h = c(h, v = c(v, u = c(u, i, h, v, n[d + <span class="hljs-number">0</span>], <span class="hljs-number">3</span>), i, h, n[d + <span class="hljs-number">1</span>], <span class="hljs-number">7</span>), u, i, n[d + <span class="hljs-number">2</span>], <span class="hljs-number">11</span>), v, u, n[d + <span class="hljs-number">3</span>], <span class="hljs-number">19</span>), h = c(h, v = c(v, u = c(u, i, h, v, n[d + <span class="hljs-number">4</span>], <span class="hljs-number">3</span>), i, h, n[d + <span class="hljs-number">5</span>], <span class="hljs-number">7</span>), u, i, n[d + <span class="hljs-number">6</span>], <span class="hljs-number">11</span>), v, u, n[d + <span class="hljs-number">7</span>], <span class="hljs-number">19</span>), h = c(h, v = c(v, u = c(u, i, h, v, n[d + <span class="hljs-number">8</span>], <span class="hljs-number">3</span>), i, h, n[d + <span class="hljs-number">9</span>], <span class="hljs-number">7</span>), u, i, n[d + <span class="hljs-number">10</span>], <span class="hljs-number">11</span>), v, u, n[d + <span class="hljs-number">11</span>], <span class="hljs-number">19</span>), h = c(h, v = c(v, u = c(u, i, h, v, n[d + <span class="hljs-number">12</span>], <span class="hljs-number">3</span>), i, h, n[d + <span class="hljs-number">13</span>], <span class="hljs-number">7</span>), u, i, n[d + <span class="hljs-number">14</span>], <span class="hljs-number">11</span>), v, u, n[d + <span class="hljs-number">15</span>], <span class="hljs-number">19</span>), h = f(h, v = f(v, u = f(u, i, h, v, n[d + <span class="hljs-number">0</span>], <span class="hljs-number">3</span>), i, h, n[d + <span class="hljs-number">4</span>], <span class="hljs-number">5</span>), u, i, n[d + <span class="hljs-number">8</span>], <span class="hljs-number">9</span>), v, u, n[d + <span class="hljs-number">12</span>], <span class="hljs-number">13</span>), h = f(h, v = f(v, u = f(u, i, h, v, n[d + <span class="hljs-number">1</span>], <span class="hljs-number">3</span>), i, h, n[d + <span class="hljs-number">5</span>], <span class="hljs-number">5</span>), u, i, n[d + <span class="hljs-number">9</span>], <span class="hljs-number">9</span>), v, u, n[d + <span class="hljs-number">13</span>], <span class="hljs-number">13</span>), h = f(h, v = f(v, u = f(u, i, h, v, n[d + <span class="hljs-number">2</span>], <span class="hljs-number">3</span>), i, h, n[d + <span class="hljs-number">6</span>], <span class="hljs-number">5</span>), u, i, n[d + <span class="hljs-number">10</span>], <span class="hljs-number">9</span>), v, u, n[d + <span class="hljs-number">14</span>], <span class="hljs-number">13</span>), h = f(h, v = f(v, u = f(u, i, h, v, n[d + <span class="hljs-number">3</span>], <span class="hljs-number">3</span>), i, h, n[d + <span class="hljs-number">7</span>], <span class="hljs-number">5</span>), u, i, n[d + <span class="hljs-number">11</span>], <span class="hljs-number">9</span>), v, u, n[d + <span class="hljs-number">15</span>], <span class="hljs-number">13</span>), h = o(h, v = o(v, u = o(u, i, h, v, n[d + <span class="hljs-number">0</span>], <span class="hljs-number">3</span>), i, h, n[d + <span class="hljs-number">8</span>], <span class="hljs-number">9</span>), u, i, n[d + <span class="hljs-number">4</span>], <span class="hljs-number">11</span>), v, u, n[d + <span class="hljs-number">12</span>], <span class="hljs-number">15</span>), h = o(h, v = o(v, u = o(u, i, h, v, n[d + <span class="hljs-number">2</span>], <span class="hljs-number">3</span>), i, h, n[d + <span class="hljs-number">10</span>], <span class="hljs-number">9</span>), u, i, n[d + <span class="hljs-number">6</span>], <span class="hljs-number">11</span>), v, u, n[d + <span class="hljs-number">14</span>], <span class="hljs-number">15</span>), h = o(h, v = o(v, u = o(u, i, h, v, n[d + <span class="hljs-number">1</span>], <span class="hljs-number">3</span>), i, h, n[d + <span class="hljs-number">9</span>], <span class="hljs-number">9</span>), u, i, n[d + <span class="hljs-number">5</span>], <span class="hljs-number">11</span>), v, u, n[d + <span class="hljs-number">13</span>], <span class="hljs-number">15</span>), h = o(h, v = o(v, u = o(u, i, h, v, n[d + <span class="hljs-number">3</span>], <span class="hljs-number">3</span>), i, h, n[d + <span class="hljs-number">11</span>], <span class="hljs-number">9</span>), u, i, n[d + <span class="hljs-number">7</span>], <span class="hljs-number">11</span>), v, u, n[d + <span class="hljs-number">15</span>], <span class="hljs-number">15</span>),<br>            u = a(u, l),<br>            i = a(i, <span class="hljs-symbol">A</span>),<br>            h = a(h, <span class="hljs-symbol">_</span>),<br>            v = a(v, b)<br>    &#125;<br>    return <span class="hljs-symbol">Array</span>(u, i, h, v)<br>&#125;<br><br>function u(n, t, u, c, f, o) &#123;<br>    return a((i = a(a(t, n), a(c, o))) &lt;&lt; (h = f) | i &gt;&gt;&gt; <span class="hljs-number">32</span> - h, u);<br>    var i, h<br>&#125;<br><br>function c(n, t, c, f, o, a) &#123;<br>    return u(c &amp; f | ~c &amp; t, n, <span class="hljs-number">0</span>, o, a, <span class="hljs-number">0</span>)<br>&#125;<br><br>function f(n, t, c, f, o, a) &#123;<br>    return u(t &amp; c | t &amp; f | c &amp; f, n, <span class="hljs-number">0</span>, o, a, <span class="hljs-number">1518500249</span>)<br>&#125;<br><br>function o(n, t, c, f, o, a) &#123;<br>    return u(t ^ c ^ f, n, <span class="hljs-number">0</span>, o, a, <span class="hljs-number">1859775393</span>)<br>&#125;<br><br>function a(n, t) &#123;<br>    var u = (<span class="hljs-number">65535</span> &amp; n) + (<span class="hljs-number">65535</span> &amp; t);<br>    return (n &gt;&gt; <span class="hljs-number">16</span>) + (t &gt;&gt; <span class="hljs-number">16</span>) + (u &gt;&gt; <span class="hljs-number">16</span>) &lt;&lt; <span class="hljs-number">16</span> | <span class="hljs-number">65535</span> &amp; u<br>&#125;<br><br>function i(t) &#123;<br>    for (var u = <span class="hljs-symbol">Array</span>(), c = <span class="hljs-number">0</span>; c &lt; t.length * n; c += n) u[c &gt;&gt; <span class="hljs-number">5</span>] |= (<span class="hljs-number">255</span> &amp; t.charCodeAt(c / n)) &lt;&lt; c <span class="hljs-comment">% 32;</span><br>    return u<br>&#125;<br><br>function h(n) &#123;<br>    for (var t = <span class="hljs-string">&quot;&quot;</span>,<br>             u = <span class="hljs-number">0</span>; u &lt; <span class="hljs-number">4</span> * n.length; u++) t += <span class="hljs-string">&quot;0123456789abcdef&quot;</span>.charAt(n[u &gt;&gt; <span class="hljs-number">2</span>] &gt;&gt; u <span class="hljs-comment">% 4 * 8 + 4 &amp; 15) + &quot;0123456789abcdef&quot;.charAt(n[u &gt;&gt; 2] &gt;&gt; u % 4 * 8 &amp; 15);</span><br>    return t<br>&#125;<br><br>sign_hex = function (u) &#123;<br>    return h(t(i(u), u.length * n))<br>&#125;;<br><br><br>var page = <span class="hljs-number">1</span><br>var timestamp = <span class="hljs-number">1704343403939</span><br><br>console.log(sign_hex(page + <span class="hljs-string">&#x27;:&#x27;</span> + timestamp))<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">curl -i -s -k -X $&#x27;POST&#x27; \<br>    -H $&#x27;Host: www.python-spider.com&#x27; -H $&#x27;Content-Type: application/json&#x27; -H $&#x27;Content-Length: 70&#x27; -H $&#x27;Accept-Encoding: gzip, deflate, br&#x27; -H $&#x27;User-Agent: okhttp/4.9.2&#x27; -H $&#x27;Connection: close&#x27; \<br>    --data-binary $&#x27;&#123;\&quot;page\&quot;:1,\&quot;t\&quot;:1704343403939,\&quot;sign\&quot;:\&quot;def7c5a5750d8431ab1390423ab91c82\&quot;&#125;&#x27; \<br>    $&#x27;https://www.python-spider.com/api/app10&#x27;<br></code></pre></td></tr></table></figure><p>和抓包中的请求参数加密结果一直</p><p><img src="https://s2.loli.net/2024/01/04/YzsG75ICoP8ElgJ.png" alt="image-20240104151553077"></p>]]></content>
    
    
    
    <tags>
      
      <tag>APP逆向</tag>
      
      <tag>reactNative</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title></title>
    <link href="/2024/10/14/%E7%8C%BF%E4%BA%BA%E5%AD%A6Web61%E9%A2%98%E5%AE%9E%E6%88%98/"/>
    <url>/2024/10/14/%E7%8C%BF%E4%BA%BA%E5%AD%A6Web61%E9%A2%98%E5%AE%9E%E6%88%98/</url>
    
    <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> i = R[<span class="hljs-string">&#x27;nsYGK&#x27;</span>] + <span class="hljs-title function_">L</span>(c[<span class="hljs-string">&#x27;toString&#x27;</span>]())<br>, o = &#123;<br>  <span class="hljs-string">&#x27;page&#x27;</span>: <span class="hljs-title class_">String</span>(c)<br>&#125;;<br>$[<span class="hljs-string">&#x27;ajax&#x27;</span>](&#123;<br>  <span class="hljs-string">&#x27;url&#x27;</span>: i,<br>  <span class="hljs-string">&#x27;dataType&#x27;</span>: R[<span class="hljs-string">&#x27;MFPgf&#x27;</span>],<br>  <span class="hljs-string">&#x27;async&#x27;</span>: !![],<br>  <span class="hljs-string">&#x27;data&#x27;</span>: o,<br>  <span class="hljs-string">&#x27;type&#x27;</span>: R[<span class="hljs-string">&#x27;zDNUy&#x27;</span>],<br>  <span class="hljs-string">&#x27;beforeSend&#x27;</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">j</span>) &#123;<br>    (<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;&#125;());<br>  &#125;,<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">L</span>(<span class="hljs-params">j</span>) &#123;<br>  <span class="hljs-keyword">var</span> I = <span class="hljs-string">&#x27;2|3|0|4|1&#x27;</span>[<span class="hljs-string">&#x27;split&#x27;</span>](<span class="hljs-string">&#x27;|&#x27;</span>)<br>  , J = <span class="hljs-number">0xd</span> * -<span class="hljs-number">0x4</span> + <span class="hljs-number">0x1f35</span> * -<span class="hljs-number">0x1</span> + -<span class="hljs-number">0x2db</span> * -<span class="hljs-number">0xb</span>;<br>  <span class="hljs-keyword">while</span> (!![]) &#123;<br>    <span class="hljs-keyword">switch</span> (I[J++]) &#123;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;0&#x27;</span>:<br>        <span class="hljs-keyword">var</span> d = Y[<span class="hljs-string">&#x27;enc&#x27;</span>][<span class="hljs-string">&#x27;Utf8&#x27;</span>][<span class="hljs-string">&#x27;parse&#x27;</span>](S);<br>        <span class="hljs-keyword">continue</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;1&#x27;</span>:<br>        <span class="hljs-keyword">return</span> D[<span class="hljs-string">&#x27;toString&#x27;</span>]();<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;2&#x27;</span>:<br>        <span class="hljs-keyword">var</span> Y = <span class="hljs-title function_">V</span>(R[<span class="hljs-string">&#x27;SnZfo&#x27;</span>]);<br>        <span class="hljs-keyword">continue</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;3&#x27;</span>:<br>        <span class="hljs-keyword">var</span> S = <span class="hljs-string">&#x27;aiding88&#x27;</span>;<br>        <span class="hljs-keyword">continue</span>;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;4&#x27;</span>:<br>        <span class="hljs-keyword">var</span> D = Y[<span class="hljs-string">&#x27;AES&#x27;</span>][<span class="hljs-string">&#x27;encrypt&#x27;</span>](j, d, &#123;<br>          <span class="hljs-string">&#x27;mode&#x27;</span>: Y[<span class="hljs-string">&#x27;mode&#x27;</span>][<span class="hljs-string">&#x27;ECB&#x27;</span>],<br>          <span class="hljs-string">&#x27;padding&#x27;</span>: Y[<span class="hljs-string">&#x27;pad&#x27;</span>][<span class="hljs-string">&#x27;Pkcs7&#x27;</span>]<br>        &#125;);<br>        <span class="hljs-keyword">continue</span>;<br>    &#125;<br>    <span class="hljs-keyword">break</span>;<br>  &#125;<br>&#125;<br><span class="hljs-keyword">var</span> i = R[<span class="hljs-string">&#x27;nsYGK&#x27;</span>] + <span class="hljs-title function_">L</span>(c[<span class="hljs-string">&#x27;toString&#x27;</span>]())<br></code></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">L</span>(<span class="hljs-params">j</span>) &#123;<br><span class="hljs-keyword">var</span> Y = <span class="hljs-title function_">V</span>(R[<span class="hljs-string">&#x27;SnZfo&#x27;</span>]);<br><span class="hljs-keyword">var</span> S = <span class="hljs-string">&#x27;aiding88&#x27;</span>;<br><span class="hljs-keyword">var</span> d = Y[<span class="hljs-string">&#x27;enc&#x27;</span>][<span class="hljs-string">&#x27;Utf8&#x27;</span>][<span class="hljs-string">&#x27;parse&#x27;</span>](S);<br><span class="hljs-keyword">var</span> D = Y[<span class="hljs-string">&#x27;AES&#x27;</span>][<span class="hljs-string">&#x27;encrypt&#x27;</span>](j, d, &#123;<br>  <span class="hljs-string">&#x27;mode&#x27;</span>: Y[<span class="hljs-string">&#x27;mode&#x27;</span>][<span class="hljs-string">&#x27;ECB&#x27;</span>],<br>  <span class="hljs-string">&#x27;padding&#x27;</span>: Y[<span class="hljs-string">&#x27;pad&#x27;</span>][<span class="hljs-string">&#x27;Pkcs7&#x27;</span>]<br>&#125;);<br><span class="hljs-keyword">return</span> D[<span class="hljs-string">&#x27;toString&#x27;</span>]();&#125;<br></code></pre></td></tr></table></figure><p>使用cryptojs 尝试重写代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">CryptoJS</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;crypto-js&#x27;</span>);<br><br><span class="hljs-keyword">const</span> text = <span class="hljs-string">&quot;1&quot;</span>;<br><span class="hljs-keyword">const</span> key = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">&quot;aiding88&quot;</span>);<br><br><br><span class="hljs-keyword">let</span> keys = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>.<span class="hljs-title function_">parse</span>(key)<br><span class="hljs-keyword">let</span> encrypt = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">AES</span>.<span class="hljs-title function_">encrypt</span>(text, keys, &#123;<br>    <span class="hljs-attr">mode</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">mode</span>.<span class="hljs-property">ECB</span>, <span class="hljs-comment">//ECB模式</span><br>    <span class="hljs-attr">padding</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">pad</span>.<span class="hljs-property">Pkcs7</span> <span class="hljs-comment">//padding处理</span><br>&#125;);<br><br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Base64</span>.<span class="hljs-title function_">stringify</span>(encrypt.<span class="hljs-property">ciphertext</span>))<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(encrypt.<span class="hljs-property">ciphertext</span>.<span class="hljs-title function_">toString</span>());<br><br><span class="hljs-comment">//9X1+H/MyjceoBXn2nphj7g==</span><br><span class="hljs-comment">//f57d7e1ff3328dc7a80579f69e9863ee</span><br><br></code></pre></td></tr></table></figure><p>发现结果和在网页上的结果不一样</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>猿人学练习平台第一题</title>
    <link href="/2024/10/14/%E7%8C%BF%E4%BA%BA%E5%AD%A6%E7%BB%83%E4%B9%A0%E5%B9%B3%E5%8F%B0%E7%AC%AC%E4%B8%80%E9%A2%98/"/>
    <url>/2024/10/14/%E7%8C%BF%E4%BA%BA%E5%AD%A6%E7%BB%83%E4%B9%A0%E5%B9%B3%E5%8F%B0%E7%AC%AC%E4%B8%80%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">import</span> execjs<br><br>js = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string"></span><br><span class="hljs-string">var hexcase=0;var b64pad=&quot;&quot;;var chrsz=16;function hex_md5(a)&#123;return binl2hex(core_md5(str2binl(a),a.length*chrsz))&#125;function b64_md5(a)&#123;return binl2b64(core_md5(str2binl(a),a.length*chrsz))&#125;function str_md5(a)&#123;return binl2str(core_md5(str2binl(a),a.length*chrsz))&#125;function hex_hmac_md5(a,b)&#123;return binl2hex(core_hmac_md5(a,b))&#125;function b64_hmac_md5(a,b)&#123;return binl2b64(core_hmac_md5(a,b))&#125;function str_hmac_md5(a,b)&#123;return binl2str(core_hmac_md5(a,b))&#125;function md5_vm_test()&#123;return hex_md5(&quot;abc&quot;)==&quot;900150983cd24fb0d6963f7d28e17f72&quot;&#125;function core_md5(p,k)&#123;p[k&gt;&gt;5]|=128&lt;&lt;((k)%32);p[(((k+64)&gt;&gt;&gt;9)&lt;&lt;4)+14]=k;var o=1732584193;var n=-271733879;var m=-1732584194;var l=271733878;for(var g=0;g&lt;p.length;g+=16)&#123;var j=o;var h=n;var f=m;var e=l;o=md5_ff(o,n,m,l,p[g+0],7,-680976936);l=md5_ff(l,o,n,m,p[g+1],12,-389564586);m=md5_ff(m,l,o,n,p[g+2],17,606105819);n=md5_ff(n,m,l,o,p[g+3],22,-1044525330);o=md5_ff(o,n,m,l,p[g+4],7,-176418897);l=md5_ff(l,o,n,m,p[g+5],12,1200080426);m=md5_ff(m,l,o,n,p[g+6],17,-1473231341);n=md5_ff(n,m,l,o,p[g+7],22,-45705983);o=md5_ff(o,n,m,l,p[g+8],7,1770035416);l=md5_ff(l,o,n,m,p[g+9],12,-1958414417);m=md5_ff(m,l,o,n,p[g+10],17,-42063);n=md5_ff(n,m,l,o,p[g+11],22,-1990404162);o=md5_ff(o,n,m,l,p[g+12],7,1804660682);l=md5_ff(l,o,n,m,p[g+13],12,-40341101);m=md5_ff(m,l,o,n,p[g+14],17,-1502002290);n=md5_ff(n,m,l,o,p[g+15],22,1236535329);o=md5_gg(o,n,m,l,p[g+1],5,-165796510);l=md5_gg(l,o,n,m,p[g+6],9,-1069501632);m=md5_gg(m,l,o,n,p[g+11],14,643717713);n=md5_gg(n,m,l,o,p[g+0],20,-373897302);o=md5_gg(o,n,m,l,p[g+5],5,-701558691);l=md5_gg(l,o,n,m,p[g+10],9,38016083);m=md5_gg(m,l,o,n,p[g+15],14,-660478335);n=md5_gg(n,m,l,o,p[g+4],20,-405537848);o=md5_gg(o,n,m,l,p[g+9],5,568446438);l=md5_gg(l,o,n,m,p[g+14],9,-1019803690);m=md5_gg(m,l,o,n,p[g+3],14,-187363961);n=md5_gg(n,m,l,o,p[g+8],20,1163531501);o=md5_gg(o,n,m,l,p[g+13],5,-1444681467);l=md5_gg(l,o,n,m,p[g+2],9,-51403784);m=md5_gg(m,l,o,n,p[g+7],14,1735328473);n=md5_gg(n,m,l,o,p[g+12],20,-1921207734);o=md5_hh(o,n,m,l,p[g+5],4,-378558);l=md5_hh(l,o,n,m,p[g+8],11,-2022574463);m=md5_hh(m,l,o,n,p[g+11],16,1839030562);n=md5_hh(n,m,l,o,p[g+14],23,-35309556);o=md5_hh(o,n,m,l,p[g+1],4,-1530992060);l=md5_hh(l,o,n,m,p[g+4],11,1272893353);m=md5_hh(m,l,o,n,p[g+7],16,-155497632);n=md5_hh(n,m,l,o,p[g+10],23,-1094730640);o=md5_hh(o,n,m,l,p[g+13],4,681279174);l=md5_hh(l,o,n,m,p[g+0],11,-358537222);m=md5_hh(m,l,o,n,p[g+3],16,-722881979);n=md5_hh(n,m,l,o,p[g+6],23,76029189);o=md5_hh(o,n,m,l,p[g+9],4,-640364487);l=md5_hh(l,o,n,m,p[g+12],11,-421815835);m=md5_hh(m,l,o,n,p[g+15],16,530742520);n=md5_hh(n,m,l,o,p[g+2],23,-995338651);o=md5_ii(o,n,m,l,p[g+0],6,-198630844);l=md5_ii(l,o,n,m,p[g+7],10,11261161415);m=md5_ii(m,l,o,n,p[g+14],15,-1416354905);n=md5_ii(n,m,l,o,p[g+5],21,-57434055);o=md5_ii(o,n,m,l,p[g+12],6,1700485571);l=md5_ii(l,o,n,m,p[g+3],10,-1894446606);m=md5_ii(m,l,o,n,p[g+10],15,-1051523);n=md5_ii(n,m,l,o,p[g+1],21,-2054922799);o=md5_ii(o,n,m,l,p[g+8],6,1873313359);l=md5_ii(l,o,n,m,p[g+15],10,-30611744);m=md5_ii(m,l,o,n,p[g+6],15,-1560198380);n=md5_ii(n,m,l,o,p[g+13],21,1309151649);o=md5_ii(o,n,m,l,p[g+4],6,-145523070);l=md5_ii(l,o,n,m,p[g+11],10,-1120210379);m=md5_ii(m,l,o,n,p[g+2],15,718787259);n=md5_ii(n,m,l,o,p[g+9],21,-343485551);o=safe_add(o,j);n=safe_add(n,h);m=safe_add(m,f);l=safe_add(l,e)&#125;return Array(o,n,m,l)&#125;function md5_cmn(h,e,d,c,g,f)&#123;return safe_add(bit_rol(safe_add(safe_add(e,h),safe_add(c,f)),g),d)&#125;function md5_ff(g,f,k,j,e,i,h)&#123;return md5_cmn((f&amp;k)|((~f)&amp;j),g,f,e,i,h)&#125;function md5_gg(g,f,k,j,e,i,h)&#123;return md5_cmn((f&amp;j)|(k&amp;(~j)),g,f,e,i,h)&#125;function md5_hh(g,f,k,j,e,i,h)&#123;return md5_cmn(f^k^j,g,f,e,i,h)&#125;function md5_ii(g,f,k,j,e,i,h)&#123;return md5_cmn(k^(f|(~j)),g,f,e,i,h)&#125;function core_hmac_md5(c,f)&#123;var e=str2binl(c);if(e.length&gt;16)&#123;e=core_md5(e,c.length*chrsz)&#125;var a=Array(16),d=Array(16);for(var b=0;b&lt;16;b++)&#123;a[b]=e[b]^909522486;d[b]=e[b]^1549556828&#125;var g=core_md5(a.concat(str2binl(f)),512+f.length*chrsz);return core_md5(d.concat(g),512+128)&#125;function safe_add(a,d)&#123;var c=(a&amp;65535)+(d&amp;65535);var b=(a&gt;&gt;16)+(d&gt;&gt;16)+(c&gt;&gt;16);return(b&lt;&lt;16)|(c&amp;65535)&#125;function bit_rol(a,b)&#123;return(a&lt;&lt;b)|(a&gt;&gt;&gt;(32-b))&#125;function str2binl(d)&#123;var c=Array();var a=(1&lt;&lt;chrsz)-1;for(var b=0;b&lt;d.length*chrsz;b+=chrsz)&#123;c[b&gt;&gt;5]|=(d.charCodeAt(b/chrsz)&amp;a)&lt;&lt;(b%32)&#125;return c&#125;function binl2str(c)&#123;var d=&quot;&quot;;var a=(1&lt;&lt;chrsz)-1;for(var b=0;b&lt;c.length*32;b+=chrsz)&#123;d+=String.fromCharCode((c[b&gt;&gt;5]&gt;&gt;&gt;(b%32))&amp;a)&#125;return d&#125;function binl2hex(c)&#123;var b=hexcase?&quot;0123456789ABCDEF&quot;:&quot;0123456789abcdef&quot;;var d=&quot;&quot;;for(var a=0;a&lt;c.length*4;a++)&#123;d+=b.charAt((c[a&gt;&gt;2]&gt;&gt;((a%4)*8+4))&amp;15)+b.charAt((c[a&gt;&gt;2]&gt;&gt;((a%4)*8))&amp;15)&#125;return d&#125;function binl2b64(d)&#123;var c=&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/&quot;;var f=&quot;&quot;;for(var b=0;b&lt;d.length*4;b+=3)&#123;var e=(((d[b&gt;&gt;2]&gt;&gt;8*(b%4))&amp;255)&lt;&lt;16)|(((d[b+1&gt;&gt;2]&gt;&gt;8*((b+1)%4))&amp;255)&lt;&lt;8)|((d[b+2&gt;&gt;2]&gt;&gt;8*((b+2)%4))&amp;255);for(var a=0;a&lt;4;a++)&#123;if(b*8+a*6&gt;d.length*32)&#123;f+=b64pad&#125;else&#123;f+=c.charAt((e&gt;&gt;6*(3-a))&amp;63)&#125;&#125;&#125;return f&#125;</span><br><span class="hljs-string"></span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-built_in">hash</span> = execjs.<span class="hljs-built_in">compile</span>(js)<br><br><span class="hljs-keyword">import</span> time<br><br>sec = <span class="hljs-built_in">str</span>(time.time()).partition(<span class="hljs-string">&#x27;.&#x27;</span>)[<span class="hljs-number">0</span>]<br><br>timestamp = <span class="hljs-built_in">int</span>(sec) * <span class="hljs-number">1000</span> + <span class="hljs-number">100000000</span>  <span class="hljs-comment"># == date.parse(new Date()) + 100000000</span><br><br>m = <span class="hljs-built_in">hash</span>.call(<span class="hljs-string">&#x27;hex_md5&#x27;</span>, <span class="hljs-built_in">str</span>(timestamp))<br><br>m = m + <span class="hljs-string">&#x27;丨&#x27;</span> + <span class="hljs-built_in">str</span>(<span class="hljs-built_in">int</span>(timestamp) // <span class="hljs-number">1000</span>)<br><br><span class="hljs-keyword">import</span> requests<br><br>headers = &#123;<br>    <span class="hljs-string">&quot;authority&quot;</span>: <span class="hljs-string">&quot;match.yuanrenxue.com&quot;</span>,<br>    <span class="hljs-string">&quot;accept&quot;</span>: <span class="hljs-string">&quot;application/json, text/javascript, */*; q=0.01&quot;</span>,<br>    <span class="hljs-string">&quot;user-agent&quot;</span>: <span class="hljs-string">&quot;yuanrenxue.project&quot;</span>,<br>&#125;<br><br>url = <span class="hljs-string">&quot;https://match.yuanrenxue.com/api/match/1&quot;</span><br>l = []<br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>):<br>    params = &#123;<br>        <span class="hljs-string">&quot;page&quot;</span>: <span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;i&#125;</span>&#x27;</span>,<br>        <span class="hljs-string">&quot;m&quot;</span>: <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;m&#125;</span>&quot;</span><br>    &#125;<br>    response = requests.get(url, headers=headers, params=params)<br><br>    l.extend([<span class="hljs-built_in">int</span>(i.get(<span class="hljs-string">&#x27;value&#x27;</span>)) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> response.json()[<span class="hljs-string">&#x27;data&#x27;</span>]])<br><br><span class="hljs-built_in">print</span>(l)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>(l) / <span class="hljs-built_in">len</span>(l))<br><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>JS 逆向</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>车智赢unidbg调用</title>
    <link href="/2024/10/14/%E8%BD%A6%E6%99%BA%E8%B5%A2unidbg%E8%B0%83%E7%94%A8/"/>
    <url>/2024/10/14/%E8%BD%A6%E6%99%BA%E8%B5%A2unidbg%E8%B0%83%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> demo;<br><br><br><span class="hljs-keyword">import</span> com.github.unidbg.AndroidEmulator;<br><span class="hljs-keyword">import</span> com.github.unidbg.Module;<br><span class="hljs-keyword">import</span> com.github.unidbg.linux.android.AndroidEmulatorBuilder;<br><span class="hljs-keyword">import</span> com.github.unidbg.linux.android.AndroidResolver;<br><span class="hljs-keyword">import</span> com.github.unidbg.linux.android.dvm.*;<br><span class="hljs-comment">//import com.github.unidbg.linux.android.dvm.jni.ProxyClassFactory;</span><br><span class="hljs-keyword">import</span> com.github.unidbg.memory.Memory;<br><br><span class="hljs-keyword">import</span> java.io.File;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">che</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractJni</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> AndroidEmulator emulator;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Memory memory;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> VM vm;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DalvikModule dm;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Module <span class="hljs-keyword">module</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">processName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;com.che168.autotradercloud&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;unidbg-android/apks/che/atc241.apk&quot;</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">libName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;unidbg-android/apks/che/libnative-lib.so&quot;</span>;<br><br>    che() &#123;<br><br>        <span class="hljs-comment">// 1.创建设备（32位或64位模拟器）， 具体看so文件在哪个目录。 在armeabi-v7a就选择32位</span><br>        emulator = AndroidEmulatorBuilder.for32Bit().setProcessName(getClass().getSimpleName()).build();<br><br>        <span class="hljs-comment">// 2.获取内存对象（可以操作内存）</span><br>        memory = emulator.getMemory();<br><br>        <span class="hljs-comment">// 3.设置安卓sdk版本（只支持19、23）</span><br>        memory.setLibraryResolver(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AndroidResolver</span>(<span class="hljs-number">23</span>));<br><br>        <span class="hljs-comment">// 4.创建虚拟机（运行安卓代码需要虚拟机，就想运行py代码需要python解释器一样）</span><br>        vm = emulator.createDalvikVM(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(fileName));<br>        vm.setJni(<span class="hljs-built_in">this</span>);<br>        <span class="hljs-comment">//vm.setVerbose(true); //是否展示调用过程的细节</span><br><br>        <span class="hljs-comment">// 5.加载so文件</span><br>        <span class="hljs-type">DalvikModule</span> <span class="hljs-variable">dm</span> <span class="hljs-operator">=</span> vm.loadLibrary(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(libName), <span class="hljs-literal">false</span>);<br>        <span class="hljs-comment">//dm.callJNI_OnLoad(emulator);</span><br><br>        <span class="hljs-comment">// 6.dm代表so文件，dm.getModule()得到module对象，基于module对象可以访问so中的成员。</span><br>        <span class="hljs-keyword">module</span> = dm.getModule();<br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">che</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">che</span>();<br>        obj.sign();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sign</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">DvmClass</span> <span class="hljs-variable">checkSignUtil</span> <span class="hljs-operator">=</span> vm.resolveClass(<span class="hljs-string">&quot;com/autohome/ahkit/jni/CheckSignUtil&quot;</span>);<br><br>        <span class="hljs-type">StringObject</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> checkSignUtil.callStaticJniMethodObject(emulator,<br>                <span class="hljs-string">&quot;get3desKey(Landroid/content/Context)Ljava/lang/String&quot;</span>,<br>                vm.resolveClass(<span class="hljs-string">&quot;android/content/Context&quot;</span>).newObject(<span class="hljs-literal">null</span>)<br>        );<br><br>        System.out.println(obj.getValue());<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>安卓逆向</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>逗游网登录流程逆向</title>
    <link href="/2024/10/14/%E9%80%97%E6%B8%B8%E7%BD%91%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B%E9%80%86%E5%90%91/"/>
    <url>/2024/10/14/%E9%80%97%E6%B8%B8%E7%BD%91%E7%99%BB%E5%BD%95%E6%B5%81%E7%A8%8B%E9%80%86%E5%90%91/</url>
    
    <content type="html"><![CDATA[<p>目标网址： aHR0cHM6Ly93d3cuZG95by5jbi9wYXNzcG9ydC9sb2dpbgo=</p><p><img src="https://s2.loli.net/2023/12/29/oMgiyFR3UESQTAN.png" alt="image-20231229105015701"></p><p><img src="https://s2.loli.net/2023/12/29/qV3j16Xt8FvnJi7.png" alt="image-20231229105043618"></p><p><img src="https://s2.loli.net/2023/12/29/rMnySDCdcXmftwg.png" alt="image-20231229105504429"></p><p><img src="https://s2.loli.net/2024/02/28/ESDgxpVzvJlBdTt.png" alt="image-20231229105314792"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$(<span class="hljs-string">&quot;.login_submit&quot;</span>).<span class="hljs-title function_">click</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>$(<span class="hljs-string">&quot;.login_grey[name=&#x27;user_name&#x27;]&quot;</span>).<span class="hljs-title function_">triggerHandler</span>(<span class="hljs-string">&quot;blur&quot;</span>);<br>$(<span class="hljs-string">&quot;.login_grey[name=&#x27;user_password&#x27;]&quot;</span>).<span class="hljs-title function_">triggerHandler</span>(<span class="hljs-string">&quot;blur&quot;</span>);<br><span class="hljs-keyword">if</span>($(<span class="hljs-string">&quot;.login_red&quot;</span>).<span class="hljs-property">length</span>==<span class="hljs-number">0</span>)&#123;<br><span class="hljs-keyword">var</span> nonce=<span class="hljs-literal">null</span>;<br><span class="hljs-keyword">var</span> ts=<span class="hljs-literal">null</span>;<br><span class="hljs-keyword">var</span> pwd=<span class="hljs-literal">null</span>;<br>$.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;/User/Passport/token&quot;</span>,&#123;<span class="hljs-string">&quot;username&quot;</span>:$(<span class="hljs-string">&quot;.login_grey[name=&#x27;user_name&#x27;]&quot;</span>).<span class="hljs-title function_">val</span>(),<span class="hljs-string">&quot;random&quot;</span>:<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()&#125;,<span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)&#123;<br><span class="hljs-keyword">if</span>(data.<span class="hljs-property">result</span>) &#123;<br>nonce = data.<span class="hljs-property">nonce</span>;<br>ts = data.<span class="hljs-property">ts</span>;<br>pwd = <span class="hljs-title class_">Sha1</span>.<span class="hljs-title function_">hash</span>($(<span class="hljs-string">&quot;.login_grey[name=&#x27;user_password&#x27;]&quot;</span>).<span class="hljs-title function_">val</span>());<br>pwd = <span class="hljs-title class_">Sha1</span>.<span class="hljs-title function_">hash</span>(nonce+ts+pwd);<br>$.<span class="hljs-title function_">post</span>(<span class="hljs-string">&quot;/User/Passport/login&quot;</span>,&#123;<span class="hljs-string">&quot;username&quot;</span>:$(<span class="hljs-string">&quot;.login_grey[name=&#x27;user_name&#x27;]&quot;</span>).<span class="hljs-title function_">val</span>(),<br><span class="hljs-string">&quot;password&quot;</span>:pwd,<br><span class="hljs-string">&quot;remberme&quot;</span>:$(<span class="hljs-string">&quot;.login_keep[name=&#x27;keep_login&#x27;]:checked&quot;</span>).<span class="hljs-property">length</span>,<br><span class="hljs-string">&quot;next&quot;</span>:<span class="hljs-string">&quot;JTJG&quot;</span>&#125;,<span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)&#123;<br><span class="hljs-keyword">if</span>(data.<span class="hljs-property">result</span>)&#123;<br>location=data.<span class="hljs-property">next</span>;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-keyword">if</span>(data.<span class="hljs-property">reason</span>==<span class="hljs-string">&quot;您的注册邮箱还没通过验证！&quot;</span>)&#123;<br>location=<span class="hljs-string">&quot;/User/Passport/register_2?username=&quot;</span>+data.<span class="hljs-property">username</span>+<span class="hljs-string">&quot;&amp;email=&quot;</span>+data.<span class="hljs-property">email</span>;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br>$(<span class="hljs-string">&quot;.login_box .red&quot;</span>).<span class="hljs-title function_">hide</span>();<br>$(<span class="hljs-string">&quot;.login_box .alarm_login&quot;</span>).<span class="hljs-title function_">addClass</span>(<span class="hljs-string">&quot;red&quot;</span>).<span class="hljs-title function_">show</span>().<span class="hljs-title function_">html</span>(data.<span class="hljs-property">reason</span>);<br>&#125;<br>&#125;<br>&#125;,<span class="hljs-string">&quot;json&quot;</span>);<br><br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;加密字符串获取失败！&quot;</span>);<br>&#125;<br>&#125;,<span class="hljs-string">&quot;json&quot;</span>);<br>&#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p>这个栈比较少点击查看很快就跟到了 </p><p>核心逻辑</p><p>第一次请求时本地生成一个随机数，发送给服务端，服务端返回一个时间戳和随机数，先sha1,然后nonce+ts+pwd 拼接之后再做sha1 </p>]]></content>
    
    
    
    <tags>
      
      <tag>js逆向</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mac 平台下使用orbstack 中的k8s 部署flask 应用</title>
    <link href="/2024/10/14/Mac%20%E5%B9%B3%E5%8F%B0%E4%B8%8B%E4%BD%BF%E7%94%A8orbstack%20%E4%B8%AD%E7%9A%84k8s%20%E9%83%A8%E7%BD%B2flask%20%E5%BA%94%E7%94%A8/"/>
    <url>/2024/10/14/Mac%20%E5%B9%B3%E5%8F%B0%E4%B8%8B%E4%BD%BF%E7%94%A8orbstack%20%E4%B8%AD%E7%9A%84k8s%20%E9%83%A8%E7%BD%B2flask%20%E5%BA%94%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>本文使用orbstack 中的minikube</p><p>也可以是用在线的k8s playground </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>labs.play-with-k8s.com/<br></code></pre></td></tr></table></figure><h2 id="部署应用"><a href="#部署应用" class="headerlink" title="部署应用"></a>部署应用</h2><h3 id="kubectl-基础知识"><a href="#kubectl-基础知识" class="headerlink" title="kubectl 基础知识"></a>kubectl 基础知识</h3><p>kubectl 命令的常见格式是：<code>kubectl</code> <code>操作资源</code></p><p>这会对指定的资源（类似 node 或 deployment）执行指定的操作（类似 create、describe 或 delete）。 你可以在子命令之后使用 –help 获取可能参数相关的更多信息（例如：kubectl get nodes –help）。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs shell"> kubectl version --output=json<br>&#123;<br>  &quot;clientVersion&quot;: &#123;<br>    &quot;major&quot;: &quot;1&quot;,<br>    &quot;minor&quot;: &quot;27&quot;,<br>    &quot;gitVersion&quot;: &quot;v1.27.4&quot;,<br>    &quot;gitCommit&quot;: &quot;fa3d7990104d7c1f16943a67f11b154b71f6a132&quot;,<br>    &quot;gitTreeState&quot;: &quot;clean&quot;,<br>    &quot;buildDate&quot;: &quot;2023-07-19T12:20:54Z&quot;,<br>    &quot;goVersion&quot;: &quot;go1.20.6&quot;,<br>    &quot;compiler&quot;: &quot;gc&quot;,<br>    &quot;platform&quot;: &quot;darwin/arm64&quot;<br>  &#125;,<br>  &quot;kustomizeVersion&quot;: &quot;v5.0.1&quot;,<br>  &quot;serverVersion&quot;: &#123;<br>    &quot;major&quot;: &quot;1&quot;,<br>    &quot;minor&quot;: &quot;27&quot;,<br>    &quot;gitVersion&quot;: &quot;v1.27.4+orb1&quot;,<br>    &quot;gitCommit&quot;: &quot;40f54c2c6d383b1de832c2bc95f0966e047f7e7b&quot;,<br>    &quot;gitTreeState&quot;: &quot;dirty&quot;,<br>    &quot;buildDate&quot;: &quot;2023-08-29T06:23:17Z&quot;,<br>    &quot;goVersion&quot;: &quot;go1.20.4&quot;,<br>    &quot;compiler&quot;: &quot;gc&quot;,<br>    &quot;platform&quot;: &quot;linux/arm64&quot;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="kubectl-get-nodes"><a href="#kubectl-get-nodes" class="headerlink" title="kubectl get nodes"></a><code>kubectl get nodes</code></h4><p> 查看Node 节点</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">kubectl get nodes<br>NAME       STATUS   ROLES                  AGE   VERSION<br>orbstack   Ready    control-plane,master   58d   v1.27.4+orb1<br></code></pre></td></tr></table></figure><h4 id="部署应用-1"><a href="#部署应用-1" class="headerlink" title="部署应用"></a>部署应用</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">kubectl create deployment kubernetes-bootcamp --image=gcr.io/google-samples/kubernetes-bootcamp:v1<br><span class="hljs-meta prompt_"># </span><span class="language-bash">deployment.apps/kubernetes-bootcamp created</span><br></code></pre></td></tr></table></figure><p>由于网络问题暂时使用<code>hhitzhl/kubernetes-bootcamp</code> 代替</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker pull hhitzhl/kubernetes-bootcamp<br>kubectl delete deployments kubernetes-bootcamp<br>kubectl create deployment kubernetes-bootcamp --image=hhitzhl/kubernetes-bootcamp<br></code></pre></td></tr></table></figure><h4 id="列出-deployments"><a href="#列出-deployments" class="headerlink" title="列出**deployments**"></a>列出**<code>deployments</code>**</h4><p><strong><code>kubectl get deployments</code></strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">❯ kubectl get deployments<br>NAME                  READY   UP-TO-DATE   AVAILABLE   AGE<br>kubernetes-bootcamp   0/1     1            0           2m19s<br></code></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">❯ kubectl <span class="hljs-keyword">get</span> deployments<br><span class="hljs-type">NAME</span>                  READY   UP-<span class="hljs-keyword">TO</span>-<span class="hljs-type">DATE</span>   AVAILABLE   AGE<br>kubernetes-bootcamp   <span class="hljs-number">1</span>/<span class="hljs-number">1</span>     <span class="hljs-number">1</span>            <span class="hljs-number">1</span>           <span class="hljs-number">20</span>s<br></code></pre></td></tr></table></figure><p><code>K8s node top </code>报错<code>error: Metrics API not available</code>  </p><p><a href="https://stackoverflow.com/questions/52694238/kubectl-top-node-error-metrics-not-available-yet-using-metrics-server-as-he">原文</a></p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">kubectl apply -f https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/kubernetes-sigs/m</span>etrics-server<span class="hljs-regexp">/releases/</span>latest<span class="hljs-regexp">/download/</span>components.yaml<br></code></pre></td></tr></table></figure><h2 id="安装-kuboard"><a href="#安装-kuboard" class="headerlink" title="安装 kuboard"></a>安装 kuboard</h2><p><a href="https://kuboard.cn/install/install-dashboard.html#%E5%AE%89%E8%A3%85">https://kuboard.cn/install/install-dashboard.html#%E5%AE%89%E8%A3%85</a></p><p>访问kuboard  </p><h2 id="安装Habor"><a href="#安装Habor" class="headerlink" title="安装Habor"></a>安装Habor</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker tag goharbor/harbor-exporter:v2.9.4 127.0.0.1:80/library/goharbor/harbor-exporter:v2.9.4<br><br>docker push 127.0.0.1:80/library/goharbor/harbor-exporter:v2.9.4<br><br><br><br><br></code></pre></td></tr></table></figure><h2 id="简单项目部署"><a href="#简单项目部署" class="headerlink" title="简单项目部署"></a>简单项目部署</h2><p>项目目录</p><figure class="highlight mizar"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mizar">├── app.py<br>├── dockerfile<br>├── harbor<br>├── k8s<br>└── <span class="hljs-keyword">requirements</span>.txt<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># app.py</span><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, jsonify, abort<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/&#x27;</span></span>)</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>():<br>    resp = jsonify(&#123;<span class="hljs-string">&quot;message&quot;</span>: <span class="hljs-string">&quot;OK&quot;</span>&#125;)<br>    resp.status_code = <span class="hljs-number">200</span><br>    <span class="hljs-keyword">return</span> resp<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run(host=<span class="hljs-string">&#x27;0.0.0.0&#x27;</span>, port=<span class="hljs-number">8080</span>)<br><br></code></pre></td></tr></table></figure><p><code>requirements.txt </code></p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">Flask</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-number">2.1</span>.<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p><code>Dockerfile</code></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-keyword">FROM</span> python:alpine3.<span class="hljs-number">19</span> as Builder<br><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /app</span><br><span class="hljs-keyword">ADD</span><span class="language-bash"> app.py /app</span><br><span class="hljs-keyword">ADD</span><span class="language-bash"> ./requirements.txt requirements.txt</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> pip3 install -r requirements.txt</span><br><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">8080</span><br><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;python app.py&quot;</span>]</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker buildx build -t k8s_flask_demo:v1 .<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker tag k8s_flask_demo:v1 127.0.0.1:80/library/k8s_flask_demo:v1 # 打包docker 镜像<br>docker push 127.0.0.1:80/library/k8s_flask_demo:v1 # docker images <br><br><br><br>docker tag k8s_flask_demo:v3 127.0.0.1:80/library/k8s_flask_demo:v3 # 打包docker 镜像<br>docker push 127.0.0.1:80/library/k8s_flask_demo:v3 # docker images <br></code></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Orbstack 使用 docker 搭建各类开发环境</title>
    <link href="/2024/10/14/Orbstack%20%E9%85%8D%E7%BD%AEdocker%E7%8E%AF%E5%A2%83/"/>
    <url>/2024/10/14/Orbstack%20%E9%85%8D%E7%BD%AEdocker%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<h2 id="nginx-proxy-manager"><a href="#nginx-proxy-manager" class="headerlink" title="nginx-proxy-manager"></a>nginx-proxy-manager</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">&#x27;3.8&#x27;</span><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">app:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">&#x27;jc21/nginx-proxy-manager:latest&#x27;</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;80:80&#x27;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;81:81&#x27;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;443:443&#x27;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">nginx-proxy-manager_data:/data</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">nginx-proxy-manager_letsencrypt:/etc/letsencrypt</span><br><span class="hljs-attr">volumes:</span><br> <span class="hljs-attr">nginx-proxy-manager_data:</span><br> <span class="hljs-attr">nginx-proxy-manager_letsencrypt:</span> <br></code></pre></td></tr></table></figure><h2 id="dozzle"><a href="#dozzle" class="headerlink" title="dozzle"></a>dozzle</h2><p>docker 容器日志查看</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run --name dozzle -d --volume=<span class="hljs-regexp">/var/</span>run<span class="hljs-regexp">/docker.sock:/</span>var<span class="hljs-regexp">/run/</span>docker.sock -p <span class="hljs-number">8888</span>:<span class="hljs-number">8080</span> amir20/dozzle:latest<br><br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">docker</span> run --name dozzle -d  -p <span class="hljs-number">8888</span>:<span class="hljs-number">8080</span> amir20/dozzle:latest<br><br></code></pre></td></tr></table></figure><h2 id="postgresql"><a href="#postgresql" class="headerlink" title="postgresql"></a>postgresql</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell"><br>docker run -p 5432:5432 --name postgres -e POSTGRES_PASSWORD=postgres -v pgdata:/var/lib/postgresql/data -d postgres<br><br><br><br>docker run -p 5432:5432 --name postgres -v pgdata:/var/lib/postgresql/data -d postgres<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">进入交互式环境</span><br>docker exec -it postgres psql -U postgres -d postgres<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">查看数据存放路径</span><br>show data_directory  <br>docker cp postgres:/var/lib/postgresql/data/pg_hba.conf .<br>docker cp ./pg_hba.conf postgres:/var/lib/postgresql/data/pg_hba.conf .<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">重启服务</span><br>docker restart postgres<br></code></pre></td></tr></table></figure><h2 id="kafka-kafka-manger"><a href="#kafka-kafka-manger" class="headerlink" title="kafka kafka-manger"></a>kafka kafka-manger</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker pull wurstmeister/zookeeper<br>docker <span class="hljs-built_in">run</span> -d --name zookeeper -p 2181:2181 -e <span class="hljs-attribute">TZ</span>=<span class="hljs-string">&quot;Asia/Shanghai&quot;</span> wurstmeister/zookeeper:latest<br>docker pull wurstmeister/kafka<br>docker <span class="hljs-built_in">run</span> -d --name kafka -p 9092:9092 -e <span class="hljs-attribute">KAFKA_BROKER_ID</span>=0 -e <span class="hljs-attribute">KAFKA_ZOOKEEPER_CONNECT</span>=192.168.1.111:2181 -e <span class="hljs-attribute">KAFKA_ADVERTISED_LISTENERS</span>=PLAINTEXT://192.168.1.111:9092 -e <span class="hljs-attribute">KAFKA_LISTENERS</span>=PLAINTEXT://0.0.0.0:9092 -e <span class="hljs-attribute">TZ</span>=<span class="hljs-string">&quot;Asia/Shanghai&quot;</span> wurstmeister/kafka:latest<br></code></pre></td></tr></table></figure><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker pull sheepkiller/kafka-manager<br>docker <span class="hljs-built_in">run</span> -d --name kfk-manager -p 9000:9000 -e <span class="hljs-attribute">ZK_HOSTS</span>=192.168.1.111:2181 sheepkiller/kafka-manager:latest<br><br></code></pre></td></tr></table></figure><p>然后访问 <code>http://localhost:9000</code> 查看配置</p><h2 id="配置es-集群可视化工具"><a href="#配置es-集群可视化工具" class="headerlink" title="配置es 集群可视化工具"></a>配置es 集群可视化工具</h2><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs livescript">docker pull lmenezes/cerebro<br><br> docker run -d -p <span class="hljs-number">9003</span>:<span class="hljs-number">9000</span> <span class="hljs-string">\</span><br>--restart=<span class="hljs-keyword">unless</span>-stopped <span class="hljs-string">\</span><br>--name cerebro <span class="hljs-string">\</span><br>-v cerebro:/opt/cerebro <span class="hljs-string">\</span><br>-h cerebro <span class="hljs-string">\</span><br>lmenezes/cerebro<br><br></code></pre></td></tr></table></figure><h2 id="配置-grafana"><a href="#配置-grafana" class="headerlink" title="配置 grafana"></a>配置 grafana</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker <span class="hljs-built_in">run</span> -itd <span class="hljs-attribute">--name</span>=grafana \<br><span class="hljs-attribute">--restart</span>=always \<br>-p 3000:3000 \<br>-v grafana-storage:/var/lib/grafana \<br>grafana/grafana<br><br></code></pre></td></tr></table></figure><h2 id="配置prometheus"><a href="#配置prometheus" class="headerlink" title="配置prometheus"></a>配置prometheus</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">docker <span class="hljs-built_in">run</span> -itd <span class="hljs-attribute">--name</span>=prometheus <span class="hljs-attribute">--restart</span>=always -p 9091:9090 prom/prometheus  # 9090 被clash.meta 占用<br><br></code></pre></td></tr></table></figure><p>修改镜像内的配置文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">vi <span class="hljs-regexp">/etc/</span>prometheus/prometheus.yml <br></code></pre></td></tr></table></figure><h2 id="配置监控器"><a href="#配置监控器" class="headerlink" title="配置监控器"></a>配置监控器</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">docker run -itd --<span class="hljs-attr">name=</span><span class="hljs-keyword">node</span><span class="hljs-title">-exporter</span> \<br>--<span class="hljs-attr">restart=</span>always \<br>-p <span class="hljs-number">9100</span>:<span class="hljs-number">9100</span> \<br>-v <span class="hljs-string">&quot;/proc:/host/proc:ro&quot;</span> \<br>-v <span class="hljs-string">&quot;/sys:/host/sys:ro&quot;</span> \<br>-v <span class="hljs-string">&quot;/:/rootfs:ro&quot;</span> \<br>prom/<span class="hljs-keyword">node</span><span class="hljs-title">-exporter</span><br></code></pre></td></tr></table></figure><h2 id="Clickhouse"><a href="#Clickhouse" class="headerlink" title="Clickhouse"></a>Clickhouse</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">docker run \<br>-p 8123:8123 \<br>-p 3500:9000 \<br>--name clickhouse-server \<br>--ulimit nofile=262144:262144 \<br>-e CLICKHOUSE_DB=default \<br>-e CLICKHOUSE_USER=root \<br>-e CLICKHOUSE_DEFAULT_ACCESS_MANAGEMENT=1 \<br>-e TZ=Asia/Shanghai \<br>-e CLICKHOUSE_PASSWORD=password123 \<br>-d clickhouse/clickhouse-server<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>OpenVPN 和Clash 流量分流</title>
    <link href="/2024/08/02/OpenVPN%20%E5%92%8CClash%20%E6%B5%81%E9%87%8F%E5%88%86%E6%B5%81%20/"/>
    <url>/2024/08/02/OpenVPN%20%E5%92%8CClash%20%E6%B5%81%E9%87%8F%E5%88%86%E6%B5%81%20/</url>
    
    <content type="html"><![CDATA[<p>docker-compose.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">&quot;3&quot;</span><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">openvpn:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">curve25519xsalsa20poly1305/openvpn-socks5</span><br>    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span><br>    <span class="hljs-attr">cap_add:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">NET_ADMIN</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-number">1080</span><span class="hljs-string">:1080</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">OPENVPN_CONFIG=/config/colourdata.ovpn</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./config:/config</span><br>    <span class="hljs-attr">devices:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/dev/net/tun</span><br><br></code></pre></td></tr></table></figure><p>在openvpn 配置中添加以下配置</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">auth-<span class="hljs-keyword">user</span>-pass <span class="hljs-keyword">login</span>.conf<br></code></pre></td></tr></table></figure><p>login.conf 里面是账号/密码</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">username</span><br><span class="hljs-attribute">password</span><br></code></pre></td></tr></table></figure><p>运行docker-compose 运行后<code>1080</code> 端口上的代理流量就经过openvpn 代理到内网</p><p>clash 配置中添加以下配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">proxies:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;openvpn&quot;</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">socks5</span><br>    <span class="hljs-attr">server:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">1080</span><br><br><span class="hljs-attr">rules:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">DOMAIN-SUFFIX,elasticsearch.aliyuncs.com,openvpn</span><br><br></code></pre></td></tr></table></figure><p>添加了一个代理配置，在匹配到elasticsearch.aliyuncs.com 流量的时候就，把流量转给1080,1080里面配置的是openvpn,只要在网络环境中配置clash 的代理就可以做到流量分流。</p>]]></content>
    
    
    
    <tags>
      
      <tag>clash</tag>
      
      <tag>openvpn</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>空气质量监控平台分析反爬虫分析</title>
    <link href="/2024/06/27/%E7%9C%8B%E7%9C%8B%E6%96%B0%E9%97%BB%E6%90%9C%E7%B4%A2/"/>
    <url>/2024/06/27/%E7%9C%8B%E7%9C%8B%E6%96%B0%E9%97%BB%E6%90%9C%E7%B4%A2/</url>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> hashlib<br><span class="hljs-keyword">import</span> time<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_signe</span>(<span class="hljs-params">sign_string</span>):<br>    <span class="hljs-built_in">print</span>(sign_string)<br>    md5 = hashlib.md5()<br>    md5.update(sign_string.encode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br>    md5_1_res = md5.hexdigest()<br>    md5_2 = hashlib.md5()<br>    md5_2.update(md5_1_res.encode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br>    md5_final = md5_2.hexdigest()<br>    <span class="hljs-keyword">return</span> md5_final<br><br><br>headers = &#123;<br>    <span class="hljs-string">&quot;user-agent&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:126.0) Gecko/20100101 Firefox/126.0&quot;</span>,<br>    <span class="hljs-string">&quot;accept&quot;</span>: <span class="hljs-string">&quot;application/json, text/plain, */*&quot;</span>,<br>    <span class="hljs-string">&quot;accept-language&quot;</span>: <span class="hljs-string">&quot;zh-CN&quot;</span>,<br>    <span class="hljs-string">&quot;platform&quot;</span>: <span class="hljs-string">&quot;pc&quot;</span>,<br>    <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;2.9.4&quot;</span>,<br>    <span class="hljs-string">&quot;nonce&quot;</span>: <span class="hljs-string">&quot;b5mtrunz&quot;</span>,<br>    <span class="hljs-string">&quot;timestamp&quot;</span>: <span class="hljs-string">&quot;1717752984&quot;</span>,<br>    <span class="hljs-string">&quot;api-version&quot;</span>: <span class="hljs-string">&quot;v1&quot;</span>,<br>    <span class="hljs-string">&quot;sign&quot;</span>: <span class="hljs-string">&quot;782d765a122609c4de153970eb896f14&quot;</span>,<br>    <span class="hljs-string">&quot;origin&quot;</span>: <span class="hljs-string">&quot;https://www.kankanews.com&quot;</span>,<br>    <span class="hljs-string">&quot;referer&quot;</span>: <span class="hljs-string">&quot;https://www.kankanews.com/&quot;</span>,<br>    <span class="hljs-string">&quot;sec-fetch-dest&quot;</span>: <span class="hljs-string">&quot;empty&quot;</span>,<br>    <span class="hljs-string">&quot;sec-fetch-mode&quot;</span>: <span class="hljs-string">&quot;cors&quot;</span>,<br>    <span class="hljs-string">&quot;sec-fetch-site&quot;</span>: <span class="hljs-string">&quot;same-site&quot;</span>,<br>    <span class="hljs-string">&quot;priority&quot;</span>: <span class="hljs-string">&quot;u=1&quot;</span>,<br>    <span class="hljs-string">&quot;te&quot;</span>: <span class="hljs-string">&quot;trailers&quot;</span><br>&#125;<br><br>params = &#123;<br>    <span class="hljs-string">&quot;slit_program_id&quot;</span>: <span class="hljs-string">&quot;D1OwG002Eb0&quot;</span>,<br>    <span class="hljs-string">&quot;date&quot;</span>: <span class="hljs-string">&quot;2024-06-06&quot;</span><br>&#125;<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_sign</span>(<span class="hljs-params">para, headers</span>):<br>    enc_dict = &#123;&#125;<br>    enc_dict.update(para)<br>    enc_dict[<span class="hljs-string">&#x27;version&#x27;</span>] = <span class="hljs-string">&#x27;2.9.4&#x27;</span><br>    enc_dict[<span class="hljs-string">&#x27;platform&#x27;</span>] = headers[<span class="hljs-string">&#x27;platform&#x27;</span>]<br>    enc_dict[<span class="hljs-string">&#x27;nonce&#x27;</span>] = headers[<span class="hljs-string">&#x27;nonce&#x27;</span>]<br>    enc_dict[<span class="hljs-string">&#x27;Api-Version&#x27;</span>] = headers[<span class="hljs-string">&#x27;api-version&#x27;</span>]<br>    enc_dict[<span class="hljs-string">&#x27;timestamp&#x27;</span>] = headers[<span class="hljs-string">&#x27;timestamp&#x27;</span>]<br><br>    <span class="hljs-comment"># 按照键（即参数名）的字母顺序对字典进行排序</span><br>    sorted_params = <span class="hljs-built_in">sorted</span>(enc_dict.items())<br><br>    <span class="hljs-comment"># 构建查询字符串</span><br>    query_string = <span class="hljs-string">&#x27;&amp;&#x27;</span>.join(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;key&#125;</span>=<span class="hljs-subst">&#123;value&#125;</span>&quot;</span> <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> sorted_params <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> key.startswith(<span class="hljs-string">&#x27;__&#x27;</span>))<br><br>    query_string += <span class="hljs-string">&#x27;&amp;28c8edde3d61a0411511d3b1866f0636&#x27;</span><br>    <span class="hljs-keyword">return</span> get_signe(query_string)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_sign_hash_from_dict</span>():<br>    d = &#123;<span class="hljs-string">&quot;Api-Version&quot;</span>: <span class="hljs-string">&quot;v1&quot;</span>, <span class="hljs-string">&quot;date&quot;</span>: <span class="hljs-string">&quot;2024-06-07&quot;</span>, <span class="hljs-string">&quot;nonce&quot;</span>: <span class="hljs-string">&quot;mdfrdapo&quot;</span>, <span class="hljs-string">&quot;platform&quot;</span>: <span class="hljs-string">&quot;pc&quot;</span>,<br>         <span class="hljs-string">&quot;slit_program_id&quot;</span>: <span class="hljs-string">&quot;q0zwqDMQ7vm&quot;</span>, <span class="hljs-string">&quot;timestamp&quot;</span>: <span class="hljs-number">1718178547</span>, <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;2.9.4&quot;</span>&#125;<br>    sorted_params = <span class="hljs-built_in">sorted</span>(d.items())<br>    query_string = <span class="hljs-string">&#x27;&amp;&#x27;</span>.join(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;key&#125;</span>=<span class="hljs-subst">&#123;value&#125;</span>&quot;</span> <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> sorted_params <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> key.startswith(<span class="hljs-string">&#x27;__&#x27;</span>))<br>    query_string += <span class="hljs-string">&#x27;&amp;28c8edde3d61a0411511d3b1866f0636&#x27;</span><br>    <span class="hljs-keyword">return</span> get_signe(query_string)<br><br><br><span class="hljs-keyword">import</span> requests<br><br>headers = &#123;<br>    <span class="hljs-string">&quot;user-agent&quot;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:126.0) Gecko/20100101 Firefox/126.0&quot;</span>,<br>    <span class="hljs-string">&quot;accept&quot;</span>: <span class="hljs-string">&quot;application/json, text/plain, */*&quot;</span>,<br>    <span class="hljs-string">&quot;accept-language&quot;</span>: <span class="hljs-string">&quot;zh-CN&quot;</span>,<br>    <span class="hljs-string">&quot;platform&quot;</span>: <span class="hljs-string">&quot;pc&quot;</span>,<br>    <span class="hljs-string">&quot;version&quot;</span>: <span class="hljs-string">&quot;2.9.4&quot;</span>,<br>    <span class="hljs-string">&quot;nonce&quot;</span>: <span class="hljs-string">&quot;b5mtrunz&quot;</span>,<br>    <span class="hljs-string">&quot;timestamp&quot;</span>: <span class="hljs-string">&quot;1718179787&quot;</span>,<br>    <span class="hljs-string">&quot;api-version&quot;</span>: <span class="hljs-string">&quot;v1&quot;</span>,<br>    <span class="hljs-string">&quot;sign&quot;</span>: <span class="hljs-string">&quot;782d765a122609c4de153970eb896f14&quot;</span>,<br>    <span class="hljs-string">&quot;origin&quot;</span>: <span class="hljs-string">&quot;https://www.kankanews.com&quot;</span>,<br>    <span class="hljs-string">&quot;referer&quot;</span>: <span class="hljs-string">&quot;https://www.kankanews.com/&quot;</span>,<br>    <span class="hljs-string">&quot;sec-fetch-dest&quot;</span>: <span class="hljs-string">&quot;empty&quot;</span>,<br>    <span class="hljs-string">&quot;sec-fetch-mode&quot;</span>: <span class="hljs-string">&quot;cors&quot;</span>,<br>    <span class="hljs-string">&quot;sec-fetch-site&quot;</span>: <span class="hljs-string">&quot;same-site&quot;</span>,<br>    <span class="hljs-string">&quot;priority&quot;</span>: <span class="hljs-string">&quot;u=1&quot;</span>,<br>    <span class="hljs-string">&quot;te&quot;</span>: <span class="hljs-string">&quot;trailers&quot;</span><br>&#125;<br><br>url = <span class="hljs-string">&#x27;https://kapi.kankanews.com/content/pc/news/search&#x27;</span><br>params = &#123;<br>    <span class="hljs-string">&#x27;keyword&#x27;</span>: <span class="hljs-string">&#x27;china&#x27;</span>,<br>    <span class="hljs-string">&#x27;type&#x27;</span>: <span class="hljs-string">&#x27;3&#x27;</span>,<br>    <span class="hljs-string">&#x27;size&#x27;</span>: <span class="hljs-string">&#x27;20&#x27;</span>,<br>    <span class="hljs-string">&#x27;page&#x27;</span>: <span class="hljs-string">&#x27;2&#x27;</span>,<br>&#125;<br><br>timestamp = (<span class="hljs-built_in">int</span>(time.time()))<br>headers[<span class="hljs-string">&#x27;timestamp&#x27;</span>] = <span class="hljs-built_in">str</span>(timestamp)<br><br>sign = get_sign(para=params, headers=headers)<br>headers[<span class="hljs-string">&#x27;sign&#x27;</span>] = sign<br>response = requests.get(url, headers=headers, params=params)<br><span class="hljs-built_in">print</span>(response.text)<br><span class="hljs-built_in">print</span>(response)<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>爬虫</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JS 逆向</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>python与代码提示</title>
    <link href="/2023/09/17/python%E4%B8%8E%E4%BB%A3%E7%A0%81%E6%8F%90%E7%A4%BA/"/>
    <url>/2023/09/17/python%E4%B8%8E%E4%BB%A3%E7%A0%81%E6%8F%90%E7%A4%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="由WebStorm引发的疑问"><a href="#由WebStorm引发的疑问" class="headerlink" title="由WebStorm引发的疑问"></a>由WebStorm引发的疑问</h2><p>起因是这样，我想在 webstrom中使用cropto-js,安装导入后却没有任何和这个类相关的代码提示，但是在vscode 中确实会有代码提示，这个真的真的不能忍，</p><p><img src="https://s2.loli.net/2023/09/24/NHDnMzThg8YQicG.png" alt="image-20230924000418946"></p><p>搜索了一圈发现要在WebStrom 中这这样设置</p><p>依次打开</p><p><code>settings</code> -&gt; <code>Languages &amp;&amp; Frameworks</code>-&gt; <code>JavaScript</code> -&gt; <code>Library</code> </p><p><img src="https://s2.loli.net/2023/09/24/McUhO267TtxFXrb.png" alt="image-20230924001734600"></p><p><img src="https://s2.loli.net/2023/09/24/stOGLiY5bMxQuo6.png" alt="image-20230924001758457"></p><p>然后往下找到<code>cropto-js</code> 的存根下载并安装就可以了，再写代码就有提示出现了，美滋滋。</p><p>JetBrains 把这个库的代码是称作存根，文件是存储在一个git项目中的</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">abs-svg-pathhttps:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/DefinitelyTyped/</span>DefinitelyTyped<span class="hljs-regexp">/raw/m</span>aster<span class="hljs-regexp">/types/</span>abs-svg-path/<br></code></pre></td></tr></table></figure><p>在一些开发项目中<code>@types/xxx</code> 会被做为开发依赖安装到库中</p><p><code>npm</code> <a href="https://www.npmjs.com/package/@types/crypto-js">仓库</a>中直接有这个类型提示可以直接安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm i @types/crypto-js<br></code></pre></td></tr></table></figure><p>深入了解之下发现这个东西叫<code>DefinitelyTyped</code> 也就是上面<code>git</code>项目的仓库名，在 &lt;&lt;深入理解TypeScript&gt;&gt; 英文书名<a href="https://github.com/basarat/typescript-book/">《TypeScript Deep Dive》</a>中对此有深入介绍<br><a href="https://jkchao.github.io/typescript-book-chinese/typings/types.html#%E4%BD%BF%E7%94%A8-types">连接在此</a> </p><blockquote><p>毫无疑问，<a href="https://github.com/borisyankov/DefinitelyTyped">DefinitelyTyped</a> 是 TypeScript 最大的优势之一，社区已经记录了 90% 的顶级 JavaScript 库。</p><p>这意味着，你可以非常高效地使用这些库，而无须在单独的窗口打开相应文档以确保输入的正确性。</p></blockquote><p><a href="https://github.com/DefinitelyTyped/DefinitelyTyped">https://github.com/DefinitelyTyped/DefinitelyTyped</a>  这个仓库有45.3k 的star(2023-09),其流行程度可见一斑。</p><p><strong>我不是专业的前端工程师，平时写js不太多，主要是以python为主，但是不禁要问这么好的东西在Python语言中有没有？</strong></p><h2 id="Python-中的存根系统"><a href="#Python-中的存根系统" class="headerlink" title="Python 中的存根系统"></a>Python 中的存根系统</h2><p>你猜怎么着，<strong>真的有</strong> 这种东西。</p><p>首先找到了<code>Hacker News</code> 上的一个老哥，发出了和我一样的疑问。</p><blockquote><p>Is there something like DefinitelyTyped for Python?</p></blockquote><p>经过一番搜索发现了微软开源的<a href="https://github.com/microsoft/python-type-stubs"><code>python-type-stubs</code> 仓库</a> 里面有这样一段话:</p><blockquote><p>有两种方法可以提供类型注释 — 通过内联类型注释和 <code>.pyi</code> 类型存根文件，这些文件可以与包捆绑在一起，也可以与其他一些源（如 typeshed 或 PyPI）分开安装。我们认为，包作者的最佳方法是使用显式内联类型注释来准确完整地描述其公共接口协定。这允许工具为包作者本身验证类型，并减少保持两个单独的 API 定义同步的维护负担。在无法进行内联类型注释的情况下（例如，对于编译的库），包应包含描述接口这些部分的存根文件。</p><p>There are two ways type annotations can be provided — through <a href="https://www.python.org/dev/peps/pep-0484/#type-definition-syntax">inline type annotations</a> and through <a href="https://www.python.org/dev/peps/pep-0484/#stub-files"><code>.pyi</code> type stub files</a>, which may be bundled with the package or installed separately from some other source such as typeshed or PyPI. <em>We believe that the best approach for package authors is to have explicit inline type annotations that accurately and completely describe their public interface contract. This allows tools to validate the types for the package authors themselves and reduces the maintenance burden of keeping two separate API definitions in sync. In cases where inline type annotations are not possible (e.g. for compiled libraries), packages should include stub files that describe those portions of the interface.</em></p></blockquote><p><code>.pyi</code> 文件类型中没有函数中没有具体实现，定义的是函数或者类的返回值类型。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">use</span>(<span class="hljs-params">style: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-literal">None</span>: ...<br><span class="hljs-meta">@contextlib.contextmanager</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">context</span>(<span class="hljs-params">style: <span class="hljs-built_in">str</span>, after_reset: <span class="hljs-built_in">bool</span> = ...</span>)-&gt; Generator: ...<br></code></pre></td></tr></table></figure><blockquote><p>Stubs for the following libraries now exist in typeshed or the libraries themselves and are no longer maintained here</p><p>以下库的存根现在存在于 typeshed 或库本身中，不再在此处维护</p></blockquote><p><code>python-type-stubs</code>中提到的 <code>typeshed</code> 没有在仓库中给出链接，以这个关键词搜索找到了<code>https://github.com/python/typeshed/</code> ，这个项目应该就是<code>python-type-stubs</code> 仓库中提到的<code>typeshed</code>。</p><blockquote><p>如果你只是使用类型检查器（mypy，pyright，pytype，PyCharm等），而不是开发它，你根本不需要与typeshed存储库进行交互：typeshed的标准库部分的副本与类型检查器捆绑在一起。并且您正在使用的第三方软件包和模块的类型存根可以从 PyPI 安装。例如，如果使用 <code>six</code> 和 <code>requests</code> ，则可以使用</p><p>If you’re just using a type checker (<a href="https://github.com/python/mypy/">mypy</a>, <a href="https://github.com/microsoft/pyright">pyright</a>, <a href="https://github.com/google/pytype/">pytype</a>, PyCharm, …), as opposed to developing it, you don’t need to interact with the typeshed repo at all: a copy of standard library part of typeshed is bundled with type checkers. And type stubs for third party packages and modules you are using can be installed from PyPI. For example, if you are using <code>six</code> and <code>requests</code>, you can install the type stubs using</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">pip install <span class="hljs-keyword">types</span>-six <span class="hljs-keyword">types</span>-requests<br></code></pre></td></tr></table></figure></blockquote><p>原来这个类型检测能直接下载，马上去pypi 上搜索仓库中包含<code>typed</code> 和<code>stubs</code> 关键词的库</p><p>有的库是基于<code>typeshed</code> 库的提交自动生成的，有的是自己实现的。有的库还提到是基于<a href="https://peps.python.org/pep-0561/">pep561</a> 提案写出来的，这个pep首次提案在2017年。</p><p><img src="https://s2.loli.net/2023/09/24/MVGXDlxcOnapW5q.png" alt="image-20230924095251317"></p><p>我在pypi中找到了常用库的<code>typed</code>，可以留作参考，有需要的可以自己去pypi 中查找。 搜索的时候可以使用<code>types</code> 或者<code>stubs</code> 做为关键词</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install types-requests<br>pip install types-lxml<br>pip install types-redis<br>pip install pandas-stubs<br>pip install lxml-stubs<br>pip install types-python-dateutil<br>pip install types-ujson<br></code></pre></td></tr></table></figure><p>大名鼎鼎的<code>numpy</code>现在把<code>typed</code> 集成到了自己的仓库中,直接下载最新的<code>numpy</code>会有类型提示。 </p><p>在<code>PEP621</code> 之前所有的python 官方是在一个<code>requirements.txt</code> 中记录安装信息 信息之有库及其版本号，无法区分生产环境和开发环境，如果只想在开发环境使用这些库，需要手维护两个版本的<code>requirement.txt</code>文件</p><p>在<code>PEP621</code> 之后基于<code>pyproject.yaml</code> 可以使用<code>poetry</code> 或者<code>flit</code> 管理python包</p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">poetry install MonkeyType<br></code></pre></td></tr></table></figure><ol><li><p><a href="https://black.readthedocs.io/en/stable/">black官网</a></p></li><li><p><a href="https://news.ycombinator.com/item?id=27171290">hack news </a></p></li><li><p><a href="https://github.com/JelleZijlstra/autotyping">autotyping</a></p></li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>代码提示</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hysteria2  配置</title>
    <link href="/2023/09/04/hysteria2.0%20%E9%85%8D%E7%BD%AE/"/>
    <url>/2023/09/04/hysteria2.0%20%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p>最近hysteria发布了2.0 API与1.0 不一样 暂时没有客户端适配，只能使用原生配置的方式运行</p><h2 id="下载发行包"><a href="#下载发行包" class="headerlink" title="下载发行包"></a>下载发行包</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">curl -Lo /root/hysteria https://github.com/apernet/hysteria/releases/latest/download/hysteria-linux-amd64 &amp;&amp; chmod +x /root/hysteria &amp;&amp; mv -f /root/hysteria /usr/local/bin<br></code></pre></td></tr></table></figure><h2 id="Acme-申请证书"><a href="#Acme-申请证书" class="headerlink" title="Acme 申请证书"></a>Acme 申请证书</h2><p> 省略</p><h2 id="创建简单配置"><a href="#创建简单配置" class="headerlink" title="创建简单配置"></a>创建简单配置</h2><h3 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><br><span class="hljs-comment"># vim /etc/hysteria2/config.yaml</span><br><br><span class="hljs-attr">listen:</span> <span class="hljs-string">:27042</span><br><span class="hljs-attr">tls:</span><br>  <span class="hljs-attr">cert:</span> <span class="hljs-string">/root/.acme.sh/www.ruha11.xyz_ecc/fullchain.cer</span><br>  <span class="hljs-attr">key:</span> <span class="hljs-string">/root/.acme.sh/www.ruha11.xyz_ecc/ruha11.xyz.key</span><br><br><span class="hljs-attr">quic:</span><br>  <span class="hljs-attr">initStreamReceiveWindow:</span> <span class="hljs-number">16777216</span><br>  <span class="hljs-attr">maxStreamReceiveWindow:</span> <span class="hljs-number">16777216</span><br>  <span class="hljs-attr">initConnReceiveWindow:</span> <span class="hljs-number">33554432</span><br>  <span class="hljs-attr">maxConnReceiveWindow:</span> <span class="hljs-number">33554432</span><br><span class="hljs-attr">auth:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">password</span><br>  <span class="hljs-attr">password:</span> <span class="hljs-string">chika</span><br><br><span class="hljs-attr">masquerade:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">proxy</span><br>  <span class="hljs-attr">proxy:</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">https://www.lovelive-anime.jp</span><br>    <span class="hljs-attr">rewriteHost:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span> <span class="hljs-string">$remote_ip:27042</span><br><span class="hljs-attr">auth:</span> <span class="hljs-string">$password</span><br><span class="hljs-attr">tls:</span><br>  <span class="hljs-attr">sni:</span> <span class="hljs-string">$domain</span><br><br><span class="hljs-attr">quic:</span><br>  <span class="hljs-attr">initStreamReceiveWindow:</span> <span class="hljs-number">16777216</span><br>  <span class="hljs-attr">maxStreamReceiveWindow:</span> <span class="hljs-number">16777216</span><br>  <span class="hljs-attr">initConnReceiveWindow:</span> <span class="hljs-number">33554432</span><br>  <span class="hljs-attr">maxConnReceiveWindow:</span> <span class="hljs-number">33554432</span><br><br><span class="hljs-attr">fastOpen:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">socks5:</span><br>  <span class="hljs-attr">listen:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:50000</span><br></code></pre></td></tr></table></figure><h2 id="创建复杂配置"><a href="#创建复杂配置" class="headerlink" title="创建复杂配置"></a>创建复杂配置</h2><h3 id="服务端-1"><a href="#服务端-1" class="headerlink" title="服务端"></a>服务端</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><br><span class="hljs-attr">listen:</span> <span class="hljs-string">:27042</span><br><span class="hljs-attr">tls:</span><br>  <span class="hljs-attr">cert:</span> <span class="hljs-string">/root/.acme.sh/ruha11.xyz_ecc/ruha11.xyz.cer</span><br>  <span class="hljs-attr">key:</span> <span class="hljs-string">/root/.acme.sh/ruha11.xyz_ecc/ruha11.xyz.key</span><br><br><span class="hljs-attr">auth:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">password</span><br>  <span class="hljs-attr">password:</span> <span class="hljs-string">chika</span><br><br><span class="hljs-attr">resolver:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">https</span><br>  <span class="hljs-attr">https:</span><br>    <span class="hljs-attr">addr:</span> <span class="hljs-number">1.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span><span class="hljs-string">:443</span><br>    <span class="hljs-attr">timeout:</span> <span class="hljs-string">10s</span><br>    <br><span class="hljs-attr">quic:</span><br>  <span class="hljs-attr">initStreamReceiveWindow:</span> <span class="hljs-number">8388608</span> <br>  <span class="hljs-attr">maxStreamReceiveWindow:</span> <span class="hljs-number">8388608</span> <br>  <span class="hljs-attr">initConnReceiveWindow:</span> <span class="hljs-number">20971520</span> <br>  <span class="hljs-attr">maxConnReceiveWindow:</span> <span class="hljs-number">20971520</span> <br>  <span class="hljs-attr">maxIdleTimeout:</span> <span class="hljs-string">30s</span> <br>  <span class="hljs-attr">maxIncomingStreams:</span> <span class="hljs-number">1024</span> <br>  <span class="hljs-attr">disablePathMTUDiscovery:</span> <span class="hljs-literal">false</span> <br><br><span class="hljs-attr">bandwidth:</span><br>  <span class="hljs-attr">up:</span> <span class="hljs-number">300</span> <span class="hljs-string">mbps</span><br>  <span class="hljs-attr">down:</span> <span class="hljs-number">30</span> <span class="hljs-string">mbps</span><br> <br><span class="hljs-attr">transport:</span><br>  <span class="hljs-attr">udp:</span><br>    <span class="hljs-attr">hopInterval:</span> <span class="hljs-string">30s</span><br><br><span class="hljs-attr">masquerade:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">proxy</span><br>  <span class="hljs-attr">proxy:</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">https://www.lovelive-anime.jp</span><br>    <span class="hljs-attr">rewriteHost:</span> <span class="hljs-literal">true</span><br><br></code></pre></td></tr></table></figure><p>开启端口跳跃 防止运营商qos</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">IPv4</span><br>iptables -t nat -A PREROUTING -i eth0 -p udp --dport 48001:50000 -j DNAT --to-destination :27042<br><span class="hljs-meta prompt_"># </span><span class="language-bash">IPv6</span><br>ip6tables -t nat -A PREROUTING -i eth0 -p udp --dport 48001:50000 -j DNAT --to-destination :27042<br></code></pre></td></tr></table></figure><p>或者</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">firewall</span>-cmd --permanent --add-forward-port=port=<span class="hljs-number">48001</span>-<span class="hljs-number">50000</span>:proto=udp:toport=<span class="hljs-number">27042</span><br></code></pre></td></tr></table></figure><h3 id="客户端-1"><a href="#客户端-1" class="headerlink" title="客户端"></a>客户端</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span> <span class="hljs-number">198.211</span><span class="hljs-number">.26</span><span class="hljs-number">.214</span><span class="hljs-string">:48001-50000</span> <br><span class="hljs-attr">auth:</span> <span class="hljs-string">chika</span><br><span class="hljs-attr">tls:</span><br>  <span class="hljs-attr">sni:</span> <span class="hljs-string">ruha11.xyz</span><br><span class="hljs-attr">quic:</span><br>  <span class="hljs-attr">initStreamReceiveWindow:</span> <span class="hljs-number">16777216</span><br>  <span class="hljs-attr">maxStreamReceiveWindow:</span> <span class="hljs-number">16777216</span><br>  <span class="hljs-attr">initConnReceiveWindow:</span> <span class="hljs-number">33554432</span><br>  <span class="hljs-attr">maxConnReceiveWindow:</span> <span class="hljs-number">33554432</span><br><br><span class="hljs-attr">fastOpen:</span> <span class="hljs-literal">true</span>    <br><span class="hljs-attr">bandwidth:</span><br>  <span class="hljs-attr">up:</span> <span class="hljs-number">30</span> <span class="hljs-string">mbps</span><br>  <span class="hljs-attr">down:</span> <span class="hljs-number">300</span> <span class="hljs-string">mbps</span><br><span class="hljs-attr">http:</span><br>  <span class="hljs-attr">listen:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:5183</span> <br>  <span class="hljs-attr">realm:</span> <span class="hljs-string">martian</span> <br><span class="hljs-attr">socks5:</span><br>  <span class="hljs-attr">listen:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:5182</span><br> <br><span class="hljs-attr">tcpForwarding:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">listen:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:6600</span> <br>    <span class="hljs-attr">remote:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><span class="hljs-string">:6600</span> <br></code></pre></td></tr></table></figure><h2 id="编辑systemd配置"><a href="#编辑systemd配置" class="headerlink" title="编辑systemd配置"></a>编辑systemd配置</h2><p>vim /etc/systemd/service/hysteria2.service</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">[Unit]<br>After=network.target nss-lookup.target<br><br>[Service]<br>User=root<br>WorkingDirectory=/etc/hysteria2<br>CapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE CAP_NET_RAW<br>AmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE CAP_NET_RAW<br>ExecStart=/usr/local/bin/hysteria server -c /etc/hysteria2/config.yaml --log-level info<br>Restart=on-failure<br>RestartSec=10<br>LimitNOFILE=infinity<br><br>[Install]<br>WantedBy=multi-user.target<br></code></pre></td></tr></table></figure><p>执行 重载配置文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl daemon-reload<br>systemctl enable --now hysteria<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>hysteria2</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>chrome插件逆向</title>
    <link href="/2023/06/01/chrome%E6%8F%92%E4%BB%B6%E9%80%86%E5%90%91/"/>
    <url>/2023/06/01/chrome%E6%8F%92%E4%BB%B6%E9%80%86%E5%90%91/</url>
    
    <content type="html"><![CDATA[<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs awk">chrome:<span class="hljs-regexp">//</span>extensions/ 查看插件id<br>chrome:<span class="hljs-regexp">//</span>version/  查看chrome 资料存放地址<br><br>mac 下地址 <br><br><span class="hljs-regexp">/Users/</span>king<span class="hljs-regexp">/Library/</span>Application Support<span class="hljs-regexp">/Google/</span>Chrome/Profile <span class="hljs-number">1</span><br><br>进入 Extentins 目录找到对应的id <br>使用vscode 打开页面<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>chrome插件逆向</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>https 证书申请</title>
    <link href="/2023/04/23/https%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7/"/>
    <url>/2023/04/23/https%E8%AF%81%E4%B9%A6%E7%94%B3%E8%AF%B7/</url>
    
    <content type="html"><![CDATA[<h2 id="安装脚本"><a href="#安装脚本" class="headerlink" title="安装脚本"></a>安装脚本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">curl https://get.acme.sh | sh<br></code></pre></td></tr></table></figure><p>执行上面的命令，它会：</p><ul><li>从 GitHub 上下载 sh 脚本并执行</li><li>把文件解压到用户的 <code>~/.acme.sh</code>目录下</li><li>给命令行设置一个<code>acme.sh</code>的 alias 别名</li><li>最后注册一个 cron 定时任务来自动更新证书。</li></ul><p>使用命名查看有无帮助信息</p><p><code>source ~/.bashrc;acme.sh -h</code></p><h2 id="2-签发-SSL-证书"><a href="#2-签发-SSL-证书" class="headerlink" title="2 签发 SSL 证书"></a>2 签发 SSL 证书</h2><p>签发 SSL 证书需要证明这个域名是属于你的，即<strong>域名所有权</strong>，一般有两种方式验证：http 和 dns 验证。</p><p>本次仅以 http Standalone mode 签发证书</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">acme.sh  --issue  -d example.com  --standalone<br>acme.sh  --issue  -d example.com  --standalone --httpport 88  ## 执行端口<br>acme.sh  --issue  -d example.com  --alpn --tlsport 8443  # 自行指定tls端口<br>acme.sh --issue -d \*.example.com  -d example.com  # 泛域名配置<br><br></code></pre></td></tr></table></figure><h2 id="toubleShoot"><a href="#toubleShoot" class="headerlink" title="toubleShoot"></a>toubleShoot</h2><p>Tue Jun 27 12:50:01 CST 2023] Using CA: <a href="https://acme.zerossl.com/v2/DV90">https://acme.zerossl.com/v2/DV90</a><br>[Tue Jun 27 12:50:01 CST 2023] Standalone mode.<br>[Tue Jun 27 12:50:01 CST 2023] No EAB credentials found for ZeroSSL, let’s get one<br>[Tue Jun 27 12:50:01 CST 2023] acme.sh is using ZeroSSL as default CA now.<br>[Tue Jun 27 12:50:01 CST 2023] Please update your account with an email address first.<br>[Tue Jun 27 12:50:01 CST 2023] acme.sh –register-account -m <a href="mailto:&#109;&#x79;&#x40;&#101;&#x78;&#97;&#x6d;&#112;&#x6c;&#x65;&#x2e;&#99;&#x6f;&#x6d;">&#109;&#x79;&#x40;&#101;&#x78;&#97;&#x6d;&#112;&#x6c;&#x65;&#x2e;&#99;&#x6f;&#x6d;</a><br>[Tue Jun 27 12:50:01 CST 2023] See: <a href="https://github.com/acmesh-official/acme.sh/wiki/ZeroSSL.com-CA">https://github.com/acmesh-official/acme.sh/wiki/ZeroSSL.com-CA</a><br>[Tue Jun 27 12:50:01 CST 2023] Please add ‘–debug’ or ‘–log’ to check more details.<br>[Tue Jun 27 12:50:01 CST 2023] See: <a href="https://github.com/acmesh-official/acme.sh/wiki/How-to-debug-acme.sh">https://github.com/acmesh-official/acme.sh/wiki/How-to-debug-acme.sh</a></p><p>修改默认的server</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nohighlight">acme.sh --set-default-ca  --server  letsencrypt<br></code></pre></td></tr></table></figure><p>指定默认server配置</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">acme<span class="hljs-selector-class">.sh</span> <span class="hljs-attr">--issue</span> <span class="hljs-attr">--dns</span> dns_cf -d domain<span class="hljs-selector-class">.tld</span> <span class="hljs-attr">--server</span> letsencrypt<br><br></code></pre></td></tr></table></figure><h2 id="开放端口"><a href="#开放端口" class="headerlink" title="开放端口"></a>开放端口</h2><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-comment">firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">zone=public</span> <span class="hljs-literal">--</span><span class="hljs-comment">add</span><span class="hljs-literal">-</span><span class="hljs-comment">port=80/tcp</span> <span class="hljs-literal">--</span><span class="hljs-comment">permanent</span><br><span class="hljs-comment">firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">zone=public</span> <span class="hljs-literal">--</span><span class="hljs-comment">add</span><span class="hljs-literal">-</span><span class="hljs-comment">port=443/tcp</span> <span class="hljs-literal">--</span><span class="hljs-comment">permanent</span><br><span class="hljs-comment">firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">reload</span><br><span class="hljs-comment">firewall</span><span class="hljs-literal">-</span><span class="hljs-comment">cmd</span> <span class="hljs-literal">--</span><span class="hljs-comment">list</span><span class="hljs-literal">-</span><span class="hljs-comment">ports</span><br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">[Tue Jun <span class="hljs-number">27</span> <span class="hljs-number">13</span>:<span class="hljs-number">04</span>:<span class="hljs-number">06</span> CST <span class="hljs-number">2023</span>] Your cert is <span class="hljs-keyword">in</span>: <span class="hljs-regexp">/root/</span>.acme.sh<span class="hljs-regexp">/ruha11.xyz_ecc/</span>ruha11.xyz.cer<br>[Tue Jun <span class="hljs-number">27</span> <span class="hljs-number">13</span>:<span class="hljs-number">04</span>:<span class="hljs-number">06</span> CST <span class="hljs-number">2023</span>] Your cert key is <span class="hljs-keyword">in</span>: <span class="hljs-regexp">/root/</span>.acme.sh<span class="hljs-regexp">/ruha11.xyz_ecc/</span>ruha11.xyz.key<br>[Tue Jun <span class="hljs-number">27</span> <span class="hljs-number">13</span>:<span class="hljs-number">04</span>:<span class="hljs-number">06</span> CST <span class="hljs-number">2023</span>] The intermediate CA cert is <span class="hljs-keyword">in</span>: <span class="hljs-regexp">/root/</span>.acme.sh<span class="hljs-regexp">/ruha11.xyz_ecc/</span>ca.cer<br>[Tue Jun <span class="hljs-number">27</span> <span class="hljs-number">13</span>:<span class="hljs-number">04</span>:<span class="hljs-number">06</span> CST <span class="hljs-number">2023</span>] And the full chain certs is there: <span class="hljs-regexp">/root/</span>.acme.sh<span class="hljs-regexp">/ruha11.xyz_ecc/</span>fullchain.cer<br>[Tue Jun <span class="hljs-number">27</span> <span class="hljs-number">13</span>:<span class="hljs-number">04</span>:<span class="hljs-number">07</span> CST <span class="hljs-number">2023</span>] _on_issue_success<br></code></pre></td></tr></table></figure><h2 id="安装证书"><a href="#安装证书" class="headerlink" title="安装证书"></a>安装证书</h2><p>nginx</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs gradle">acme.sh --install-cert -d domain.tld \<br>--key-<span class="hljs-keyword">file</span>       <span class="hljs-regexp">/path/</span>to<span class="hljs-regexp">/ssl/</span><span class="hljs-keyword">private</span>.key  \<br>--fullchain-<span class="hljs-keyword">file</span> <span class="hljs-regexp">/path/</span>to<span class="hljs-regexp">/ssl/</span>fullchain.pem \<br>--reloadcmd     <span class="hljs-string">&quot;service nginx restart&quot;</span><br><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">acme.sh --install-cert -d ruha11.xyz --key-file /etc/cert/private.key  --fullchain-file /etc/cert/fullchain.pem<br></code></pre></td></tr></table></figure><p>更新会自动更新</p><p>acm 脚本会记录执行的命令 证书续期的时候自己再重新执行命令然后重启服务</p><p>参考文章</p><p><a href="https://zhuanlan.zhihu.com/p/347064501">用acme.sh帮你免费且自动更新的HTTPS证书，省时又省力</a></p><p><a href="https://atpx.com/blog/auto-update-ssl-with-acme/">使用 acme.sh 自动签发和更新证书</a></p><p><a href="https://github.com/acmesh-official/acme.sh/wiki/%E8%AF%B4%E6%98%8E">官方中文文档</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>gost上网配置</title>
    <link href="/2023/03/15/gost%E9%85%8D%E7%BD%AE/"/>
    <url>/2023/03/15/gost%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p>本文来自已逝前辈 左耳朵耗子的上网教程教程</p><h2 id="原文部署命令"><a href="#原文部署命令" class="headerlink" title="原文部署命令"></a>原文部署命令</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">下面的四个参数需要改成你的</span><br>DOMAIN=&quot;YOU.DOMAIN.NAME&quot;<br>USER=&quot;username&quot;<br>PASS=&quot;password&quot;<br>PORT=443<br><br>BIND_IP=0.0.0.0<br>CERT_DIR=/etc/letsencrypt<br>CERT=$&#123;CERT_DIR&#125;/live/$&#123;DOMAIN&#125;/fullchain.pem<br>KEY=$&#123;CERT_DIR&#125;/live/$&#123;DOMAIN&#125;/privkey.pem<br>sudo docker run -d --name gost \<br>    -v $&#123;CERT_DIR&#125;:$&#123;CERT_DIR&#125;:ro \<br>    --net=host ginuerzh/gost \<br>    -L &quot;http2://$&#123;USER&#125;:$&#123;PASS&#125;@$&#123;BIND_IP&#125;:$&#123;PORT&#125;?cert=$&#123;CERT&#125;&amp;key=$&#123;KEY&#125;&amp;probe_resist=code:404&amp;knock=www.google.com&quot;<br></code></pre></td></tr></table></figure><p>最后部署配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">start_gost</span><br>USER=&quot;test&quot;<br>PASS=&quot;testpasswd&quot;<br>PORT=443<br>AUTH=$(echo -n $&#123;USER&#125;:$&#123;PASS&#125; | base64)<br><br>BIND_IP=0.0.0.0<br>CERT_DIR=/etc/cert<br>CERT=$&#123;CERT_DIR&#125;/fullchain.pem<br>KEY=$&#123;CERT_DIR&#125;/private.key <br><br>nohup gost -L &quot;http2://$&#123;BIND_IP&#125;:$&#123;PORT&#125;?auth=$&#123;AUTH&#125;&amp;cert=$&#123;CERT&#125;&amp;key=$&#123;KEY&#125;&amp;probe_resist=code:404&amp;knock=www.google.com&quot; &gt; /dev/null 2&gt;&amp;1 &amp; <br></code></pre></td></tr></table></figure><p>关于 gost 的参数， 你可以参看其文档：<a href="https://docs.ginuerzh.xyz/gost/">Gost Wiki</a>，上面我设置一个参数 <code>probe_resist=code:404</code> 意思是，如果服务器被探测，或是用浏览器来访问，返回404错误，也可以返回一个网页（如：<code>probe_resist=file:/path/to/file.txt</code> 或其它网站 <code>probe_resist=web:example.com/page.html</code>）</p><h2 id="其他种类部署命令"><a href="#其他种类部署命令" class="headerlink" title="其他种类部署命令"></a>其他种类部署命令</h2><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="使用http2-加证书-防止检测"><a href="#使用http2-加证书-防止检测" class="headerlink" title="使用http2 加证书+ 防止检测"></a>使用http2 加证书+ 防止检测</h3><h4 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gost -L &#x27;http2://0.0.0.0:443?auth=cnVoYWk6TXIuaml2eS4wMzIz&amp;cert=/etc/cert/fullchain.pem&amp;key=/etc/cert/private.key&amp;probe_resist=code:404&amp;knock=www.google.com&#x27;<br></code></pre></td></tr></table></figure><h4 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gost -L socks5://:5182 -F &#x27;http2://serverip:443?auth=cnVoYWk6TXIuaml2eS4wMzIz&amp;cert=~/tmp/fullchain.pem&amp;key=~/tmp/private.key&amp;probe_resist=code:404&amp;knock=www.google.com&#x27;<br></code></pre></td></tr></table></figure><h3 id="socks5部署"><a href="#socks5部署" class="headerlink" title="socks5部署"></a>socks5部署</h3><h3 id="服务端-1"><a href="#服务端-1" class="headerlink" title="服务端"></a>服务端</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gost -L &#x27;socks5://username:password.@:5180&#x27;<br></code></pre></td></tr></table></figure><h3 id="客户端-1"><a href="#客户端-1" class="headerlink" title="客户端"></a>客户端</h3><p>将带账号密码认证的socks5 5180代理转发到本地未认证的5181 端口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">gost -L socks://:5181 -F &#x27;socks5://username:password.@serverip:5180&#x27;<br></code></pre></td></tr></table></figure><h2 id="文章参考"><a href="#文章参考" class="headerlink" title="文章参考"></a>文章参考</h2><blockquote><p>1.<a href="">科学上网</a></p><p>2.<a href="https://v2.gost.run/getting-started/">gost官方文档</a></p></blockquote>]]></content>
    
    
    
    <tags>
      
      <tag>gost</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>公司gitlab和个人github配置</title>
    <link href="/2022/10/31/%E5%85%AC%E5%8F%B8gitlab%E5%92%8C%E4%B8%AA%E4%BA%BAgithub%E9%85%8D%E7%BD%AE/"/>
    <url>/2022/10/31/%E5%85%AC%E5%8F%B8gitlab%E5%92%8C%E4%B8%AA%E4%BA%BAgithub%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs ~/.ssh_config"><br>#github<br>Host github.com<br>HostName github.com<br>User git<br>PreferredAuthentications publickey<br>IdentityFile ~/.ssh/id_rsa_github<br><br>#company<br>#输入公司ip端口，或者域名<br>Host gitlab.com<br>HostName gitlab.miduchina.com<br>User git<br>  PreferredAuthentications publickey<br>IdentityFile ~/.ssh/id_rsa_midu<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>开发环境配置</category>
      
    </categories>
    
    
    <tags>
      
      <tag>git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>tmux配置</title>
    <link href="/2022/10/31/tmux%E9%85%8D%E7%BD%AE/"/>
    <url>/2022/10/31/tmux%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="原生tmux-环境安装配置"><a href="#原生tmux-环境安装配置" class="headerlink" title="原生tmux 环境安装配置"></a>原生tmux 环境安装配置</h2><p>环境 macos12.5</p><p>终端配置：zsh</p><p>安装</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-keyword">brew </span><span class="hljs-keyword">install </span>tmux <br></code></pre></td></tr></table></figure><p>版本查看</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">tmux</span> -V<br><span class="hljs-comment">#  tmux 3.3a</span><br></code></pre></td></tr></table></figure><p>配置文件路径默认是在家目录</p><p>配置文件立即生效</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;tmux source-file ~/.tmux.conf.local&quot;</span> &gt;&gt; ~/.tmux.conf.local<br></code></pre></td></tr></table></figure><p>安装插件</p><p><code>vim ~/.tmux.conf</code> 命令对tmux配置文件进行编辑</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tmux"># Display color<br>set -g default-terminal &quot;screen-256color&quot;<br><br># List of plugins<br>set -g @plugin &#x27;tmux-plugins/tpm&#x27;<br>set -g @plugin &#x27;tmux-plugins/tmux-sensible&#x27;<br>set -g @plugin &#x27;tmux-plugins/tmux-logging&#x27;<br>set -g history-limit 10000000<br><br>run -b &#x27;~/.tmux/plugins/tpm/tpm&#x27;<br><br></code></pre></td></tr></table></figure><p>tmux下载插件下载</p><p>按下<code>&lt;prefix&gt; + shift + i</code>后<code>tmux</code>会自动下载插件到<code>~/.tmux/plugins/</code> 目录 改过程我执行的时没有回显，是看到有plugins/目录生成。</p><h2 id="tmux-cheetsheets"><a href="#tmux-cheetsheets" class="headerlink" title="tmux cheetsheets"></a>tmux cheetsheets</h2><p>指的是没有经过修改的原生的tmux 配置</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript"><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><br><span class="hljs-comment"># session</span><br><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><br><br>tmux                      <span class="hljs-comment"># 创建新的 session</span><br>tmux <span class="hljs-keyword">new</span> -S name          <span class="hljs-comment"># 创建新的 session 并指定一个name</span><br>tmux ls                   <span class="hljs-comment"># 查看多少个后台工作的 session</span><br>tmux a/at/attach          <span class="hljs-comment"># 重新连接 session </span><br>tmux a/at/attach -t num   <span class="hljs-comment"># 如果有多个 session, 指定 session num 连接</span><br>tmux kill-ses -t myses    <span class="hljs-comment"># kill 某个 session</span><br>tmux kill-ses -a          <span class="hljs-comment"># kill 所有 session, 除了当前的 session</span><br>tmux kill-ses -a -t myses <span class="hljs-comment"># kill 所有 session, 除了 myses</span><br><br><br><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><br><span class="hljs-comment"># 操作方式 </span><br><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><br><br>&lt;prefix&gt; + key            <span class="hljs-comment"># &lt;prefix&gt; 默认为 ctrl + b</span><br>&lt;prefix&gt; + c              <span class="hljs-comment"># 表示先按 ctrl + b 再按 c 键</span><br><br><br><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><br><span class="hljs-comment"># 帮助信息</span><br><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><br><br>&lt;prefix&gt; + ?              <span class="hljs-comment"># 查看所有的 key map</span><br><br><br><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><br><span class="hljs-comment"># window 操作 </span><br><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><br><br>&lt;prefix&gt; + c              <span class="hljs-comment"># 新建一个 window</span><br>&lt;prefix&gt; + n              <span class="hljs-comment"># 下一个 window</span><br>&lt;prefix&gt; + p              <span class="hljs-comment"># 上一个 window</span><br>&lt;prefix&gt; + w              <span class="hljs-comment"># 列出 window</span><br>&lt;prefix&gt; + &amp;              <span class="hljs-comment"># 关闭当前 window</span><br>&lt;prefix&gt; + num[<span class="hljs-number">1</span><span class="hljs-number">-9</span>]       <span class="hljs-comment"># 选定特定 num 的 window</span><br>&lt;prefix&gt; + f              <span class="hljs-comment"># 查找 window </span><br>&lt;prefix&gt; + ,              <span class="hljs-comment"># 重命名 window </span><br>&lt;prefix&gt; + .              <span class="hljs-comment"># 移动 window </span><br><br><br><br><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><br><span class="hljs-comment"># pane 操作 </span><br><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><span class="hljs-comment">######</span><br><br>&lt;prefix&gt; + %              <span class="hljs-comment"># 纵向分裂 </span><br>&lt;prefix&gt; + <span class="hljs-string">&quot;              # 横向分裂 </span><br><span class="hljs-string">&lt;prefix&gt; + 方向键         # 在一个 window 中切换 pane </span><br><span class="hljs-string">&lt;prefix&gt; + ctrl-方向键    # 调整 pane 大小</span><br><span class="hljs-string">&lt;prefix&gt; + z              # 全屏化当前 pane, 再次执行退出全屏 </span><br><span class="hljs-string">&lt;prefix&gt; + x              # 关闭当前 pane</span><br><span class="hljs-string">&lt;prefix&gt; + q              # 显示 pane 编号</span><br><span class="hljs-string">&lt;prefix&gt; + o              # 跳到下一个 pane </span><br><span class="hljs-string">&lt;prefix&gt; + &#123;              # 跟前一个编号的 pane 交换</span><br><span class="hljs-string">&lt;prefix&gt; + &#125;              # 跟后一个编号的 pane 交换</span><br><span class="hljs-string">&lt;prefix&gt; + ;              # 跳转到上一个活跃的 pane </span><br><span class="hljs-string">&lt;prefix&gt; + !              # 将 pane 转化为 window </span><br><span class="hljs-string">&lt;prefix&gt; + &lt;Space&gt;        # 改变 pane 的布局 </span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">##############################################################################</span><br><span class="hljs-string"># session </span><br><span class="hljs-string">##############################################################################</span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;prefix&gt; + d              # detach 整个session, 后续可以重新连接</span><br><span class="hljs-string">&lt;prefix&gt; + s              # 列出 session</span><br><span class="hljs-string">&lt;prefix&gt; + $              # 重命名 session</span><br><span class="hljs-string">&lt;prefix&gt; + (              # 跳到上一个 seesion </span><br><span class="hljs-string">&lt;prefix&gt; + )              # 跳到下一个 seesion </span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">##############################################################################</span><br><span class="hljs-string"># Misc </span><br><span class="hljs-string">##############################################################################</span><br><span class="hljs-string">&lt;prefix&gt; + t              # 显示时钟 </span><br><span class="hljs-string">&lt;prefix&gt; + :              # 命令行 </span><br><span class="hljs-string"></span><br><span class="hljs-string">##############################################################################</span><br><span class="hljs-string"># pane 同步</span><br><span class="hljs-string">##############################################################################</span><br><span class="hljs-string"></span><br><span class="hljs-string">:setw synchronize-panes  # 打开(关闭) pane 同步模式, 发送命令到所有的 pane 中</span><br><span class="hljs-string">                         # 只影响当前 window 的 pane</span><br><span class="hljs-string"></span><br><span class="hljs-string">##############################################################################</span><br><span class="hljs-string"># 复制模式 (copy-mode) </span><br><span class="hljs-string">##############################################################################</span><br><span class="hljs-string"></span><br><span class="hljs-string">添加下面一行到 $HOME/.tmux.conf, 通过 vim 的快捷键实现浏览, 复制等操作;</span><br><span class="hljs-string"></span><br><span class="hljs-string">setw -g mode-keys vi </span><br><span class="hljs-string"></span><br><span class="hljs-string">更多 vim 快捷键可参考 ../editors/vim.txt, 以下列出一些常用快捷键. </span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;prefix&gt; + [              # 进入 copy mode </span><br><span class="hljs-string"></span><br><span class="hljs-string">vi             emacs      功能</span><br><span class="hljs-string">^              M-m        # 跳转到一行开头</span><br><span class="hljs-string">Escape         C-g        # 放弃选择</span><br><span class="hljs-string">k              Up         # 上移</span><br><span class="hljs-string">j              Down       # 下移 </span><br><span class="hljs-string">h              Left       # 左移</span><br><span class="hljs-string">l              Right      # 右移</span><br><span class="hljs-string">L                         # 最后一行</span><br><span class="hljs-string">M              M-r        # 中间一行</span><br><span class="hljs-string">H              M-R        # 第一行    </span><br><span class="hljs-string">$              C-e        # 跳转到行尾</span><br><span class="hljs-string">:              g          # 跳转至某一行</span><br><span class="hljs-string">C-d            M-Down     # 下翻半页</span><br><span class="hljs-string">C-u            M-Up       # 上翻半页</span><br><span class="hljs-string">C-f            Page down  # 下翻一页</span><br><span class="hljs-string">C-b            Page up    # 上翻一页</span><br><span class="hljs-string">w              M-f        # 下一个字符     </span><br><span class="hljs-string">b              M-b        # 前一个字符</span><br><span class="hljs-string">q              Escape     # 退出        </span><br><span class="hljs-string">?              C-r        # 往上查找</span><br><span class="hljs-string">/              C-s        # 往下查找</span><br><span class="hljs-string">n              n          # 查找下一个</span><br><span class="hljs-string"></span><br><span class="hljs-string">Space          C-Space    # 进入选择模式</span><br><span class="hljs-string">Enter          M-w        # 确认选择内容, 并退出 </span><br><span class="hljs-string"></span><br><span class="hljs-string">&lt;prefix&gt; + ]              # 粘贴选择内容(粘贴 buffer_0 的内容) </span><br><span class="hljs-string"></span><br><span class="hljs-string">:show-buffer              # 显示 buffer_0 的内容</span><br><span class="hljs-string">:capture-buffer           # 复制整个能见的内容到当前的 buffer</span><br><span class="hljs-string">:list-buffers             # 列出所有的 buffer </span><br><span class="hljs-string">:choose-buffer            # 列出所有的 buffer, 并选择用于粘贴的 buffer</span><br><span class="hljs-string">:save-buffer buf.txt      # 将 buffer 的内容复制到 buf.txt</span><br><span class="hljs-string">:delete-buffer -b 1       # 删除 buffer_1</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">##############################################################################</span><br><span class="hljs-string"># mouse-mode </span><br><span class="hljs-string">##############################################################################</span><br><span class="hljs-string"></span><br><span class="hljs-string">:setw -g mode-mouse on           # 打开鼠标模式</span><br><span class="hljs-string">:set -g mouse-select-pane on     # 通过鼠标选择 pane</span><br><span class="hljs-string">:set -g mouse-resize-pane on     # 通过鼠标更改 pane 大小</span><br><span class="hljs-string">:set -g mouse-select-window on   # 通过鼠标选择 window</span><br><span class="hljs-string"></span><br><span class="hljs-string"></span><br><span class="hljs-string">##############################################################################</span><br><span class="hljs-string"># References</span><br><span class="hljs-string">##############################################################################</span><br><span class="hljs-string"></span><br><span class="hljs-string">https://gist.github.com/MohamedAlaa/2961058</span><br><span class="hljs-string">https://tmuxcheatsheet.com/</span><br><span class="hljs-string"></span><br><span class="hljs-string">所有的快捷键都有对应的 command, 参考:</span><br><span class="hljs-string">http://man.openbsd.org/OpenBSD-current/man1/tmux.1</span><br><span class="hljs-string"></span><br><span class="hljs-string">可以通过 $HOME/.tmux.conf 更改配置, 参考一些比较好的 tmux 配置:</span><br><span class="hljs-string">https://github.com/gpakosz/.tmux</span><br></code></pre></td></tr></table></figure><h3 id="Fix"><a href="#Fix" class="headerlink" title="Fix"></a>Fix</h3><p>zsh shell 中使用了 zsh-autosuggestions  之后进入 tmux 新建的sessin 会导致输入和显示的字符不匹配</p><p>只需要在命令行中导出一个环境变量就可以正常使用了。</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">TERM</span>=xterm-256color  <br></code></pre></td></tr></table></figure><h2 id="Oh-my-tmux-安装配置"><a href="#Oh-my-tmux-安装配置" class="headerlink" title="Oh-my-tmux 安装配置"></a>Oh-my-tmux 安装配置</h2><p>按照以下命名执行或在家目录创建一个.tmux 的隐藏文件 并且创建了一个<code>.tmux.conf</code>软链接到用户的家目录,并且家目录中存在一个 tmux.conf.local 后期只要对这个文件进行修改就可以</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cd</span></span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">git <span class="hljs-built_in">clone</span> https://github.com/gpakosz/.tmux.git</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">ln</span> -s -f .tmux/.tmux.conf</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash"><span class="hljs-built_in">cp</span> .tmux/.tmux.conf.local .</span><br></code></pre></td></tr></table></figure><p>关于oh-my-tmux 的配置的详情</p><p>请查看<a href="https://github.com/gpakosz/.tmux">tmux 项目主页</a></p><p>tmux 的自定义配置</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-comment"># 列出所有快捷键，及其对应的 Tmux 命令</span><br>$ <span class="hljs-string">tmux</span> <span class="hljs-built_in">list-keys</span><br><br><span class="hljs-comment"># 列出所有 Tmux 命令及其参数</span><br>$ <span class="hljs-string">tmux</span> <span class="hljs-built_in">list-commands</span><br><br><span class="hljs-comment"># 列出当前所有 Tmux 会话的信息</span><br>$ <span class="hljs-string">tmux</span> <span class="hljs-string">info</span><br><br><span class="hljs-comment"># 重新加载当前的 Tmux 配置</span><br>$ <span class="hljs-string">tmux</span> <span class="hljs-string">source-file</span> ~/.<span class="hljs-string">tmux</span>.<span class="hljs-string">conf</span><br><br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><code class="hljs conf"><br># 终端颜色设置为 tmux-256colo<br># 参考https://zhuanlan.zhihu.com/p/293788971<br># 参考git https://gist.github.com/bbqtd/a4ac060d6f6b9ea6fe3aabe735aa9d95<br>set-option default-terminal &quot;tmux-256color&quot;<br>set-option -a terminal-overrides &quot;,*256col*:RGB&quot;<br><br><br><br><br><br><br># 基础配置<br><br>set -g display-time 3000<br>set -g history-limit 65535<br><br><br>## 鼠标支持<br>set -g mouse on<br><br><br>## 面板相关<br># 分隔面板<br>unbind &#x27;&quot;&#x27;<br>bind - splitw -v -c &#x27;#&#123;pane_current_path&#125;&#x27;<br>unbind %<br>bind | splitw -h -c &#x27;#&#123;pane_current_path&#125;&#x27;<br><br><br># 面板(pane)切换<br>bind -r k select-pane -U<br>bind -r j select-pane -D<br>bind -r h select-pane -L<br>bind -r l select-pane -R<br>bind -r e lastp # 选择最后一个面板<br>bind -r ^e last # 选择最后一个窗口<br>bind -r ^u swapp -U # 与前一个面板交换位置<br>bind -r ^d swapp -D # 与后一个面板交换位置<br># -r表示可重复按键，大概500ms之内，重复的h、j、k、l按键都将有效，完美支持了快速切换的Geek需求<br><br><br># 调整面板大小：绑定 Ctrl + h/j/k/l 键调整pane边缘<br>bind -r ^k resizep -U 10 # upward (prefix Ctrl+k)<br>bind -r ^j resizep -D 10 # downward (prefix Ctrl+j)<br>bind -r ^h resizep -L 10 # to the left (prefix Ctrl+h)<br>bind -r ^l resizep -R 10 # to the right (prefix Ctrl+l)<br><br><br>## 其他杂项配置<br>bind r source-file ~/.tmux.conf \; display-message &quot;source-file ~/.tmux.conf done&quot;  # 绑定重载 settings 的热键<br><br><br><br>## 一些锦上添花的优化<br># 设置窗口面板起始序号<br>set -g base-index 1  # 设置窗口(window)的起始下标为1<br>set -g pane-base-index 1  # 设置面板(pane)的起始下标为1<br><br># 关闭默认的rename机制<br>setw -g automatic-rename off  # tmux默认会自动重命名窗口，频繁的命令行操作，将频繁触发重命名，比较浪费CPU性能<br>setw -g allow-rename off<br><br># 关闭默认窗口标题<br>#set -g set-titles off<br><br># 自定义状态栏<br><br>set -g status-position top # 状态栏在顶部<br>set -g status-utf8 on # 状态栏支持utf8<br>set -g status-interval 1 # 状态栏刷新时间<br>set -g status-justify left # 状态栏列表左对齐<br>setw -g monitor-activity on # 非当前窗口有内容更新时在状态栏通知<br>#set -g status-bg black # 设置状态栏背景黑色<br>#set -g status-fg yellow # 设置状态栏前景黄色<br>#set -g status-style &quot;bg=black, fg=yellow&quot; # 状态栏前景背景色<br><br>set -g status-left &quot;#[bg=#88cc44] Sess: #S &quot; # 状态栏-左侧内容 (#S: 会话(session)名称)<br>#set -g status-right &#x27;Continuum status: #&#123;continuum_status&#125;&#x27; # 状态栏右侧内容<br>set -g status-left-length 300 # 状态栏-左边长度300<br>set -g status-right-length 500 # 状态栏-左边长度500<br><br>set -wg window-status-format &quot; #I:#W &quot; # 状态栏-(当前窗口除外的其他)窗口名称格式<br>set -wg window-status-separator &quot;&quot; # 状态栏-窗口名称之间的间隔<br>set -wg window-status-current-format &quot; #I:#W #F &quot; # 状态栏-当前窗口名称格式(#I：序号，#w：窗口名称，#F：间隔符)<br>set -wg window-status-current-style &quot;bg=black, fg=yellow&quot; # 状态栏-当前窗口名称的背景色<br>#set -wg window-status-last-style &quot;fg=black&quot; # 状态栏最后一个窗口名称的样式<br><br>set -g message-style &quot;bg=#202529, fg=#91A8BA&quot; # 指定消息通知的前景、后景色<br><br><br><br><br># customize plugins 自定义tmux 插件<br><br>set -g @plugin &#x27;tmux-plugins/tmux-resurrect&#x27;<br>set -g @plugin &#x27;tmux-plugins/tmux-continuum&#x27;<br>set -g @continuum-restore &#x27;on&#x27;<br>set -g @continuum-save-interval &#x27;30&#x27;<br><br><br>########## 插件 ##########<br>set -g @plugin &#x27;tmux-plugins/tpm&#x27;<br>set -g @plugin &#x27;tmux-plugins/tmux-sensible&#x27;<br><br># tmux-resurrect 插件，用于手动保存和恢复 tmux 环境信息。<br># 使用方式：按 PREFIX,Ctrl+s 保存 session，按 PREFIX,Ctrl+r 恢复 session<br>set -g @plugin &#x27;tmux-plugins/tmux-resurrect&#x27;<br># 使 tmux-resurrect 支持保存和恢复 tmux 中的 vim 会话:<br>set -g @resurrect-strategy-vim &#x27;session&#x27;  # 需要 VIM 先安装 https://github.com/tpope/vim-obsession 插件<br><br># tmux-continuum 插件。依赖: tmux&gt;=1.9, bash, tmux-resurrect<br># 每隔15分钟自动保存 tmux 环境信息(不需要任何配置，默认就有)<br>set -g @plugin &#x27;tmux-plugins/tmux-continuum&#x27;<br># 使得机器启动时，自动启动 tmux server:<br>set -g @continuum-boot &#x27;on&#x27;  # This is only for Linux. For MacOSX, see: https://github.com/tmux-plugins/tmux-continuum/blob/master/docs/automatic_start.md<br># tmux server 启动时，自动加载上次保存的环境信息<br>set -g @continuum-restore &#x27;on&#x27;<br><br><br># 初始化 tmux 插件管理器(保证这行在 ~/.tmux.conf 的非常靠后的位置)<br>run &#x27;~/.tmux/plugins/tpm/tpm&#x27;<br>  # 安装插件：<br>  # 1. 在 ~/.tmux.conf 中增加新的插件，如: set -g @plugin &#x27;GitHub用户名/仓库名&#x27;。<br>  # 2. 按 PREFIX + I(大写) 键，将自动下载插件，并刷新tmux环境。<br><br>  # 更新插件: 按 PREFIX + U(大写) 键，选择要更新的插件后，回车确认。<br><br>  # 卸载插件：<br>  # 1. 在 ~/.tmux.conf 中移除插件所在行。<br>  # 2. 按下 PREFIX + Alt + u(小写) 移除插件。<br><br><br></code></pre></td></tr></table></figure><p>使用256色 配置 <a href="https://zhuanlan.zhihu.com/p/293788971">https://zhuanlan.zhihu.com/p/293788971</a></p><p>参考配置</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/gpakosz/</span>.tmux<br>https:<span class="hljs-regexp">//</span>zhuanlan.zhihu.com<span class="hljs-regexp">/p/</span><span class="hljs-number">112426848</span><br>https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/Johnny4Fun/</span>.tmux<span class="hljs-regexp">/blob/m</span>aster/.tmux.conf.local<br>https:<span class="hljs-regexp">//gi</span>tee.com<span class="hljs-regexp">/zhang_qu/</span>zq_ohmyzsh<span class="hljs-regexp">/blob/m</span>aster/.tmux.conf.local<br>https:<span class="hljs-regexp">//</span>www.jianshu.com<span class="hljs-regexp">/p/</span>a032c09fc7c0<br>https:<span class="hljs-regexp">//gi</span>tee.com<span class="hljs-regexp">/zhang_qu/</span>zq_ohmyzsh<span class="hljs-regexp">/blob/m</span>aster/.tmux.conf.local<br>Tmux使用手册 - http:<span class="hljs-regexp">//</span>louiszhai.github.io<span class="hljs-regexp">/2017/</span><span class="hljs-number">09</span><span class="hljs-regexp">/30/</span>tmux/<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>开发环境搭建</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>nginx 笔记</title>
    <link href="/2022/08/17/nginx/"/>
    <url>/2022/08/17/nginx/</url>
    
    <content type="html"><![CDATA[<p>本文档是对<a href="https://www.bilibili.com/video/BV1mz4y1n7PQ?p=3&spm_id_from=pageDriver&vd_source=64147bb55ba2bca1a2890e62c5b9373c">【GeekHour】30分钟Nginx入门教程</a> 的课程实验，笔记不是完全按照课程所讲。</p><p>课件可以可以关注 公众号 后获取 </p><p>Nginx课程笔记的下载地址：<a href="https://pan.baidu.com/s/1UCvjs5_YFRxqeJ-3oYV4vg?pwd=ngin">https://pan.baidu.com/s/1UCvjs5_YFRxqeJ-3oYV4vg?pwd=ngin</a> 提取码: ngin</p><p>nginx的文档参考</p><p><a href="https://blog.redis.com.cn/doc/">https://blog.redis.com.cn/doc/</a></p><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><p>我使用的是Orbstack 下的centos 虚拟机，其他机器类似</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">yum instal -y nginx</span><br><br></code></pre></td></tr></table></figure><h2 id="服务启停"><a href="#服务启停" class="headerlink" title="服务启停"></a>服务启停</h2><h3 id="默认启动-nginx"><a href="#默认启动-nginx" class="headerlink" title="默认启动  nginx"></a>默认启动  <code>nginx</code></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@centos ~]# ps -ef|grep -v grep |grep nginx<br>root         452       1  0 22:15 ?        00:00:00 [rosetta] /usr/sbin/nginx nginx<br>nginx        453     452  0 22:15 ?        00:00:00 [rosetta] /usr/sbin/nginx nginx<br>nginx        454     452  0 22:15 ?        00:00:00 [rosetta] /usr/sbin/nginx nginx<br>nginx        455     452  0 22:15 ?        00:00:00 [rosetta] /usr/sbin/nginx nginx<br>nginx        456     452  0 22:15 ?        00:00:00 [rosetta] /usr/sbin/nginx nginx<br>nginx        457     452  0 22:15 ?        00:00:00 [rosetta] /usr/sbin/nginx nginx<br>nginx        458     452  0 22:15 ?        00:00:00 [rosetta] /usr/sbin/nginx nginx<br>nginx        459     452  0 22:15 ?        00:00:00 [rosetta] /usr/sbin/nginx nginx<br>nginx        460     452  0 22:15 ?        00:00:00 [rosetta] /usr/sbin/nginx nginx<br>nginx        461     452  0 22:15 ?        00:00:00 [rosetta] /usr/sbin/nginx nginx<br>nginx        462     452  0 22:15 ?        00:00:00 [rosetta] /usr/sbin/nginx nginx<br><br><br></code></pre></td></tr></table></figure><p>验证安装</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">curl</span> <span class="hljs-number">127.0.0.1</span><br><br>ip a 查看地址<br>浏览器访问 <span class="hljs-number">198.19.249.173</span> <span class="hljs-comment"># 虚拟机地址</span><br></code></pre></td></tr></table></figure><h3 id="运行中发送信号控制行为"><a href="#运行中发送信号控制行为" class="headerlink" title="运行中发送信号控制行为"></a>运行中发送信号控制行为</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><br>nginx -s <span class="hljs-keyword">quit</span>|stop| <span class="hljs-keyword">reload</span> |reopen <br><span class="hljs-keyword">quit</span> 退出<br>stop 暂停<br><span class="hljs-keyword">reload</span> 重载配置文件<br>reopen 重新打开日志文件<br></code></pre></td></tr></table></figure><h2 id="部署静态站点"><a href="#部署静态站点" class="headerlink" title="部署静态站点"></a>部署静态站点</h2><p><code>nginx -V</code> 查看nginx的安装配置</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><br><br>[root@centos ~]# nginx -V<br>nginx version: nginx/<span class="hljs-number">1.14</span>.<span class="hljs-number">1</span><br>built by gcc <span class="hljs-number">8.5</span>.<span class="hljs-number">0</span> <span class="hljs-number">20210514</span> (Red Hat <span class="hljs-number">8.5</span>.<span class="hljs-number">0</span>-<span class="hljs-number">3</span>) (GCC) <br>built with OpenSSL <span class="hljs-number">1.1</span>.<span class="hljs-number">1</span>k  FIPS <span class="hljs-number">25</span> Mar <span class="hljs-number">2021</span><br>TLS SNI support enabled<br>configure arguments: --prefix=<span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/nginx --sbin-path=/u</span>sr<span class="hljs-regexp">/sbin/</span>nginx --modules-path=<span class="hljs-regexp">/usr/</span>lib64<span class="hljs-regexp">/nginx/m</span>odules --conf-path=<span class="hljs-regexp">/etc/</span>nginx<span class="hljs-regexp">/nginx.conf --error-log-path=/</span>var<span class="hljs-regexp">/log/</span>nginx<span class="hljs-regexp">/error.log --http-log-path=/</span>var<span class="hljs-regexp">/log/</span>nginx<span class="hljs-regexp">/access.log --http-client-body-temp-path=/</span>var<span class="hljs-regexp">/lib/</span>nginx<span class="hljs-regexp">/tmp/</span>client_body --http-proxy-temp-path=<span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/nginx/</span>tmp<span class="hljs-regexp">/proxy --http-fastcgi-temp-path=/</span>var<span class="hljs-regexp">/lib/</span>nginx<span class="hljs-regexp">/tmp/</span>fastcgi --http-uwsgi-temp-path=<span class="hljs-regexp">/var/</span>lib<span class="hljs-regexp">/nginx/</span>tmp<span class="hljs-regexp">/uwsgi --http-scgi-temp-path=/</span>var<span class="hljs-regexp">/lib/</span>nginx<span class="hljs-regexp">/tmp/</span>scgi --pid-path=<span class="hljs-regexp">/run/</span>nginx.pid --lock-path=<span class="hljs-regexp">/run/</span>lock<span class="hljs-regexp">/subsys/</span>nginx --user=nginx --<span class="hljs-keyword">group</span>=nginx --with-<span class="hljs-keyword">file</span>-aio --with-ipv6 --with-http_ssl_module --with-http_v2_module --with-http_realip_module --with-http_addition_module --with-http_xslt_module=dynamic --with-http_image_filter_module=dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_slice_module --with-http_stub_status_module --with-http_perl_module=dynamic --with-http_auth_request_module --with-mail=dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream=dynamic --with-stream_ssl_module --with-debug --with-cc-opt=<span class="hljs-string">&#x27;-O2 -g -pipe -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -specs=/usr/lib/rpm/redhat/redhat-annobin-cc1 -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection&#x27;</span> --with-ld-opt=<span class="hljs-string">&#x27;-Wl,-z,relro -Wl,-z,now -specs=/usr/lib/rpm/redhat/redhat-hardened-ld -Wl,-E&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="默认配置"><a href="#默认配置" class="headerlink" title="默认配置"></a>默认配置</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs nginx">[root@<span class="hljs-attribute">centos</span> ~]<span class="hljs-comment"># cat /etc/nginx/nginx.conf</span><br><span class="hljs-comment"># For more information on configuration, see:</span><br><span class="hljs-comment">#   * Official English Documentation: http://nginx.org/en/docs/</span><br><span class="hljs-comment">#   * Official Russian Documentation: http://nginx.org/ru/docs/</span><br><br>user nginx;<br><span class="hljs-attribute">worker_processes</span> auto;<br><span class="hljs-attribute">error_log</span> /var/log/nginx/<span class="hljs-literal">error</span>.log;<br><span class="hljs-attribute">pid</span> /run/nginx.pid;<br><br><span class="hljs-comment"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span><br><span class="hljs-attribute">include</span> /usr/share/nginx/modules/<span class="hljs-regexp">*.conf</span>;<br><br><span class="hljs-section">events</span> &#123;<br>    <span class="hljs-attribute">worker_connections</span> <span class="hljs-number">1024</span>;<br>&#125;<br><br><span class="hljs-section">http</span> &#123;<br>    <span class="hljs-attribute">log_format</span>  main  <span class="hljs-string">&#x27;<span class="hljs-variable">$remote_addr</span> - <span class="hljs-variable">$remote_user</span> [<span class="hljs-variable">$time_local</span>] &quot;<span class="hljs-variable">$request</span>&quot; &#x27;</span><br>                      <span class="hljs-string">&#x27;<span class="hljs-variable">$status</span> <span class="hljs-variable">$body_bytes_sent</span> &quot;<span class="hljs-variable">$http_referer</span>&quot; &#x27;</span><br>                      <span class="hljs-string">&#x27;&quot;<span class="hljs-variable">$http_user_agent</span>&quot; &quot;<span class="hljs-variable">$http_x_forwarded_for</span>&quot;&#x27;</span>;<br><br>    <span class="hljs-attribute">access_log</span>  /var/log/nginx/access.log  main;<br><br>    <span class="hljs-attribute">sendfile</span>            <span class="hljs-literal">on</span>;<br>    <span class="hljs-attribute">tcp_nopush</span>          <span class="hljs-literal">on</span>;<br>    <span class="hljs-attribute">tcp_nodelay</span>         <span class="hljs-literal">on</span>;<br>    <span class="hljs-attribute">keepalive_timeout</span>   <span class="hljs-number">65</span>;<br>    <span class="hljs-attribute">types_hash_max_size</span> <span class="hljs-number">2048</span>;<br><br>    <span class="hljs-attribute">include</span>             /etc/nginx/mime.types;<br>    <span class="hljs-attribute">default_type</span>        application/octet-stream;<br><br>    <span class="hljs-comment"># Load modular configuration files from the /etc/nginx/conf.d directory.</span><br>    <span class="hljs-comment"># See http://nginx.org/en/docs/ngx_core_module.html#include</span><br>    <span class="hljs-comment"># for more information.</span><br>    <span class="hljs-attribute">include</span> /etc/nginx/conf.d/<span class="hljs-regexp">*.conf</span>;<br><br>    <span class="hljs-section">server</span> &#123;<br>        <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span> default_server;<br>        <span class="hljs-attribute">listen</span>       [::]:<span class="hljs-number">80</span> default_server;<br>        <span class="hljs-attribute">server_name</span>  _;<br>        <span class="hljs-attribute">root</span>         /usr/share/nginx/html;<br><br>        <span class="hljs-comment"># Load configuration files for the default server block.</span><br>        <span class="hljs-attribute">include</span> /etc/nginx/default.d/<span class="hljs-regexp">*.conf</span>;<br><br>        <span class="hljs-section">location</span> / &#123;<br>        &#125;<br><br>        <span class="hljs-attribute">error_page</span> <span class="hljs-number">404</span> /<span class="hljs-number">404</span>.html;<br>            <span class="hljs-section">location</span> = /40x.html &#123;<br>        &#125;<br><br>        <span class="hljs-attribute">error_page</span> <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span> /50x.html;<br>            <span class="hljs-section">location</span> = /50x.html &#123;<br>        &#125;<br>    &#125;<br><br><span class="hljs-comment"># Settings for a TLS enabled server.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#    server &#123;</span><br><span class="hljs-comment">#        listen       443 ssl http2 default_server;</span><br><span class="hljs-comment">#        listen       [::]:443 ssl http2 default_server;</span><br><span class="hljs-comment">#        server_name  _;</span><br><span class="hljs-comment">#        root         /usr/share/nginx/html;</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#        ssl_certificate &quot;/etc/pki/nginx/server.crt&quot;;</span><br><span class="hljs-comment">#        ssl_certificate_key &quot;/etc/pki/nginx/private/server.key&quot;;</span><br><span class="hljs-comment">#        ssl_session_cache shared:SSL:1m;</span><br><span class="hljs-comment">#        ssl_session_timeout  10m;</span><br><span class="hljs-comment">#        ssl_ciphers PROFILE=SYSTEM;</span><br><span class="hljs-comment">#        ssl_prefer_server_ciphers on;</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#        # Load configuration files for the default server block.</span><br><span class="hljs-comment">#        include /etc/nginx/default.d/*.conf;</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#        location / &#123;</span><br><span class="hljs-comment">#        &#125;</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#        error_page 404 /404.html;</span><br><span class="hljs-comment">#            location = /40x.html &#123;</span><br><span class="hljs-comment">#        &#125;</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#        error_page 500 502 503 504 /50x.html;</span><br><span class="hljs-comment">#            location = /50x.html &#123;</span><br><span class="hljs-comment">#        &#125;</span><br><span class="hljs-comment">#    &#125;</span><br><br>&#125;<br></code></pre></td></tr></table></figure><p>server 下root 指代的是 <code>--prefix</code>的目录</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tap">[root@centos ~]<span class="hljs-comment"># cd /usr/share/nginx</span><br>[root@centos nginx]<span class="hljs-comment"># ll</span><br>total 0<br>drwxr-xr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 106 </span>Jul <span class="hljs-number"> 5 </span>13:04 html<br>drwxr-xr-x<span class="hljs-number"> 1 </span>root root<span class="hljs-number"> 194 </span>Jul <span class="hljs-number"> 5 </span>13:04 modules<br>[root@centos nginx]<span class="hljs-comment"># pwd</span><br>/usr/share/nginx<br></code></pre></td></tr></table></figure><p>下好的网页一般配置在<code>$prefix/html</code> 目录 这里我不做修改</p><h3 id="备份原html"><a href="#备份原html" class="headerlink" title="备份原html"></a>备份原html</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">cd <span class="hljs-regexp">/usr/</span>share<span class="hljs-regexp">/nginx/</span>html<br><br>mv index.html  index_bk.html<br></code></pre></td></tr></table></figure><h3 id="新建一个简单的html"><a href="#新建一个简单的html" class="headerlink" title="新建一个简单的html"></a>新建一个简单的html</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml">cat &lt;&lt; EOF &gt; index.html<br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span> This is just a test<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br>EOF<br></code></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">curl</span> <span class="hljs-number">127.0.0.1</span> <span class="hljs-comment"># 查看返回内容和写入html 文件是否相同</span><br>或者使用浏览器访问机器IP 查看即可<br></code></pre></td></tr></table></figure><h2 id="nginx-配置块解读"><a href="#nginx-配置块解读" class="headerlink" title="nginx 配置块解读"></a>nginx 配置块解读</h2><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml"></span><br><span class="language-xml">全局块</span><br><span class="language-xml">events </span><span class="hljs-template-variable">&#123;</span><br><span class="hljs-template-variable">events 块</span><br><span class="hljs-template-variable">&#125;</span><span class="language-xml"></span><br><span class="language-xml">http </span><span class="hljs-template-variable">&#123;</span><br><span class="hljs-template-variable">http 块</span><br><span class="hljs-template-variable">&#125;</span><br></code></pre></td></tr></table></figure><p>官网配置解读</p><h2 id="配置反向代理"><a href="#配置反向代理" class="headerlink" title="配置反向代理"></a>配置反向代理</h2><h3 id="服务器简单准备"><a href="#服务器简单准备" class="headerlink" title="服务器简单准备"></a>服务器简单准备</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mkdir /tmp/&#123;8001,8002,8003&#125;<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">cat &lt;&lt; EOF &gt; /tmp/8001/index.html<br>This is msg from  8001<br>EOF<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">cat &lt;&lt; EOF &gt; /tmp/8002/index.html<br>This is msg from  8002<br>EOF<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">cat &lt;&lt; EOF &gt;/tmp/8003/index.html<br>This is msg from  8003<br>EOF<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">nohup python3 -m http.server -d /tmp/8001/  8001 &gt;/dev/null 2&gt;&amp;1 &amp;<br>nohup python3 -m http.server -d /tmp/8002/  8002 &gt;/dev/null 2&gt;&amp;1 &amp;<br>nohup python3 -m http.server -d /tmp/8003/  8003 &gt;/dev/null 2&gt;&amp;1 &amp;<br><br><br>python -m http.server 8080 --bind 127.0.0.1 --cgi-mappings &quot;/app=/tmp/8003/index.html&quot;<br><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@centos 8001]# curl 127.0.0.1:8001<br>This is msg from  8001<br>[root@centos 8001]# curl 127.0.0.1:8002<br>This is msg from  8002<br>[root@centos 8001]# curl 127.0.0.1:8003<br>This is msg from  8003<br>[root@centos 8001]# <br></code></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment"># For more information on configuration, see:</span><br><span class="hljs-comment">#   * Official English Documentation: http://nginx.org/en/docs/</span><br><span class="hljs-comment">#   * Official Russian Documentation: http://nginx.org/ru/docs/</span><br><br><span class="hljs-attribute">user</span> nginx;<br><span class="hljs-attribute">worker_processes</span> <span class="hljs-number">1</span>;<br><span class="hljs-attribute">error_log</span> /var/log/nginx/<span class="hljs-literal">error</span>.log;<br><span class="hljs-attribute">pid</span> /run/nginx.pid;<br><br><span class="hljs-comment"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span><br><span class="hljs-attribute">include</span> /usr/share/nginx/modules/<span class="hljs-regexp">*.conf</span>;<br><br><span class="hljs-section">events</span> &#123;<br>    <span class="hljs-attribute">worker_connections</span> <span class="hljs-number">1024</span>;<br>&#125;<br><br><span class="hljs-section">http</span> &#123;<br><br>    <span class="hljs-section">upstream</span> backend &#123;<br>        <span class="hljs-attribute">server</span> <span class="hljs-number">198.19.249.173:8001</span> weight=<span class="hljs-number">1</span>;<br>        <span class="hljs-attribute">server</span> <span class="hljs-number">198.19.249.173:8002</span> weight=<span class="hljs-number">2</span>;<br>        <span class="hljs-attribute">server</span> <span class="hljs-number">198.19.249.173:8003</span> weight=<span class="hljs-number">3</span>;<br>    &#125;<br><br>    <span class="hljs-section">server</span> &#123;<br>        <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span> default_server;<br>        <span class="hljs-attribute">server_name</span>  localhost;<br><br>    <span class="hljs-section">location</span> / &#123;<br>        <span class="hljs-attribute">proxy_pass</span> http://backend;<br>    &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>这样配置成功转发本地的请求</p><h2 id="配置https"><a href="#配置https" class="headerlink" title="配置https"></a>配置https</h2><h3 id="使用自签名证书"><a href="#使用自签名证书" class="headerlink" title="使用自签名证书"></a>使用自签名证书</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">openssl genrsa -out private.key 2048<br>openssl req -new -key private.key -out cert.csr<br>openssl x509 -req -in cert.csr -out cacert.pem -signkey private.key<br><br></code></pre></td></tr></table></figure><h2 id="server-块配置"><a href="#server-块配置" class="headerlink" title="server 块配置"></a>server 块配置</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><br><span class="hljs-comment"># For more information on configuration, see:</span><br><span class="hljs-comment">#   * Official English Documentation: http://nginx.org/en/docs/</span><br><span class="hljs-comment">#   * Official Russian Documentation: http://nginx.org/ru/docs/</span><br><br><span class="hljs-attribute">user</span> nginx;<br><span class="hljs-attribute">worker_processes</span> <span class="hljs-number">1</span>;<br><span class="hljs-attribute">error_log</span> /var/log/nginx/<span class="hljs-literal">error</span>.log;<br><span class="hljs-attribute">pid</span> /run/nginx.pid;<br><br><span class="hljs-comment"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span><br><span class="hljs-attribute">include</span> /usr/share/nginx/modules/<span class="hljs-regexp">*.conf</span>;<br><br><span class="hljs-section">events</span> &#123;<br>    <span class="hljs-attribute">worker_connections</span> <span class="hljs-number">1024</span>;<br>&#125;<br><br><span class="hljs-section">http</span> &#123;<br>    <span class="hljs-section">server</span> &#123;<br>        <span class="hljs-attribute">listen</span>       <span class="hljs-number">443</span> ssl;<br>        <span class="hljs-attribute">server_name</span>  localhost;<br>    <br>    <span class="hljs-comment"># 公钥文件</span><br>        <span class="hljs-attribute">ssl_certificate</span>         /home/king/cacert.pem;<br>        <span class="hljs-comment"># 私钥文件</span><br>        <span class="hljs-attribute">ssl_certificate_key</span>     /home/king/private.key;<br><br>    <span class="hljs-section">location</span> / &#123;<br>       &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>nginx</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>致远js笔记</title>
    <link href="/2022/08/17/%E8%87%B4%E8%BF%9Cjs%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/08/17/%E8%87%B4%E8%BF%9Cjs%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="JS-逆向目标"><a href="#JS-逆向目标" class="headerlink" title="JS 逆向目标"></a>JS 逆向目标</h2><p>JS 逆向目标脱离浏览器环境本地运行JS 得到和浏览器一致的结果</p><h2 id="断点详解"><a href="#断点详解" class="headerlink" title="断点详解"></a>断点详解</h2><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs livescript">网站代码运行时间轴<br><br>加载Html 加载js -&gt; js 初始化 -&gt; 用户触发了某个事件 -&gt; 调用js - 明文数据- 加密函数-密文数据- 发送请求 -&gt; 接收参数-&gt; 解密函数 - 渲染网页<br><br><br>Dom 断点 <br>Elements 元素面板上  右键元素  Break <span class="hljs-literal">on</span> &gt; attribute modi...  属性修改 只会在重新渲染的时候发生颜色大小宽高变化会断点| subtree modi... <br>  时间靠前 无法定位到加密函数<br>Dom 事件断点<br>xhr 断点<br>发送请求的时候下断点， 靠近加密函数，可以根据栈定位，  如果不是使用的Xhr 无法断住<br><br>代码行断点  手动点击行 下断点<br>代码断点 <span class="hljs-keyword">debugger</span><br>全局事件断点  浏览器断点<br>全局异常捕获<br></code></pre></td></tr></table></figure><h2 id="根据常用密码定位加密算法"><a href="#根据常用密码定位加密算法" class="headerlink" title="根据常用密码定位加密算法"></a>根据常用密码定位加密算法</h2><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs dns">MD5常用值<br><br><br>字符串<span class="hljs-number">12345678</span><br><span class="hljs-number">16</span>位 小写<span class="hljs-number">83</span>aa400af464c76d<br><span class="hljs-number">16</span>位 大写<span class="hljs-number">83</span>AA400AF464C76D<br><span class="hljs-number">32</span>位 小写<span class="hljs-number">25d</span>55ad283aa400af464c76d713c07ad<br><span class="hljs-number">32</span>位 大写<span class="hljs-number">25</span>D55AD283AA400AF464C76D713C07AD<br><br><br>字符串<span class="hljs-number">123456</span><br><span class="hljs-number">16</span>位 小写<span class="hljs-number">49</span>ba59abbe56e057<br><span class="hljs-number">16</span>位 大写<span class="hljs-number">49</span>BA59ABBE56E057<br><span class="hljs-number">32</span>位 小写e10adc3949ba59abbe56e057f20f883e<br><span class="hljs-number">32</span>位 大写E10ADC3949BA59ABBE56E057F20F883E<br><br>字符串Aa123456.<br><span class="hljs-number">16</span>位 小写<span class="hljs-number">69</span>fcd468<span class="hljs-number">13b869e9</span><br><span class="hljs-number">16</span>位 大写<span class="hljs-number">69</span>FCD468<span class="hljs-number">13B869E9</span><br><span class="hljs-number">32</span>位 小写<span class="hljs-number">4</span>e71002969fcd46813b869e931aedf4b<br><span class="hljs-number">32</span>位 大写<span class="hljs-number">4</span>E71002969FCD46813B869E931AEDF4B<br><br></code></pre></td></tr></table></figure><h2 id="搜索技巧："><a href="#搜索技巧：" class="headerlink" title="搜索技巧："></a>搜索技巧：</h2><ol><li>netword 抓包中的参数和url</li><li><code>password</code>  <code>.password</code>  <code>password=</code> <code>password =</code> <code>[&#39;password&#39;]</code> <code>[&quot;password&quot;]</code> <code>123456789</code> <code>abcdef</code> <code>1732514893</code> <code>271733879</code> <code>1732514894</code> <code>271733878</code></li></ol><h2 id="闭包函数定义时导出为全局变量"><a href="#闭包函数定义时导出为全局变量" class="headerlink" title="闭包函数定义时导出为全局变量"></a>闭包函数定义时导出为全局变量</h2><p>闭包类型：<code>当环境是闭包，自己调用自己，自写导出函数</code></p><p>闭包：<code>作用域只限自己，很小</code>，想要调用就要导出为<code>全局变量</code></p><p>当遇到连续的逗号表达式定义，并且前面是一个<code>var</code>，此时可以把想要的部分下面的<code>,</code>换为<code>var</code>,然后再自定义导出</p><p>也就是批量定义变量的时候直接把变量导出</p><h1 id="伪造浏览器环境"><a href="#伪造浏览器环境" class="headerlink" title="伪造浏览器环境"></a>伪造浏览器环境</h1><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript</a>  官方文档</p><p>Dom  Bom  JS 引擎</p><p>Bom 浏览器执行的方法</p><p>引擎  v8 查克拉 quickjs</p><p>所有的Dom 和Bom 对象到最后都是JS 对象</p><p>js 执行的效率高 可以多线程执行。无头浏览器有渲染服务</p><h2 id="反调试"><a href="#反调试" class="headerlink" title="反调试"></a>反调试</h2><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs coffeescript">检测：<br>F12 键盘监听  内高和外高  开发者人员工具变量是否为True 利用console  代码的执行时间差 toString 检测  检测栈的层数 caller 非浏览器环境<br><br>显示  <br><span class="hljs-keyword">debugger</span> <br>  非虚拟器 右键 设置<span class="hljs-literal">false</span> 替换代码（override 文件名带参数的效果不好,loacal mitm） <br>    虚拟机 <span class="hljs-built_in">eval</span> <span class="hljs-built_in">Function</span> <br>    <br>    ```<span class="language-javascript">js</span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> tr = <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-string">&quot;debugger;&quot;</span></span>);</span><br><span class="language-javascript">    <span class="hljs-title function_">tr</span>();</span><br></code></pre></td></tr></table></figure><pre><code class="hljs">思路是对debugger 进行替换</code></pre><p>​<br>​      死循环 循环语句 无限递归 两个方法互相调用  计时器</p><p>​<br>​      ```js<br>​      var rawFunctionConstructor = Function.prototype.constructor();</p><p>Function.prototype.constructor = function (x) {<br>    if (x !== ‘debugger’) {<br>        return rawFunctionConstructor</p><pre><code class="hljs">&#125;return function () &#123;&#125;;</code></pre><p>}</p><pre><code class="hljs">  <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-code">for</span><br><span class="hljs-code">while </span><br><span class="hljs-code"></span><br>隐形：<br><br><span class="hljs-code">看浏览器堆栈</span><br><span class="hljs-code"></span><br><br>阿布反调试工具<br></code></pre></td></tr></table></figure></code></pre><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs clean"><br><br><br><br><br><br><br>## WebSocket<br><br><br><br>Bom 实现的V8引擎无法使用<br><br><br><br></code></pre></td></tr></table></figure><p>var url ,protocol<br>var socket= new WebSocket(url,protocol) // 建立链接</p><p>socket.send() // 发送信息<br>socket.onopen() // 连接建立<br>socket.onmessage() //发送消息<br>socket.readyState // 连接状态</p><pre><code class="hljs">谷歌调试协议</code></pre>]]></content>
    
    
    <categories>
      
      <category>逆向</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js逆向</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>安卓手机安装Openwrt</title>
    <link href="/2022/08/16/%E5%AE%89%E5%8D%93%E6%89%8B%E6%9C%BA%E5%AE%89%E8%A3%85Openwrt/"/>
    <url>/2022/08/16/%E5%AE%89%E5%8D%93%E6%89%8B%E6%9C%BA%E5%AE%89%E8%A3%85Openwrt/</url>
    
    <content type="html"><![CDATA[<h1 id="正戏开始"><a href="#正戏开始" class="headerlink" title="正戏开始"></a>正戏开始</h1><p>更新源</p><blockquote><p>apt-get update</p></blockquote><p>你可以查看qemu有什么包，可以根据自己的需求安装模拟其他架构</p><blockquote><p>apt search qemu</p></blockquote><p>安装qemu工具包</p><blockquote><p>apt install qemu-utils</p></blockquote><p>当然，我的是arm64位架构的，模拟arm的性能损耗会更低</p><p>安装模拟aarch64架构的</p><blockquote><p>apt install qemu-system-aarch64-headless</p></blockquote><p>首先进行arm架构的教程</p><p>这里先采用官方releases版固件，你们成功后可以换其他充满插件的固件、或者手动构建armvirt镜像，替换执行命令里固件名字就行了</p><p>下载arm固件</p><blockquote><p>wget <a href="https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/19.07.8/targets/armvirt/64/openwrt-19.07.8-armvirt-64-root.ext4.gz">https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/19.07.8/targets/armvirt/64/openwrt-19.07.8-armvirt-64-root.ext4.gz</a></p></blockquote><p>(额，可能提示The program wget is not installed.那就执行pkg install wget安装wget后，再下载)</p><blockquote><p>gzip -d openwrt-19.07.8-armvirt-64-root.ext4.gz</p></blockquote><p>与X86会有combined不同的是，还有指定kernel，所以还要内核镜像。你们使用自己编译的固件时，记得也把内核文件复制到手机</p><blockquote><p>wget <a href="https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/19.07.8/targets/armvirt/64/openwrt-19.07.8-armvirt-64-Image">https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/19.07.8/targets/armvirt/64/openwrt-19.07.8-armvirt-64-Image</a></p></blockquote><p>这个时候输入查看命令ls执行可以看到文件openwrt-19.07.8-armvirt-64-root.ext4 和 openwrt-19.07.8-armvirt-64-Image</p><p>开始运行openwrt</p><blockquote><p>qemu-system-aarch64 -M virt -m 1024m -kernel openwrt-19.07.8-armvirt-64-Image -append “root=fe00” -hda openwrt-19.07.8-armvirt-64-root.ext4 -no-reboot -nographic -cpu cortex-a53 -smp 3 -net nic -net user,id=wan,hostfwd=tcp::7080-:80,hostfwd=tcp::7022-:22</p></blockquote><p>命令说明：</p><p>​        -M 是模拟的机器，可以执行qemu-system-aarch64 -M help查看列表，可以看到有树莓派的，所以也可以直接用树莓派的固件</p><p>​        -m 是分配内存大小 我这里分配1024mb</p><p>​        -kernel是指定内核</p><p>​        -append cmdline 设置Linux内核命令行和启动参数</p><p>​             我这里”root=fe00“指定根的块设备是fe00，如果你没有指定这个，内核将列出可用的块设备并重新启动，之后你们自己的固件可以取消这个”root=fe00“看可用块设备列表，再修改填上。我之前在这徘徊了很久啊。</p><p>​        -hda是指定硬盘镜像</p><p>​        –no-reboot 就是字面意思，里面客户系统如果重启就会直接退出qemu，重启相当于关机退出qemu。可以不要这条，这样客户系统可以进行重启的操作</p><p>​        -nographic 关闭qemu的图形化界面输出。也可以去掉，然后加上–vnc :1  以vnc为图像模式输出到”显示器”，并占用vnc 1端口，vnc访问手机ip:5901显示进入图像界面。-nographic与–vnc不同的是执行运行后不会立即有回显。</p><p>​          -cpu cortex-a53 模拟cortex-a53类型的处理器，因为前面查询我的骁龙625是cortex-a53类型处理器，模拟这个性能损失较小。可以输入qemu-system-aarch64 -cpu help查看可模拟列表</p><p>​        -smp 核数，给cpu分配核数</p><p>​        -net nic 就是快速配置网卡。后面net user,id=wan,hostfwd=tcp::7080-:80,hostfwd=tcp::7022-:22配置网卡网络模式为用户模式（nat模式，使用主机网络nat联网），分配id标识为wan，hostfwd是端口重定向参数，可以加逗号多个使用，很清晰可以自己根据需要增加和删改，这里我把主机7080端口重定向到客户系统的80端口，把主机7022端口重定向到客户系统的22端口。这两个端口分别是web网页管理地址端口、ssh端口。还有具体设置网卡可以百度搜索qemu网络模式。</p><p>执行后耐心等待跑码，看下面图</p><p>出现第一个框就可以按回车输命令了，但是不急，等第二个</p><p>出现br-lan: port 1(eth0) entered forwarding state就是启动好了（改过下面以后，第二次运行是出现8021q: adding VLAN 0 to HW filter on device eth0）</p><p>因为第一个网卡默认是分配给lan的，所以我们要改一下，分给wan（这个镜像改过一次，下次再启动就不用改了）</p><p>输入</p><blockquote><p>vi /etc/config/network </p></blockquote><p>按键盘i就可以编辑进行增删了，把config interface ‘wan’ 那整部分改成以下这样</p><blockquote><p>config interface ‘wan’</p><p>​    option ifname ‘eth0’</p><p>​    option proto ‘dhcp’</p></blockquote><p>编辑好了，按键盘ESC，然后按住shift再按一下键盘上的；就可以输入wq回车后保存退出（就是按esc退出后，按出冒号，wq命令保存退出）</p><p>重启网络服务</p><blockquote><p>/etc/init.d/network restart</p></blockquote><p>输入ifconfig看看</p><p>eth0   Link encap:Ethernet HWaddr 52:54:00:12:34:56</p><p>​       inet addr:10.0.2.15</p><p>获得了一个nat地址</p><p>现在ping一下外网</p><blockquote><p>ping <a href="http://www.baidu.com/">www.baidu.com</a></p></blockquote><p>只要手机能联网，它就能联网！</p><p>因为我手机用的是4g数据，地方信号不好，延迟有点大哈别介意</p><p>开放wan的80端口</p><blockquote><p>iptables -I INPUT -p tcp –dport 80 -j ACCEPT</p></blockquote><p>前面执行命令的时候，我们已经弄好手机7080端口重定向客户机的80端口了，所以我们在浏览器访问手机ip加7080端口，就可以进入openwrt的管理页面啦！</p><p>连上openwrt的ssh，前面执行命令的时候，我们已经弄好手机7022端口重定向客户机的22端口了，只要在openwrt开放22端口，就可以手机ip加7022连上了</p><blockquote><p>iptables -I INPUT -p tcp –dport 80 -j ACCEPT</p></blockquote><p>你可以根据需要设置好重定向端口和开放端口，例子很明白了</p><blockquote><p>iptables -I INPUT -p tcp –dport 7080 -j ACCEPT</p></blockquote><p>浏览器访问手机ip:7080进行设置</p><p>本次用到的工具是termux 安卓7 (API 24) 及以上版本，旧版本系统使用本镜像可能导致程序错误。</p><p>替换国内清华源参考 <a href="https://mirrors.tuna.tsinghua.edu.cn/help/termux/">https://mirrors.tuna.tsinghua.edu.cn/help/termux/</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Openwrt</tag>
      
      <tag>Termux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>空气质量监控平台分析反爬虫分析</title>
    <link href="/2022/08/10/%E7%A9%BA%E6%B0%94%E8%B4%A8%E9%87%8F%E7%9B%91%E6%8E%A7%E5%B9%B3%E5%8F%B0%E5%88%86%E6%9E%90%E5%8F%8D%E7%88%AC%E8%99%AB%E5%88%86%E6%9E%90/"/>
    <url>/2022/08/10/%E7%A9%BA%E6%B0%94%E8%B4%A8%E9%87%8F%E7%9B%91%E6%8E%A7%E5%B9%B3%E5%8F%B0%E5%88%86%E6%9E%90%E5%8F%8D%E7%88%AC%E8%99%AB%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<h3 id="第一个反爬：禁止右键和快捷键-F12"><a href="#第一个反爬：禁止右键和快捷键-F12" class="headerlink" title="第一个反爬：禁止右键和快捷键 F12"></a>第一个反爬：禁止右键和快捷键 F12</h3><h4 id="解决措施"><a href="#解决措施" class="headerlink" title="解决措施"></a>解决措施</h4><p><img src="https://s2.loli.net/2022/08/09/XC89Qrs1WH3G5Sc.png" alt="image-20220809214407034"></p><h3 id="第二个反爬：debuggr"><a href="#第二个反爬：debuggr" class="headerlink" title="第二个反爬：debuggr"></a>第二个反爬：debuggr</h3><p><img src="https://s2.loli.net/2022/08/09/Y9ahkHWc1iPmXET.png" alt="image-20220809213856610"></p><h3 id="第三个反爬虫-反调试定时器"><a href="#第三个反爬虫-反调试定时器" class="headerlink" title="第三个反爬虫 反调试定时器"></a>第三个反爬虫 反调试定时器</h3><p><img src="https://s2.loli.net/2022/08/09/dlhMpmjcKzSkRqT.png" alt="image-20220809214717694"></p><p>清除定时任务 注意下面命令的执行时间要在catch 代码执行之前执行 不然加了定时器之后 调试会一直在打转</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">end=<span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;&#125;,<span class="hljs-number">10000</span>);<span class="hljs-keyword">for</span>(i=<span class="hljs-number">1</span>;i&lt;=end;i++)&#123;<span class="hljs-built_in">clearInterval</span>(i);&#125;<br></code></pre></td></tr></table></figure><h2 id="第四个反爬：窗口宽度检测和代码执行时间检测"><a href="#第四个反爬：窗口宽度检测和代码执行时间检测" class="headerlink" title="第四个反爬：窗口宽度检测和代码执行时间检测"></a>第四个反爬：窗口宽度检测和代码执行时间检测</h2><p>来到检测调试的地方我们来看核心代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs js">  <span class="hljs-keyword">var</span> debugflag = <span class="hljs-literal">false</span>;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-property">onkeydown</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> ((e.<span class="hljs-property">ctrlKey</span>) &amp;&amp; (e.<span class="hljs-property">keyCode</span> == <span class="hljs-number">83</span>)) &#123;<br>      <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;检测到非法调试，CTRL + S被管理员禁用&quot;</span>);<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>  &#125;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-property">onkeydown</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> e = <span class="hljs-variable language_">window</span>.<span class="hljs-property">event</span> || <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">if</span> (e.<span class="hljs-property">keyCode</span> == <span class="hljs-number">123</span>) &#123;<br>      <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;检测到非法调试，F12被管理员禁用&quot;</span>);<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>  &#125;<br>  <span class="hljs-variable language_">document</span>.<span class="hljs-property">oncontextmenu</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;检测到非法调试，右键被管理员禁用&#x27;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>  &#125;<br><br><span class="hljs-comment">// 这里是一个自执行函数  </span><br><span class="hljs-comment">// window.innerWidth - 返回Window的内容区域宽度，也就是viewport的宽度，不包括scrollbars,toolbars.</span><br><span class="hljs-comment">// window.outerWidth - 返回Window的外部宽度，包括scrollbars, toolbars等等。</span><br><span class="hljs-comment">// 大致就是页面页面宽度和宽度大于230时 并且函数的执行时间过长 就认为是反调试</span><br>  !<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> handler = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">outerWidth</span> - <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> &gt; <span class="hljs-number">230</span> ||<br>       <span class="hljs-variable language_">window</span>.<span class="hljs-property">outerHeight</span> - <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> &gt; <span class="hljs-number">230</span>) &#123;<br>        <span class="hljs-comment">// document.write((window.outerWidth - window.innerWidth) + &#x27;,&#x27; + (window.outerHeight - window.innerHeight));</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">&#x27;检测到非法调试, 请关闭调试终端后刷新本页面重试!&lt;br/&gt;&#x27;</span>);<br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">&quot;Welcome for People, Not Welcome for Machine!&lt;br/&gt;&quot;</span>);<br>        debugflag = <span class="hljs-literal">true</span>;<br>      &#125;<br>      <span class="hljs-keyword">const</span> before = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br>      (<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;&#125;<br>        [<span class="hljs-string">&quot;constructor&quot;</span>](<span class="hljs-string">&quot;debugger&quot;</span>)())<br>      <span class="hljs-keyword">const</span> after = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br>      <span class="hljs-keyword">const</span> cost = after.<span class="hljs-title function_">getTime</span>() - before.<span class="hljs-title function_">getTime</span>();<br>      <span class="hljs-keyword">if</span> (cost &gt; <span class="hljs-number">50</span>) &#123;<br>        debugflag = <span class="hljs-literal">true</span>;<br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">&#x27;检测到非法调试, 请关闭调试终端后刷新本页面重试!&lt;br/&gt;&#x27;</span>);<br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">&quot;Welcome for People, Not Welcome for Machine!&lt;br/&gt;&quot;</span>);<br>      &#125;<br><br>    &#125;, <span class="hljs-number">2000</span>)<br>  &#125;();<br></code></pre></td></tr></table></figure><p>加了一个 定时器 去执行函数的检测脚本，检测到了就不断输出指定字段。</p><p><img src="https://s2.loli.net/2022/08/09/zrgYJTM6whxRFec.png" alt="image-20220809220737364"></p><p>把页面恢复执行之后 页面上的不断打印<code>检测到非法调试, 请关闭调试终端后刷新本页面重试!</code> 和代码分析一致 可以得出结论真正的 检测就在这里 </p><p>首页中有这个关键字 但是不是我们想要的</p><p><img src="https://s2.loli.net/2022/08/09/EgO58bFDUlhdjGc.png" alt="image-20220809221321017"></p><p>无法替换文件来做到  </p><p>解决方式也很简单 选择把窗口分离出去 再刷新页面 即可 </p><p><img src="https://s2.loli.net/2022/08/09/Bb2ew9Xm84DMLAR.png" alt="image-20220809221452456"></p><h3 id="加密点分析"><a href="#加密点分析" class="headerlink" title="加密点分析"></a>加密点分析</h3><p>在页面元素上右键 该网页禁止了 空白页面右键 没有禁止在元素上右键  </p><p><img src="https://s2.loli.net/2022/08/09/F9Q4PeqX7xzoWgT.png" alt="image-20220809221910297"></p><p>定位到表格的上一个父元素 div.dataggrid-body  右键选择  停止于 &gt; 子树修改 </p><p><img src="https://s2.loli.net/2022/08/09/lYj1tfy8uh3BgQG.png" alt="image-20220809222036455"></p><p><img src="https://s2.loli.net/2022/08/09/GxbIE5avLcY1rDK.png" alt="image-20220809222750068"></p><p>随便点选一个城市让页面元素变动 触发表单修改</p><p><img src="https://s2.loli.net/2022/08/09/v2OYBQqdXeHIy4s.png" alt="image-20220809222222483"></p><p><img src="https://s2.loli.net/2022/08/09/hX1MlpfxP64YmZ8.png" alt="image-20220809225611498"></p><p>调用堆栈 </p><p><img src="https://s2.loli.net/2022/08/09/6Jkr4Qj2bKv3eU8.png" alt="image-20220809230041335"></p><p> 可以看到标准的ajax 请求</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">sCPnj6CA7NLes</span>(<span class="hljs-params">mYHdW1XRZ, oQW42PTe6E, cixSit3kG, pPsBAMS</span>) &#123;<br><br>    <span class="hljs-keyword">const</span> kTgE = <span class="hljs-title function_">hex_md5</span>(mYHdW1XRZ + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(oQW42PTe6E));<br><br>    <span class="hljs-keyword">const</span> dKHzs = <span class="hljs-title function_">g1doG4NK3KY4GK9i</span>(kTgE, pPsBAMS);<br>    <span class="hljs-keyword">if</span> (!dKHzs) &#123;<br>      <span class="hljs-keyword">var</span> pKmiMOA = <span class="hljs-title function_">pL5LAoYRS</span>(mYHdW1XRZ, oQW42PTe6E);<br>        $.<span class="hljs-title function_">ajax</span>(&#123;<br>            <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;../apinew/aqistudyapi.php&#x27;</span>,<br>            <span class="hljs-attr">data</span>: &#123; <span class="hljs-attr">h3Y52gFKE</span>: pKmiMOA &#125;,<br>            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>            <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">dKHzs</span>) &#123;<br>                dKHzs = <span class="hljs-title function_">deyKOtTW1SHYP</span>(dKHzs);<br>                o5yJnf = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(dKHzs);<br>                <span class="hljs-keyword">if</span> (o5yJnf.<span class="hljs-property">success</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (pPsBAMS &gt; <span class="hljs-number">0</span>) &#123;<br>                      o5yJnf.<span class="hljs-property">result</span>.<span class="hljs-property">time</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>(); <span class="hljs-comment">// 添加当前时间</span><br>                      localStorageUtil.<span class="hljs-title function_">save</span>(kTgE, o5yJnf.<span class="hljs-property">result</span>);<br>                    &#125;<br>                    <span class="hljs-title function_">cixSit3kG</span>(o5yJnf.<span class="hljs-property">result</span>);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(o5yJnf.<span class="hljs-property">errcode</span>, o5yJnf.<span class="hljs-property">errmsg</span>);<br>                &#125;<br>            &#125;<br>        &#125;);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-title function_">cixSit3kG</span>(dKHzs);<br>    &#125;<br></code></pre></td></tr></table></figure><p>deyKOtTW1SHYP 是解密函数 </p><p>跟到代码里去看</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// vm3834.js</span><br><span class="hljs-keyword">const</span> asksvAESlv6Y = <span class="hljs-string">&quot;a9tfUJutFN8sjZh1&quot;</span>;<br><span class="hljs-keyword">const</span> asiy2lKidURh = <span class="hljs-string">&quot;bgHf4XlTXywlQarV&quot;</span>;<br><span class="hljs-keyword">const</span> ackoBEs4yTKN = <span class="hljs-string">&quot;dO3WnWluQNHauldH&quot;</span>;<br><span class="hljs-keyword">const</span> aciOunjFiMyA = <span class="hljs-string">&quot;fOsbkMQ7qMMJ4xn5&quot;</span>;<br><span class="hljs-keyword">const</span> dskyrOQPMrLC = <span class="hljs-string">&quot;hRjA29JvTwJXnmZl&quot;</span>;<br><span class="hljs-keyword">const</span> dsi5ivV1Kf7l = <span class="hljs-string">&quot;xeQJT9nq4urlywGp&quot;</span>;<br><span class="hljs-keyword">const</span> dcktdnp37Lh5 = <span class="hljs-string">&quot;ocvRlZoHX7KnKYSx&quot;</span>;<br><span class="hljs-keyword">const</span> dciROqfwYVC9 = <span class="hljs-string">&quot;pl20yMKRdtrBM9D1&quot;</span>;<br><span class="hljs-keyword">const</span> aes_local_key = <span class="hljs-string">&#x27;emhlbnFpcGFsbWtleQ==&#x27;</span>;<br><span class="hljs-keyword">const</span> aes_local_iv = <span class="hljs-string">&#x27;emhlbnFpcGFsbWl2&#x27;</span>;<br><span class="hljs-keyword">var</span> <span class="hljs-title class_">BASE64</span> = &#123;<br>    <span class="hljs-attr">encrypt</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">text</span>) &#123;<br>        <span class="hljs-keyword">var</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Base64</span>();<br>        <span class="hljs-keyword">return</span> b.<span class="hljs-title function_">encode</span>(text)<br>    &#125;,<br>    <span class="hljs-attr">decrypt</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">text</span>) &#123;<br>        <span class="hljs-keyword">var</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Base64</span>();<br>        <span class="hljs-keyword">return</span> b.<span class="hljs-title function_">decode</span>(text)<br>    &#125;<br>&#125;;<br><span class="hljs-keyword">var</span> <span class="hljs-variable constant_">DES</span> = &#123;<br>    <span class="hljs-attr">encrypt</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">text, key, iv</span>) &#123;<br>        <span class="hljs-keyword">var</span> secretkey = (<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-title class_">MD5</span>(key).<span class="hljs-title function_">toString</span>()).<span class="hljs-title function_">substr</span>(<span class="hljs-number">0</span>, <span class="hljs-number">16</span>);<br>        <span class="hljs-keyword">var</span> secretiv = (<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-title class_">MD5</span>(iv).<span class="hljs-title function_">toString</span>()).<span class="hljs-title function_">substr</span>(<span class="hljs-number">24</span>, <span class="hljs-number">8</span>);<br>        secretkey = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>.<span class="hljs-title function_">parse</span>(secretkey);<br>        secretiv = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>.<span class="hljs-title function_">parse</span>(secretiv);<br>        <span class="hljs-keyword">var</span> result = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">DES</span>.<span class="hljs-title function_">encrypt</span>(text, secretkey, &#123;<br>            <span class="hljs-attr">iv</span>: secretiv,<br>            <span class="hljs-attr">mode</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">mode</span>.<span class="hljs-property">CBC</span>,<br>            <span class="hljs-attr">padding</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">pad</span>.<span class="hljs-property">Pkcs7</span><br>        &#125;);<br>        <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toString</span>()<br>    &#125;,<br>    <span class="hljs-attr">decrypt</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">text, key, iv</span>) &#123;<br>        <span class="hljs-keyword">var</span> secretkey = (<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-title class_">MD5</span>(key).<span class="hljs-title function_">toString</span>()).<span class="hljs-title function_">substr</span>(<span class="hljs-number">0</span>, <span class="hljs-number">16</span>);<br>        <span class="hljs-keyword">var</span> secretiv = (<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-title class_">MD5</span>(iv).<span class="hljs-title function_">toString</span>()).<span class="hljs-title function_">substr</span>(<span class="hljs-number">24</span>, <span class="hljs-number">8</span>);<br>        secretkey = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>.<span class="hljs-title function_">parse</span>(secretkey);<br>        secretiv = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>.<span class="hljs-title function_">parse</span>(secretiv);<br>        <span class="hljs-keyword">var</span> result = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">DES</span>.<span class="hljs-title function_">decrypt</span>(text, secretkey, &#123;<br>            <span class="hljs-attr">iv</span>: secretiv,<br>            <span class="hljs-attr">mode</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">mode</span>.<span class="hljs-property">CBC</span>,<br>            <span class="hljs-attr">padding</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">pad</span>.<span class="hljs-property">Pkcs7</span><br>        &#125;);<br>        <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toString</span>(<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>)<br>    &#125;<br>&#125;;<br><span class="hljs-keyword">var</span> <span class="hljs-variable constant_">AES</span> = &#123;<br>    <span class="hljs-attr">encrypt</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">text, key, iv</span>) &#123;<br>        <span class="hljs-keyword">var</span> secretkey = (<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-title class_">MD5</span>(key).<span class="hljs-title function_">toString</span>()).<span class="hljs-title function_">substr</span>(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>);<br>        <span class="hljs-keyword">var</span> secretiv = (<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-title class_">MD5</span>(iv).<span class="hljs-title function_">toString</span>()).<span class="hljs-title function_">substr</span>(<span class="hljs-number">0</span>, <span class="hljs-number">16</span>);<br>        secretkey = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>.<span class="hljs-title function_">parse</span>(secretkey);<br>        secretiv = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>.<span class="hljs-title function_">parse</span>(secretiv);<br>        <span class="hljs-keyword">var</span> result = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">AES</span>.<span class="hljs-title function_">encrypt</span>(text, secretkey, &#123;<br>            <span class="hljs-attr">iv</span>: secretiv,<br>            <span class="hljs-attr">mode</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">mode</span>.<span class="hljs-property">CBC</span>,<br>            <span class="hljs-attr">padding</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">pad</span>.<span class="hljs-property">Pkcs7</span><br>        &#125;);<br>        <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toString</span>()<br>    &#125;,<br>    <span class="hljs-attr">decrypt</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">text, key, iv</span>) &#123;<br>        <span class="hljs-keyword">var</span> secretkey = (<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-title class_">MD5</span>(key).<span class="hljs-title function_">toString</span>()).<span class="hljs-title function_">substr</span>(<span class="hljs-number">16</span>, <span class="hljs-number">16</span>);<br>        <span class="hljs-keyword">var</span> secretiv = (<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-title class_">MD5</span>(iv).<span class="hljs-title function_">toString</span>()).<span class="hljs-title function_">substr</span>(<span class="hljs-number">0</span>, <span class="hljs-number">16</span>);<br>        secretkey = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>.<span class="hljs-title function_">parse</span>(secretkey);<br>        secretiv = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>.<span class="hljs-title function_">parse</span>(secretiv);<br>        <span class="hljs-keyword">var</span> result = <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">AES</span>.<span class="hljs-title function_">decrypt</span>(text, secretkey, &#123;<br>            <span class="hljs-attr">iv</span>: secretiv,<br>            <span class="hljs-attr">mode</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">mode</span>.<span class="hljs-property">CBC</span>,<br>            <span class="hljs-attr">padding</span>: <span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">pad</span>.<span class="hljs-property">Pkcs7</span><br>        &#125;);<br>        <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toString</span>(<span class="hljs-title class_">CryptoJS</span>.<span class="hljs-property">enc</span>.<span class="hljs-property">Utf8</span>)<br>    &#125;<br>&#125;;<br><span class="hljs-keyword">var</span> localStorageUtil = &#123;<br>    <span class="hljs-attr">save</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">name, value</span>) &#123;<br>        <span class="hljs-keyword">var</span> text = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value);<br>        text = <span class="hljs-title class_">BASE64</span>.<span class="hljs-title function_">encrypt</span>(text);<br>        text = <span class="hljs-variable constant_">AES</span>.<span class="hljs-title function_">encrypt</span>(text, aes_local_key, aes_local_iv);<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(name, text)<br>        &#125; <span class="hljs-keyword">catch</span> (oException) &#123;<br>            <span class="hljs-keyword">if</span> (oException.<span class="hljs-property">name</span> === <span class="hljs-string">&#x27;QuotaExceededError&#x27;</span>) &#123;<br>                <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">clear</span>();<br>                <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(name, text)<br>            &#125;<br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">check</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(name)<br>    &#125;,<br>    <span class="hljs-attr">getValue</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) &#123;<br>        <span class="hljs-keyword">var</span> text = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(name);<br>        <span class="hljs-keyword">var</span> result = <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">if</span> (text) &#123;<br>            text = <span class="hljs-variable constant_">AES</span>.<span class="hljs-title function_">decrypt</span>(text, aes_local_key, aes_local_iv);<br>            text = <span class="hljs-title class_">BASE64</span>.<span class="hljs-title function_">decrypt</span>(text);<br>            result = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(text)<br>        &#125;<br>        <span class="hljs-keyword">return</span> result<br>    &#125;,<br>    <span class="hljs-attr">remove</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">name</span>) &#123;<br>        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(name)<br>    &#125;<br>&#125;;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">dBSZMW3M6n3</span>(<span class="hljs-params">pmK6Hbv</span>) &#123;<br>    pmK6Hbv = <span class="hljs-variable constant_">DES</span>.<span class="hljs-title function_">decrypt</span>(pmK6Hbv, dskyrOQPMrLC, dsi5ivV1Kf7l);<br>    <span class="hljs-keyword">return</span> pmK6Hbv<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">dG8KpaYpqH</span>(<span class="hljs-params">pmK6Hbv</span>) &#123;<br>    pmK6Hbv = <span class="hljs-variable constant_">AES</span>.<span class="hljs-title function_">decrypt</span>(pmK6Hbv, asksvAESlv6Y, asiy2lKidURh);<br>    <span class="hljs-keyword">return</span> pmK6Hbv<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">gXUbeHrdoLCeYe0p</span>(<span class="hljs-params">key, period</span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> period === <span class="hljs-string">&#x27;undefined&#x27;</span>) &#123;<br>        period = <span class="hljs-number">0</span><br>    &#125;<br>    <span class="hljs-keyword">var</span> d = <span class="hljs-variable constant_">DES</span>.<span class="hljs-title function_">encrypt</span>(key);<br>    d = <span class="hljs-title class_">BASE64</span>.<span class="hljs-title function_">encrypt</span>(key);<br>    <span class="hljs-keyword">var</span> data = localStorageUtil.<span class="hljs-title function_">getValue</span>(key);<br>    <span class="hljs-keyword">if</span> (data) &#123;<br>        <span class="hljs-keyword">const</span> time = data.<span class="hljs-property">time</span>;<br>        <span class="hljs-keyword">const</span> current = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getHours</span>() &gt;= <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getHours</span>() &lt; <span class="hljs-number">5</span> &amp;&amp; period &gt; <span class="hljs-number">1</span>) &#123;<br>            period = <span class="hljs-number">1</span><br>        &#125;<br>        <span class="hljs-keyword">if</span> (current - (period * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>) &gt; time) &#123;<br>            data = <span class="hljs-literal">null</span><br>        &#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getHours</span>() &gt;= <span class="hljs-number">5</span> &amp;&amp; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(time).<span class="hljs-title function_">getDate</span>() !== <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getDate</span>() &amp;&amp; period === <span class="hljs-number">24</span>) &#123;<br>            data = <span class="hljs-literal">null</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> data<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">ObjectSort</span>(<span class="hljs-params">obj</span>) &#123;<br>    <span class="hljs-keyword">var</span> newObject = &#123;&#125;;<br>    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj).<span class="hljs-title function_">sort</span>().<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) &#123;<br>        newObject[key] = obj[key]<br>    &#125;);<br>    <span class="hljs-keyword">return</span> newObject<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">dvsQWNF2EO4XbKrd</span>(<span class="hljs-params">data</span>) &#123;<br>    data = <span class="hljs-variable constant_">AES</span>.<span class="hljs-title function_">decrypt</span>(data, asksvAESlv6Y, asiy2lKidURh);<br>    data = <span class="hljs-variable constant_">DES</span>.<span class="hljs-title function_">decrypt</span>(data, dskyrOQPMrLC, dsi5ivV1Kf7l);<br>    data = <span class="hljs-title class_">BASE64</span>.<span class="hljs-title function_">decrypt</span>(data);<br>    <span class="hljs-keyword">return</span> data<br>&#125;<br><span class="hljs-keyword">var</span> pSeoLCOw4K = (<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">ObjectSort</span>(<span class="hljs-params">obj</span>) &#123;<br>        <span class="hljs-keyword">var</span> newObject = &#123;&#125;;<br>        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj).<span class="hljs-title function_">sort</span>().<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">key</span>) &#123;<br>            newObject[key] = obj[key]<br>        &#125;);<br>        <span class="hljs-keyword">return</span> newObject<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">method, obj</span>) &#123;<br>        <span class="hljs-keyword">var</span> appId = <span class="hljs-string">&#x27;e75f0f57c0ec8c9a0f7b1312302ef91f&#x27;</span>;<br>        <span class="hljs-keyword">var</span> clienttype = <span class="hljs-string">&#x27;WEB&#x27;</span>;<br>        <span class="hljs-keyword">var</span> timestamp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();<br>        <span class="hljs-keyword">var</span> param = &#123;<br>            <span class="hljs-attr">appId</span>: appId,<br>            <span class="hljs-attr">method</span>: method,<br>            <span class="hljs-attr">timestamp</span>: timestamp,<br>            <span class="hljs-attr">clienttype</span>: clienttype,<br>            <span class="hljs-attr">object</span>: obj,<br>            <span class="hljs-attr">secret</span>: <span class="hljs-title function_">hex_md5</span>(appId + method + timestamp + clienttype + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title class_">ObjectSort</span>(obj)))<br>        &#125;;<br>        param = <span class="hljs-title class_">BASE64</span>.<span class="hljs-title function_">encrypt</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(param));<br>        param = <span class="hljs-variable constant_">DES</span>.<span class="hljs-title function_">encrypt</span>(param, dcktdnp37Lh5, dciROqfwYVC9);<br>        <span class="hljs-keyword">return</span> param<br>    &#125;<br>&#125;<br>)();<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params">mWZUgc23O, orY2UnQfh7, coGmO8LCQ, pz0mxss</span>) &#123; <br>  <span class="hljs-comment">// mWZUgc23O=  &quot;GETDATA&quot; orY2UnQfh7=&#123;city: &#x27;上海&#x27;&#125; coGmO8LCQ 回调 pz0mxss =0.5 变量名每次都会变化</span><br>    <span class="hljs-keyword">const</span> k6Bx = <span class="hljs-title function_">hex_md5</span>(mWZUgc23O + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(orY2UnQfh7)); <span class="hljs-comment">// 加密值 变量是地点</span><br>    <span class="hljs-keyword">const</span> dSQsW = <span class="hljs-title function_">gXUbeHrdoLCeYe0p</span>(k6Bx, pz0mxss); <span class="hljs-comment">// 判断缓存有没有该城市的数据</span><br>    <span class="hljs-keyword">if</span> (!dSQsW) &#123; <span class="hljs-comment">// 如果没有再发请求</span><br>        <span class="hljs-keyword">var</span> pmK6Hbv = <span class="hljs-title function_">pSeoLCOw4K</span>(mWZUgc23O, orY2UnQfh7); <span class="hljs-comment">// 对城市名和方法进行加密传值 发送ajax</span><br>        $.<span class="hljs-title function_">ajax</span>(&#123;<br>            <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;../apinew/aqistudyapi.php&#x27;</span>,<br>            <span class="hljs-attr">data</span>: &#123;<br>                <span class="hljs-attr">hu8slNEvY</span>: pmK6Hbv<br>            &#125;,<br>            <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>            <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">dSQsW</span>) &#123;<br>                dSQsW = <span class="hljs-title function_">dvsQWNF2EO4XbKrd</span>(dSQsW);<br>                onMCfI = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(dSQsW);<br>                <span class="hljs-keyword">if</span> (onMCfI.<span class="hljs-property">success</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (pz0mxss &gt; <span class="hljs-number">0</span>) &#123;<br>                        onMCfI.<span class="hljs-property">result</span>.<span class="hljs-property">time</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();<br>                        localStorageUtil.<span class="hljs-title function_">save</span>(k6Bx, onMCfI.<span class="hljs-property">result</span>)<br>                    &#125;<br>                    <span class="hljs-title function_">coGmO8LCQ</span>(onMCfI.<span class="hljs-property">result</span>)<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(onMCfI.<span class="hljs-property">errcode</span>, onMCfI.<span class="hljs-property">errmsg</span>)<br>                &#125;<br>            &#125;<br>        &#125;)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-title function_">coGmO8LCQ</span>(dSQsW)<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>爬虫</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JS 逆向</tag>
      
      <tag>JS反调试</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Tiktok</title>
    <link href="/2022/08/02/Tiktok/"/>
    <url>/2022/08/02/Tiktok/</url>
    
    <content type="html"><![CDATA[<p>简介</p><p>抖音tiktok 有SSL pinning ,不是常见的SSL pinning通过Justtrustme 过不去这个，</p><h1 id="设置代理"><a href="#设置代理" class="headerlink" title="设置代理"></a>设置代理</h1><h3 id="查看电脑IP-设置上游代理"><a href="#查看电脑IP-设置上游代理" class="headerlink" title="查看电脑IP 设置上游代理"></a>查看电脑IP 设置上游代理</h3><p><img src="https://s2.loli.net/2022/08/02/bt1CnIGJQRYu9My.png" alt="image-20220802160843594"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><br>mitmweb --mode upstream:http://127.0.0.1:10809 -p 9998  # upstream 暂时不支持socks5 代理<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell">curl -x 127.0.0.1:10809 ipinfo.io<br>&#123;<br>  &quot;ip&quot;: &quot;54.193.10.54&quot;,<br>  &quot;hostname&quot;: &quot;ec2-54-193-10-54.us-west-1.compute.amazonaws.com&quot;,<br>  &quot;city&quot;: &quot;San Jose&quot;,<br>  &quot;region&quot;: &quot;California&quot;,<br>  &quot;country&quot;: &quot;US&quot;,<br>  &quot;loc&quot;: &quot;37.3394,-121.8950&quot;,<br>  &quot;org&quot;: &quot;AS16509 Amazon.com, Inc.&quot;,<br>  &quot;postal&quot;: &quot;95103&quot;,<br>  &quot;timezone&quot;: &quot;America/Los_Angeles&quot;,<br>  &quot;readme&quot;: &quot;https://ipinfo.io/missingauth&quot;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/08/02/BTn2JMaQNlZx9vk.png" alt="image-20220802161711182"></p><h3 id="连接手机"><a href="#连接手机" class="headerlink" title="连接手机"></a>连接手机</h3><p>苹果没有带拓展坞这里使用的是wifiadb, 没有装的可以百度下载一个</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">adb</span> connect <span class="hljs-number">192.168.0.80:5555</span><br></code></pre></td></tr></table></figure><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-title">.fs -D -l 0.0.0.0:8080</span><br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">frida</span>-ps -H <span class="hljs-number">192.168.0.80:8080</span><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/08/02/3MhLcJrjaxdz8OQ.png" alt="image-20220802162203464"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">hookso_ssl</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">perform</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-keyword">var</span> class_ = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&quot;org.chromium.CronetClient&quot;</span>);<br>        <span class="hljs-comment">// console.log(class_);</span><br>        class_.<span class="hljs-property">tryCreateCronetEngine</span>.<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">a,b,c,d,e,f,g,h</span>)&#123;<br>            <span class="hljs-comment">// console.log(a,b,c,d,e,f,g,h);</span><br>            <span class="hljs-comment">// var result = this.tryCreateCronetEngine(a,b,c,d,e,f,g,h);</span><br>            <span class="hljs-comment">// console.log(&quot;result==&gt;&quot;,result);</span><br>            <span class="hljs-keyword">return</span> ;<br>        &#125;<br> <br>    &#125;)<br>&#125;<br> <br><span class="hljs-title function_">setImmediate</span>(hookso_ssl)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>手机抓包</tag>
      
      <tag>tiktok</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SekiroJSrpc</title>
    <link href="/2022/07/18/SekiroJSrpc/"/>
    <url>/2022/07/18/SekiroJSrpc/</url>
    
    <content type="html"><![CDATA[<p>sekiro assert </p><p><a href="https://sekiro.virjar.com/sekiro-doc/assets/sekiro_web_client.js">https://sekiro.virjar.com/sekiro-doc/assets/sekiro_web_client.js</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/*</span><br><span class="hljs-comment">  Copyright (C) 2020 virjar &lt;virjar@virjar.com&gt; for https://github.com/virjar/sekiro</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">  Redistribution and use in source and binary forms, with or without</span><br><span class="hljs-comment">  modification, are permitted provided that the following conditions are met:</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    * Redistributions of source code must retain the above copyright</span><br><span class="hljs-comment">      notice, this list of conditions and the following disclaimer.</span><br><span class="hljs-comment">    * Redistributions in binary form must reproduce the above copyright</span><br><span class="hljs-comment">      notice, this list of conditions and the following disclaimer in the</span><br><span class="hljs-comment">      documentation and/or other materials provided with the distribution.</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span><br><span class="hljs-comment">  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span><br><span class="hljs-comment">  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span><br><span class="hljs-comment">  ARE DISCLAIMED. IN NO EVENT SHALL &lt;COPYRIGHT HOLDER&gt; BE LIABLE FOR ANY</span><br><span class="hljs-comment">  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span><br><span class="hljs-comment">  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span><br><span class="hljs-comment">  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</span><br><span class="hljs-comment">  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT</span><br><span class="hljs-comment">  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF</span><br><span class="hljs-comment">  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span><br><span class="hljs-comment">*/</span><br><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">SekiroClient</span>(<span class="hljs-params">wsURL</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wsURL</span> = wsURL;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span> = &#123;&#125;;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span> = &#123;&#125;;<br>    <span class="hljs-comment">// check</span><br>    <span class="hljs-keyword">if</span> (!wsURL) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;wsURL can not be empty!!&#x27;</span>)<br>    &#125;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webSocketFactory</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolveWebSocketFactory</span>();<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">connect</span>()<br>&#125;<br><br><span class="hljs-title class_">SekiroClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">resolveWebSocketFactory</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>        <span class="hljs-keyword">var</span> theWebSocket = <span class="hljs-variable language_">window</span>.<span class="hljs-property">WebSocket</span> ? <span class="hljs-variable language_">window</span>.<span class="hljs-property">WebSocket</span> : <span class="hljs-variable language_">window</span>.<span class="hljs-property">MozWebSocket</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">wsURL</span>) &#123;<br><br>            <span class="hljs-keyword">function</span> <span class="hljs-title function_">WindowWebSocketWrapper</span>(<span class="hljs-params">wsURL</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">mSocket</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">theWebSocket</span>(wsURL);<br>            &#125;<br><br>            <span class="hljs-title class_">WindowWebSocketWrapper</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">close</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">mSocket</span>.<span class="hljs-title function_">close</span>();<br>            &#125;;<br><br>            <span class="hljs-title class_">WindowWebSocketWrapper</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">onMessageFunction</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">mSocket</span>.<span class="hljs-property">onmessage</span> = onMessageFunction;<br>            &#125;;<br><br>            <span class="hljs-title class_">WindowWebSocketWrapper</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">onopen</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">onOpenFunction</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">mSocket</span>.<span class="hljs-property">onopen</span> = onOpenFunction;<br>            &#125;;<br>            <span class="hljs-title class_">WindowWebSocketWrapper</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">onclose</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">onCloseFunction</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">mSocket</span>.<span class="hljs-property">onclose</span> = onCloseFunction;<br>            &#125;;<br><br>            <span class="hljs-title class_">WindowWebSocketWrapper</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">send</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">message</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">mSocket</span>.<span class="hljs-title function_">send</span>(message);<br>            &#125;;<br><br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowWebSocketWrapper</span>(wsURL);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> weex === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>        <span class="hljs-comment">// this is weex env : https://weex.apache.org/zh/docs/modules/websockets.html</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;test webSocket for weex&quot;</span>);<br>            <span class="hljs-keyword">var</span> ws = weex.requireModule(<span class="hljs-string">&#x27;webSocket&#x27;</span>);<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;find webSocket for weex:&quot;</span> + ws);<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">wsURL</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    ws.<span class="hljs-title function_">close</span>();<br>                &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>                &#125;<br>                ws.<span class="hljs-title class_">WebSocket</span>(wsURL, <span class="hljs-string">&#x27;&#x27;</span>);<br>                <span class="hljs-keyword">return</span> ws;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e);<br>            <span class="hljs-comment">//ignore</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//TODO support ReactNative</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">WebSocket</span> === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">wsURL</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">theWebSocket</span>(wsURL);<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// weex 鍜� PC鐜鐨剋ebsocket API涓嶅畬鍏ㄤ竴鑷达紝鎵€浠ュ仛浜嗘娊璞″吋瀹�</span><br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;the js environment do not support websocket&quot;</span>);<br>&#125;;<br><br><span class="hljs-title class_">SekiroClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">connect</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;sekiro: begin of connect to wsURL: &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">wsURL</span>);<br>    <span class="hljs-keyword">var</span> _this = <span class="hljs-variable language_">this</span>;<br>    <span class="hljs-comment">// 涓峜heck close锛岃</span><br>    <span class="hljs-comment">// if (this.socket &amp;&amp; this.socket.readyState === 1) &#123;</span><br>    <span class="hljs-comment">//     this.socket.close();</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">webSocketFactory</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">wsURL</span>);<br>    &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;sekiro: create connection failed,reconnect after 2s&quot;</span>);<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            _this.<span class="hljs-title function_">connect</span>()<br>        &#125;, <span class="hljs-number">2000</span>)<br>    &#125;<br><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">onmessage</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br>        _this.<span class="hljs-title function_">handleSekiroRequest</span>(event.<span class="hljs-property">data</span>)<br>    &#125;);<br><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">onopen</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;sekiro: open a sekiro client connection&#x27;</span>)<br>    &#125;);<br><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">onclose</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;sekiro: disconnected ,reconnection after 2s&#x27;</span>);<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            _this.<span class="hljs-title function_">connect</span>()<br>        &#125;, <span class="hljs-number">2000</span>)<br>    &#125;);<br>&#125;;<br><br><span class="hljs-title class_">SekiroClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">handleSekiroRequest</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">requestJson</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;receive sekiro request: &quot;</span> + requestJson);<br>    <span class="hljs-keyword">var</span> request = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(requestJson);<br>    <span class="hljs-keyword">var</span> seq = request[<span class="hljs-string">&#x27;__sekiro_seq__&#x27;</span>];<br><br>    <span class="hljs-keyword">if</span> (!request[<span class="hljs-string">&#x27;action&#x27;</span>]) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendFailed</span>(seq, <span class="hljs-string">&#x27;need request param &#123;action&#125;&#x27;</span>);<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <span class="hljs-keyword">var</span> action = request[<span class="hljs-string">&#x27;action&#x27;</span>];<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>[action]) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendFailed</span>(seq, <span class="hljs-string">&#x27;no action handler: &#x27;</span> + action + <span class="hljs-string">&#x27; defined&#x27;</span>);<br>        <span class="hljs-keyword">return</span><br>    &#125;<br><br>    <span class="hljs-keyword">var</span> theHandler = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>[action];<br>    <span class="hljs-keyword">var</span> _this = <span class="hljs-variable language_">this</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-title function_">theHandler</span>(request, <span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                _this.<span class="hljs-title function_">sendSuccess</span>(seq, response)<br>            &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>                _this.<span class="hljs-title function_">sendFailed</span>(seq, <span class="hljs-string">&quot;e:&quot;</span> + e);<br>            &#125;<br>        &#125;, <span class="hljs-keyword">function</span> (<span class="hljs-params">errorMessage</span>) &#123;<br>            _this.<span class="hljs-title function_">sendFailed</span>(seq, errorMessage)<br>        &#125;)<br>    &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;error: &quot;</span> + e);<br>        _this.<span class="hljs-title function_">sendFailed</span>(seq, <span class="hljs-string">&quot;:&quot;</span> + e);<br>    &#125;<br>&#125;;<br><br><span class="hljs-title class_">SekiroClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sendSuccess</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">seq, response</span>) &#123;<br>    <span class="hljs-keyword">var</span> responseJson;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> response == <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            responseJson = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(response);<br>        &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>            responseJson = &#123;&#125;;<br>            responseJson[<span class="hljs-string">&#x27;data&#x27;</span>] = response;<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> response == <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>        responseJson = response;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        responseJson = &#123;&#125;;<br>        responseJson[<span class="hljs-string">&#x27;data&#x27;</span>] = response;<br>    &#125;<br><br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(responseJson)) &#123;<br>        responseJson = &#123;<br>            <span class="hljs-attr">data</span>: responseJson,<br>            <span class="hljs-attr">code</span>: <span class="hljs-number">0</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (responseJson[<span class="hljs-string">&#x27;code&#x27;</span>]) &#123;<br>        responseJson[<span class="hljs-string">&#x27;code&#x27;</span>] = <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (responseJson[<span class="hljs-string">&#x27;status&#x27;</span>]) &#123;<br>        responseJson[<span class="hljs-string">&#x27;status&#x27;</span>] = <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        responseJson[<span class="hljs-string">&#x27;status&#x27;</span>] = <span class="hljs-number">0</span>;<br>    &#125;<br>    responseJson[<span class="hljs-string">&#x27;__sekiro_seq__&#x27;</span>] = seq;<br>    <span class="hljs-keyword">var</span> responseText = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(responseJson);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;response :&quot;</span> + responseText);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">send</span>(responseText);<br>&#125;;<br><br><span class="hljs-title class_">SekiroClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sendFailed</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">seq, errorMessage</span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> errorMessage != <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>        errorMessage = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(errorMessage);<br>    &#125;<br>    <span class="hljs-keyword">var</span> responseJson = &#123;&#125;;<br>    responseJson[<span class="hljs-string">&#x27;message&#x27;</span>] = errorMessage;<br>    responseJson[<span class="hljs-string">&#x27;status&#x27;</span>] = -<span class="hljs-number">1</span>;<br>    responseJson[<span class="hljs-string">&#x27;__sekiro_seq__&#x27;</span>] = seq;<br>    <span class="hljs-keyword">var</span> responseText = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(responseJson);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;sekiro: response :&quot;</span> + responseText);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">send</span>(responseText)<br>&#125;;<br><br><span class="hljs-title class_">SekiroClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">registerAction</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">action, handler</span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> action !== <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;an action must be string&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> handler !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;a handler must be function&quot;</span>);<br>    &#125;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;sekiro: register action: &quot;</span> + action);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>[action] = handler;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;<br>&#125;;<br><br></code></pre></td></tr></table></figure><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs arcade"><span class="hljs-keyword">function</span> <span class="hljs-title function_">guid</span>(<span class="hljs-params"></span>) &#123;<br>           <span class="hljs-keyword">function</span> <span class="hljs-title function_">S4</span>(<span class="hljs-params"></span>) &#123;<br>               <span class="hljs-keyword">return</span> (((<span class="hljs-number">1</span> + Math.<span class="hljs-built_in">random</span>()) * <span class="hljs-number">0x10000</span>) | <span class="hljs-number">0</span>).toString(<span class="hljs-number">16</span>).substring(<span class="hljs-number">1</span>);<br>           &#125;<br><br>           <span class="hljs-keyword">return</span> (S4() + S4() + <span class="hljs-string">&quot;-&quot;</span> + S4() + <span class="hljs-string">&quot;-&quot;</span> + S4() + <span class="hljs-string">&quot;-&quot;</span> + S4() + <span class="hljs-string">&quot;-&quot;</span> + S4() + S4() + S4());<br>       &#125;<br><br>       <span class="hljs-keyword">var</span> client = <span class="hljs-keyword">new</span> SekiroClient(<span class="hljs-string">&quot;wss://sekiro.virjar.com/business/register?group=ws-group-2&amp;clientId=&quot;</span> + <span class="hljs-built_in">guid</span>());<br><br>       client.registerAction(<span class="hljs-string">&quot;clientTime&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">request, resolve, reject</span>) &#123;<br>           resolve(<span class="hljs-string">&quot;SekiroTest：&quot;</span> + <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>());<br>       &#125;);<br><br>       client.registerAction(<span class="hljs-string">&quot;executeJs&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">request, resolve, reject</span>) &#123;<br>           <span class="hljs-keyword">var</span> code = request[<span class="hljs-string">&#x27;code&#x27;</span>];<br>           <span class="hljs-keyword">if</span> (!code) &#123;<br>               reject(<span class="hljs-string">&quot;need param:&#123;code&#125;&quot;</span>);<br>               <span class="hljs-keyword">return</span>;<br>           &#125;<br><br>           code = <span class="hljs-string">&quot;return &quot;</span> + code;<br><br>           <span class="hljs-built_in">console</span>.<span class="hljs-built_in">log</span>(<span class="hljs-string">&quot;executeJs: &quot;</span> + code);<br><br>           try &#123;<br>               <span class="hljs-keyword">var</span> result = <span class="hljs-keyword">new</span> <span class="hljs-keyword">Function</span>(<span class="hljs-params">code</span>)(<span class="hljs-params"></span>);<br>               <span class="hljs-title function_">resolve</span>(<span class="hljs-params">result</span>);<br>           &#125; <span class="hljs-title function_">catch</span> (<span class="hljs-params">e</span>) &#123;<br>               reject(<span class="hljs-string">&quot;error: &quot;</span> + e);<br>           &#125;<br><br>       &#125;);<br></code></pre></td></tr></table></figure><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">var client = <span class="hljs-keyword">new</span> <span class="hljs-constructor">SekiroClient(<span class="hljs-string">&quot;ws://127.0.0.1:5620/business-demo/register?group=qq&amp;clientId=123456&quot;</span>)</span>;<br><br><br><br>        client.register<span class="hljs-constructor">Action(<span class="hljs-string">&quot;getSign&quot;</span>, <span class="hljs-params">function</span> (<span class="hljs-params">request</span>, <span class="hljs-params">resolve</span>, <span class="hljs-params">reject</span>)</span> &#123;<br>            <span class="hljs-keyword">let</span> code = request<span class="hljs-literal">[&#x27;<span class="hljs-identifier">code</span>&#x27;]</span>;<br>            <span class="hljs-keyword">if</span> (!code) &#123;<br>                reject(<span class="hljs-string">&quot;need param:&#123;code&#125;&quot;</span>);<br>                return;<br>            &#125;<br><br><br>            <span class="hljs-keyword">try</span> &#123;<br>                resolve(get<span class="hljs-constructor">Sign(<span class="hljs-params">code</span>)</span>);<br>            &#125; catch (e) &#123;<br>                reject(<span class="hljs-string">&quot;error: &quot;</span> + e);<br>            &#125;<br><br>        &#125;<br></code></pre></td></tr></table></figure><p>sekiro 文档</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">SekiroClient</span>(<span class="hljs-params">wsURL</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wsURL</span> = wsURL;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span> = &#123;&#125;;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span> = &#123;&#125;;<br>    <span class="hljs-comment">// check</span><br>    <span class="hljs-keyword">if</span> (!wsURL) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;wsURL can not be empty!!&#x27;</span>)<br>    &#125;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">webSocketFactory</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resolveWebSocketFactory</span>();<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">connect</span>()<br>&#125;<br><br><span class="hljs-title class_">SekiroClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">resolveWebSocketFactory</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>        <span class="hljs-keyword">var</span> theWebSocket = <span class="hljs-variable language_">window</span>.<span class="hljs-property">WebSocket</span> ? <span class="hljs-variable language_">window</span>.<span class="hljs-property">WebSocket</span> : <span class="hljs-variable language_">window</span>.<span class="hljs-property">MozWebSocket</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">wsURL</span>) &#123;<br><br>            <span class="hljs-keyword">function</span> <span class="hljs-title function_">WindowWebSocketWrapper</span>(<span class="hljs-params">wsURL</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">mSocket</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">theWebSocket</span>(wsURL);<br>            &#125;<br><br>            <span class="hljs-title class_">WindowWebSocketWrapper</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">close</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">mSocket</span>.<span class="hljs-title function_">close</span>();<br>            &#125;;<br><br>            <span class="hljs-title class_">WindowWebSocketWrapper</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">onMessageFunction</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">mSocket</span>.<span class="hljs-property">onmessage</span> = onMessageFunction;<br>            &#125;;<br><br>            <span class="hljs-title class_">WindowWebSocketWrapper</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">onopen</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">onOpenFunction</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">mSocket</span>.<span class="hljs-property">onopen</span> = onOpenFunction;<br>            &#125;;<br>            <span class="hljs-title class_">WindowWebSocketWrapper</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">onclose</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">onCloseFunction</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">mSocket</span>.<span class="hljs-property">onclose</span> = onCloseFunction;<br>            &#125;;<br><br>            <span class="hljs-title class_">WindowWebSocketWrapper</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">send</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">message</span>) &#123;<br>                <span class="hljs-variable language_">this</span>.<span class="hljs-property">mSocket</span>.<span class="hljs-title function_">send</span>(message);<br>            &#125;;<br><br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowWebSocketWrapper</span>(wsURL);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> weex === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>        <span class="hljs-comment">// this is weex env : https://weex.apache.org/zh/docs/modules/websockets.html</span><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;test webSocket for weex&quot;</span>);<br>            <span class="hljs-keyword">var</span> ws = weex.requireModule(<span class="hljs-string">&#x27;webSocket&#x27;</span>);<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;find webSocket for weex:&quot;</span> + ws);<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">wsURL</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    ws.<span class="hljs-title function_">close</span>();<br>                &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>                &#125;<br>                ws.<span class="hljs-title class_">WebSocket</span>(wsURL, <span class="hljs-string">&#x27;&#x27;</span>);<br>                <span class="hljs-keyword">return</span> ws;<br>            &#125;<br>        &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e);<br>            <span class="hljs-comment">//ignore</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//TODO support ReactNative</span><br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">WebSocket</span> === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">wsURL</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">theWebSocket</span>(wsURL);<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// weex 鍜� PC鐜鐨剋ebsocket API涓嶅畬鍏ㄤ竴鑷达紝鎵€浠ュ仛浜嗘娊璞″吋瀹�</span><br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;the js environment do not support websocket&quot;</span>);<br>&#125;;<br><br><span class="hljs-title class_">SekiroClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">connect</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;sekiro: begin of connect to wsURL: &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">wsURL</span>);<br>    <span class="hljs-keyword">var</span> _this = <span class="hljs-variable language_">this</span>;<br>    <span class="hljs-comment">// 涓峜heck close锛岃</span><br>    <span class="hljs-comment">// if (this.socket &amp;&amp; this.socket.readyState === 1) &#123;</span><br>    <span class="hljs-comment">//     this.socket.close();</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">webSocketFactory</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">wsURL</span>);<br>    &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;sekiro: create connection failed,reconnect after 2s&quot;</span>);<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            _this.<span class="hljs-title function_">connect</span>()<br>        &#125;, <span class="hljs-number">2000</span>)<br>    &#125;<br><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">onmessage</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br>        _this.<span class="hljs-title function_">handleSekiroRequest</span>(event.<span class="hljs-property">data</span>)<br>    &#125;);<br><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">onopen</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;sekiro: open a sekiro client connection&#x27;</span>)<br>    &#125;);<br><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">onclose</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;sekiro: disconnected ,reconnection after 2s&#x27;</span>);<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            _this.<span class="hljs-title function_">connect</span>()<br>        &#125;, <span class="hljs-number">2000</span>)<br>    &#125;);<br>&#125;;<br><br><span class="hljs-title class_">SekiroClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">handleSekiroRequest</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">requestJson</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;receive sekiro request: &quot;</span> + requestJson);<br>    <span class="hljs-keyword">var</span> request = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(requestJson);<br>    <span class="hljs-keyword">var</span> seq = request[<span class="hljs-string">&#x27;__sekiro_seq__&#x27;</span>];<br><br>    <span class="hljs-keyword">if</span> (!request[<span class="hljs-string">&#x27;action&#x27;</span>]) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendFailed</span>(seq, <span class="hljs-string">&#x27;need request param &#123;action&#125;&#x27;</span>);<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <span class="hljs-keyword">var</span> action = request[<span class="hljs-string">&#x27;action&#x27;</span>];<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>[action]) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendFailed</span>(seq, <span class="hljs-string">&#x27;no action handler: &#x27;</span> + action + <span class="hljs-string">&#x27; defined&#x27;</span>);<br>        <span class="hljs-keyword">return</span><br>    &#125;<br><br>    <span class="hljs-keyword">var</span> theHandler = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>[action];<br>    <span class="hljs-keyword">var</span> _this = <span class="hljs-variable language_">this</span>;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-title function_">theHandler</span>(request, <span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                _this.<span class="hljs-title function_">sendSuccess</span>(seq, response)<br>            &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>                _this.<span class="hljs-title function_">sendFailed</span>(seq, <span class="hljs-string">&quot;e:&quot;</span> + e);<br>            &#125;<br>        &#125;, <span class="hljs-keyword">function</span> (<span class="hljs-params">errorMessage</span>) &#123;<br>            _this.<span class="hljs-title function_">sendFailed</span>(seq, errorMessage)<br>        &#125;)<br>    &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;error: &quot;</span> + e);<br>        _this.<span class="hljs-title function_">sendFailed</span>(seq, <span class="hljs-string">&quot;:&quot;</span> + e);<br>    &#125;<br>&#125;;<br><br><span class="hljs-title class_">SekiroClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sendSuccess</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">seq, response</span>) &#123;<br>    <span class="hljs-keyword">var</span> responseJson;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> response == <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            responseJson = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(response);<br>        &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>            responseJson = &#123;&#125;;<br>            responseJson[<span class="hljs-string">&#x27;data&#x27;</span>] = response;<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> response == <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>        responseJson = response;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        responseJson = &#123;&#125;;<br>        responseJson[<span class="hljs-string">&#x27;data&#x27;</span>] = response;<br>    &#125;<br><br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(responseJson)) &#123;<br>        responseJson = &#123;<br>            <span class="hljs-attr">data</span>: responseJson,<br>            <span class="hljs-attr">code</span>: <span class="hljs-number">0</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (responseJson[<span class="hljs-string">&#x27;code&#x27;</span>]) &#123;<br>        responseJson[<span class="hljs-string">&#x27;code&#x27;</span>] = <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (responseJson[<span class="hljs-string">&#x27;status&#x27;</span>]) &#123;<br>        responseJson[<span class="hljs-string">&#x27;status&#x27;</span>] = <span class="hljs-number">0</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        responseJson[<span class="hljs-string">&#x27;status&#x27;</span>] = <span class="hljs-number">0</span>;<br>    &#125;<br>    responseJson[<span class="hljs-string">&#x27;__sekiro_seq__&#x27;</span>] = seq;<br>    <span class="hljs-keyword">var</span> responseText = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(responseJson);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;response :&quot;</span> + responseText);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">send</span>(responseText);<br>&#125;;<br><br><span class="hljs-title class_">SekiroClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sendFailed</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">seq, errorMessage</span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> errorMessage != <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>        errorMessage = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(errorMessage);<br>    &#125;<br>    <span class="hljs-keyword">var</span> responseJson = &#123;&#125;;<br>    responseJson[<span class="hljs-string">&#x27;message&#x27;</span>] = errorMessage;<br>    responseJson[<span class="hljs-string">&#x27;status&#x27;</span>] = -<span class="hljs-number">1</span>;<br>    responseJson[<span class="hljs-string">&#x27;__sekiro_seq__&#x27;</span>] = seq;<br>    <span class="hljs-keyword">var</span> responseText = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(responseJson);<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;sekiro: response :&quot;</span> + responseText);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">socket</span>.<span class="hljs-title function_">send</span>(responseText)<br>&#125;;<br><br><span class="hljs-title class_">SekiroClient</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">registerAction</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">action, handler</span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> action !== <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;an action must be string&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> handler !== <span class="hljs-string">&#x27;function&#x27;</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;a handler must be function&quot;</span>);<br>    &#125;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;sekiro: register action: &quot;</span> + action);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>[action] = handler;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;<br>&#125;;<br><br><br><br> <span class="hljs-keyword">function</span> <span class="hljs-title function_">guid</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">function</span> <span class="hljs-title function_">S4</span>(<span class="hljs-params"></span>) &#123;<br>                <span class="hljs-keyword">return</span> (((<span class="hljs-number">1</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>()) * <span class="hljs-number">0x10000</span>) | <span class="hljs-number">0</span>).<span class="hljs-title function_">toString</span>(<span class="hljs-number">16</span>).<span class="hljs-title function_">substring</span>(<span class="hljs-number">1</span>);<br>            &#125;<br><br>            <span class="hljs-keyword">return</span> (<span class="hljs-title function_">S4</span>() + <span class="hljs-title function_">S4</span>() + <span class="hljs-string">&quot;-&quot;</span> + <span class="hljs-title function_">S4</span>() + <span class="hljs-string">&quot;-&quot;</span> + <span class="hljs-title function_">S4</span>() + <span class="hljs-string">&quot;-&quot;</span> + <span class="hljs-title function_">S4</span>() + <span class="hljs-string">&quot;-&quot;</span> + <span class="hljs-title function_">S4</span>() + <span class="hljs-title function_">S4</span>() + <span class="hljs-title function_">S4</span>());<br>        &#125;<br><br>        <span class="hljs-keyword">var</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SekiroClient</span>(<span class="hljs-string">&quot;ws://127.0.0.1:5620/business-demo/register?group=qqMusic&amp;clientId=&quot;</span> + <span class="hljs-title function_">guid</span>());<br><br><br><br>        client.<span class="hljs-title function_">registerAction</span>(<span class="hljs-string">&quot;getSign&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">request, resolve, reject</span>) &#123;<br>            <span class="hljs-keyword">var</span> code = request[<span class="hljs-string">&#x27;code&#x27;</span>];<br>            <span class="hljs-keyword">if</span> (!code) &#123;<br>                <span class="hljs-title function_">reject</span>(<span class="hljs-string">&quot;need param:&#123;code&#125;&quot;</span>);<br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br><br>            <span class="hljs-keyword">try</span> &#123;<br>               <br>                <span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">getSign</span>(code));<br>            &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>                <span class="hljs-title function_">reject</span>(<span class="hljs-string">&quot;error: &quot;</span> + e);<br>            &#125;<br><br>        &#125;);<br></code></pre></td></tr></table></figure><p><a href="https://sekiro.virjar.com/sekiro-doc/index.html">https://sekiro.virjar.com/sekiro-doc/index.html</a></p><p><a href="https://blog.csdn.net/qq_36759224/article/details/123082574">https://blog.csdn.net/qq_36759224/article/details/123082574</a></p><p><a href="https://cloud.tencent.com/developer/article/2008478">https://cloud.tencent.com/developer/article/2008478</a></p><p><a href="http://www.qinless.com/236">http://www.qinless.com/236</a></p><p><a href="http://127.0.0.1:5620/business-demo/groupList">http://127.0.0.1:5620/business-demo/groupList</a></p><p><a href="http://127.0.0.1:5620/business-demo/clientQueue?group=ws-group">http://127.0.0.1:5620/business-demo/clientQueue?group=ws-group</a></p><p><a href="http://127.0.0.1:5620/business-demo/invoke?group=ws-group&amp;action=clientTime">http://127.0.0.1:5620/business-demo/invoke?group=ws-group&amp;action=clientTime</a></p><p><a href="http://127.0.0.1:5620/business-demo/invoke?group=ws-group&amp;action=clientTime">http://127.0.0.1:5620/business-demo/invoke?group=ws-group&amp;action=clientTime</a></p><p>QQ 音乐的歌手列表需要sign 参数 然后定位到函数之后 把函数到处到全局</p><p>再通过rpc 的方式来调用</p>]]></content>
    
    
    <categories>
      
      <category>JS-RPC</category>
      
    </categories>
    
    
    <tags>
      
      <tag>rpc</tag>
      
      <tag>srkiro</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>猿人学APP01实战</title>
    <link href="/2022/07/17/%E7%8C%BF%E4%BA%BA%E5%AD%A6APP01%E5%AE%9E%E6%88%98/"/>
    <url>/2022/07/17/%E7%8C%BF%E4%BA%BA%E5%AD%A6APP01%E5%AE%9E%E6%88%98/</url>
    
    <content type="html"><![CDATA[<p>环境说明：</p><ul><li>Nexus 6P Android8.1 已root</li><li>抓包软件 Http Canary</li><li>frida=12.8.10 </li><li>frida-tools=5.4.0 </li><li>objection=1.8.4</li><li>猿人学APP 1.0.31</li><li>Flask=1.1.3</li></ul><h1 id="分析思路"><a href="#分析思路" class="headerlink" title="分析思路"></a>分析思路</h1><p>先抓包看下是第一题怎么发的包</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">post 请求 <br>dst https:<span class="hljs-regexp">//</span>www.python-spider.com<span class="hljs-regexp">/api/</span>app1<br>编码参数 page=<span class="hljs-number">1</span>&amp;sign=<span class="hljs-number">19</span>fb8a2eb72e4710109759fd992852d4&amp;t=<span class="hljs-number">1650780086008</span><br></code></pre></td></tr></table></figure><p>打开Jadx 使用sign 作为搜索关键词</p><p><img src="https://s2.loli.net/2022/04/24/iwB75mVMJN2WlZS.png"></p><p>一个一个打开看 然后看到第三个的时候可以确定发包的是用的retrofit 类似的包做的请求 </p><p>请求的是是会把<code>Field</code>中对应的值做为键来编码</p><p><img src="https://s2.loli.net/2022/04/24/SMElZUKBnh6rXgJ.png"></p><p>我们这里直接邮件0oo0 查找用法 </p><p><img src="https://s2.loli.net/2022/04/24/SLW8lXVn7PI4QEj.png"></p><p>定位如图的函数 </p><p>最后这个函数调用了 <code>OooO(Integer.valueOf(this.f7810OooO0o0), OooO2, Long.valueOf(currentTimeMillis)), new OooO00o(o00o0002));</code> 来发送最终的请求</p><p>格式和API 中定义的接口请求大体相似</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">f7810OooO0o0 就是page 的变量名 第一次请求值是<span class="hljs-number">1</span> 请求第二页page 值+<span class="hljs-number">1</span> <br>t = currentTimeMillis<br>sign = <span class="hljs-keyword">new</span> <span class="hljs-constructor">Oooo000()</span>.<span class="hljs-constructor">OooO(<span class="hljs-params">byteArray</span>(<span class="hljs-string">&quot;page=1&quot;</span>+ <span class="hljs-params">str</span>(<span class="hljs-params">t</span>)</span>))<br></code></pre></td></tr></table></figure><p>加密函数就是这个<code>new Oooo000().OooO</code></p><h1 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h1><p>我们使用Objection 来做一个快速验证</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">object -g com.yuanrenxue.challenge explore<br> <br>android hooking watch class_method o00oO00o.Oooo000.OooO  --dump-args --dump-backtrace --dump-return<br></code></pre></td></tr></table></figure><p>然后在手机上点击进入第一题的页面触发Hook 函数 我们可以看到结果输入了sign 的值可以拿着这个值和抓的包对下，确定sign 值是这个 ，那也就说明我们找到了这一题的加密函数</p><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs oxygene">com.yuanrenxue.challenge <span class="hljs-keyword">on</span> (google: <span class="hljs-number">8.1</span>.<span class="hljs-number">0</span>) [usb] #  android hooking watch class_method o00oO00o.Oooo000.OooO  --dump-args --dump-backtrace --dump-return                                                                                                                <br>(agent) Attempting <span class="hljs-keyword">to</span> watch <span class="hljs-keyword">class</span> o00oO00o.Oooo000 <span class="hljs-keyword">and</span> <span class="hljs-keyword">method</span> <span class="hljs-title function_">OooO</span>.<br><span class="hljs-params">(agent)</span> <span class="hljs-title function_">Hooking</span> <span class="hljs-title function_">o00oO00o</span>.<span class="hljs-title function_">Oooo000</span>.<span class="hljs-title function_">OooO</span><span class="hljs-params">([B)</span><br><span class="hljs-params">(agent)</span> <span class="hljs-title function_">Registering</span> <span class="hljs-title function_">job</span> 80<span class="hljs-title function_">ugx93pznf</span>. <span class="hljs-title function_">Type</span>: watch-<span class="hljs-keyword">method</span> <span class="hljs-title function_">for</span>: o00oO00o.Oooo000.OooO<br>com.yuanrenxue.challenge <span class="hljs-keyword">on</span> (google: <span class="hljs-number">8.1</span>.<span class="hljs-number">0</span>) [usb] # (agent) [<span class="hljs-number">80</span>ugx93pznf] Called o00oO00o.Oooo000.OooO([B)<br>(agent) [<span class="hljs-number">80</span>ugx93pznf] Backtrace:<br>        o00oO00o.Oooo000.OooO(Native <span class="hljs-keyword">Method</span>)<br>        <span class="hljs-title function_">com</span>.<span class="hljs-title function_">yuanrenxue</span>.<span class="hljs-title function_">challenge</span>.<span class="hljs-title function_">fragment</span>.<span class="hljs-title function_">challenge</span>.<span class="hljs-title function_">ChallengeOneFragment</span>.<span class="hljs-title function_">lambda</span>$<span class="hljs-title function_">initListeners</span>$0<span class="hljs-params">(proguard-dict.txt:6)</span>                                                                                                                                                     <br>        <span class="hljs-title function_">com</span>.<span class="hljs-title function_">yuanrenxue</span>.<span class="hljs-title function_">challenge</span>.<span class="hljs-title function_">fragment</span>.<span class="hljs-title function_">challenge</span>.<span class="hljs-title function_">ChallengeOneFragment</span>.<span class="hljs-title function_">OooOOoo</span><span class="hljs-params">(Unknown Source:0)</span><br>        <span class="hljs-title function_">o00o0oOO</span>.<span class="hljs-title function_">o000</span>.<span class="hljs-title function_">OooO0OO</span><span class="hljs-params">(Unknown Source:2)</span><br>        <span class="hljs-title function_">com</span>.<span class="hljs-title function_">scwang</span>.<span class="hljs-title function_">smartrefresh</span>.<span class="hljs-title function_">layout</span>.<span class="hljs-title function_">SmartRefreshLayout</span>$<span class="hljs-title function_">OooO0o</span>.<span class="hljs-title function_">onAnimationEnd</span><span class="hljs-params">(proguard-dict.txt:4)</span><br>        <span class="hljs-title function_">android</span>.<span class="hljs-title function_">animation</span>.<span class="hljs-title function_">Animator</span>$<span class="hljs-title function_">AnimatorListener</span>.<span class="hljs-title function_">onAnimationEnd</span><span class="hljs-params">(Animator.java:552)</span><br>6)<br><br>        <br><span class="hljs-params">(agent)</span> [80<span class="hljs-title function_">ugx93pznf</span>] <span class="hljs-title function_">Arguments</span> <span class="hljs-title function_">o00oO00o</span>.<span class="hljs-title function_">Oooo000</span>.<span class="hljs-title function_">OooO</span><span class="hljs-params">([object Object])</span><br><span class="hljs-params">(agent)</span> [80<span class="hljs-title function_">ugx93pznf</span>] <span class="hljs-title function_">Return</span> <span class="hljs-title function_">Value</span>: <span class="hljs-number">8</span>fb74c67e2a70aa5dd7beec6cbfecad2<br><br></code></pre></td></tr></table></figure><h1 id="RPC封装"><a href="#RPC封装" class="headerlink" title="RPC封装"></a>RPC封装</h1><p>我这里尝试过把JAVA 代码放到一个项目里打成jar包来调用,但是<code>o00o0oOO.o000.OooO0OO</code> 这个加密函数在APP 中运行的结果和在JAVA中运行的结果不一致。猜测里面是做了环境检查的，我这里不想正面硬钢了，所以选择使用RPC远程调用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// rpc.js</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getsign</span>(<span class="hljs-params">arg</span>) &#123;<br>    <span class="hljs-keyword">var</span> res;<br>    <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">perform</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">send</span>(<span class="hljs-string">&quot;start rpc&quot;</span>)<br>        <span class="hljs-keyword">const</span> myClass = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&quot;o00oO00o.Oooo000&quot;</span>);<br>        <span class="hljs-keyword">const</span> j_string = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;java.lang.String&#x27;</span>);<br>        <span class="hljs-keyword">const</span> ret = j_string.$new(arg).<span class="hljs-title function_">getBytes</span>(<span class="hljs-string">&#x27;UTF-8&#x27;</span>);<br><br><br>        res = myClass.$new().<span class="hljs-title class_">OooO</span>(ret);<br><br><br>    &#125;)<br>    <span class="hljs-keyword">return</span> res <span class="hljs-comment">// rpc 的返回值在 Java.perform 之后外定义,在Java.perform 函数内重新赋值.</span><br>&#125;<br><br><br>rpc.<span class="hljs-property">exports</span> = &#123;<br>    <span class="hljs-attr">getsign</span>: getsign<br>&#125;;<br><br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python">// server.py<br><span class="hljs-keyword">import</span> json<br><br><span class="hljs-keyword">import</span> frida<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request<br><br>hook = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;rpc.js&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>).read()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">on_message</span>(<span class="hljs-params">message, data</span>):<br>    <span class="hljs-keyword">if</span> message[<span class="hljs-string">&#x27;type&#x27;</span>] == <span class="hljs-string">&#x27;send&#x27;</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;send message:<span class="hljs-subst">&#123;message[<span class="hljs-string">&#x27;payload&#x27;</span>]&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">elif</span> message[<span class="hljs-string">&#x27;type&#x27;</span>] == <span class="hljs-string">&#x27;error&#x27;</span>:<br>        <span class="hljs-built_in">print</span>(message[<span class="hljs-string">&#x27;stack&#x27;</span>])<br><br><br>process = frida.get_usb_device().attach(<span class="hljs-string">&#x27;com.yuanrenxue.challenge&#x27;</span>)<br>script = process.create_script(hook)<br>script.on(<span class="hljs-string">&#x27;message&#x27;</span>, on_message)<br>script.load()<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/getsign&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)  </span><span class="hljs-comment"># data解密</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">decrypt_class</span>():<br>    data = request.get_data()<br>    json_data = json.loads(data.decode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br>    page = json_data.get(<span class="hljs-string">&quot;page&quot;</span>)<br>    t = json_data.get(<span class="hljs-string">&quot;t&quot;</span>)<br>    s = <span class="hljs-string">&quot;page=&quot;</span>+<span class="hljs-built_in">str</span>(page) + t<br>    <span class="hljs-built_in">print</span>(s)<br>    res = script.exports.getsign(s)<br>    <span class="hljs-keyword">return</span> res<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run()<br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python">// app01 脚本<br><br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-keyword">import</span> requests <span class="hljs-keyword">as</span> requests<br><br>headers = &#123;<br>    <span class="hljs-string">&#x27;user-agent&#x27;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Linux; U; Android 8.1.0; zh-cn; Nexus 6P Build/OPM7.181105.004) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30&quot;</span>,<br>    <span class="hljs-string">&quot;content-type&quot;</span>: <span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span><br>&#125;<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br><br>    s = []<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">101</span>):<br>        currentTimeMillis = <span class="hljs-built_in">str</span>(<span class="hljs-built_in">int</span>(<span class="hljs-built_in">round</span>(time.time() * <span class="hljs-number">1000</span>)))<br>        data = &#123;<span class="hljs-string">&quot;page&quot;</span>: <span class="hljs-built_in">str</span>(i), <span class="hljs-string">&quot;t&quot;</span>: currentTimeMillis&#125;<br><br>        sign = requests.post(url=<span class="hljs-string">&#x27;http://127.0.0.1:5000/getsign&#x27;</span>, json=data).text<br>        data[<span class="hljs-string">&quot;sign&quot;</span>] = sign<br><br>        res = requests.post(url=<span class="hljs-string">&#x27;https://www.python-spider.com/api/app1&#x27;</span>, data=data, headers=headers).text<br><br>        content = json.loads(res)<br>        s.extend([i[<span class="hljs-string">&#x27;value&#x27;</span>].strip(<span class="hljs-string">&#x27;\r&#x27;</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> content[<span class="hljs-string">&#x27;data&#x27;</span>]])<br>    <span class="hljs-built_in">print</span>(s)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>(<span class="hljs-built_in">int</span>(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> s))<br><br><br><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>安卓逆向</category>
      
    </categories>
    
    
    <tags>
      
      <tag>APP 逆向</tag>
      
      <tag>猿人学APP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>猿人学APP02实战</title>
    <link href="/2022/07/17/%E7%8C%BF%E4%BA%BA%E5%AD%A6APP02%E5%AE%9E%E6%88%98/"/>
    <url>/2022/07/17/%E7%8C%BF%E4%BA%BA%E5%AD%A6APP02%E5%AE%9E%E6%88%98/</url>
    
    <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">stringToByte</span>(<span class="hljs-params">str</span>) &#123;<br>    <span class="hljs-keyword">const</span> bytes = [];<br>    <span class="hljs-keyword">let</span> len, c;<br>    len = str.<span class="hljs-property">length</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>        c = str.<span class="hljs-title function_">charCodeAt</span>(i);<br>        <span class="hljs-keyword">if</span> (c &gt;= <span class="hljs-number">0x010000</span> &amp;&amp; c &lt;= <span class="hljs-number">0x10FFFF</span>) &#123;<br>            bytes.<span class="hljs-title function_">push</span>(((c &gt;&gt; <span class="hljs-number">18</span>) &amp; <span class="hljs-number">0x07</span>) | <span class="hljs-number">0xF0</span>);<br>            bytes.<span class="hljs-title function_">push</span>(((c &gt;&gt; <span class="hljs-number">12</span>) &amp; <span class="hljs-number">0x3F</span>) | <span class="hljs-number">0x80</span>);<br>            bytes.<span class="hljs-title function_">push</span>(((c &gt;&gt; <span class="hljs-number">6</span>) &amp; <span class="hljs-number">0x3F</span>) | <span class="hljs-number">0x80</span>);<br>            bytes.<span class="hljs-title function_">push</span>((c &amp; <span class="hljs-number">0x3F</span>) | <span class="hljs-number">0x80</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c &gt;= <span class="hljs-number">0x000800</span> &amp;&amp; c &lt;= <span class="hljs-number">0x00FFFF</span>) &#123;<br>            bytes.<span class="hljs-title function_">push</span>(((c &gt;&gt; <span class="hljs-number">12</span>) &amp; <span class="hljs-number">0x0F</span>) | <span class="hljs-number">0xE0</span>);<br>            bytes.<span class="hljs-title function_">push</span>(((c &gt;&gt; <span class="hljs-number">6</span>) &amp; <span class="hljs-number">0x3F</span>) | <span class="hljs-number">0x80</span>);<br>            bytes.<span class="hljs-title function_">push</span>((c &amp; <span class="hljs-number">0x3F</span>) | <span class="hljs-number">0x80</span>);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c &gt;= <span class="hljs-number">0x000080</span> &amp;&amp; c &lt;= <span class="hljs-number">0x0007FF</span>) &#123;<br>            bytes.<span class="hljs-title function_">push</span>(((c &gt;&gt; <span class="hljs-number">6</span>) &amp; <span class="hljs-number">0x1F</span>) | <span class="hljs-number">0xC0</span>);<br>            bytes.<span class="hljs-title function_">push</span>((c &amp; <span class="hljs-number">0x3F</span>) | <span class="hljs-number">0x80</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            bytes.<span class="hljs-title function_">push</span>(c &amp; <span class="hljs-number">0xFF</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> bytes;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">byteToString</span>(<span class="hljs-params">arr</span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> arr === <span class="hljs-string">&#x27;string&#x27;</span>) &#123;<br>        <span class="hljs-keyword">return</span> arr;<br>    &#125;<br>    <span class="hljs-keyword">let</span> str = <span class="hljs-string">&#x27;&#x27;</span>,<br>        _arr = arr;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; _arr.<span class="hljs-property">length</span>; i++) &#123;<br>        <span class="hljs-keyword">const</span> one = _arr[i].<span class="hljs-title function_">toString</span>(<span class="hljs-number">2</span>),<br>            v = one.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/^1+?(?=0)/</span>);<br>        <span class="hljs-keyword">if</span> (v &amp;&amp; one.<span class="hljs-property">length</span> === <span class="hljs-number">8</span>) &#123;<br>            <span class="hljs-keyword">const</span> bytesLength = v[<span class="hljs-number">0</span>].<span class="hljs-property">length</span>;<br>            <span class="hljs-keyword">let</span> store = _arr[i].<span class="hljs-title function_">toString</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">slice</span>(<span class="hljs-number">7</span> - bytesLength);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> st = <span class="hljs-number">1</span>; st &lt; bytesLength; st++) &#123;<br>                store += _arr[st + i].<span class="hljs-title function_">toString</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>);<br>            &#125;<br>            str += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(<span class="hljs-built_in">parseInt</span>(store, <span class="hljs-number">2</span>));<br>            i += bytesLength - <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            str += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(_arr[i]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> str;<br>&#125;<br><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">data</span>(<span class="hljs-params">str, timestamp</span>) &#123;<br>    <span class="hljs-keyword">let</span> result = &#123;&#125;<br>    <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">perform</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br><br>        <span class="hljs-keyword">const</span> <span class="hljs-title class_">NativeLib</span> = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&#x27;com.yuanrenxue.challenge.two.NativeLib&#x27;</span>);<br>        <span class="hljs-keyword">const</span> byteArray = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">array</span>(<span class="hljs-string">&#x27;byte&#x27;</span>, <span class="hljs-title function_">stringToByte</span>(str))<br>        <span class="hljs-keyword">const</span> <span class="hljs-title class_">Base64</span> = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&quot;android.util.Base64&quot;</span>)<br><br>        <span class="hljs-keyword">try</span> &#123;<br><br>            <span class="hljs-keyword">const</span> rawData = <span class="hljs-title class_">NativeLib</span>.<span class="hljs-title function_">encrypt</span>(byteArray, timestamp)<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;test result: &quot;</span> + rawData);<br><br>            <span class="hljs-keyword">const</span> base64EncodedData = <span class="hljs-title class_">Base64</span>.<span class="hljs-title function_">encodeToString</span>(rawData, <span class="hljs-number">10</span>)<br><br>            result.<span class="hljs-property">rawData</span> = rawData<br>            result.<span class="hljs-property">base64EncodedData</span> = base64EncodedData<br><br><br>        &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e)<br>        &#125;<br>    &#125;)<br><br>    <span class="hljs-keyword">return</span> result<br><br>&#125;<br><br>rpc.<span class="hljs-property">exports</span> = &#123;<br>    <span class="hljs-attr">data</span>: data<br>&#125;<br><br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># server.py</span><br><span class="hljs-keyword">import</span> json<br><br><span class="hljs-keyword">import</span> frida<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, request<br><br>hook = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;data.js&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>).read()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">on_message</span>(<span class="hljs-params">message, data</span>):<br>    <span class="hljs-keyword">if</span> message[<span class="hljs-string">&#x27;type&#x27;</span>] == <span class="hljs-string">&#x27;send&#x27;</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;send message:<span class="hljs-subst">&#123;message[<span class="hljs-string">&#x27;payload&#x27;</span>]&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">elif</span> message[<span class="hljs-string">&#x27;type&#x27;</span>] == <span class="hljs-string">&#x27;error&#x27;</span>:<br>        <span class="hljs-built_in">print</span>(message[<span class="hljs-string">&#x27;stack&#x27;</span>])<br><br><br>deviceManage = frida.get_usb_device()<br>front_app = deviceManage.get_frontmost_application()<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===正在运行的应用为：&quot;</span>, front_app)<br>process = deviceManage.attach(front_app.pid)<br><br>script = process.create_script(hook)<br>script.on(<span class="hljs-string">&#x27;message&#x27;</span>, on_message)<br>script.load()<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/getdata&#x27;</span>, methods=[<span class="hljs-string">&#x27;POST&#x27;</span>]</span>)  </span><span class="hljs-comment"># data解密</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getsign</span>():<br>    data = request.get_data()<br>    json_data = json.loads(data.decode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br><br>    page = json_data.get(<span class="hljs-string">&quot;page&quot;</span>)<br>    timestamp = json_data.get(<span class="hljs-string">&#x27;timestamp&#x27;</span>)<br>    s = <span class="hljs-built_in">str</span>(page) + <span class="hljs-string">&quot;:&quot;</span> + <span class="hljs-built_in">str</span>(timestamp)<br>    res = script.exports.data(s, timestamp)<br>    <span class="hljs-keyword">return</span> res<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run()<br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># client.py</span><br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-keyword">import</span> requests<br><br>url = <span class="hljs-string">&#x27;http://127.0.0.1:5000/getdata&#x27;</span><br>data_url = <span class="hljs-string">&#x27;https://www.python-spider.com/api/app2&#x27;</span><br><br>headers = &#123;<br>    <span class="hljs-string">&#x27;user-agent&#x27;</span>: <span class="hljs-string">&quot;Mozilla/5.0 (Linux; U; Android 8.1.0; zh-cn; Nexus 6P Build/OPM7.181105.004) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30&quot;</span>,<br>    <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/x-www-form-urlencoded;charset=utf-8&#x27;</span><br><br>&#125;<br><br>s = []<br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">101</span>):<br>    timestamp = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">round</span>(time.time() * <span class="hljs-number">1000</span>))<br><br>    data1 = &#123;<span class="hljs-string">&quot;page&quot;</span>: i, <span class="hljs-string">&quot;timestamp&quot;</span>: timestamp&#125;<br><br>    getData = requests.post(url, json=data1).json()<br>    <span class="hljs-built_in">print</span>(getData)<br><br>    data = &#123;<span class="hljs-string">&quot;data&quot;</span>: getData[<span class="hljs-string">&#x27;base64EncodedData&#x27;</span>]&#125;<br><br>    res = requests.post(data_url, data=data, headers=headers).text<br><br>    content = json.loads(res)<br>    s.extend([i[<span class="hljs-string">&#x27;value&#x27;</span>].strip(<span class="hljs-string">&#x27;\r&#x27;</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> content[<span class="hljs-string">&#x27;data&#x27;</span>]])<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">sum</span>(<span class="hljs-built_in">int</span>(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> s))<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>安卓逆向</category>
      
    </categories>
    
    
    <tags>
      
      <tag>APP 逆向</tag>
      
      <tag>猿人学APP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>化妆品监管SU检测Hook绕过</title>
    <link href="/2022/07/10/%E5%8C%96%E5%A6%86%E5%93%81%E7%9B%91%E7%AE%A1SU%E6%A3%80%E6%B5%8BHook/"/>
    <url>/2022/07/10/%E5%8C%96%E5%A6%86%E5%93%81%E7%9B%91%E7%AE%A1SU%E6%A3%80%E6%B5%8BHook/</url>
    
    <content type="html"><![CDATA[<p>环境： Windows ,化妆品监管APP2.0.5</p><ol><li><p>查壳使用梆梆加固  </p></li><li><p>打开APP 发现使用了Root 检测 frida-dexdump 没有使用</p></li><li><p>使用BlackDex32 在未Root的手机上，成功的把APP 的Dex 文件dump 下来</p></li><li><p> 放到jadx 中看dex 文件 </p></li></ol><p>   <img src="https://s2.loli.net/2022/07/10/vp5f1IXwaAdYuB6.png" alt="image-20220710105056885"></p><p>也可以看到这个逻辑就是检测Root 后创建的su 文件存不存在</p><p>只需要把这个函数hook 掉返回false 就可以过掉Root 检测的弹窗了 </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// hook app for v2.0.5</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">hook_su3</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> utils = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&quot;c.a.a.b.t&quot;</span>);<br>    <span class="hljs-keyword">if</span> (utils) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;find utils&quot;</span>)<br>        utils.<span class="hljs-property">p</span>.<span class="hljs-title function_">overload</span>().<span class="hljs-property">implementation</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">perform</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-title function_">hook_su3</span>()<br><br>    &#125;);<br>&#125;<br><br><br><span class="hljs-title function_">setImmediate</span>(main, <span class="hljs-number">0</span>);<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">frida -l hook_su.js -F -U<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/07/10/wJkesd9fP3hEgmb.png" alt="image-20220710103702904"></p><p>显示找不到类</p><p>使用Objection 启动的时候注入命令</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus">objection -g com<span class="hljs-selector-class">.nmpaic</span><span class="hljs-selector-class">.hzp</span> explore <span class="hljs-attr">--startup-command</span> <span class="hljs-string">&quot;android hooking list classes&quot;</span><br></code></pre></td></tr></table></figure><p>然后看到几个经过混淆的类</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs stylus">c<span class="hljs-selector-class">.d</span><span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.f</span><span class="hljs-selector-class">.a</span><br>c<span class="hljs-selector-class">.d</span><span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.f</span><span class="hljs-selector-class">.b</span><br>c<span class="hljs-selector-class">.d</span><span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.f</span>.b<span class="hljs-variable">$b</span><br>c<span class="hljs-selector-class">.d</span><span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.f</span><span class="hljs-selector-class">.c</span><br>c<span class="hljs-selector-class">.d</span><span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.h</span><span class="hljs-selector-class">.h</span><span class="hljs-selector-class">.a</span><br>c<span class="hljs-selector-class">.d</span><span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.h</span><span class="hljs-selector-class">.h</span><span class="hljs-selector-class">.b</span><br>c<span class="hljs-selector-class">.d</span><span class="hljs-selector-class">.a</span><span class="hljs-selector-class">.h</span><span class="hljs-selector-class">.h</span><span class="hljs-selector-class">.d</span><br>char<br>cn<span class="hljs-selector-class">.jpush</span><span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.service</span><span class="hljs-selector-class">.DownloadProvider</span><br>com<span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.i18n</span><span class="hljs-selector-class">.phonenumbers</span>.AlternateFormatsCountryCodeSet<br></code></pre></td></tr></table></figure><p>程序最终运行时的类名和反编译得到的类名不一致</p><p>尝试使用 objection 来hook </p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><br><span class="hljs-comment">objection</span> <span class="hljs-literal">-</span><span class="hljs-comment">g com</span><span class="hljs-string">.</span><span class="hljs-comment">nmpaic</span><span class="hljs-string">.</span><span class="hljs-comment">hzp explore</span> <span class="hljs-literal">--</span><span class="hljs-comment">startup</span><span class="hljs-literal">-</span><span class="hljs-comment">command &quot;android hooking watch class_method c</span><span class="hljs-string">.</span><span class="hljs-comment">d</span><span class="hljs-string">.</span><span class="hljs-comment">a</span><span class="hljs-string">.</span><span class="hljs-comment">h</span><span class="hljs-string">.</span><span class="hljs-comment">h</span><span class="hljs-string">.</span><span class="hljs-comment">d</span> <span class="hljs-literal">--</span><span class="hljs-comment">dump</span><span class="hljs-literal">-</span><span class="hljs-comment">args</span> <span class="hljs-literal">--</span><span class="hljs-comment">dump</span><span class="hljs-literal">-</span><span class="hljs-comment">backtrace</span> <span class="hljs-literal">--</span><span class="hljs-comment">dump</span><span class="hljs-literal">-</span><span class="hljs-comment">return&quot;</span><br><br><br><span class="hljs-comment">objection</span> <span class="hljs-literal">-</span><span class="hljs-comment">g com</span><span class="hljs-string">.</span><span class="hljs-comment">nmpaic</span><span class="hljs-string">.</span><span class="hljs-comment">hzp explore</span> <span class="hljs-literal">--</span><span class="hljs-comment">startup</span><span class="hljs-literal">-</span><span class="hljs-comment">command &quot;android hooking watch class c</span><span class="hljs-string">.</span><span class="hljs-comment">d</span><span class="hljs-string">.</span><span class="hljs-comment">a</span><span class="hljs-string">.</span><span class="hljs-comment">h</span><span class="hljs-string">.</span><span class="hljs-comment">h</span><span class="hljs-string">.</span><span class="hljs-comment">d</span> <span class="hljs-literal">--</span><span class="hljs-comment">dump</span><span class="hljs-literal">-</span><span class="hljs-comment">args</span> <span class="hljs-literal">--</span><span class="hljs-comment">dump</span><span class="hljs-literal">-</span><span class="hljs-comment">backtrace</span> <span class="hljs-literal">--</span><span class="hljs-comment">dump</span><span class="hljs-literal">-</span><span class="hljs-comment">return&quot;</span><br><br></code></pre></td></tr></table></figure><p>这个APP 只用修改这个APP 里一个函数的返回值就可以过掉SU检测 </p><p>这里尝试使用APP 中搜索到的方法结合Objection 的设置函数返回值的方式</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">objection -g com.nmpaic.hzp explore --startup-command &quot;android hooking set return_value c.d.a.h.h.d.p false&quot;<br></code></pre></td></tr></table></figure><p>把几个混淆后的类都尝试了一下 发现没有一个能用的</p>]]></content>
    
    
    <categories>
      
      <category>安卓逆向实战</category>
      
      <category>未完成</category>
      
    </categories>
    
    
    <tags>
      
      <tag>APP逆向</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>天翼云登录过程</title>
    <link href="/2022/07/07/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%99%BB%E5%BD%95%E8%BF%87%E7%A8%8B/"/>
    <url>/2022/07/07/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%99%BB%E5%BD%95%E8%BF%87%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2022/07/07/Rxi6AaHzs8ucKyh.png" alt="image-20220707130427004"></p><p><img src="https://s2.loli.net/2022/07/07/YB6GA1MzJguiHpo.png" alt="image-20220707131416225"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title class_">Object</span>(l[<span class="hljs-string">&quot;r&quot;</span>])(&#123;<br>    <span class="hljs-attr">userName</span>: <span class="hljs-title class_">Object</span>(u[<span class="hljs-string">&quot;g&quot;</span>])(r.<span class="hljs-property">value</span>),<br>    <span class="hljs-attr">password</span>: <span class="hljs-built_in">encodeURI</span>(<span class="hljs-title class_">Object</span>(u[<span class="hljs-string">&quot;c&quot;</span>])(s.<span class="hljs-property">value</span>, <span class="hljs-title class_">Object</span>(u[<span class="hljs-string">&quot;f&quot;</span>])(<span class="hljs-title class_">Object</span>(u[<span class="hljs-string">&quot;g&quot;</span>])(r.<span class="hljs-property">value</span>))))<br>&#125;);<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// u[&quot;c&quot;]</span><br>T = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>            <span class="hljs-keyword">var</span> n = <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> !== <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>] ? <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>] : <span class="hljs-string">&quot;&quot;</span><br>              , t = <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">2</span> &amp;&amp; <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> !== <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>] ? <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>] : &#123;&#125;<br>              , a = t.<span class="hljs-property">enc</span><br>              , r = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> === a ? <span class="hljs-string">&quot;Utf8&quot;</span> : a<br>              , c = t.<span class="hljs-property">mode</span><br>              , i = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> === c ? <span class="hljs-string">&quot;ECB&quot;</span> : c<br>              , o = t.<span class="hljs-property">padding</span><br>              , u = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> === o ? <span class="hljs-string">&quot;Pkcs7&quot;</span> : o<br>              , d = p.<span class="hljs-property">a</span>.<span class="hljs-property">enc</span>[r].<span class="hljs-title function_">parse</span>(n)<br>              , l = &#123;<br>                <span class="hljs-attr">mode</span>: p.<span class="hljs-property">a</span>.<span class="hljs-property">mode</span>[i],<br>                <span class="hljs-attr">padding</span>: p.<span class="hljs-property">a</span>.<span class="hljs-property">pad</span>[u]<br>            &#125;<br>              , s = p.<span class="hljs-property">a</span>.<span class="hljs-property">TripleDES</span>.<span class="hljs-title function_">encrypt</span>(e, d, l);<br>            <span class="hljs-keyword">return</span> s.<span class="hljs-title function_">toString</span>()<br>        &#125;;<br><span class="hljs-comment">//u[&quot;f&quot;]</span><br>F = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) &#123;<br>            <span class="hljs-keyword">var</span> n = <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span> &amp;&amp; <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> !== <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>] ? <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>] : &#123;&#125;;<br>            <span class="hljs-keyword">if</span> (e &amp;&amp; <span class="hljs-string">&quot;string&quot;</span> === <span class="hljs-keyword">typeof</span> e) &#123;<br>                <span class="hljs-keyword">var</span> t = n.<span class="hljs-property">text</span> || <span class="hljs-string">&quot;0&quot;</span><br>                  , a = n.<span class="hljs-property">length</span> || <span class="hljs-number">24</span>;<br>                <span class="hljs-keyword">if</span> (e.<span class="hljs-property">length</span> &lt; a)<br>                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> r = e.<span class="hljs-property">length</span>; r &lt; a; r++)<br>                        e += t;<br>                <span class="hljs-keyword">else</span><br>                    e = e.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, a);<br>                <span class="hljs-keyword">return</span> e<br>            &#125;<br>        &#125;;<br><span class="hljs-comment">// u[&quot;g&quot;] 去除空格 检查长度</span><br>K = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">var</span> e = <span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> !== <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>] ? <span class="hljs-variable language_">arguments</span>[<span class="hljs-number">0</span>] : <span class="hljs-string">&quot;&quot;</span>;<br>            <span class="hljs-keyword">return</span> e.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\s+/g</span>, <span class="hljs-string">&quot;&quot;</span>)<br>        &#125;;<br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/07/07/jdvygt9YQiUfo3X.png" alt="image-20220707213605293"></p><p><img src="https://s2.loli.net/2022/07/07/wSzsjtIH3DL971F.png" alt="image-20220707222423206"></p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs excel">encodeURI(Object(u[<span class="hljs-string">&quot;c&quot;</span>])(s.value, Object(u[<span class="hljs-string">&quot;f&quot;</span>])(Object(u[<span class="hljs-string">&quot;g&quot;</span>])(r.value))))<br>= encodeURI(Object(u[<span class="hljs-string">&quot;c&quot;</span>])(s.value, Object(u[<span class="hljs-string">&quot;f&quot;</span>])(r.value)))<br>= Object(u[<span class="hljs-string">&quot;c&quot;</span>])(s.value, Object(u[<span class="hljs-string">&quot;f&quot;</span>])(r.value))<br>=  <span class="hljs-built_in">T</span>(s.value, F)(r.value))<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>OB 混淆实例</title>
    <link href="/2022/07/02/OB%20%E6%B7%B7%E6%B7%86%E5%AE%9E%E4%BE%8B/"/>
    <url>/2022/07/02/OB%20%E6%B7%B7%E6%B7%86%E5%AE%9E%E4%BE%8B/</url>
    
    <content type="html"><![CDATA[<p>网址：</p><p>   atob(‘aHR0cDovL2NyZWRpdC5jdXN0b21zLmdvdi5jbi9jY3Bwd2Vic2VydmVyL3BhZ2VzL2NjcHAvaHRtbC9kZWNsQ29tcGFueS5odG1s’)</p><p>添加脚本到忽略列表中</p><p><img src="https://s2.loli.net/2022/07/04/PCjJMwgIkl8sdbB.png" alt="image-20220704223208464"></p><p><img src="https://s2.loli.net/2022/07/04/xbOoHuUMgjc1fzX.png" alt="image-20220704223302302"></p><p><img src="https://s2.loli.net/2022/07/04/vYHMy1tgNm2V8cF.png" alt="image-20220704223400053"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> a7_0x2b5d=[<span class="hljs-string">&#x27;call&#x27;</span>,<span class="hljs-string">&#x27;isPadding&#x27;</span>,<span class="hljs-string">&#x27;mode&#x27;</span>,<span class="hljs-string">&#x27;rugNk&#x27;</span>,<span class="hljs-string">&#x27;354735GnJPMi&#x27;</span>,<span class="hljs-string">&#x27;avPzW&#x27;</span>,<span class="hljs-string">&#x27;KThRo&#x27;</span>,<span class="hljs-string">&#x27;VHqLW&#x27;</span>,<span class="hljs-string">&#x27;SFpEF&#x27;</span>,<span class="hljs-string">&#x27;HZXuv&#x27;</span>,<span class="hljs-string">&#x27;reverse&#x27;</span>,<span class="hljs-string">&#x27;haxwH&#x27;</span>,<span class="hljs-string">&#x27;apply&#x27;</span>,<span class="hljs-string">&#x27;debu&#x27;</span>,<span class="hljs-string">&#x27;hDxNe&#x27;</span>,<span class="hljs-string">&#x27;dcpRD&#x27;</span>,<span class="hljs-string">&#x27;WqpyS&#x27;</span>,<span class="hljs-string">&#x27;TXBOE&#x27;</span>,<span class="hljs-string">&#x27;jNWkq&#x27;</span>,<span class="hljs-string">&#x27;sDqJj&#x27;</span>,<span class="hljs-string">&#x27;rRXqW&#x27;</span>,<span class="hljs-string">&#x27;EfSiR&#x27;</span>,<span class="hljs-string">&#x27;358481FJAtiH&#x27;</span>,<span class="hljs-string">&#x27;trace&#x27;</span>,<span class="hljs-string">&#x27;gger&#x27;</span>,<span class="hljs-string">&#x27;pjXvO&#x27;</span>,<span class="hljs-string">&#x27;IKPqy&#x27;</span>,<span class="hljs-string">&#x27;lcYtC&#x27;</span>,<span class="hljs-string">&#x27;log&#x27;</span>,<span class="hljs-string">&#x27;ffBwx&#x27;</span>,<span class="hljs-string">&#x27;chain&#x27;</span>,<span class="hljs-string">&#x27;gGIDO&#x27;</span>,<span class="hljs-string">&#x27;replace&#x27;</span>,<span class="hljs-string">&#x27;&#123;&#125;.constructor(\x22return\x20this\x22)(\x20)&#x27;</span>,<span class="hljs-string">&#x27;nlNzw&#x27;</span>,<span class="hljs-string">&#x27;uyMva&#x27;</span>,<span class="hljs-string">&#x27;BvoPh&#x27;</span>,<span class="hljs-string">&#x27;JqowM&#x27;</span>,<span class="hljs-string">&#x27;TGEYP&#x27;</span>,<span class="hljs-string">&#x27;nFXTL&#x27;</span>,<span class="hljs-string">&#x27;byteLength&#x27;</span>,<span class="hljs-string">&#x27;OIoMC&#x27;</span>,<span class="hljs-string">&#x27;QSTVa&#x27;</span>,<span class="hljs-string">&#x27;SazpL&#x27;</span>,<span class="hljs-string">&#x27;action&#x27;</span>,<span class="hljs-string">&#x27;constructor&#x27;</span>,<span class="hljs-string">&#x27;oQEiQ&#x27;</span>,<span class="hljs-string">&#x27;__proto__&#x27;</span>,<span class="hljs-string">&#x27;pcovl&#x27;</span>,<span class="hljs-string">&#x27;MzcbM&#x27;</span>,<span class="hljs-string">&#x27;pop&#x27;</span>,<span class="hljs-string">&#x27;DXJBH&#x27;</span>,<span class="hljs-string">&#x27;TKGWS&#x27;</span>,<span class="hljs-string">&#x27;Yyixl&#x27;</span>,<span class="hljs-string">&#x27;oGwFB&#x27;</span>,<span class="hljs-string">&#x27;wHdDx&#x27;</span>,<span class="hljs-string">&#x27;RYvlH&#x27;</span>,<span class="hljs-string">&#x27;ouQaI&#x27;</span>,<span class="hljs-string">&#x27;console&#x27;</span>,<span class="hljs-string">&#x27;ESqgu&#x27;</span>,<span class="hljs-string">&#x27;yLObA&#x27;</span>,<span class="hljs-string">&#x27;mxCkC&#x27;</span>,<span class="hljs-string">&#x27;aWiBC&#x27;</span>,<span class="hljs-string">&#x27;PkCLg&#x27;</span>,<span class="hljs-string">&#x27;1346160KjKRRr&#x27;</span>,<span class="hljs-string">&#x27;NpPDy&#x27;</span>,<span class="hljs-string">&#x27;diELP&#x27;</span>,<span class="hljs-string">&#x27;457809mFABzD&#x27;</span>,<span class="hljs-string">&#x27;DzImY&#x27;</span>,<span class="hljs-string">&#x27;zpFjY&#x27;</span>,<span class="hljs-string">&#x27;QtadN&#x27;</span>,<span class="hljs-string">&#x27;init&#x27;</span>,<span class="hljs-string">&#x27;mhbZS&#x27;</span>,<span class="hljs-string">&#x27;FSHau&#x27;</span>,<span class="hljs-string">&#x27;bmiMO&#x27;</span>,<span class="hljs-string">&#x27;qSLAQ&#x27;</span>,<span class="hljs-string">&#x27;snDbr&#x27;</span>,<span class="hljs-string">&#x27;vbcNd&#x27;</span>,<span class="hljs-string">&#x27;while\x20(true)\x20&#123;&#125;&#x27;</span>,<span class="hljs-string">&#x27;TwpwF&#x27;</span>,<span class="hljs-string">&#x27;trim&#x27;</span>,<span class="hljs-string">&#x27;aXpni&#x27;</span>,<span class="hljs-string">&#x27;toByteArray&#x27;</span>,<span class="hljs-string">&#x27;CBNXR&#x27;</span>,<span class="hljs-string">&#x27;stHXK&#x27;</span>,<span class="hljs-string">&#x27;DYTBc&#x27;</span>,<span class="hljs-string">&#x27;aIThM&#x27;</span>,<span class="hljs-string">&#x27;oVofC&#x27;</span>,<span class="hljs-string">&#x27;return\x20/\x22\x20+\x20this\x20+\x20\x22/&#x27;</span>,<span class="hljs-string">&#x27;11933HqMZrC&#x27;</span>,<span class="hljs-string">&#x27;^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]&#125;&#x27;</span>,<span class="hljs-string">&#x27;message&#x27;</span>,<span class="hljs-string">&#x27;\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)&#x27;</span>,<span class="hljs-string">&#x27;nTwJH&#x27;</span>,<span class="hljs-string">&#x27;cYule&#x27;</span>,<span class="hljs-string">&#x27;xaYQO&#x27;</span>,<span class="hljs-string">&#x27;3nDilfW&#x27;</span>,<span class="hljs-string">&#x27;WsxKY&#x27;</span>,<span class="hljs-string">&#x27;4Cpgwjw&#x27;</span>,<span class="hljs-string">&#x27;ZXbqk&#x27;</span>,<span class="hljs-string">&#x27;Debug&#x27;</span>,<span class="hljs-string">&#x27;prototype&#x27;</span>,<span class="hljs-string">&#x27;WRsvs&#x27;</span>,<span class="hljs-string">&#x27;swSJq&#x27;</span>,<span class="hljs-string">&#x27;JlGWC&#x27;</span>,<span class="hljs-string">&#x27;syvii&#x27;</span>,<span class="hljs-string">&#x27;ctx\x20is\x20null!&#x27;</span>,<span class="hljs-string">&#x27;fDwAa&#x27;</span>,<span class="hljs-string">&#x27;uSPeW&#x27;</span>,<span class="hljs-string">&#x27;table&#x27;</span>,<span class="hljs-string">&#x27;yh\x20error!&#x27;</span>,<span class="hljs-string">&#x27;DPmAu&#x27;</span>,<span class="hljs-string">&#x27;QSePF&#x27;</span>,<span class="hljs-string">&#x27;vAWbN&#x27;</span>,<span class="hljs-string">&#x27;length&#x27;</span>,<span class="hljs-string">&#x27;return\x20(function()\x20&#x27;</span>,<span class="hljs-string">&#x27;MQqdA&#x27;</span>,<span class="hljs-string">&#x27;gNyVV&#x27;</span>,<span class="hljs-string">&#x27;oOPZk&#x27;</span>,<span class="hljs-string">&#x27;hGVgS&#x27;</span>,<span class="hljs-string">&#x27;eyjoI&#x27;</span>,<span class="hljs-string">&#x27;prZNT&#x27;</span>,<span class="hljs-string">&#x27;IycDn&#x27;</span>,<span class="hljs-string">&#x27;GLzSb&#x27;</span>,<span class="hljs-string">&#x27;496144kEaDWn&#x27;</span>,<span class="hljs-string">&#x27;Vcbyb&#x27;</span>,<span class="hljs-string">&#x27;input&#x27;</span>,<span class="hljs-string">&#x27;707684tcCIzJ&#x27;</span>,<span class="hljs-string">&#x27;concat&#x27;</span>,<span class="hljs-string">&#x27;FRtjq&#x27;</span>,<span class="hljs-string">&#x27;counter&#x27;</span>,<span class="hljs-string">&#x27;function\x20*\x5c(\x20*\x5c)&#x27;</span>,<span class="hljs-string">&#x27;LIgbg&#x27;</span>,<span class="hljs-string">&#x27;fromCharCode&#x27;</span>,<span class="hljs-string">&#x27;warn&#x27;</span>,<span class="hljs-string">&#x27;push&#x27;</span>,<span class="hljs-string">&#x27;xujqS&#x27;</span>,<span class="hljs-string">&#x27;iHzdy&#x27;</span>,<span class="hljs-string">&#x27;QNdLF&#x27;</span>,<span class="hljs-string">&#x27;bind&#x27;</span>,<span class="hljs-string">&#x27;ujsRG&#x27;</span>,<span class="hljs-string">&#x27;GiveU&#x27;</span>,<span class="hljs-string">&#x27;KGJBY&#x27;</span>,<span class="hljs-string">&#x27;pBbbx&#x27;</span>,<span class="hljs-string">&#x27;toString&#x27;</span>,<span class="hljs-string">&#x27;test&#x27;</span>,<span class="hljs-string">&#x27;wqGUy&#x27;</span>,<span class="hljs-string">&#x27;bHwxf&#x27;</span>,<span class="hljs-string">&#x27;SeSKM&#x27;</span>,<span class="hljs-string">&#x27;pbWmJ&#x27;</span>,<span class="hljs-string">&#x27;grFEl&#x27;</span>,<span class="hljs-string">&#x27;CaData_KXC&#x27;</span>,<span class="hljs-string">&#x27;fromByteArray&#x27;</span>,<span class="hljs-string">&#x27;adgRQ&#x27;</span>,<span class="hljs-string">&#x27;YroQf&#x27;</span>,<span class="hljs-string">&#x27;charCodeAt&#x27;</span>,<span class="hljs-string">&#x27;ghKuy&#x27;</span>,<span class="hljs-string">&#x27;nSwqq&#x27;</span>,<span class="hljs-string">&#x27;tecjo&#x27;</span>,<span class="hljs-string">&#x27;wsLWY&#x27;</span>,<span class="hljs-string">&#x27;string&#x27;</span>,<span class="hljs-string">&#x27;yccGl&#x27;</span>,<span class="hljs-string">&#x27;HLntE&#x27;</span>];(<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x1d77f6,_0x51308a</span>)&#123;<span class="hljs-keyword">var</span> _0x41c885=a7_0x3a83;<span class="hljs-keyword">while</span>(!![])&#123;<span class="hljs-keyword">try</span>&#123;<span class="hljs-keyword">var</span> _0x4660af=-<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">0xb9</span>))+-<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">0x107</span>))+-<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">0x119</span>))*-<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">0xc2</span>))+-<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">0x146</span>))*-<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">0xc0</span>))+<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">0xdc</span>))+-<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">0xdf</span>))+-<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">0x143</span>));<span class="hljs-keyword">if</span>(_0x4660af===_0x51308a)<span class="hljs-keyword">break</span>;<span class="hljs-keyword">else</span> _0x1d77f6[<span class="hljs-string">&#x27;push&#x27;</span>](_0x1d77f6[<span class="hljs-string">&#x27;shift&#x27;</span>]());&#125;<span class="hljs-keyword">catch</span>(_0x2f1ee8)&#123;_0x1d77f6[<span class="hljs-string">&#x27;push&#x27;</span>](_0x1d77f6[<span class="hljs-string">&#x27;shift&#x27;</span>]());&#125;&#125;&#125;(a7_0x2b5d,<span class="hljs-number">0xd7927</span>),!<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x546611=a7_0x3a83,_0x427b16=&#123;&#125;;_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x150</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x5c0ec9</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x5c0ec9</span>();&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x11c</span>)]=<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x128</span>),_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xf6</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x92fcb9,_0x29633b</span>)&#123;<span class="hljs-keyword">return</span> _0x92fcb9!==_0x29633b;&#125;,_0x427b16[<span class="hljs-string">&#x27;pBbbx&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x2c7f5c,_0x32753a,_0x14eb34</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x2c7f5c</span>(_0x32753a,_0x14eb34);&#125;,_0x427b16[<span class="hljs-string">&#x27;TKGWS&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x5a4f18,_0x5ee266</span>)&#123;<span class="hljs-keyword">return</span> _0x5a4f18==_0x5ee266;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x120</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x41eb08,_0x157a47</span>)&#123;<span class="hljs-keyword">return</span> _0x41eb08===_0x157a47;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xbf</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0xcea61,_0x4c77e7</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0xcea61</span>(_0x4c77e7);&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x14e</span>)]=<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x140</span>),_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xc6</span>)]=<span class="hljs-string">&#x27;error&#x27;</span>,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xdd</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x4f45d1,_0x4c64ce</span>)&#123;<span class="hljs-keyword">return</span> _0x4f45d1&lt;_0x4c64ce;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x159</span>)]=<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x12e</span>),_0x427b16[<span class="hljs-string">&#x27;QSePF&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0xb1b641,_0x40a5a3</span>)&#123;<span class="hljs-keyword">return</span> _0xb1b641&lt;&lt;_0x40a5a3;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xbe</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x88ae7b,_0x3c64b0</span>)&#123;<span class="hljs-keyword">return</span> _0x88ae7b&amp;_0x3c64b0;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x144</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x168a5f,_0x1d2ba2</span>)&#123;<span class="hljs-keyword">return</span> _0x168a5f&lt;&lt;_0x1d2ba2;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xec</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x3ceeb3,_0x27b709</span>)&#123;<span class="hljs-keyword">return</span> _0x3ceeb3&gt;&gt;_0x27b709;&#125;,_0x427b16[<span class="hljs-string">&#x27;wsLWY&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x4bb35b,_0xa9bde0</span>)&#123;<span class="hljs-keyword">return</span> _0x4bb35b&amp;_0xa9bde0;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x102</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x99e554,_0x5513a0</span>)&#123;<span class="hljs-keyword">return</span> _0x99e554&gt;&gt;_0x5513a0;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x154</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x2d2d8a,_0x1e819c</span>)&#123;<span class="hljs-keyword">return</span> _0x2d2d8a+_0x1e819c;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x101</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0xd1f0c9,_0x4fa0bc</span>)&#123;<span class="hljs-keyword">return</span> _0xd1f0c9|_0x4fa0bc;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xf3</span>)]=<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x109</span>),_0x427b16[<span class="hljs-string">&#x27;TXBOE&#x27;</span>]=<span class="hljs-string">&#x27;sdNtS&#x27;</span>,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x11d</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x377f28,_0x13646b</span>)&#123;<span class="hljs-keyword">return</span> _0x377f28&amp;_0x13646b;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x127</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x238d92,_0x429935</span>)&#123;<span class="hljs-keyword">return</span> _0x238d92^_0x429935;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x126</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x2593d0,_0x9618bc</span>)&#123;<span class="hljs-keyword">return</span> _0x2593d0+_0x9618bc;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xfa</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x1081a5,_0x1342ff</span>)&#123;<span class="hljs-keyword">return</span> _0x1081a5+_0x1342ff;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x131</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x363fc1,_0x27a419</span>)&#123;<span class="hljs-keyword">return</span> _0x363fc1^_0x27a419;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x116</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x5ad2d5,_0x5298af</span>)&#123;<span class="hljs-keyword">return</span> _0x5ad2d5^_0x5298af;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x13e</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0xbea186,_0xd54dfd</span>)&#123;<span class="hljs-keyword">return</span> _0xbea186^_0xd54dfd;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x111</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x1d3aee,_0x8cfe8f,_0x7b9165</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x1d3aee</span>(_0x8cfe8f,_0x7b9165);&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xf4</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x4c1a5e,_0x1e404f,_0x3c16b0,_0x258210</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x4c1a5e</span>(_0x1e404f,_0x3c16b0,_0x258210);&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xc3</span>)]=<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xc4</span>),_0x427b16[<span class="hljs-string">&#x27;TwpwF&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x29dce7,_0x56b21b</span>)&#123;<span class="hljs-keyword">return</span> _0x29dce7==_0x56b21b;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x14f</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x17b6bd,_0x3f4db8</span>)&#123;<span class="hljs-keyword">return</span> _0x17b6bd==_0x3f4db8;&#125;,_0x427b16[<span class="hljs-string">&#x27;nlNzw&#x27;</span>]=<span class="hljs-string">&#x27;input\x20is\x20null!&#x27;</span>,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x106</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x553213,_0x2038e8</span>)&#123;<span class="hljs-keyword">return</span> _0x553213+_0x2038e8;&#125;,_0x427b16[<span class="hljs-string">&#x27;dcpRD&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x4ed331,_0x493899</span>)&#123;<span class="hljs-keyword">return</span> _0x4ed331&lt;=_0x493899;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xee</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x3f2126,_0x2e2718</span>)&#123;<span class="hljs-keyword">return</span> _0x3f2126&amp;_0x2e2718;&#125;,_0x427b16[<span class="hljs-string">&#x27;HZXuv&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0xb22ba1,_0x14a139</span>)&#123;<span class="hljs-keyword">return</span> _0xb22ba1&gt;&gt;_0x14a139;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x13a</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x46190f,_0x28a41a</span>)&#123;<span class="hljs-keyword">return</span> _0x46190f&gt;=_0x28a41a;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x108</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x4b3ddc,_0x2102ae</span>)&#123;<span class="hljs-keyword">return</span> _0x4b3ddc&amp;_0x2102ae;&#125;,_0x427b16[<span class="hljs-string">&#x27;nFXTL&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x526916,_0x59cbf3</span>)&#123;<span class="hljs-keyword">return</span> _0x526916+_0x59cbf3;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x142</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x4ec7c2,_0x33356e</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x4ec7c2</span>(_0x33356e);&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xd7</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x1f9046,_0x208492</span>)&#123;<span class="hljs-keyword">return</span> _0x1f9046!=_0x208492;&#125;,_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x139</span>)]=<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xce</span>),_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xfd</span>)]=<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x156</span>),_0x427b16[<span class="hljs-string">&#x27;DPmAu&#x27;</span>]=<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xe2</span>),_0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xc8</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x4ec49c,_0x5e0f42</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x4ec49c</span>(_0x5e0f42);&#125;;<span class="hljs-keyword">var</span> _0x40bb32=_0x427b16,_0x1517a0=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x1afcbb=_0x546611,_0x43bcec=&#123;&#125;;_0x43bcec[<span class="hljs-title function_">_0x1afcbb</span>(<span class="hljs-number">0x147</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0xaddaf,_0x3790ac</span>)&#123;<span class="hljs-keyword">return</span> _0xaddaf&lt;_0x3790ac;&#125;;<span class="hljs-keyword">var</span> _0x3d2cfb=_0x43bcec,_0x102d22=!![];<span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">_0x29d538,_0x9284da</span>)&#123;<span class="hljs-keyword">var</span> _0x28907a=_0x1afcbb,_0x2f4712=&#123;&#125;;_0x2f4712[<span class="hljs-title function_">_0x28907a</span>(<span class="hljs-number">0x133</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x13fa79,_0xd2a276</span>)&#123;<span class="hljs-keyword">var</span> _0x3ea9e5=_0x28907a;<span class="hljs-keyword">return</span> _0x3d2cfb[<span class="hljs-title function_">_0x3ea9e5</span>(<span class="hljs-number">0x147</span>)](_0x13fa79,_0xd2a276);&#125;,_0x2f4712[<span class="hljs-string">&#x27;MGeua&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x138668,_0x43a0ae</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x138668</span>(_0x43a0ae);&#125;,_0x2f4712[<span class="hljs-title function_">_0x28907a</span>(<span class="hljs-number">0x14c</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x54e219,_0x34475b</span>)&#123;<span class="hljs-keyword">return</span> _0x54e219!==_0x34475b;&#125;;<span class="hljs-keyword">var</span> _0x21d50e=_0x2f4712,_0x5acb03=_0x102d22?<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x1f919a=_0x28907a;<span class="hljs-keyword">if</span>(_0x9284da)&#123;<span class="hljs-keyword">if</span>(_0x21d50e[<span class="hljs-title function_">_0x1f919a</span>(<span class="hljs-number">0x14c</span>)](<span class="hljs-string">&#x27;ehKcO&#x27;</span>,<span class="hljs-title function_">_0x1f919a</span>(<span class="hljs-number">0x129</span>)))&#123;<span class="hljs-keyword">var</span> _0x3a5c19=_0x9284da[<span class="hljs-title function_">_0x1f919a</span>(<span class="hljs-number">0x10f</span>)](_0x29d538,<span class="hljs-variable language_">arguments</span>);<span class="hljs-keyword">return</span> _0x9284da=<span class="hljs-literal">null</span>,_0x3a5c19;&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> _0x21fee4=<span class="hljs-string">&#x27;&#x27;</span>,_0x1c59d7=<span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x4dbfd8</span>(_0x89d26b),_0x15a39b=_0x1c59d7[<span class="hljs-string">&#x27;byteLength&#x27;</span>],_0x40158c=<span class="hljs-number">0x0</span>;_0x21d50e[<span class="hljs-title function_">_0x1f919a</span>(<span class="hljs-number">0x133</span>)](_0x40158c,_0x15a39b);_0x40158c++)_0x21fee4+=_0x5c55d2[<span class="hljs-title function_">_0x1f919a</span>(<span class="hljs-number">0xe5</span>)](_0x1c59d7[_0x40158c]);<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x11d5f2</span>(_0x21d50e[<span class="hljs-string">&#x27;MGeua&#x27;</span>](_0x578155,_0x21fee4));&#125;&#125;&#125;:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;&#125;;<span class="hljs-keyword">return</span> _0x102d22=![],_0x5acb03;&#125;;&#125;(),_0x1262c3=<span class="hljs-title function_">_0x1517a0</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x11a7e7=_0x546611,_0x42d846=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x3d1bc5=a7_0x3a83,_0x2f2904=_0x42d846[<span class="hljs-string">&#x27;constructor&#x27;</span>](<span class="hljs-title function_">_0x3d1bc5</span>(<span class="hljs-number">0x15b</span>))()[<span class="hljs-title function_">_0x3d1bc5</span>(<span class="hljs-number">0x130</span>)](<span class="hljs-title function_">_0x3d1bc5</span>(<span class="hljs-number">0xba</span>));<span class="hljs-keyword">return</span>!_0x2f2904[<span class="hljs-title function_">_0x3d1bc5</span>(<span class="hljs-number">0xf1</span>)](_0x1262c3);&#125;;<span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x11a7e7</span>(<span class="hljs-number">0x150</span>)](_0x42d846);&#125;);_0x40bb32[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x150</span>)](_0x1262c3);<span class="hljs-keyword">var</span> _0x5ca7b3=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x4c7191=_0x546611,_0xf9a214=&#123;&#125;;_0xf9a214[<span class="hljs-title function_">_0x4c7191</span>(<span class="hljs-number">0x158</span>)]=_0x40bb32[<span class="hljs-title function_">_0x4c7191</span>(<span class="hljs-number">0x11c</span>)];<span class="hljs-keyword">var</span> _0x1909f2=_0xf9a214;<span class="hljs-keyword">if</span>(<span class="hljs-title function_">_0x4c7191</span>(<span class="hljs-number">0xf2</span>)===<span class="hljs-title function_">_0x4c7191</span>(<span class="hljs-number">0xf2</span>))&#123;<span class="hljs-keyword">var</span> _0x112dd3=!![];<span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">_0x4d2064,_0x4b1ca4</span>)&#123;<span class="hljs-keyword">var</span> _0x497ea3=_0x112dd3?<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x524817=a7_0x3a83;<span class="hljs-keyword">if</span>(_0x4b1ca4)&#123;<span class="hljs-keyword">if</span>(_0x1909f2[<span class="hljs-title function_">_0x524817</span>(<span class="hljs-number">0x158</span>)]===<span class="hljs-title function_">_0x524817</span>(<span class="hljs-number">0x128</span>))&#123;<span class="hljs-keyword">var</span> _0x3868b8=_0x4b1ca4[<span class="hljs-title function_">_0x524817</span>(<span class="hljs-number">0x10f</span>)](_0x4d2064,<span class="hljs-variable language_">arguments</span>);<span class="hljs-keyword">return</span> _0x4b1ca4=<span class="hljs-literal">null</span>,_0x3868b8;&#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span>![];&#125;&#125;:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;&#125;;<span class="hljs-keyword">return</span> _0x112dd3=![],_0x497ea3;&#125;;&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">if</span>(_0x3e37b0)&#123;<span class="hljs-keyword">var</span> _0x547b25=_0x4a9b2e[<span class="hljs-title function_">_0x4c7191</span>(<span class="hljs-number">0x10f</span>)](_0x40474f,<span class="hljs-variable language_">arguments</span>);<span class="hljs-keyword">return</span> _0x322157=<span class="hljs-literal">null</span>,_0x547b25;&#125;&#125;&#125;();(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x48916e=_0x546611,_0x4b315e=&#123;&#125;;_0x4b315e[<span class="hljs-string">&#x27;EUnpx&#x27;</span>]=<span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">0xe3</span>),_0x4b315e[<span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">0x157</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x41fe39,_0xe5c924</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x41fe39</span>(_0xe5c924);&#125;,_0x4b315e[<span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">0xfe</span>)]=<span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">0x12c</span>);<span class="hljs-keyword">var</span> _0x2697be=_0x4b315e;<span class="hljs-keyword">if</span>(_0x40bb32[<span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">0xf6</span>)](<span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">0x122</span>),<span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">0x122</span>)))&#123;<span class="hljs-keyword">var</span> _0xb093be=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x5c91f5=_0x48916e,_0x418798=_0xb093be[<span class="hljs-title function_">_0x5c91f5</span>(<span class="hljs-number">0x130</span>)](<span class="hljs-title function_">_0x5c91f5</span>(<span class="hljs-number">0x15b</span>))()[<span class="hljs-string">&#x27;constructor&#x27;</span>](<span class="hljs-title function_">_0x5c91f5</span>(<span class="hljs-number">0xba</span>));<span class="hljs-keyword">return</span>!_0x418798[<span class="hljs-string">&#x27;test&#x27;</span>](_0x444c3b);&#125;;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0xb093be</span>();&#125;<span class="hljs-keyword">else</span> _0x40bb32[<span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">0xef</span>)](_0x5ca7b3,<span class="hljs-variable language_">this</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x2d35c6=_0x48916e;<span class="hljs-keyword">if</span>(<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">0xf5</span>)===<span class="hljs-string">&#x27;pbWmJ&#x27;</span>)&#123;<span class="hljs-keyword">var</span> _0x18fc2a=<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(_0x2697be[<span class="hljs-string">&#x27;EUnpx&#x27;</span>]),_0x371d30=<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">0xbc</span>),<span class="hljs-string">&#x27;i&#x27;</span>),_0x16399b=_0x2697be[<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">0x157</span>)](_0xdc5479,<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">0x14a</span>));<span class="hljs-keyword">if</span>(!_0x18fc2a[<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">0xf1</span>)](_0x16399b+<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">0x121</span>))||!_0x371d30[<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">0xf1</span>)](_0x16399b+<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">0xde</span>)))&#123;<span class="hljs-keyword">if</span>(<span class="hljs-string">&#x27;OIoMC&#x27;</span>===_0x2697be[<span class="hljs-string">&#x27;tecjo&#x27;</span>])_0x2697be[<span class="hljs-string">&#x27;stHXK&#x27;</span>](_0x16399b,<span class="hljs-string">&#x27;0&#x27;</span>);<span class="hljs-keyword">else</span>&#123;_0x207c27=_0x35b870[_0x2754d2[<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">0xd2</span>)]-<span class="hljs-number">0x1</span>];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> _0x2d8089=<span class="hljs-number">0x0</span>;_0x2d8089&lt;_0x55aba6;_0x2d8089++)_0x35fedd[<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">0x135</span>)]();&#125;&#125;<span class="hljs-keyword">else</span> <span class="hljs-title function_">_0xdc5479</span>();&#125;<span class="hljs-keyword">else</span> <span class="hljs-variable language_">this</span>[<span class="hljs-string">&#x27;mode&#x27;</span>]=<span class="hljs-number">0x1</span>,<span class="hljs-variable language_">this</span>[<span class="hljs-string">&#x27;sk&#x27;</span>]=<span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x34d3db</span>(<span class="hljs-number">0x20</span>),<span class="hljs-variable language_">this</span>[<span class="hljs-string">&#x27;isPadding&#x27;</span>]=!<span class="hljs-number">0x0</span>;&#125;)();&#125;());<span class="hljs-keyword">var</span> _0x934239=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x521970=_0x546611,_0x12b4da=&#123;&#125;;_0x12b4da[<span class="hljs-title function_">_0x521970</span>(<span class="hljs-number">0xdb</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x89dee9,_0x37221e</span>)&#123;<span class="hljs-keyword">return</span> _0x89dee9+_0x37221e;&#125;,_0x12b4da[<span class="hljs-string">&#x27;diELP&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0xeaaa8e,_0x26ac1a</span>)&#123;<span class="hljs-keyword">return</span> _0xeaaa8e!==_0x26ac1a;&#125;,_0x12b4da[<span class="hljs-title function_">_0x521970</span>(<span class="hljs-number">0x15a</span>)]=<span class="hljs-title function_">_0x521970</span>(<span class="hljs-number">0xcc</span>);<span class="hljs-keyword">var</span> _0x21deee=_0x12b4da,_0x1aa656=!![];<span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">_0x531fc4,_0xb9110d</span>)&#123;<span class="hljs-keyword">var</span> _0x15fbc1=_0x1aa656?<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x50a799=a7_0x3a83,_0x197851=&#123;&#125;;_0x197851[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0x117</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x3ac04c,_0x4ef2ed</span>)&#123;<span class="hljs-keyword">var</span> _0x17e8b0=_0x50a799;<span class="hljs-keyword">return</span> _0x21deee[<span class="hljs-title function_">_0x17e8b0</span>(<span class="hljs-number">0xdb</span>)](_0x3ac04c,_0x4ef2ed);&#125;,_0x197851[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0x10e</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x38919b,_0x5caf21</span>)&#123;<span class="hljs-keyword">return</span> _0x38919b+_0x5caf21;&#125;;<span class="hljs-keyword">var</span> _0x15b92f=_0x197851;<span class="hljs-keyword">if</span>(_0x21deee[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0x145</span>)](<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0xd1</span>),<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0xd1</span>)))&#123;<span class="hljs-keyword">var</span> _0x1f1fad=[],_0x4721f8=[];_0x1f1fad[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0xe7</span>)](_0x387a90[_0x48a3ab+<span class="hljs-number">0x0</span>],_0x56c8b1[_0x15b92f[<span class="hljs-string">&#x27;rRXqW&#x27;</span>](_0x2e3b2f,<span class="hljs-number">0x1</span>)],_0x800c65[_0x4bc50d+<span class="hljs-number">0x2</span>],_0x2b1939[_0x1cb6ac+<span class="hljs-number">0x3</span>],_0x5b854f[_0x48659c+<span class="hljs-number">0x4</span>],_0x4d5397[_0x5167e3+<span class="hljs-number">0x5</span>],_0x4de6d4[_0xe5700a+<span class="hljs-number">0x6</span>],_0x21bae4[_0xae6d74+<span class="hljs-number">0x7</span>],_0x1b889c[_0x4eaf09+<span class="hljs-number">0x8</span>],_0x4db3ba[_0x2488a3+<span class="hljs-number">0x9</span>],_0x3d6e4c[_0x457272+<span class="hljs-number">0xa</span>],_0x5cea8c[_0x33c07e+<span class="hljs-number">0xb</span>],_0x235497[_0x1708ae+<span class="hljs-number">0xc</span>],_0x3aa9bf[_0x5d27df+<span class="hljs-number">0xd</span>],_0x5014f2[_0x547699+<span class="hljs-number">0xe</span>],_0x310581[_0x15b92f[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0x10e</span>)](_0x2579f8,<span class="hljs-number">0xf</span>)]),<span class="hljs-title function_">_0x3db85a</span>(_0x171c95[<span class="hljs-string">&#x27;sk&#x27;</span>],_0x1f1fad,_0x4721f8),_0x34eaf2=_0x1e3952[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0xe0</span>)](_0x4721f8);&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">if</span>(_0xb9110d)&#123;<span class="hljs-keyword">if</span>(_0x21deee[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0x15a</span>)]!==<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0xcc</span>))&#123;<span class="hljs-keyword">var</span> _0x50ae1c=_0x3fbc52[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0x130</span>)][<span class="hljs-string">&#x27;prototype&#x27;</span>][<span class="hljs-string">&#x27;bind&#x27;</span>](_0x44a4fb),_0x41ab1d=_0x213656[_0x2d2f3f],_0x10ea5b=_0x304503[_0x41ab1d]||_0x50ae1c;_0x50ae1c[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0x132</span>)]=_0x5a031e[<span class="hljs-string">&#x27;bind&#x27;</span>](_0x1b5a3f),_0x50ae1c[<span class="hljs-string">&#x27;toString&#x27;</span>]=_0x10ea5b[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0xf0</span>)][<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0xeb</span>)](_0x10ea5b),_0x12a2c5[_0x41ab1d]=_0x50ae1c;&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">var</span> _0x2c59a7=_0xb9110d[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">0x10f</span>)](_0x531fc4,<span class="hljs-variable language_">arguments</span>);<span class="hljs-keyword">return</span> _0xb9110d=<span class="hljs-literal">null</span>,_0x2c59a7;&#125;&#125;&#125;&#125;:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;&#125;;<span class="hljs-keyword">return</span> _0x1aa656=![],_0x15fbc1;&#125;;&#125;(),_0x1dcc3f=<span class="hljs-title function_">_0x934239</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x555550=_0x546611,_0x2c69d5=&#123;&#125;;_0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x149</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x5ea69c,_0x459b8a</span>)&#123;<span class="hljs-keyword">var</span> _0x268b2f=_0x555550;<span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x268b2f</span>(<span class="hljs-number">0x137</span>)](_0x5ea69c,_0x459b8a);&#125;,_0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xd9</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x45c474,_0x5114ce,_0x3fc01c</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x45c474</span>(_0x5114ce,_0x3fc01c);&#125;,_0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x118</span>)]=<span class="hljs-string">&#x27;11HDESaAhiHHugDz&#x27;</span>,_0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x11e</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x396996,_0x1cd67c,_0x1ef3c7</span>)&#123;<span class="hljs-keyword">var</span> _0x474d80=_0x555550;<span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x474d80</span>(<span class="hljs-number">0xef</span>)](_0x396996,_0x1cd67c,_0x1ef3c7);&#125;,_0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x113</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x28a204,_0x31537c</span>)&#123;<span class="hljs-keyword">return</span> _0x28a204+_0x31537c;&#125;,_0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xc1</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x3d7eaf,_0x4f951b</span>)&#123;<span class="hljs-keyword">return</span> _0x3d7eaf+_0x4f951b;&#125;,_0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xda</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x16a4c3,_0x29de33</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x16a4c3</span>(_0x29de33);&#125;;<span class="hljs-keyword">var</span> _0x20df7e=_0x2c69d5,_0x573eca;<span class="hljs-keyword">try</span>&#123;<span class="hljs-keyword">if</span>(_0x40bb32[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x120</span>)](<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xcb</span>),<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xbd</span>)))&#123;<span class="hljs-keyword">var</span> _0x392df6=<span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x3f54d0</span>();<span class="hljs-keyword">if</span>(_0x392df6[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x104</span>)]=!<span class="hljs-number">0x0</span>,_0x392df6[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x105</span>)]=<span class="hljs-number">0x0</span>,<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>!==_0xc76ff9)<span class="hljs-keyword">var</span> _0x1b1764=<span class="hljs-title function_">_0x138795</span>(_0x2eba03);<span class="hljs-keyword">else</span> _0x1b1764=<span class="hljs-title function_">_0x5a371a</span>(_0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x118</span>)]);<span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">_0x51bb89,_0x2a0af8</span>)&#123;<span class="hljs-keyword">var</span> _0x2393ca=_0x555550;<span class="hljs-literal">null</span>==_0x51bb89&amp;&amp;<span class="hljs-title function_">_0x296202</span>(<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">0xca</span>)),<span class="hljs-literal">null</span>!=_0x2a0af8&amp;&amp;_0x20df7e[<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">0x149</span>)](<span class="hljs-number">0x10</span>,_0x2a0af8[<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">0xd2</span>)])||<span class="hljs-title function_">_0x522ba7</span>(<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">0xce</span>)),_0x51bb89[<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">0x105</span>)]=<span class="hljs-number">0x0</span>,_0x20df7e[<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">0xd9</span>)](_0x1bac0a,_0x51bb89[<span class="hljs-string">&#x27;sk&#x27;</span>],_0x2a0af8),_0x51bb89[<span class="hljs-string">&#x27;sk&#x27;</span>]=_0x51bb89[<span class="hljs-string">&#x27;sk&#x27;</span>][<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">0x10d</span>)]();&#125;(_0x392df6,_0x1b1764),<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x376f68</span>)&#123;<span class="hljs-keyword">var</span> _0x1b95b9=_0x555550;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> _0x5c25ec=<span class="hljs-string">&#x27;&#x27;</span>,_0x327654=<span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x532d8c</span>(_0x376f68),_0x1039fe=_0x327654[<span class="hljs-title function_">_0x1b95b9</span>(<span class="hljs-number">0x12b</span>)],_0x216ff3=<span class="hljs-number">0x0</span>;_0x216ff3&lt;_0x1039fe;_0x216ff3++)_0x5c25ec+=_0x4f64b5[<span class="hljs-title function_">_0x1b95b9</span>(<span class="hljs-number">0xe5</span>)](_0x327654[_0x216ff3]);<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0xeefd2c</span>(<span class="hljs-title function_">_0x1bd4c2</span>(_0x5c25ec));&#125;(<span class="hljs-title function_">_0x279a35</span>(_0x392df6,_0x40cdcd[<span class="hljs-string">&#x27;toByteArray&#x27;</span>](_0x4e1833)));&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">var</span> _0x3ccfb0=_0x40bb32[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xbf</span>)](<span class="hljs-title class_">Function</span>,<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xd3</span>)+<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x124</span>)+<span class="hljs-string">&#x27;);&#x27;</span>);_0x573eca=_0x40bb32[<span class="hljs-string">&#x27;vbcNd&#x27;</span>](_0x3ccfb0);&#125;&#125;<span class="hljs-keyword">catch</span>(_0x177925)&#123;<span class="hljs-keyword">if</span>(<span class="hljs-string">&#x27;mxCkC&#x27;</span>!==_0x40bb32[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x14e</span>)])<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x52284e</span>(_0x3ae3da[<span class="hljs-string">&#x27;message&#x27;</span>]),<span class="hljs-literal">null</span>;<span class="hljs-keyword">else</span> _0x573eca=<span class="hljs-variable language_">window</span>;&#125;<span class="hljs-keyword">var</span> _0x18cbaa=_0x573eca[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x13d</span>)]=_0x573eca[<span class="hljs-string">&#x27;console&#x27;</span>]||&#123;&#125;,_0x1d8ea7=[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x11f</span>),<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xe6</span>),<span class="hljs-string">&#x27;info&#x27;</span>,_0x40bb32[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xc6</span>)],<span class="hljs-string">&#x27;exception&#x27;</span>,<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xcd</span>),<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x11a</span>)];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> _0x503073=<span class="hljs-number">0x0</span>;_0x40bb32[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xdd</span>)](_0x503073,_0x1d8ea7[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xd2</span>)]);_0x503073++)&#123;<span class="hljs-keyword">if</span>(_0x40bb32[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x120</span>)](_0x40bb32[<span class="hljs-string">&#x27;aIThM&#x27;</span>],<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x12e</span>)))&#123;<span class="hljs-keyword">var</span> _0x40372a=_0x934239[<span class="hljs-string">&#x27;constructor&#x27;</span>][<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xc5</span>)][<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xeb</span>)](_0x934239),_0x24a860=_0x1d8ea7[_0x503073],_0x2b958e=_0x18cbaa[_0x24a860]||_0x40372a;_0x40372a[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x132</span>)]=_0x934239[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xeb</span>)](_0x934239),_0x40372a[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xf0</span>)]=_0x2b958e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xf0</span>)][<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xeb</span>)](_0x2b958e),_0x18cbaa[_0x24a860]=_0x40372a;&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">for</span>(_0xa95f37=<span class="hljs-number">0x0</span>,_0x35c5b1=<span class="hljs-keyword">new</span> <span class="hljs-title function_">_0xe6a0c8</span>(<span class="hljs-number">0x24</span>),_0x56c817[<span class="hljs-number">0x0</span>]=_0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x11e</span>)](_0x394f50,_0xc0501,<span class="hljs-number">0x0</span>),_0x1b4572[<span class="hljs-number">0x1</span>]=<span class="hljs-title function_">_0x805fb</span>(_0x562c29,<span class="hljs-number">0x4</span>),_0x101001[<span class="hljs-number">0x2</span>]=<span class="hljs-title function_">_0xcb191d</span>(_0x559f75,<span class="hljs-number">0x8</span>),_0x54c2cf[<span class="hljs-number">0x3</span>]=<span class="hljs-title function_">_0x32da34</span>(_0x22e3ae,<span class="hljs-number">0xc</span>);_0x50e3a4&lt;<span class="hljs-number">0x20</span>;)_0x39abd7[_0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x113</span>)](_0x1ca163,<span class="hljs-number">0x4</span>)]=(_0x1e9c30=_0x34cd7b[_0x377bf8],_0x564863=_0x659d93[_0x3546df+<span class="hljs-number">0x1</span>],_0x383f30=_0x21c533[_0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xc1</span>)](_0x3f282d,<span class="hljs-number">0x2</span>)],_0x308eee=_0xbd5a2f[_0x4a8578+<span class="hljs-number">0x3</span>],_0x4dfcc0=_0xc1ddc5[_0x180f66],_0x123758=<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>,_0x42dbca=<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>,_0x4abc7a=<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>,_0xadb805=<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>,_0x1e9c30^(_0x123758=_0x564863^_0x383f30^_0x308eee^_0x4dfcc0,_0x4abc7a=<span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x1073b6</span>(<span class="hljs-number">0x4</span>),_0xadb805=<span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x591930</span>(<span class="hljs-number">0x4</span>),<span class="hljs-title function_">_0x152e78</span>(_0x123758,_0x4abc7a,<span class="hljs-number">0x0</span>),_0xadb805[<span class="hljs-number">0x0</span>]=<span class="hljs-title function_">_0x46c43f</span>(_0x4abc7a[<span class="hljs-number">0x0</span>]),_0xadb805[<span class="hljs-number">0x1</span>]=_0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xda</span>)](_0x1dbd57,_0x4abc7a[<span class="hljs-number">0x1</span>]),_0xadb805[<span class="hljs-number">0x3</span>]=_0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0xda</span>)](_0x35402b,_0x4abc7a[<span class="hljs-number">0x2</span>]),_0xadb805[<span class="hljs-number">0x2</span>]=<span class="hljs-title function_">_0x201e3c</span>(_0x4abc7a[<span class="hljs-number">0x3</span>]),(_0x42dbca=<span class="hljs-title function_">_0x4ef04c</span>(_0xadb805,<span class="hljs-number">0x0</span>))^_0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">0x11e</span>)](_0x533f58,_0x42dbca,<span class="hljs-number">0x2</span>)^<span class="hljs-title function_">_0x52eff3</span>(_0x42dbca,<span class="hljs-number">0xa</span>)^<span class="hljs-title function_">_0x3a0748</span>(_0x42dbca,<span class="hljs-number">0x12</span>)^<span class="hljs-title function_">_0x3ce0ac</span>(_0x42dbca,<span class="hljs-number">0x18</span>))),_0x37f3a2++;<span class="hljs-keyword">var</span> _0x1e9c30,_0x564863,_0x383f30,_0x308eee,_0x4dfcc0,_0x123758,_0x42dbca,_0x4abc7a,_0xadb805;<span class="hljs-title function_">_0x1e3a22</span>(_0x490453[<span class="hljs-number">0x23</span>],_0x1ef8e6,<span class="hljs-number">0x0</span>),<span class="hljs-title function_">_0x56712e</span>(_0x530a18[<span class="hljs-number">0x22</span>],_0x19cda8,<span class="hljs-number">0x4</span>),<span class="hljs-title function_">_0xb9f3c6</span>(_0x4d9783[<span class="hljs-number">0x21</span>],_0x54710f,<span class="hljs-number">0x8</span>),<span class="hljs-title function_">_0x238c35</span>(_0x377f1d[<span class="hljs-number">0x20</span>],_0x4d32a9,<span class="hljs-number">0xc</span>);&#125;&#125;&#125;);_0x40bb32[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0x150</span>)](_0x1dcc3f);<span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x123d36</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x9233f2=_0x546611;<span class="hljs-variable language_">this</span>[<span class="hljs-title function_">_0x9233f2</span>(<span class="hljs-number">0x105</span>)]=<span class="hljs-number">0x1</span>,<span class="hljs-variable language_">this</span>[<span class="hljs-string">&#x27;sk&#x27;</span>]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">0x20</span>),<span class="hljs-variable language_">this</span>[<span class="hljs-title function_">_0x9233f2</span>(<span class="hljs-number">0x104</span>)]=!<span class="hljs-number">0x0</span>;&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x2916a0</span>(<span class="hljs-params">_0x5557e9,_0x2a02f6</span>)&#123;<span class="hljs-keyword">var</span> _0x5c1533=_0x546611;<span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x5c1533</span>(<span class="hljs-number">0xd0</span>)](_0x40bb32[<span class="hljs-title function_">_0x5c1533</span>(<span class="hljs-number">0xbe</span>)](<span class="hljs-number">0xff</span>,_0x5557e9[_0x2a02f6]),<span class="hljs-number">0x18</span>)|(<span class="hljs-number">0xff</span>&amp;_0x5557e9[_0x2a02f6+<span class="hljs-number">0x1</span>])&lt;&lt;<span class="hljs-number">0x10</span>|_0x40bb32[<span class="hljs-title function_">_0x5c1533</span>(<span class="hljs-number">0x144</span>)](<span class="hljs-number">0xff</span>&amp;_0x5557e9[_0x2a02f6+<span class="hljs-number">0x2</span>],<span class="hljs-number">0x8</span>)|<span class="hljs-number">0xff</span>&amp;_0x5557e9[_0x2a02f6+<span class="hljs-number">0x3</span>];&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x5b65b6</span>(<span class="hljs-params">_0x4f3580,_0x241e6a,_0x5bae00</span>)&#123;<span class="hljs-keyword">var</span> _0x43d103=_0x546611;_0x241e6a[_0x5bae00]=<span class="hljs-number">0xff</span>&amp;_0x40bb32[<span class="hljs-string">&#x27;ujsRG&#x27;</span>](_0x4f3580,<span class="hljs-number">0x18</span>),_0x241e6a[_0x5bae00+<span class="hljs-number">0x1</span>]=_0x40bb32[<span class="hljs-title function_">_0x43d103</span>(<span class="hljs-number">0xff</span>)](<span class="hljs-number">0xff</span>,_0x4f3580&gt;&gt;<span class="hljs-number">0x10</span>),_0x241e6a[_0x5bae00+<span class="hljs-number">0x2</span>]=<span class="hljs-number">0xff</span>&amp;_0x40bb32[<span class="hljs-title function_">_0x43d103</span>(<span class="hljs-number">0x102</span>)](_0x4f3580,<span class="hljs-number">0x8</span>),_0x241e6a[_0x40bb32[<span class="hljs-title function_">_0x43d103</span>(<span class="hljs-number">0x154</span>)](_0x5bae00,<span class="hljs-number">0x3</span>)]=_0x40bb32[<span class="hljs-string">&#x27;wsLWY&#x27;</span>](<span class="hljs-number">0xff</span>,_0x4f3580);&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x4bb945</span>(<span class="hljs-params">_0x40e48f,_0x179dd7</span>)&#123;<span class="hljs-keyword">var</span> _0x4ae478=_0x546611,_0x254cee=&#123;&#125;;_0x254cee[<span class="hljs-title function_">_0x4ae478</span>(<span class="hljs-number">0x14d</span>)]=<span class="hljs-title function_">_0x4ae478</span>(<span class="hljs-number">0xe1</span>);<span class="hljs-keyword">var</span> _0x2f8b77=_0x254cee;<span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x4ae478</span>(<span class="hljs-number">0x101</span>)](<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x132e5b,_0xf75d80</span>)&#123;<span class="hljs-keyword">var</span> _0x4f37a8=_0x4ae478;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x4f37a8</span>(<span class="hljs-number">0xe1</span>)===_0x2f8b77[<span class="hljs-title function_">_0x4f37a8</span>(<span class="hljs-number">0x14d</span>)]?_0x132e5b&lt;&lt;<span class="hljs-attr">_0xf75d80</span>:_0x43d6be[<span class="hljs-number">0xff</span>&amp;_0x4b747a];&#125;(_0x40e48f,_0x179dd7),_0x40e48f&gt;&gt;<span class="hljs-number">0x20</span>-_0x179dd7);&#125;<span class="hljs-keyword">var</span> _0x3252b4=[<span class="hljs-number">0xd6</span>,<span class="hljs-number">0x91</span>,<span class="hljs-number">0xe9</span>,<span class="hljs-number">0xfe</span>,<span class="hljs-number">0xcc</span>,<span class="hljs-number">0xe1</span>,<span class="hljs-number">0x3d</span>,<span class="hljs-number">0xb7</span>,<span class="hljs-number">0x16</span>,<span class="hljs-number">0xb6</span>,<span class="hljs-number">0x14</span>,<span class="hljs-number">0xc2</span>,<span class="hljs-number">0x28</span>,<span class="hljs-number">0xfb</span>,<span class="hljs-number">0x2c</span>,<span class="hljs-number">0x5</span>,<span class="hljs-number">0x2b</span>,<span class="hljs-number">0x67</span>,<span class="hljs-number">0x9a</span>,<span class="hljs-number">0x76</span>,<span class="hljs-number">0x2a</span>,<span class="hljs-number">0xbe</span>,<span class="hljs-number">0x4</span>,<span class="hljs-number">0xc3</span>,<span class="hljs-number">0xaa</span>,<span class="hljs-number">0x44</span>,<span class="hljs-number">0x13</span>,<span class="hljs-number">0x26</span>,<span class="hljs-number">0x49</span>,<span class="hljs-number">0x86</span>,<span class="hljs-number">0x6</span>,<span class="hljs-number">0x99</span>,<span class="hljs-number">0x9c</span>,<span class="hljs-number">0x42</span>,<span class="hljs-number">0x50</span>,<span class="hljs-number">0xf4</span>,<span class="hljs-number">0x91</span>,<span class="hljs-number">0xef</span>,<span class="hljs-number">0x98</span>,<span class="hljs-number">0x7a</span>,<span class="hljs-number">0x33</span>,<span class="hljs-number">0x54</span>,<span class="hljs-number">0xb</span>,<span class="hljs-number">0x43</span>,<span class="hljs-number">0xed</span>,<span class="hljs-number">0xcf</span>,<span class="hljs-number">0xac</span>,<span class="hljs-number">0x62</span>,<span class="hljs-number">0xe4</span>,<span class="hljs-number">0xb3</span>,<span class="hljs-number">0x1c</span>,<span class="hljs-number">0xa9</span>,<span class="hljs-number">0xc9</span>,<span class="hljs-number">0x8</span>,<span class="hljs-number">0xe8</span>,<span class="hljs-number">0x95</span>,<span class="hljs-number">0x80</span>,<span class="hljs-number">0xdf</span>,<span class="hljs-number">0x94</span>,<span class="hljs-number">0xfa</span>,<span class="hljs-number">0x75</span>,<span class="hljs-number">0x8f</span>,<span class="hljs-number">0x3f</span>,<span class="hljs-number">0xa6</span>,<span class="hljs-number">0x47</span>,<span class="hljs-number">0x7</span>,<span class="hljs-number">0xa7</span>,<span class="hljs-number">0xfc</span>,<span class="hljs-number">0xf3</span>,<span class="hljs-number">0x73</span>,<span class="hljs-number">0x17</span>,<span class="hljs-number">0xba</span>,<span class="hljs-number">0x83</span>,<span class="hljs-number">0x59</span>,<span class="hljs-number">0x3c</span>,<span class="hljs-number">0x19</span>,<span class="hljs-number">0xe6</span>,<span class="hljs-number">0x85</span>,<span class="hljs-number">0x4f</span>,<span class="hljs-number">0xa8</span>,<span class="hljs-number">0x68</span>,<span class="hljs-number">0x6b</span>,<span class="hljs-number">0x81</span>,<span class="hljs-number">0xb2</span>,<span class="hljs-number">0x71</span>,<span class="hljs-number">0x64</span>,<span class="hljs-number">0xda</span>,<span class="hljs-number">0x8b</span>,<span class="hljs-number">0xf8</span>,<span class="hljs-number">0xeb</span>,<span class="hljs-number">0xf</span>,<span class="hljs-number">0x4b</span>,<span class="hljs-number">0x70</span>,<span class="hljs-number">0x56</span>,<span class="hljs-number">0x9d</span>,<span class="hljs-number">0x35</span>,<span class="hljs-number">0x1e</span>,<span class="hljs-number">0x24</span>,<span class="hljs-number">0xe</span>,<span class="hljs-number">0x5e</span>,<span class="hljs-number">0x63</span>,<span class="hljs-number">0x58</span>,<span class="hljs-number">0xd1</span>,<span class="hljs-number">0xa2</span>,<span class="hljs-number">0x25</span>,<span class="hljs-number">0x22</span>,<span class="hljs-number">0x7c</span>,<span class="hljs-number">0x3b</span>,<span class="hljs-number">0x1</span>,<span class="hljs-number">0x21</span>,<span class="hljs-number">0x78</span>,<span class="hljs-number">0x87</span>,<span class="hljs-number">0xd4</span>,<span class="hljs-number">0x0</span>,<span class="hljs-number">0x46</span>,<span class="hljs-number">0x57</span>,<span class="hljs-number">0x9f</span>,<span class="hljs-number">0xd3</span>,<span class="hljs-number">0x27</span>,<span class="hljs-number">0x52</span>,<span class="hljs-number">0x4c</span>,<span class="hljs-number">0x36</span>,<span class="hljs-number">0x2</span>,<span class="hljs-number">0xe7</span>,<span class="hljs-number">0xa0</span>,<span class="hljs-number">0xc4</span>,<span class="hljs-number">0xc8</span>,<span class="hljs-number">0x9e</span>,<span class="hljs-number">0xea</span>,<span class="hljs-number">0xbf</span>,<span class="hljs-number">0x8a</span>,<span class="hljs-number">0xd2</span>,<span class="hljs-number">0x40</span>,<span class="hljs-number">0xc7</span>,<span class="hljs-number">0x38</span>,<span class="hljs-number">0xb5</span>,<span class="hljs-number">0xa3</span>,<span class="hljs-number">0xf7</span>,<span class="hljs-number">0xf2</span>,<span class="hljs-number">0xce</span>,<span class="hljs-number">0xf9</span>,<span class="hljs-number">0x61</span>,<span class="hljs-number">0x15</span>,<span class="hljs-number">0xa1</span>,<span class="hljs-number">0xe0</span>,<span class="hljs-number">0xae</span>,<span class="hljs-number">0x5d</span>,<span class="hljs-number">0xa4</span>,<span class="hljs-number">0x9b</span>,<span class="hljs-number">0x34</span>,<span class="hljs-number">0x1a</span>,<span class="hljs-number">0x55</span>,<span class="hljs-number">0xad</span>,<span class="hljs-number">0x93</span>,<span class="hljs-number">0x32</span>,<span class="hljs-number">0x30</span>,<span class="hljs-number">0xf5</span>,<span class="hljs-number">0x8c</span>,<span class="hljs-number">0xb1</span>,<span class="hljs-number">0xe3</span>,<span class="hljs-number">0x1d</span>,<span class="hljs-number">0xf6</span>,<span class="hljs-number">0xe2</span>,<span class="hljs-number">0x2e</span>,<span class="hljs-number">0x82</span>,<span class="hljs-number">0x66</span>,<span class="hljs-number">0xca</span>,<span class="hljs-number">0x60</span>,<span class="hljs-number">0xc0</span>,<span class="hljs-number">0x29</span>,<span class="hljs-number">0x23</span>,<span class="hljs-number">0xab</span>,<span class="hljs-number">0xd</span>,<span class="hljs-number">0x53</span>,<span class="hljs-number">0x4e</span>,<span class="hljs-number">0x6f</span>,<span class="hljs-number">0xd5</span>,<span class="hljs-number">0xdb</span>,<span class="hljs-number">0x37</span>,<span class="hljs-number">0x45</span>,<span class="hljs-number">0xde</span>,<span class="hljs-number">0xfd</span>,<span class="hljs-number">0x8e</span>,<span class="hljs-number">0x2f</span>,<span class="hljs-number">0x3</span>,<span class="hljs-number">0xff</span>,<span class="hljs-number">0x6a</span>,<span class="hljs-number">0x72</span>,<span class="hljs-number">0x6d</span>,<span class="hljs-number">0x6c</span>,<span class="hljs-number">0x5b</span>,<span class="hljs-number">0x51</span>,<span class="hljs-number">0x8d</span>,<span class="hljs-number">0x1b</span>,<span class="hljs-number">0xaf</span>,<span class="hljs-number">0x92</span>,<span class="hljs-number">0xbb</span>,<span class="hljs-number">0xdd</span>,<span class="hljs-number">0xbc</span>,<span class="hljs-number">0x7f</span>,<span class="hljs-number">0x11</span>,<span class="hljs-number">0xd9</span>,<span class="hljs-number">0x5c</span>,<span class="hljs-number">0x41</span>,<span class="hljs-number">0x1f</span>,<span class="hljs-number">0x10</span>,<span class="hljs-number">0x5a</span>,<span class="hljs-number">0xd8</span>,<span class="hljs-number">0xa</span>,<span class="hljs-number">0xc1</span>,<span class="hljs-number">0x31</span>,<span class="hljs-number">0x88</span>,<span class="hljs-number">0xa5</span>,<span class="hljs-number">0xcd</span>,<span class="hljs-number">0x7b</span>,<span class="hljs-number">0xbd</span>,<span class="hljs-number">0x2d</span>,<span class="hljs-number">0x74</span>,<span class="hljs-number">0xd0</span>,<span class="hljs-number">0x12</span>,<span class="hljs-number">0xb8</span>,<span class="hljs-number">0xe5</span>,<span class="hljs-number">0xb4</span>,<span class="hljs-number">0xb0</span>,<span class="hljs-number">0x89</span>,<span class="hljs-number">0x69</span>,<span class="hljs-number">0x97</span>,<span class="hljs-number">0x4a</span>,<span class="hljs-number">0xc</span>,<span class="hljs-number">0x96</span>,<span class="hljs-number">0x77</span>,<span class="hljs-number">0x7e</span>,<span class="hljs-number">0x65</span>,<span class="hljs-number">0xb9</span>,<span class="hljs-number">0xf1</span>,<span class="hljs-number">0x9</span>,<span class="hljs-number">0xc5</span>,<span class="hljs-number">0x6e</span>,<span class="hljs-number">0xc6</span>,<span class="hljs-number">0x84</span>,<span class="hljs-number">0x18</span>,<span class="hljs-number">0xf0</span>,<span class="hljs-number">0x7d</span>,<span class="hljs-number">0xec</span>,<span class="hljs-number">0x3a</span>,<span class="hljs-number">0xdc</span>,<span class="hljs-number">0x4d</span>,<span class="hljs-number">0x20</span>,<span class="hljs-number">0x79</span>,<span class="hljs-number">0xee</span>,<span class="hljs-number">0x5f</span>,<span class="hljs-number">0x3e</span>,<span class="hljs-number">0xd7</span>,<span class="hljs-number">0xcb</span>,<span class="hljs-number">0x39</span>,<span class="hljs-number">0x49</span>],_0x1586d9=[<span class="hljs-number">0x70e15</span>,<span class="hljs-number">0x1c232a31</span>,<span class="hljs-number">0x383f464d</span>,<span class="hljs-number">0x545b6269</span>,<span class="hljs-number">0x70777e85</span>,<span class="hljs-number">0x8c939aa1</span>,<span class="hljs-number">0xa8afb6bd</span>,<span class="hljs-number">0xc4cbd2d9</span>,<span class="hljs-number">0xe0e7eef5</span>,<span class="hljs-number">0xfc030a11</span>,<span class="hljs-number">0x181f262d</span>,<span class="hljs-number">0x343b4249</span>,<span class="hljs-number">0x50575e65</span>,<span class="hljs-number">0x6c737a81</span>,<span class="hljs-number">0x888f969d</span>,<span class="hljs-number">0xa4abb2b9</span>,<span class="hljs-number">0xc0c7ced5</span>,<span class="hljs-number">0xdce3eaf1</span>,<span class="hljs-number">0xf8ff060d</span>,<span class="hljs-number">0x141b2229</span>,<span class="hljs-number">0x30373e45</span>,<span class="hljs-number">0x4c535a61</span>,<span class="hljs-number">0x686f767d</span>,<span class="hljs-number">0x848b9299</span>,<span class="hljs-number">0xa0a7aeb5</span>,<span class="hljs-number">0xbcc3cad1</span>,<span class="hljs-number">0xd8dfe6ed</span>,<span class="hljs-number">0xf4fb0209</span>,<span class="hljs-number">0x10171e25</span>,<span class="hljs-number">0x2c333a41</span>,<span class="hljs-number">0x484f565d</span>,<span class="hljs-number">0x646b7280</span>],_0x476a1a=[<span class="hljs-number">0xa3b1bac6</span>,<span class="hljs-number">0x56aa3350</span>,<span class="hljs-number">0x677d9197</span>,<span class="hljs-number">0xb27022dd</span>];<span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x1bb85d</span>(<span class="hljs-params">_0x5af03e</span>)&#123;<span class="hljs-keyword">var</span> _0x4ea14c=_0x546611;<span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-string">&#x27;bHwxf&#x27;</span>]===_0x40bb32[<span class="hljs-title function_">_0x4ea14c</span>(<span class="hljs-number">0x114</span>)]?<span class="hljs-attr">_0x53c978</span>:_0x3252b4[_0x40bb32[<span class="hljs-string">&#x27;IKPqy&#x27;</span>](<span class="hljs-number">0xff</span>,_0x5af03e)];&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x4bb41b</span>(<span class="hljs-params">_0x1e84ff,_0x187630</span>)&#123;<span class="hljs-keyword">var</span> _0x5931dc=_0x546611,_0x20a9c0,_0x1de98a,_0x18aa83,_0x5f2f42,_0x773d79=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">0x4</span>),_0x41d1b8=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">0x24</span>),_0x3c5877=<span class="hljs-number">0x0</span>;<span class="hljs-keyword">for</span>(_0x773d79[<span class="hljs-number">0x0</span>]=<span class="hljs-title function_">_0x2916a0</span>(_0x187630,<span class="hljs-number">0x0</span>),_0x773d79[<span class="hljs-number">0x1</span>]=<span class="hljs-title function_">_0x2916a0</span>(_0x187630,<span class="hljs-number">0x4</span>),_0x773d79[<span class="hljs-number">0x2</span>]=_0x40bb32[<span class="hljs-string">&#x27;pBbbx&#x27;</span>](_0x2916a0,_0x187630,<span class="hljs-number">0x8</span>),_0x773d79[<span class="hljs-number">0x3</span>]=<span class="hljs-title function_">_0x2916a0</span>(_0x187630,<span class="hljs-number">0xc</span>),_0x41d1b8[<span class="hljs-number">0x0</span>]=_0x40bb32[<span class="hljs-title function_">_0x5931dc</span>(<span class="hljs-number">0x127</span>)](_0x773d79[<span class="hljs-number">0x0</span>],_0x476a1a[<span class="hljs-number">0x0</span>]),_0x41d1b8[<span class="hljs-number">0x1</span>]=_0x773d79[<span class="hljs-number">0x1</span>]^_0x476a1a[<span class="hljs-number">0x1</span>],_0x41d1b8[<span class="hljs-number">0x2</span>]=_0x773d79[<span class="hljs-number">0x2</span>]^_0x476a1a[<span class="hljs-number">0x2</span>],_0x41d1b8[<span class="hljs-number">0x3</span>]=_0x773d79[<span class="hljs-number">0x3</span>]^_0x476a1a[<span class="hljs-number">0x3</span>];_0x3c5877&lt;<span class="hljs-number">0x20</span>;_0x3c5877++)_0x41d1b8[_0x3c5877+<span class="hljs-number">0x4</span>]=_0x41d1b8[_0x3c5877]^(_0x20a9c0=_0x41d1b8[_0x3c5877+<span class="hljs-number">0x1</span>]^_0x41d1b8[_0x3c5877+<span class="hljs-number">0x2</span>]^_0x41d1b8[_0x40bb32[<span class="hljs-title function_">_0x5931dc</span>(<span class="hljs-number">0x126</span>)](_0x3c5877,<span class="hljs-number">0x3</span>)]^_0x1586d9[_0x3c5877],<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>,<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>,_0x5f2f42=<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>,_0x18aa83=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">0x4</span>),_0x5f2f42=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">0x4</span>),<span class="hljs-title function_">_0x5b65b6</span>(_0x20a9c0,_0x18aa83,<span class="hljs-number">0x0</span>),_0x5f2f42[<span class="hljs-number">0x0</span>]=<span class="hljs-title function_">_0x1bb85d</span>(_0x18aa83[<span class="hljs-number">0x0</span>]),_0x5f2f42[<span class="hljs-number">0x1</span>]=<span class="hljs-title function_">_0x1bb85d</span>(_0x18aa83[<span class="hljs-number">0x1</span>]),_0x5f2f42[<span class="hljs-number">0x2</span>]=<span class="hljs-title function_">_0x1bb85d</span>(_0x18aa83[<span class="hljs-number">0x2</span>]),_0x5f2f42[<span class="hljs-number">0x3</span>]=<span class="hljs-title function_">_0x1bb85d</span>(_0x18aa83[<span class="hljs-number">0x3</span>]),(_0x1de98a=<span class="hljs-title function_">_0x2916a0</span>(_0x5f2f42,<span class="hljs-number">0x0</span>))^<span class="hljs-title function_">_0x4bb945</span>(_0x1de98a,<span class="hljs-number">0xd</span>)^<span class="hljs-title function_">_0x4bb945</span>(_0x1de98a,<span class="hljs-number">0x17</span>)),_0x1e84ff[_0x3c5877]=_0x41d1b8[_0x3c5877+<span class="hljs-number">0x4</span>];&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x46c93d</span>(<span class="hljs-params">_0xf38bf4,_0x31ceb7,_0x497fef</span>)&#123;<span class="hljs-keyword">var</span> _0x5dfa7e=_0x546611;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0x0</span>,ulbuf=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">0x24</span>),ulbuf[<span class="hljs-number">0x0</span>]=<span class="hljs-title function_">_0x2916a0</span>(_0x31ceb7,<span class="hljs-number">0x0</span>),ulbuf[<span class="hljs-number">0x1</span>]=<span class="hljs-title function_">_0x2916a0</span>(_0x31ceb7,<span class="hljs-number">0x4</span>),ulbuf[<span class="hljs-number">0x2</span>]=<span class="hljs-title function_">_0x2916a0</span>(_0x31ceb7,<span class="hljs-number">0x8</span>),ulbuf[<span class="hljs-number">0x3</span>]=_0x40bb32[<span class="hljs-string">&#x27;pBbbx&#x27;</span>](_0x2916a0,_0x31ceb7,<span class="hljs-number">0xc</span>);i&lt;<span class="hljs-number">0x20</span>;)ulbuf[_0x40bb32[<span class="hljs-string">&#x27;YroQf&#x27;</span>](i,<span class="hljs-number">0x4</span>)]=(_0x29823c=ulbuf[i],_0x525507=ulbuf[i+<span class="hljs-number">0x1</span>],_0x3fd608=ulbuf[i+<span class="hljs-number">0x2</span>],_0x27d46c=ulbuf[_0x40bb32[<span class="hljs-title function_">_0x5dfa7e</span>(<span class="hljs-number">0xfa</span>)](i,<span class="hljs-number">0x3</span>)],_0x4e2309=_0xf38bf4[i],_0x37467e=<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>,_0x23f72d=<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>,_0x330b57=<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>,_0x2d5ae4=<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>,_0x29823c^(_0x37467e=_0x40bb32[<span class="hljs-title function_">_0x5dfa7e</span>(<span class="hljs-number">0x131</span>)](_0x525507^_0x3fd608^_0x27d46c,_0x4e2309),_0x330b57=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">0x4</span>),_0x2d5ae4=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">0x4</span>),<span class="hljs-title function_">_0x5b65b6</span>(_0x37467e,_0x330b57,<span class="hljs-number">0x0</span>),_0x2d5ae4[<span class="hljs-number">0x0</span>]=<span class="hljs-title function_">_0x1bb85d</span>(_0x330b57[<span class="hljs-number">0x0</span>]),_0x2d5ae4[<span class="hljs-number">0x1</span>]=<span class="hljs-title function_">_0x1bb85d</span>(_0x330b57[<span class="hljs-number">0x1</span>]),_0x2d5ae4[<span class="hljs-number">0x3</span>]=<span class="hljs-title function_">_0x1bb85d</span>(_0x330b57[<span class="hljs-number">0x2</span>]),_0x2d5ae4[<span class="hljs-number">0x2</span>]=<span class="hljs-title function_">_0x1bb85d</span>(_0x330b57[<span class="hljs-number">0x3</span>]),_0x40bb32[<span class="hljs-string">&#x27;sDqJj&#x27;</span>](_0x40bb32[<span class="hljs-string">&#x27;sDqJj&#x27;</span>](_0x40bb32[<span class="hljs-title function_">_0x5dfa7e</span>(<span class="hljs-number">0x13e</span>)](_0x23f72d=<span class="hljs-title function_">_0x2916a0</span>(_0x2d5ae4,<span class="hljs-number">0x0</span>),<span class="hljs-title function_">_0x4bb945</span>(_0x23f72d,<span class="hljs-number">0x2</span>))^<span class="hljs-title function_">_0x4bb945</span>(_0x23f72d,<span class="hljs-number">0xa</span>),<span class="hljs-title function_">_0x4bb945</span>(_0x23f72d,<span class="hljs-number">0x12</span>)),_0x40bb32[<span class="hljs-title function_">_0x5dfa7e</span>(<span class="hljs-number">0x111</span>)](_0x4bb945,_0x23f72d,<span class="hljs-number">0x18</span>)))),i++;<span class="hljs-keyword">var</span> _0x29823c,_0x525507,_0x3fd608,_0x27d46c,_0x4e2309,_0x37467e,_0x23f72d,_0x330b57,_0x2d5ae4;_0x40bb32[<span class="hljs-title function_">_0x5dfa7e</span>(<span class="hljs-number">0xf4</span>)](_0x5b65b6,ulbuf[<span class="hljs-number">0x23</span>],_0x497fef,<span class="hljs-number">0x0</span>),_0x40bb32[<span class="hljs-title function_">_0x5dfa7e</span>(<span class="hljs-number">0xf4</span>)](_0x5b65b6,ulbuf[<span class="hljs-number">0x22</span>],_0x497fef,<span class="hljs-number">0x4</span>),<span class="hljs-title function_">_0x5b65b6</span>(ulbuf[<span class="hljs-number">0x21</span>],_0x497fef,<span class="hljs-number">0x8</span>),<span class="hljs-title function_">_0x5b65b6</span>(ulbuf[<span class="hljs-number">0x20</span>],_0x497fef,<span class="hljs-number">0xc</span>);&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x2bd34</span>(<span class="hljs-params">_0x5626f2,_0x1c6c42</span>)&#123;<span class="hljs-keyword">var</span> _0xb0c898=_0x546611,_0x1c4d9a=&#123;&#125;;_0x1c4d9a[<span class="hljs-string">&#x27;iHzdy&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0xebda1a,_0x55e636</span>)&#123;<span class="hljs-keyword">return</span> _0xebda1a&amp;_0x55e636;&#125;,_0x1c4d9a[<span class="hljs-string">&#x27;mhbZS&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x1b3d02,_0x204606</span>)&#123;<span class="hljs-keyword">return</span> _0x1b3d02&amp;_0x204606;&#125;,_0x1c4d9a[<span class="hljs-string">&#x27;QSTVa&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x29c865,_0x579357</span>)&#123;<span class="hljs-keyword">return</span> _0x29c865|_0x579357;&#125;;<span class="hljs-keyword">var</span> _0x3d9622=_0x1c4d9a;<span class="hljs-keyword">if</span>(_0x40bb32[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0x137</span>)](<span class="hljs-literal">null</span>,_0x5626f2))<span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<span class="hljs-keyword">var</span> _0xae042e=[];<span class="hljs-keyword">if</span>(_0xae042e=_0xae042e[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xe0</span>)](_0x5626f2),<span class="hljs-number">0x1</span>==_0x1c6c42)&#123;<span class="hljs-keyword">if</span>(_0x40bb32[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xc3</span>)]===<span class="hljs-string">&#x27;MERGR&#x27;</span>)&#123;<span class="hljs-keyword">var</span> _0x1ffb2a,_0x1a933a,_0x5a57ec=<span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x4e3dd5</span>();_0x1ffb2a=_0x5dfbbc[<span class="hljs-string">&#x27;length&#x27;</span>];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> _0x55e152=<span class="hljs-number">0x0</span>;_0x55e152&lt;_0x1ffb2a;_0x55e152++)(_0x1a933a=_0x5b0d32[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xfb</span>)](_0x55e152))&gt;=<span class="hljs-number">0x10000</span>&amp;&amp;_0x1a933a&lt;=<span class="hljs-number">0x10ffff</span>?(_0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xe7</span>)](_0x1a933a&gt;&gt;<span class="hljs-number">0x12</span>&amp;<span class="hljs-number">0x7</span>|<span class="hljs-number">0xf0</span>),_0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xe7</span>)](_0x3d9622[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xe9</span>)](_0x1a933a&gt;&gt;<span class="hljs-number">0xc</span>,<span class="hljs-number">0x3f</span>)|<span class="hljs-number">0x80</span>),_0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xe7</span>)](_0x1a933a&gt;&gt;<span class="hljs-number">0x6</span>&amp;<span class="hljs-number">0x3f</span>|<span class="hljs-number">0x80</span>),_0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xe7</span>)](_0x3d9622[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0x14b</span>)](<span class="hljs-number">0x3f</span>,_0x1a933a)|<span class="hljs-number">0x80</span>)):_0x1a933a&gt;=<span class="hljs-number">0x800</span>&amp;&amp;_0x1a933a&lt;=<span class="hljs-number">0xffff</span>?(_0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xe7</span>)](_0x3d9622[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0x12d</span>)](_0x1a933a&gt;&gt;<span class="hljs-number">0xc</span>&amp;<span class="hljs-number">0xf</span>,<span class="hljs-number">0xe0</span>)),_0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xe7</span>)](_0x3d9622[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0x12d</span>)](_0x1a933a&gt;&gt;<span class="hljs-number">0x6</span>&amp;<span class="hljs-number">0x3f</span>,<span class="hljs-number">0x80</span>)),_0x5a57ec[<span class="hljs-string">&#x27;push&#x27;</span>](<span class="hljs-number">0x3f</span>&amp;_0x1a933a|<span class="hljs-number">0x80</span>)):_0x1a933a&gt;=<span class="hljs-number">0x80</span>&amp;&amp;_0x1a933a&lt;=<span class="hljs-number">0x7ff</span>?(_0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xe7</span>)](_0x1a933a&gt;&gt;<span class="hljs-number">0x6</span>&amp;<span class="hljs-number">0x1f</span>|<span class="hljs-number">0xc0</span>),_0x5a57ec[<span class="hljs-string">&#x27;push&#x27;</span>](<span class="hljs-number">0x3f</span>&amp;_0x1a933a|<span class="hljs-number">0x80</span>)):_0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xe7</span>)](<span class="hljs-number">0xff</span>&amp;_0x1a933a);<span class="hljs-keyword">return</span> _0x5a57ec;&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">var</span> _0x475c50=<span class="hljs-number">0x10</span>-_0x5626f2[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xd2</span>)]%<span class="hljs-number">0x10</span>;<span class="hljs-keyword">for</span>(i=<span class="hljs-number">0x0</span>;i&lt;_0x475c50;i++)_0xae042e[_0x5626f2[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xd2</span>)]+i]=_0x475c50;&#125;&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">if</span>(<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0x141</span>)!==<span class="hljs-string">&#x27;aWiBC&#x27;</span>)&#123;<span class="hljs-keyword">var</span> _0x1a69f4=_0x33488b[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0x10f</span>)](_0x54b6e2,<span class="hljs-variable language_">arguments</span>);<span class="hljs-keyword">return</span> _0x12b4c7=<span class="hljs-literal">null</span>,_0x1a69f4;&#125;<span class="hljs-keyword">else</span>&#123;_0x475c50=_0x5626f2[_0x5626f2[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0xd2</span>)]-<span class="hljs-number">0x1</span>];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> _0x3b67d2=<span class="hljs-number">0x0</span>;_0x3b67d2&lt;_0x475c50;_0x3b67d2++)_0xae042e[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">0x135</span>)]();&#125;&#125;<span class="hljs-keyword">return</span> _0xae042e;&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x77573f</span>(<span class="hljs-params">_0x11f115,_0x24d6f1</span>)&#123;<span class="hljs-keyword">var</span> _0x1237c3=_0x546611;_0x40bb32[<span class="hljs-string">&#x27;yccGl&#x27;</span>](_0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">0x152</span>)](<span class="hljs-literal">null</span>,_0x24d6f1),_0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">0x14f</span>)](<span class="hljs-string">&#x27;&#x27;</span>,_0x24d6f1))&amp;&amp;<span class="hljs-title class_">Error</span>(_0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">0x125</span>)]),_0x11f115[<span class="hljs-string">&#x27;isPadding&#x27;</span>]&amp;&amp;_0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">0x14f</span>)](<span class="hljs-number">0x1</span>,_0x11f115[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">0x105</span>)])&amp;&amp;(_0x24d6f1=<span class="hljs-title function_">_0x2bd34</span>(_0x24d6f1,<span class="hljs-number">0x1</span>));<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> _0x1d3a77=_0x24d6f1[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">0xd2</span>)],_0x5f4f34=[],_0x5dfa69=<span class="hljs-number">0x0</span>;_0x5dfa69&lt;_0x1d3a77;_0x5dfa69+=<span class="hljs-number">0x10</span>)&#123;<span class="hljs-keyword">var</span> _0x17972b=[],_0x380dc2=[];_0x17972b[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">0xe7</span>)](_0x24d6f1[_0x5dfa69+<span class="hljs-number">0x0</span>],_0x24d6f1[_0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">0xfa</span>)](_0x5dfa69,<span class="hljs-number">0x1</span>)],_0x24d6f1[_0x5dfa69+<span class="hljs-number">0x2</span>],_0x24d6f1[_0x5dfa69+<span class="hljs-number">0x3</span>],_0x24d6f1[_0x5dfa69+<span class="hljs-number">0x4</span>],_0x24d6f1[_0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">0xfa</span>)](_0x5dfa69,<span class="hljs-number">0x5</span>)],_0x24d6f1[_0x5dfa69+<span class="hljs-number">0x6</span>],_0x24d6f1[_0x5dfa69+<span class="hljs-number">0x7</span>],_0x24d6f1[_0x5dfa69+<span class="hljs-number">0x8</span>],_0x24d6f1[_0x5dfa69+<span class="hljs-number">0x9</span>],_0x24d6f1[_0x5dfa69+<span class="hljs-number">0xa</span>],_0x24d6f1[_0x5dfa69+<span class="hljs-number">0xb</span>],_0x24d6f1[_0x5dfa69+<span class="hljs-number">0xc</span>],_0x24d6f1[_0x5dfa69+<span class="hljs-number">0xd</span>],_0x24d6f1[_0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">0x106</span>)](_0x5dfa69,<span class="hljs-number">0xe</span>)],_0x24d6f1[_0x5dfa69+<span class="hljs-number">0xf</span>]),<span class="hljs-title function_">_0x46c93d</span>(_0x11f115[<span class="hljs-string">&#x27;sk&#x27;</span>],_0x17972b,_0x380dc2),_0x5f4f34=_0x5f4f34[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">0xe0</span>)](_0x380dc2);&#125;<span class="hljs-keyword">return</span> _0x11f115[<span class="hljs-string">&#x27;isPadding&#x27;</span>]&amp;&amp;<span class="hljs-number">0x0</span>==_0x11f115[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">0x105</span>)]&amp;&amp;(_0x5f4f34=<span class="hljs-title function_">_0x2bd34</span>(_0x5f4f34,<span class="hljs-number">0x0</span>)),_0x5f4f34;&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x92504a</span>(<span class="hljs-params">_0x48e3c6</span>)&#123;<span class="hljs-keyword">var</span> _0x349d56=_0x546611,_0x3f9115,_0x4d538d,_0x4590e3=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();_0x3f9115=_0x48e3c6[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0xd2</span>)];<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> _0x49daf9=<span class="hljs-number">0x0</span>;_0x49daf9&lt;_0x3f9115;_0x49daf9++)(_0x4d538d=_0x48e3c6[<span class="hljs-string">&#x27;charCodeAt&#x27;</span>](_0x49daf9))&gt;=<span class="hljs-number">0x10000</span>&amp;&amp;_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0x112</span>)](_0x4d538d,<span class="hljs-number">0x10ffff</span>)?(_0x4590e3[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0xe7</span>)](_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0x102</span>)](_0x4d538d,<span class="hljs-number">0x12</span>)&amp;<span class="hljs-number">0x7</span>|<span class="hljs-number">0xf0</span>),_0x4590e3[<span class="hljs-string">&#x27;push&#x27;</span>](_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0xee</span>)](_0x4d538d&gt;&gt;<span class="hljs-number">0xc</span>,<span class="hljs-number">0x3f</span>)|<span class="hljs-number">0x80</span>),_0x4590e3[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0xe7</span>)](_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0xee</span>)](_0x4d538d&gt;&gt;<span class="hljs-number">0x6</span>,<span class="hljs-number">0x3f</span>)|<span class="hljs-number">0x80</span>),_0x4590e3[<span class="hljs-string">&#x27;push&#x27;</span>](<span class="hljs-number">0x3f</span>&amp;_0x4d538d|<span class="hljs-number">0x80</span>)):_0x4d538d&gt;=<span class="hljs-number">0x800</span>&amp;&amp;_0x40bb32[<span class="hljs-string">&#x27;dcpRD&#x27;</span>](_0x4d538d,<span class="hljs-number">0xffff</span>)?(_0x4590e3[<span class="hljs-string">&#x27;push&#x27;</span>](_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0x10c</span>)](_0x4d538d,<span class="hljs-number">0xc</span>)&amp;<span class="hljs-number">0xf</span>|<span class="hljs-number">0xe0</span>),_0x4590e3[<span class="hljs-string">&#x27;push&#x27;</span>](_0x4d538d&gt;&gt;<span class="hljs-number">0x6</span>&amp;<span class="hljs-number">0x3f</span>|<span class="hljs-number">0x80</span>),_0x4590e3[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0xe7</span>)](<span class="hljs-number">0x3f</span>&amp;_0x4d538d|<span class="hljs-number">0x80</span>)):_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0x13a</span>)](_0x4d538d,<span class="hljs-number">0x80</span>)&amp;&amp;_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0x112</span>)](_0x4d538d,<span class="hljs-number">0x7ff</span>)?(_0x4590e3[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0xe7</span>)](_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0x108</span>)](_0x4d538d&gt;&gt;<span class="hljs-number">0x6</span>,<span class="hljs-number">0x1f</span>)|<span class="hljs-number">0xc0</span>),_0x4590e3[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0xe7</span>)](_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0x101</span>)](<span class="hljs-number">0x3f</span>&amp;_0x4d538d,<span class="hljs-number">0x80</span>))):_0x4590e3[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">0xe7</span>)](<span class="hljs-number">0xff</span>&amp;_0x4d538d);<span class="hljs-keyword">return</span> _0x4590e3;&#125;<span class="hljs-variable language_">window</span>[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">0xf7</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x2a9f50,_0x13ed87</span>)&#123;<span class="hljs-keyword">var</span> _0x1ae254=_0x546611,_0x4609e2=&#123;&#125;;_0x4609e2[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">0xd6</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x3ca93a,_0x41138d</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x3ca93a</span>(_0x41138d);&#125;,_0x4609e2[<span class="hljs-string">&#x27;LIgbg&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x4c470a,_0x44af8c</span>)&#123;<span class="hljs-keyword">var</span> _0x5a7c22=_0x1ae254;<span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x5a7c22</span>(<span class="hljs-number">0x12a</span>)](_0x4c470a,_0x44af8c);&#125;,_0x4609e2[<span class="hljs-string">&#x27;jQeKF&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0xff5997</span>)&#123;<span class="hljs-keyword">var</span> _0x5d1dd3=_0x1ae254;<span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x5d1dd3</span>(<span class="hljs-number">0x150</span>)](_0xff5997);&#125;;<span class="hljs-keyword">var</span> _0x1b609f=_0x4609e2;<span class="hljs-keyword">if</span>(<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">0x10a</span>)!==<span class="hljs-string">&#x27;VHqLW&#x27;</span>)&#123;<span class="hljs-keyword">var</span> _0x793f29=pENlpK[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">0xd6</span>)](_0x430449,pENlpK[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">0xe4</span>)](<span class="hljs-string">&#x27;return\x20(function()\x20&#x27;</span>+<span class="hljs-string">&#x27;&#123;&#125;.constructor(\x22return\x20this\x22)(\x20)&#x27;</span>,<span class="hljs-string">&#x27;);&#x27;</span>));_0x8cc5c0=pENlpK[<span class="hljs-string">&#x27;jQeKF&#x27;</span>](_0x793f29);&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">var</span> _0x3f814b=<span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x123d36</span>();<span class="hljs-keyword">if</span>(_0x3f814b[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">0x104</span>)]=!<span class="hljs-number">0x0</span>,_0x3f814b[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">0x105</span>)]=<span class="hljs-number">0x1</span>,<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>!==_0x13ed87)<span class="hljs-keyword">var</span> _0x583225=<span class="hljs-title function_">_0x92504a</span>(_0x13ed87);<span class="hljs-keyword">else</span> _0x583225=<span class="hljs-title function_">_0x92504a</span>(<span class="hljs-string">&#x27;11HDESaAhiHHugDz&#x27;</span>);!<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x53d439,_0xb2eb7f</span>)&#123;<span class="hljs-keyword">var</span> _0xe68de8=_0x1ae254;<span class="hljs-literal">null</span>==_0x53d439&amp;&amp;<span class="hljs-title class_">Error</span>(<span class="hljs-title function_">_0xe68de8</span>(<span class="hljs-number">0xca</span>)),<span class="hljs-literal">null</span>!=_0xb2eb7f&amp;&amp;<span class="hljs-number">0x10</span>==_0xb2eb7f[<span class="hljs-title function_">_0xe68de8</span>(<span class="hljs-number">0xd2</span>)]||_0x40bb32[<span class="hljs-title function_">_0xe68de8</span>(<span class="hljs-number">0xbf</span>)](<span class="hljs-title class_">Error</span>,<span class="hljs-title function_">_0xe68de8</span>(<span class="hljs-number">0xce</span>)),_0x53d439[<span class="hljs-title function_">_0xe68de8</span>(<span class="hljs-number">0x105</span>)]=<span class="hljs-number">0x1</span>,<span class="hljs-title function_">_0x4bb41b</span>(_0x53d439[<span class="hljs-string">&#x27;sk&#x27;</span>],_0xb2eb7f);&#125;(_0x3f814b,_0x583225);<span class="hljs-keyword">var</span> _0xf82aae=<span class="hljs-title function_">_0x77573f</span>(_0x3f814b,_0x40bb32[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">0x142</span>)](_0x92504a,_0x2a9f50)),_0x5e2ba8=base64js[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">0xf8</span>)](_0xf82aae);<span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">0xd7</span>)](<span class="hljs-literal">null</span>,_0x5e2ba8)&amp;&amp;_0x5e2ba8[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">0x153</span>)]()[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">0xd2</span>)]&gt;<span class="hljs-number">0x0</span>&amp;&amp;_0x5e2ba8[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">0x123</span>)](<span class="hljs-regexp">/(\s*|\t|\r|\n)/g</span>,<span class="hljs-string">&#x27;&#x27;</span>),_0x5e2ba8;&#125;&#125;,<span class="hljs-variable language_">window</span>[<span class="hljs-string">&#x27;MuData_KXC&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x5e66aa,_0x43f5ba</span>)&#123;<span class="hljs-keyword">var</span> _0x4001dd=_0x546611,_0x73c8ae=&#123;&#125;;_0x73c8ae[<span class="hljs-string">&#x27;Oflfj&#x27;</span>]=_0x40bb32[<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">0xcf</span>)];<span class="hljs-keyword">var</span> _0x3a56f5=_0x73c8ae;<span class="hljs-keyword">try</span>&#123;<span class="hljs-keyword">var</span> _0x21fbad=<span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x123d36</span>();<span class="hljs-keyword">if</span>(_0x21fbad[<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">0x104</span>)]=!<span class="hljs-number">0x0</span>,_0x21fbad[<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">0x105</span>)]=<span class="hljs-number">0x0</span>,<span class="hljs-keyword">void</span> <span class="hljs-number">0x0</span>!==_0x43f5ba)<span class="hljs-keyword">var</span> _0x1f5250=_0x40bb32[<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">0xc8</span>)](_0x92504a,_0x43f5ba);<span class="hljs-keyword">else</span> _0x1f5250=<span class="hljs-title function_">_0x92504a</span>(<span class="hljs-string">&#x27;11HDESaAhiHHugDz&#x27;</span>);<span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">_0x3ca6b6,_0x42649f</span>)&#123;<span class="hljs-keyword">var</span> _0x33eb31=_0x4001dd;<span class="hljs-literal">null</span>==_0x3ca6b6&amp;&amp;<span class="hljs-title class_">Error</span>(<span class="hljs-title function_">_0x33eb31</span>(<span class="hljs-number">0xca</span>)),<span class="hljs-literal">null</span>!=_0x42649f&amp;&amp;<span class="hljs-number">0x10</span>==_0x42649f[<span class="hljs-title function_">_0x33eb31</span>(<span class="hljs-number">0xd2</span>)]||<span class="hljs-title class_">Error</span>(_0x40bb32[<span class="hljs-title function_">_0x33eb31</span>(<span class="hljs-number">0x139</span>)]),_0x3ca6b6[<span class="hljs-title function_">_0x33eb31</span>(<span class="hljs-number">0x105</span>)]=<span class="hljs-number">0x0</span>,<span class="hljs-title function_">_0x4bb41b</span>(_0x3ca6b6[<span class="hljs-string">&#x27;sk&#x27;</span>],_0x42649f),_0x3ca6b6[<span class="hljs-string">&#x27;sk&#x27;</span>]=_0x3ca6b6[<span class="hljs-string">&#x27;sk&#x27;</span>][<span class="hljs-title function_">_0x33eb31</span>(<span class="hljs-number">0x10d</span>)]();&#125;(_0x21fbad,_0x1f5250),<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x5329c3</span>)&#123;<span class="hljs-keyword">var</span> _0x58448b=_0x4001dd;<span class="hljs-keyword">if</span>(_0x40bb32[<span class="hljs-string">&#x27;ffBwx&#x27;</span>](_0x40bb32[<span class="hljs-string">&#x27;nSwqq&#x27;</span>],<span class="hljs-title function_">_0x58448b</span>(<span class="hljs-number">0xd5</span>)))<span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">_0x30b923</span>)&#123;&#125;[<span class="hljs-title function_">_0x58448b</span>(<span class="hljs-number">0x130</span>)](<span class="hljs-title function_">_0x58448b</span>(<span class="hljs-number">0x151</span>))[<span class="hljs-title function_">_0x58448b</span>(<span class="hljs-number">0x10f</span>)](vBRwPh[<span class="hljs-string">&#x27;Oflfj&#x27;</span>]);<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> _0x5c03f8=<span class="hljs-string">&#x27;&#x27;</span>,_0x184bf1=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(_0x5329c3),_0x196644=_0x184bf1[<span class="hljs-title function_">_0x58448b</span>(<span class="hljs-number">0x12b</span>)],_0x186cc1=<span class="hljs-number">0x0</span>;_0x40bb32[<span class="hljs-string">&#x27;Vcbyb&#x27;</span>](_0x186cc1,_0x196644);_0x186cc1++)_0x5c03f8+=<span class="hljs-title class_">String</span>[<span class="hljs-string">&#x27;fromCharCode&#x27;</span>](_0x184bf1[_0x186cc1]);<span class="hljs-keyword">return</span> <span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">escape</span>(_0x5c03f8));&#125;&#125;(<span class="hljs-title function_">_0x77573f</span>(_0x21fbad,base64js[<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">0x155</span>)](_0x5e66aa)));&#125;<span class="hljs-keyword">catch</span>(_0x32b20a)&#123;<span class="hljs-keyword">if</span>(<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">0xed</span>)!==<span class="hljs-string">&#x27;GiveU&#x27;</span>)<span class="hljs-title function_">_0x1e3c61</span>();<span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-title class_">Error</span>(_0x32b20a[<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">0xbb</span>)]),<span class="hljs-literal">null</span>;&#125;&#125;;&#125;());<span class="hljs-keyword">function</span> <span class="hljs-title function_">a7_0x3a83</span>(<span class="hljs-params">_0x48e416,_0x539714</span>)&#123;<span class="hljs-keyword">return</span> a7_0x3a83=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x3fd90e,_0x220fe2</span>)&#123;_0x3fd90e=_0x3fd90e-<span class="hljs-number">0xb9</span>;<span class="hljs-keyword">var</span> _0x345c54=a7_0x2b5d[_0x3fd90e];<span class="hljs-keyword">return</span> _0x345c54;&#125;,<span class="hljs-title function_">a7_0x3a83</span>(_0x48e416,_0x539714);&#125;<span class="hljs-keyword">function</span> <span class="hljs-title function_">_0xdc5479</span>(<span class="hljs-params">_0xc4ac8</span>)&#123;<span class="hljs-keyword">var</span> _0x5e1481=a7_0x3a83,_0x152d0e=&#123;&#125;;_0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0x13c</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x161fa5,_0x184963</span>)&#123;<span class="hljs-keyword">return</span> _0x161fa5!==_0x184963;&#125;,_0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0xc9</span>)]=<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0xfc</span>),_0x152d0e[<span class="hljs-string">&#x27;KSAJu&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x3bf73c,_0x3774e9</span>)&#123;<span class="hljs-keyword">return</span> _0x3bf73c+_0x3774e9;&#125;,_0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0xe8</span>)]=<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0x13f</span>),_0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0xea</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x227bc6,_0x5e823d</span>)&#123;<span class="hljs-keyword">return</span> _0x227bc6+_0x5e823d;&#125;,_0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0x148</span>)]=<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0x110</span>),_0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0x136</span>)]=<span class="hljs-string">&#x27;stateObject&#x27;</span>,_0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0xd4</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x194170,_0x41e550</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x194170</span>(_0x41e550);&#125;,_0x152d0e[<span class="hljs-string">&#x27;NrpeA&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x117898,_0x26f71c</span>)&#123;<span class="hljs-keyword">return</span> _0x117898|_0x26f71c;&#125;,_0x152d0e[<span class="hljs-string">&#x27;jNWkq&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x533302,_0x57f749</span>)&#123;<span class="hljs-keyword">return</span> _0x533302&lt;&lt;_0x57f749;&#125;,_0x152d0e[<span class="hljs-string">&#x27;swSJq&#x27;</span>]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x475689,_0x4edf8f</span>)&#123;<span class="hljs-keyword">return</span> _0x475689!==_0x4edf8f;&#125;,_0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0xf9</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x307dff,_0x532f38</span>)&#123;<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x307dff</span>(_0x532f38);&#125;;<span class="hljs-keyword">var</span> _0x3ec91b=_0x152d0e;<span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x20d39b</span>(<span class="hljs-params">_0x3d5fd6</span>)&#123;<span class="hljs-keyword">var</span> _0x372b19=_0x5e1481,_0x592849=&#123;&#125;;_0x592849[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x10b</span>)]=<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x4cf138,_0x1dde32</span>)&#123;<span class="hljs-keyword">return</span> _0x4cf138|_0x1dde32;&#125;;<span class="hljs-keyword">var</span> _0x338386=_0x592849;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> _0x3d5fd6===<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x100</span>))<span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">_0x529e2b</span>)&#123;&#125;[<span class="hljs-string">&#x27;constructor&#x27;</span>](<span class="hljs-string">&#x27;while\x20(true)\x20&#123;&#125;&#x27;</span>)[<span class="hljs-string">&#x27;apply&#x27;</span>](<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0xe2</span>));<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">if</span>(_0x3ec91b[<span class="hljs-string">&#x27;ouQaI&#x27;</span>](<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x138</span>),_0x3ec91b[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0xc9</span>)]))&#123;<span class="hljs-keyword">if</span>(_0x3ec91b[<span class="hljs-string">&#x27;KSAJu&#x27;</span>](<span class="hljs-string">&#x27;&#x27;</span>,_0x3d5fd6/_0x3d5fd6)[<span class="hljs-string">&#x27;length&#x27;</span>]!==<span class="hljs-number">0x1</span>||_0x3d5fd6%<span class="hljs-number">0x14</span>===<span class="hljs-number">0x0</span>)&#123;<span class="hljs-keyword">if</span>(_0x3ec91b[<span class="hljs-string">&#x27;xujqS&#x27;</span>]===<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x13b</span>))<span class="hljs-keyword">return</span> _0x338386[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x10b</span>)](<span class="hljs-keyword">function</span>(<span class="hljs-params">_0x27df87,_0x45968a</span>)&#123;<span class="hljs-keyword">return</span> _0x27df87&lt;&lt;_0x45968a;&#125;(_0x498948,_0x3dc0b2),_0xb49acd&gt;&gt;<span class="hljs-number">0x20</span>-_0x1e8f01);<span class="hljs-title function_">else</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span>!![];&#125;[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x130</span>)](_0x3ec91b[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0xea</span>)](_0x3ec91b[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x148</span>)],<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x11b</span>)))[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x103</span>)](<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x12f</span>)));&#125;<span class="hljs-title function_">else</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">return</span>![];&#125;[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x130</span>)](<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x110</span>)+<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x11b</span>))[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x10f</span>)](_0x3ec91b[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0x136</span>)]));&#125;<span class="hljs-keyword">else</span> <span class="hljs-title function_">_0x2a836a</span>(<span class="hljs-string">&#x27;0&#x27;</span>);&#125;_0x3ec91b[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">0xd4</span>)](_0x20d39b,++_0x3d5fd6);&#125;<span class="hljs-keyword">try</span>&#123;<span class="hljs-keyword">if</span>(_0x3ec91b[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0xc7</span>)](<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0x134</span>),<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0x134</span>)))&#123;<span class="hljs-keyword">var</span> _0x5007b9=_0x1c03d7?<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-keyword">var</span> _0x3754e6=_0x5e1481;<span class="hljs-keyword">if</span>(_0x31fcbb)&#123;<span class="hljs-keyword">var</span> _0x5a99d2=_0x274ddb[<span class="hljs-title function_">_0x3754e6</span>(<span class="hljs-number">0x10f</span>)](_0x12bde4,<span class="hljs-variable language_">arguments</span>);<span class="hljs-keyword">return</span> _0x48728f=<span class="hljs-literal">null</span>,_0x5a99d2;&#125;&#125;:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;&#125;;<span class="hljs-keyword">return</span> _0x58fc2a=![],_0x5007b9;&#125;<span class="hljs-keyword">else</span>&#123;<span class="hljs-keyword">if</span>(_0xc4ac8)<span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0xd8</span>)!==<span class="hljs-string">&#x27;rXsbL&#x27;</span>?<span class="hljs-attr">_0x20d39b</span>:_0x3ec91b[<span class="hljs-string">&#x27;NrpeA&#x27;</span>]((<span class="hljs-number">0xff</span>&amp;_0x427acb[_0x1f8bc4])&lt;&lt;<span class="hljs-number">0x18</span>,_0x3ec91b[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0x115</span>)](<span class="hljs-number">0xff</span>&amp;_0xc83323[_0x30e192+<span class="hljs-number">0x1</span>],<span class="hljs-number">0x10</span>))|(<span class="hljs-number">0xff</span>&amp;_0xd5d23[_0x1739cd+<span class="hljs-number">0x2</span>])&lt;&lt;<span class="hljs-number">0x8</span>|<span class="hljs-number">0xff</span>&amp;_0x39cb7c[_0x33d10b+<span class="hljs-number">0x3</span>];<span class="hljs-keyword">else</span> _0x3ec91b[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">0xf9</span>)](_0x20d39b,<span class="hljs-number">0x0</span>);&#125;&#125;<span class="hljs-keyword">catch</span>(_0x5edede)&#123;&#125;&#125;<span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<span class="hljs-title function_">_0xdc5479</span>();&#125;,<span class="hljs-number">0xfa0</span>);<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadAESDecryptStr</span>(<span class="hljs-params">str</span>)&#123;<span class="hljs-keyword">var</span> result = <span class="hljs-title class_">MuData</span>_KXC(str,<span class="hljs-string">&#x27;0123456789abcdef&#x27;</span>);<span class="hljs-keyword">return</span> result;&#125;<br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> a7_0x2b5d = [<span class="hljs-string">&quot;call&quot;</span>, <span class="hljs-string">&quot;isPadding&quot;</span>, <span class="hljs-string">&quot;mode&quot;</span>, <span class="hljs-string">&quot;rugNk&quot;</span>, <span class="hljs-string">&quot;354735GnJPMi&quot;</span>, <span class="hljs-string">&quot;avPzW&quot;</span>, <span class="hljs-string">&quot;KThRo&quot;</span>, <span class="hljs-string">&quot;VHqLW&quot;</span>, <span class="hljs-string">&quot;SFpEF&quot;</span>, <span class="hljs-string">&quot;HZXuv&quot;</span>, <span class="hljs-string">&quot;reverse&quot;</span>, <span class="hljs-string">&quot;haxwH&quot;</span>, <span class="hljs-string">&quot;apply&quot;</span>, <span class="hljs-string">&quot;debu&quot;</span>, <span class="hljs-string">&quot;hDxNe&quot;</span>, <span class="hljs-string">&quot;dcpRD&quot;</span>, <span class="hljs-string">&quot;WqpyS&quot;</span>, <span class="hljs-string">&quot;TXBOE&quot;</span>, <span class="hljs-string">&quot;jNWkq&quot;</span>, <span class="hljs-string">&quot;sDqJj&quot;</span>, <span class="hljs-string">&quot;rRXqW&quot;</span>, <span class="hljs-string">&quot;EfSiR&quot;</span>, <span class="hljs-string">&quot;358481FJAtiH&quot;</span>, <span class="hljs-string">&quot;trace&quot;</span>, <span class="hljs-string">&quot;gger&quot;</span>, <span class="hljs-string">&quot;pjXvO&quot;</span>, <span class="hljs-string">&quot;IKPqy&quot;</span>, <span class="hljs-string">&quot;lcYtC&quot;</span>, <span class="hljs-string">&quot;log&quot;</span>, <span class="hljs-string">&quot;ffBwx&quot;</span>, <span class="hljs-string">&quot;chain&quot;</span>, <span class="hljs-string">&quot;gGIDO&quot;</span>, <span class="hljs-string">&quot;replace&quot;</span>, <span class="hljs-string">&quot;&#123;&#125;.constructor(&quot;</span><span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span><span class="hljs-string">&quot;)( )&quot;</span>, <span class="hljs-string">&quot;nlNzw&quot;</span>, <span class="hljs-string">&quot;uyMva&quot;</span>, <span class="hljs-string">&quot;BvoPh&quot;</span>, <span class="hljs-string">&quot;JqowM&quot;</span>, <span class="hljs-string">&quot;TGEYP&quot;</span>, <span class="hljs-string">&quot;nFXTL&quot;</span>, <span class="hljs-string">&quot;byteLength&quot;</span>, <span class="hljs-string">&quot;OIoMC&quot;</span>, <span class="hljs-string">&quot;QSTVa&quot;</span>, <span class="hljs-string">&quot;SazpL&quot;</span>, <span class="hljs-string">&quot;action&quot;</span>, <span class="hljs-string">&quot;constructor&quot;</span>, <span class="hljs-string">&quot;oQEiQ&quot;</span>, <span class="hljs-string">&quot;__proto__&quot;</span>, <span class="hljs-string">&quot;pcovl&quot;</span>, <span class="hljs-string">&quot;MzcbM&quot;</span>, <span class="hljs-string">&quot;pop&quot;</span>, <span class="hljs-string">&quot;DXJBH&quot;</span>, <span class="hljs-string">&quot;TKGWS&quot;</span>, <span class="hljs-string">&quot;Yyixl&quot;</span>, <span class="hljs-string">&quot;oGwFB&quot;</span>, <span class="hljs-string">&quot;wHdDx&quot;</span>, <span class="hljs-string">&quot;RYvlH&quot;</span>, <span class="hljs-string">&quot;ouQaI&quot;</span>, <span class="hljs-string">&quot;console&quot;</span>, <span class="hljs-string">&quot;ESqgu&quot;</span>, <span class="hljs-string">&quot;yLObA&quot;</span>, <span class="hljs-string">&quot;mxCkC&quot;</span>, <span class="hljs-string">&quot;aWiBC&quot;</span>, <span class="hljs-string">&quot;PkCLg&quot;</span>, <span class="hljs-string">&quot;1346160KjKRRr&quot;</span>, <span class="hljs-string">&quot;NpPDy&quot;</span>, <span class="hljs-string">&quot;diELP&quot;</span>, <span class="hljs-string">&quot;457809mFABzD&quot;</span>, <span class="hljs-string">&quot;DzImY&quot;</span>, <span class="hljs-string">&quot;zpFjY&quot;</span>, <span class="hljs-string">&quot;QtadN&quot;</span>, <span class="hljs-string">&quot;init&quot;</span>, <span class="hljs-string">&quot;mhbZS&quot;</span>, <span class="hljs-string">&quot;FSHau&quot;</span>, <span class="hljs-string">&quot;bmiMO&quot;</span>, <span class="hljs-string">&quot;qSLAQ&quot;</span>, <span class="hljs-string">&quot;snDbr&quot;</span>, <span class="hljs-string">&quot;vbcNd&quot;</span>, <span class="hljs-string">&quot;while (true) &#123;&#125;&quot;</span>, <span class="hljs-string">&quot;TwpwF&quot;</span>, <span class="hljs-string">&quot;trim&quot;</span>, <span class="hljs-string">&quot;aXpni&quot;</span>, <span class="hljs-string">&quot;toByteArray&quot;</span>, <span class="hljs-string">&quot;CBNXR&quot;</span>, <span class="hljs-string">&quot;stHXK&quot;</span>, <span class="hljs-string">&quot;DYTBc&quot;</span>, <span class="hljs-string">&quot;aIThM&quot;</span>, <span class="hljs-string">&quot;oVofC&quot;</span>, <span class="hljs-string">&quot;return /&quot;</span> + <span class="hljs-variable language_">this</span> + <span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-string">&quot;11933HqMZrC&quot;</span>, <span class="hljs-string">&quot;^([^ ]+( +[^ ]+)+)+[^ ]&#125;&quot;</span>, <span class="hljs-string">&quot;message&quot;</span>, <span class="hljs-string">&quot;\+\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)&quot;</span>, <span class="hljs-string">&quot;nTwJH&quot;</span>, <span class="hljs-string">&quot;cYule&quot;</span>, <span class="hljs-string">&quot;xaYQO&quot;</span>, <span class="hljs-string">&quot;3nDilfW&quot;</span>, <span class="hljs-string">&quot;WsxKY&quot;</span>, <span class="hljs-string">&quot;4Cpgwjw&quot;</span>, <span class="hljs-string">&quot;ZXbqk&quot;</span>, <span class="hljs-string">&quot;Debug&quot;</span>, <span class="hljs-string">&quot;prototype&quot;</span>, <span class="hljs-string">&quot;WRsvs&quot;</span>, <span class="hljs-string">&quot;swSJq&quot;</span>, <span class="hljs-string">&quot;JlGWC&quot;</span>, <span class="hljs-string">&quot;syvii&quot;</span>, <span class="hljs-string">&quot;ctx is null!&quot;</span>, <span class="hljs-string">&quot;fDwAa&quot;</span>, <span class="hljs-string">&quot;uSPeW&quot;</span>, <span class="hljs-string">&quot;table&quot;</span>, <span class="hljs-string">&quot;yh error!&quot;</span>, <span class="hljs-string">&quot;DPmAu&quot;</span>, <span class="hljs-string">&quot;QSePF&quot;</span>, <span class="hljs-string">&quot;vAWbN&quot;</span>, <span class="hljs-string">&quot;length&quot;</span>, <span class="hljs-string">&quot;return (function() &quot;</span>, <span class="hljs-string">&quot;MQqdA&quot;</span>, <span class="hljs-string">&quot;gNyVV&quot;</span>, <span class="hljs-string">&quot;oOPZk&quot;</span>, <span class="hljs-string">&quot;hGVgS&quot;</span>, <span class="hljs-string">&quot;eyjoI&quot;</span>, <span class="hljs-string">&quot;prZNT&quot;</span>, <span class="hljs-string">&quot;IycDn&quot;</span>, <span class="hljs-string">&quot;GLzSb&quot;</span>, <span class="hljs-string">&quot;496144kEaDWn&quot;</span>, <span class="hljs-string">&quot;Vcbyb&quot;</span>, <span class="hljs-string">&quot;input&quot;</span>, <span class="hljs-string">&quot;707684tcCIzJ&quot;</span>, <span class="hljs-string">&quot;concat&quot;</span>, <span class="hljs-string">&quot;FRtjq&quot;</span>, <span class="hljs-string">&quot;counter&quot;</span>, <span class="hljs-string">&quot;function *\( *\)&quot;</span>, <span class="hljs-string">&quot;LIgbg&quot;</span>, <span class="hljs-string">&quot;fromCharCode&quot;</span>, <span class="hljs-string">&quot;warn&quot;</span>, <span class="hljs-string">&quot;push&quot;</span>, <span class="hljs-string">&quot;xujqS&quot;</span>, <span class="hljs-string">&quot;iHzdy&quot;</span>, <span class="hljs-string">&quot;QNdLF&quot;</span>, <span class="hljs-string">&quot;bind&quot;</span>, <span class="hljs-string">&quot;ujsRG&quot;</span>, <span class="hljs-string">&quot;GiveU&quot;</span>, <span class="hljs-string">&quot;KGJBY&quot;</span>, <span class="hljs-string">&quot;pBbbx&quot;</span>, <span class="hljs-string">&quot;toString&quot;</span>, <span class="hljs-string">&quot;test&quot;</span>, <span class="hljs-string">&quot;wqGUy&quot;</span>, <span class="hljs-string">&quot;bHwxf&quot;</span>, <span class="hljs-string">&quot;SeSKM&quot;</span>, <span class="hljs-string">&quot;pbWmJ&quot;</span>, <span class="hljs-string">&quot;grFEl&quot;</span>, <span class="hljs-string">&quot;CaData_KXC&quot;</span>, <span class="hljs-string">&quot;fromByteArray&quot;</span>, <span class="hljs-string">&quot;adgRQ&quot;</span>, <span class="hljs-string">&quot;YroQf&quot;</span>, <span class="hljs-string">&quot;charCodeAt&quot;</span>, <span class="hljs-string">&quot;ghKuy&quot;</span>, <span class="hljs-string">&quot;nSwqq&quot;</span>, <span class="hljs-string">&quot;tecjo&quot;</span>, <span class="hljs-string">&quot;wsLWY&quot;</span>, <span class="hljs-string">&quot;string&quot;</span>, <span class="hljs-string">&quot;yccGl&quot;</span>, <span class="hljs-string">&quot;HLntE&quot;</span>];<br><br>(<span class="hljs-keyword">function</span> (<span class="hljs-params">_0x1d77f6, _0x51308a</span>) &#123;<br>  <span class="hljs-keyword">var</span> _0x41c885 = a7_0x3a83;<br><br>  <span class="hljs-keyword">while</span> (!![]) &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">var</span> _0x4660af = -<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">185</span>)) + -<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">263</span>)) + -<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">281</span>)) * -<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">194</span>)) + -<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">326</span>)) * -<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">192</span>)) + <span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">220</span>)) + -<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">223</span>)) + -<span class="hljs-built_in">parseInt</span>(<span class="hljs-title function_">_0x41c885</span>(<span class="hljs-number">323</span>));<br><br>      <span class="hljs-keyword">if</span> (_0x4660af === _0x51308a) <span class="hljs-keyword">break</span>;<span class="hljs-keyword">else</span> _0x1d77f6.<span class="hljs-title function_">push</span>(_0x1d77f6.<span class="hljs-title function_">shift</span>());<br>    &#125; <span class="hljs-keyword">catch</span> (_0x2f1ee8) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(_0x2f1ee8);<br><br>      _0x1d77f6.<span class="hljs-title function_">push</span>(_0x1d77f6.<span class="hljs-title function_">shift</span>());<br>    &#125;<br>  &#125;<br>&#125;)(a7_0x2b5d, <span class="hljs-number">882983</span>);<br><br>!<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">var</span> _0x546611 = a7_0x3a83;<br>  <span class="hljs-keyword">var</span> _0x427b16 = &#123;&#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">336</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x5c0ec9</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x5c0ec9</span>();<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">284</span>)] = <span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">296</span>);<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">246</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x92fcb9, _0x29633b</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x92fcb9 !== _0x29633b;<br>  &#125;;<br><br>  _0x427b16.<span class="hljs-property">pBbbx</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x2c7f5c, _0x32753a, _0x14eb34</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x2c7f5c</span>(_0x32753a, _0x14eb34);<br>  &#125;;<br><br>  _0x427b16.<span class="hljs-property">TKGWS</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x5a4f18, _0x5ee266</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x5a4f18 == _0x5ee266;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">288</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x41eb08, _0x157a47</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x41eb08 === _0x157a47;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">191</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0xcea61, _0x4c77e7</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0xcea61</span>(_0x4c77e7);<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">334</span>)] = <span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">320</span>);<br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">198</span>)] = <span class="hljs-string">&quot;error&quot;</span>;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">221</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x4f45d1, _0x4c64ce</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x4f45d1 &lt; _0x4c64ce;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">345</span>)] = <span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">302</span>);<br><br>  _0x427b16.<span class="hljs-property">QSePF</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0xb1b641, _0x40a5a3</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0xb1b641 &lt;&lt; _0x40a5a3;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">190</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x88ae7b, _0x3c64b0</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x88ae7b &amp; _0x3c64b0;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">324</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x168a5f, _0x1d2ba2</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x168a5f &lt;&lt; _0x1d2ba2;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">236</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x3ceeb3, _0x27b709</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x3ceeb3 &gt;&gt; _0x27b709;<br>  &#125;;<br><br>  _0x427b16.<span class="hljs-property">wsLWY</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x4bb35b, _0xa9bde0</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x4bb35b &amp; _0xa9bde0;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">258</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x99e554, _0x5513a0</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x99e554 &gt;&gt; _0x5513a0;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">340</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x2d2d8a, _0x1e819c</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x2d2d8a + _0x1e819c;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">257</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0xd1f0c9, _0x4fa0bc</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0xd1f0c9 | _0x4fa0bc;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">243</span>)] = <span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">265</span>);<br>  _0x427b16.<span class="hljs-property">TXBOE</span> = <span class="hljs-string">&quot;sdNtS&quot;</span>;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">285</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x377f28, _0x13646b</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x377f28 &amp; _0x13646b;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">295</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x238d92, _0x429935</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x238d92 ^ _0x429935;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">294</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x2593d0, _0x9618bc</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x2593d0 + _0x9618bc;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">250</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x1081a5, _0x1342ff</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x1081a5 + _0x1342ff;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">305</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x363fc1, _0x27a419</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x363fc1 ^ _0x27a419;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">278</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x5ad2d5, _0x5298af</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x5ad2d5 ^ _0x5298af;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">318</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0xbea186, _0xd54dfd</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0xbea186 ^ _0xd54dfd;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">273</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x1d3aee, _0x8cfe8f, _0x7b9165</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x1d3aee</span>(_0x8cfe8f, _0x7b9165);<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">244</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x4c1a5e, _0x1e404f, _0x3c16b0, _0x258210</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x4c1a5e</span>(_0x1e404f, _0x3c16b0, _0x258210);<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">195</span>)] = <span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">196</span>);<br><br>  _0x427b16.<span class="hljs-property">TwpwF</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x29dce7, _0x56b21b</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x29dce7 == _0x56b21b;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">335</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x17b6bd, _0x3f4db8</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x17b6bd == _0x3f4db8;<br>  &#125;;<br><br>  _0x427b16.<span class="hljs-property">nlNzw</span> = <span class="hljs-string">&quot;input is null!&quot;</span>;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">262</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x553213, _0x2038e8</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x553213 + _0x2038e8;<br>  &#125;;<br><br>  _0x427b16.<span class="hljs-property">dcpRD</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x4ed331, _0x493899</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x4ed331 &lt;= _0x493899;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">238</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x3f2126, _0x2e2718</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x3f2126 &amp; _0x2e2718;<br>  &#125;;<br><br>  _0x427b16.<span class="hljs-property">HZXuv</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0xb22ba1, _0x14a139</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0xb22ba1 &gt;&gt; _0x14a139;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">314</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x46190f, _0x28a41a</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x46190f &gt;= _0x28a41a;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">264</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x4b3ddc, _0x2102ae</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x4b3ddc &amp; _0x2102ae;<br>  &#125;;<br><br>  _0x427b16.<span class="hljs-property">nFXTL</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x526916, _0x59cbf3</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x526916 + _0x59cbf3;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">322</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x4ec7c2, _0x33356e</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x4ec7c2</span>(_0x33356e);<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">215</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x1f9046, _0x208492</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x1f9046 != _0x208492;<br>  &#125;;<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">313</span>)] = <span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">206</span>);<br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">253</span>)] = <span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">342</span>);<br>  _0x427b16.<span class="hljs-property">DPmAu</span> = <span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">226</span>);<br><br>  _0x427b16[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">200</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x4ec49c, _0x5e0f42</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x4ec49c</span>(_0x5e0f42);<br>  &#125;;<br><br>  <span class="hljs-keyword">var</span> _0x40bb32 = _0x427b16;<br><br>  <span class="hljs-keyword">var</span> _0x1517a0 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x1afcbb = _0x546611;<br>    <span class="hljs-keyword">var</span> _0x43bcec = &#123;&#125;;<br><br>    _0x43bcec[<span class="hljs-title function_">_0x1afcbb</span>(<span class="hljs-number">327</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0xaddaf, _0x3790ac</span>) &#123;<br>      <span class="hljs-keyword">return</span> _0xaddaf &lt; _0x3790ac;<br>    &#125;;<br><br>    <span class="hljs-keyword">var</span> _0x3d2cfb = _0x43bcec;<br><br>    <span class="hljs-keyword">var</span> _0x102d22 = !![];<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x29d538, _0x9284da</span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x28907a = _0x1afcbb;<br>      <span class="hljs-keyword">var</span> _0x2f4712 = &#123;&#125;;<br><br>      _0x2f4712[<span class="hljs-title function_">_0x28907a</span>(<span class="hljs-number">307</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x13fa79, _0xd2a276</span>) &#123;<br>        <span class="hljs-keyword">var</span> _0x3ea9e5 = _0x28907a;<br>        <span class="hljs-keyword">return</span> _0x3d2cfb[<span class="hljs-title function_">_0x3ea9e5</span>(<span class="hljs-number">327</span>)](_0x13fa79, _0xd2a276);<br>      &#125;;<br><br>      _0x2f4712.<span class="hljs-property">MGeua</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x138668, _0x43a0ae</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x138668</span>(_0x43a0ae);<br>      &#125;;<br><br>      _0x2f4712[<span class="hljs-title function_">_0x28907a</span>(<span class="hljs-number">332</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x54e219, _0x34475b</span>) &#123;<br>        <span class="hljs-keyword">return</span> _0x54e219 !== _0x34475b;<br>      &#125;;<br><br>      <span class="hljs-keyword">var</span> _0x21d50e = _0x2f4712;<br><br>      <span class="hljs-keyword">if</span> (_0x102d22) &#123;<br>        <span class="hljs-keyword">var</span> _0x5acb03 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>          <span class="hljs-keyword">var</span> _0x1f919a = _0x28907a;<br><br>          <span class="hljs-keyword">if</span> (_0x9284da) &#123;<br>            <span class="hljs-keyword">if</span> (_0x21d50e[<span class="hljs-title function_">_0x1f919a</span>(<span class="hljs-number">332</span>)](<span class="hljs-string">&quot;ehKcO&quot;</span>, <span class="hljs-title function_">_0x1f919a</span>(<span class="hljs-number">297</span>))) &#123;<br>              <span class="hljs-keyword">var</span> _0x3a5c19 = _0x9284da[<span class="hljs-title function_">_0x1f919a</span>(<span class="hljs-number">271</span>)](_0x29d538, <span class="hljs-variable language_">arguments</span>);<br><br>              <span class="hljs-keyword">return</span> _0x9284da = <span class="hljs-literal">null</span>, _0x3a5c19;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>              <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _0x21fee4 = <span class="hljs-string">&quot;&quot;</span>, _0x1c59d7 = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x4dbfd8</span>(_0x89d26b), _0x15a39b = _0x1c59d7.<span class="hljs-property">byteLength</span>, _0x40158c = <span class="hljs-number">0</span>; _0x21d50e[<span class="hljs-title function_">_0x1f919a</span>(<span class="hljs-number">307</span>)](_0x40158c, _0x15a39b); _0x40158c++) _0x21fee4 += _0x5c55d2[<span class="hljs-title function_">_0x1f919a</span>(<span class="hljs-number">229</span>)](_0x1c59d7[_0x40158c]);<br><br>              <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x11d5f2</span>(_0x21d50e.<span class="hljs-title class_">MGeua</span>(_0x578155, _0x21fee4));<br>            &#125;<br>          &#125;<br>        &#125;;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">var</span> _0x5acb03 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;&#125;;<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> _0x102d22 = ![], _0x5acb03;<br>    &#125;;<br>  &#125;();<br><br>  <span class="hljs-keyword">var</span> _0x1262c3 = <span class="hljs-title function_">_0x1517a0</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x11a7e7 = _0x546611;<br><br>    <span class="hljs-keyword">var</span> _0x42d846 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x3d1bc5 = a7_0x3a83;<br><br>      <span class="hljs-keyword">var</span> _0x2f2904 = _0x42d846.<span class="hljs-title function_">constructor</span>(<span class="hljs-params">_0x3d1bc5(<span class="hljs-number">347</span>)</span>)(<span class="hljs-params"></span>)[<span class="hljs-title function_">_0x3d1bc5</span>(<span class="hljs-number">304</span>)](<span class="hljs-title function_">_0x3d1bc5</span>(<span class="hljs-number">186</span>));<br><br>      <span class="hljs-keyword">return</span> !_0x2f2904[<span class="hljs-title function_">_0x3d1bc5</span>(<span class="hljs-number">241</span>)](_0x1262c3);<br>    &#125;;<br><br>    <span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x11a7e7</span>(<span class="hljs-number">336</span>)](_0x42d846);<br>  &#125;);<br><br>  _0x40bb32[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">336</span>)](_0x1262c3);<br><br>  <span class="hljs-keyword">var</span> _0x5ca7b3 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x4c7191 = _0x546611;<br>    <span class="hljs-keyword">var</span> _0xf9a214 = &#123;&#125;;<br>    _0xf9a214[<span class="hljs-title function_">_0x4c7191</span>(<span class="hljs-number">344</span>)] = _0x40bb32[<span class="hljs-title function_">_0x4c7191</span>(<span class="hljs-number">284</span>)];<br>    <span class="hljs-keyword">var</span> _0x1909f2 = _0xf9a214;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">_0x4c7191</span>(<span class="hljs-number">242</span>) === <span class="hljs-title function_">_0x4c7191</span>(<span class="hljs-number">242</span>)) &#123;<br>      <span class="hljs-keyword">var</span> _0x112dd3 = !![];<br><br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x4d2064, _0x4b1ca4</span>) &#123;<br>        <span class="hljs-keyword">if</span> (_0x112dd3) &#123;<br>          <span class="hljs-keyword">var</span> _0x497ea3 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">var</span> _0x524817 = a7_0x3a83;<br><br>            <span class="hljs-keyword">if</span> (_0x4b1ca4) &#123;<br>              <span class="hljs-keyword">if</span> (_0x1909f2[<span class="hljs-title function_">_0x524817</span>(<span class="hljs-number">344</span>)] === <span class="hljs-title function_">_0x524817</span>(<span class="hljs-number">296</span>)) &#123;<br>                <span class="hljs-keyword">var</span> _0x3868b8 = _0x4b1ca4[<span class="hljs-title function_">_0x524817</span>(<span class="hljs-number">271</span>)](_0x4d2064, <span class="hljs-variable language_">arguments</span>);<br><br>                <span class="hljs-keyword">return</span> _0x4b1ca4 = <span class="hljs-literal">null</span>, _0x3868b8;<br>              &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> ![];<br>            &#125;<br>          &#125;;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">var</span> _0x497ea3 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;&#125;;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> _0x112dd3 = ![], _0x497ea3;<br>      &#125;;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">if</span> (_0x3e37b0) &#123;<br>        <span class="hljs-keyword">var</span> _0x547b25 = _0x4a9b2e[<span class="hljs-title function_">_0x4c7191</span>(<span class="hljs-number">271</span>)](_0x40474f, <span class="hljs-variable language_">arguments</span>);<br><br>        <span class="hljs-keyword">return</span> _0x322157 = <span class="hljs-literal">null</span>, _0x547b25;<br>      &#125;<br>    &#125;<br>  &#125;();<br><br>  (<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x48916e = _0x546611;<br>    <span class="hljs-keyword">var</span> _0x4b315e = &#123;&#125;;<br>    _0x4b315e.<span class="hljs-property">EUnpx</span> = <span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">227</span>);<br><br>    _0x4b315e[<span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">343</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x41fe39, _0xe5c924</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x41fe39</span>(_0xe5c924);<br>    &#125;;<br><br>    _0x4b315e[<span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">254</span>)] = <span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">300</span>);<br>    <span class="hljs-keyword">var</span> _0x2697be = _0x4b315e;<br><br>    <span class="hljs-keyword">if</span> (_0x40bb32[<span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">246</span>)](<span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">290</span>), <span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">290</span>))) &#123;<br>      <span class="hljs-keyword">var</span> _0xb093be = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">var</span> _0x5c91f5 = _0x48916e;<br><br>        <span class="hljs-keyword">var</span> _0x418798 = _0xb093be[<span class="hljs-title function_">_0x5c91f5</span>(<span class="hljs-number">304</span>)](<span class="hljs-title function_">_0x5c91f5</span>(<span class="hljs-number">347</span>))().<span class="hljs-title function_">constructor</span>(<span class="hljs-params">_0x5c91f5(<span class="hljs-number">186</span>)</span>);<br><br>        <span class="hljs-keyword">return</span> !_0x418798.<span class="hljs-title function_">test</span>(_0x444c3b);<br>      &#125;;<br><br>      <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0xb093be</span>();<br>    &#125; <span class="hljs-keyword">else</span> _0x40bb32[<span class="hljs-title function_">_0x48916e</span>(<span class="hljs-number">239</span>)](_0x5ca7b3, <span class="hljs-variable language_">this</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x2d35c6 = _0x48916e;<br><br>      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">245</span>) === <span class="hljs-string">&quot;pbWmJ&quot;</span>) &#123;<br>        <span class="hljs-keyword">var</span> _0x18fc2a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(_0x2697be.<span class="hljs-property">EUnpx</span>);<br><br>        <span class="hljs-keyword">var</span> _0x371d30 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">188</span>), <span class="hljs-string">&quot;i&quot;</span>);<br><br>        <span class="hljs-keyword">var</span> _0x16399b = _0x2697be[<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">343</span>)](_0xdc5479, <span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">330</span>));<br><br>        <span class="hljs-keyword">if</span> (!_0x18fc2a[<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">241</span>)](_0x16399b + <span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">289</span>)) || !_0x371d30[<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">241</span>)](_0x16399b + <span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">222</span>))) &#123;<br>          <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;OIoMC&quot;</span> === _0x2697be.<span class="hljs-property">tecjo</span>) _0x2697be.<span class="hljs-title function_">stHXK</span>(_0x16399b, <span class="hljs-string">&quot;0&quot;</span>);<span class="hljs-keyword">else</span> &#123;<br>            _0x207c27 = _0x35b870[_0x2754d2[<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">210</span>)] - <span class="hljs-number">1</span>];<br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _0x2d8089 = <span class="hljs-number">0</span>; _0x2d8089 &lt; _0x55aba6; _0x2d8089++) _0x35fedd[<span class="hljs-title function_">_0x2d35c6</span>(<span class="hljs-number">309</span>)]();<br>          &#125;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-title function_">_0xdc5479</span>();<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">mode</span> = <span class="hljs-number">1</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sk</span> = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x34d3db</span>(<span class="hljs-number">32</span>);<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isPadding</span> = !<span class="hljs-number">0</span>;<br>      &#125;<br>    &#125;)();<br>  &#125;)();<br><br>  <span class="hljs-keyword">var</span> _0x934239 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x521970 = _0x546611;<br>    <span class="hljs-keyword">var</span> _0x12b4da = &#123;&#125;;<br><br>    _0x12b4da[<span class="hljs-title function_">_0x521970</span>(<span class="hljs-number">219</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x89dee9, _0x37221e</span>) &#123;<br>      <span class="hljs-keyword">return</span> _0x89dee9 + _0x37221e;<br>    &#125;;<br><br>    _0x12b4da.<span class="hljs-property">diELP</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0xeaaa8e, _0x26ac1a</span>) &#123;<br>      <span class="hljs-keyword">return</span> _0xeaaa8e !== _0x26ac1a;<br>    &#125;;<br><br>    _0x12b4da[<span class="hljs-title function_">_0x521970</span>(<span class="hljs-number">346</span>)] = <span class="hljs-title function_">_0x521970</span>(<span class="hljs-number">204</span>);<br>    <span class="hljs-keyword">var</span> _0x21deee = _0x12b4da;<br><br>    <span class="hljs-keyword">var</span> _0x1aa656 = !![];<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x531fc4, _0xb9110d</span>) &#123;<br>      <span class="hljs-keyword">if</span> (_0x1aa656) &#123;<br>        <span class="hljs-keyword">var</span> _0x15fbc1 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>          <span class="hljs-keyword">var</span> _0x50a799 = a7_0x3a83;<br>          <span class="hljs-keyword">var</span> _0x197851 = &#123;&#125;;<br><br>          _0x197851[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">279</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x3ac04c, _0x4ef2ed</span>) &#123;<br>            <span class="hljs-keyword">var</span> _0x17e8b0 = _0x50a799;<br>            <span class="hljs-keyword">return</span> _0x21deee[<span class="hljs-title function_">_0x17e8b0</span>(<span class="hljs-number">219</span>)](_0x3ac04c, _0x4ef2ed);<br>          &#125;;<br><br>          _0x197851[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">270</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x38919b, _0x5caf21</span>) &#123;<br>            <span class="hljs-keyword">return</span> _0x38919b + _0x5caf21;<br>          &#125;;<br><br>          <span class="hljs-keyword">var</span> _0x15b92f = _0x197851;<br><br>          <span class="hljs-keyword">if</span> (_0x21deee[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">325</span>)](<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">209</span>), <span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">209</span>))) &#123;<br>            <span class="hljs-keyword">var</span> _0x1f1fad = [];<br>            <span class="hljs-keyword">var</span> _0x4721f8 = [];<br><br>            _0x1f1fad[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">231</span>)](_0x387a90[_0x48a3ab + <span class="hljs-number">0</span>], _0x56c8b1[_0x15b92f.<span class="hljs-title function_">rRXqW</span>(_0x2e3b2f, <span class="hljs-number">1</span>)], _0x800c65[_0x4bc50d + <span class="hljs-number">2</span>], _0x2b1939[_0x1cb6ac + <span class="hljs-number">3</span>], _0x5b854f[_0x48659c + <span class="hljs-number">4</span>], _0x4d5397[_0x5167e3 + <span class="hljs-number">5</span>], _0x4de6d4[_0xe5700a + <span class="hljs-number">6</span>], _0x21bae4[_0xae6d74 + <span class="hljs-number">7</span>], _0x1b889c[_0x4eaf09 + <span class="hljs-number">8</span>], _0x4db3ba[_0x2488a3 + <span class="hljs-number">9</span>], _0x3d6e4c[_0x457272 + <span class="hljs-number">10</span>], _0x5cea8c[_0x33c07e + <span class="hljs-number">11</span>], _0x235497[_0x1708ae + <span class="hljs-number">12</span>], _0x3aa9bf[_0x5d27df + <span class="hljs-number">13</span>], _0x5014f2[_0x547699 + <span class="hljs-number">14</span>], _0x310581[_0x15b92f[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">270</span>)](_0x2579f8, <span class="hljs-number">15</span>)]);<br><br>            <span class="hljs-title function_">_0x3db85a</span>(_0x171c95.<span class="hljs-property">sk</span>, _0x1f1fad, _0x4721f8);<br><br>            _0x34eaf2 = _0x1e3952[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">224</span>)](_0x4721f8);<br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> (_0xb9110d) &#123;<br>              <span class="hljs-keyword">if</span> (_0x21deee[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">346</span>)] !== <span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">204</span>)) &#123;<br>                <span class="hljs-keyword">var</span> _0x50ae1c = _0x3fbc52[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">304</span>)].<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-title function_">bind</span>(_0x44a4fb);<br><br>                <span class="hljs-keyword">var</span> _0x41ab1d = _0x213656[_0x2d2f3f];<br><br>                <span class="hljs-keyword">var</span> _0x10ea5b = _0x304503[_0x41ab1d] || _0x50ae1c;<br><br>                _0x50ae1c[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">306</span>)] = _0x5a031e.<span class="hljs-title function_">bind</span>(_0x1b5a3f);<br>                _0x50ae1c.<span class="hljs-property">toString</span> = _0x10ea5b[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">240</span>)][<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">235</span>)](_0x10ea5b);<br>                _0x12a2c5[_0x41ab1d] = _0x50ae1c;<br>              &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">var</span> _0x2c59a7 = _0xb9110d[<span class="hljs-title function_">_0x50a799</span>(<span class="hljs-number">271</span>)](_0x531fc4, <span class="hljs-variable language_">arguments</span>);<br><br>                <span class="hljs-keyword">return</span> _0xb9110d = <span class="hljs-literal">null</span>, _0x2c59a7;<br>              &#125;<br>            &#125;<br>          &#125;<br>        &#125;;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">var</span> _0x15fbc1 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;&#125;;<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> _0x1aa656 = ![], _0x15fbc1;<br>    &#125;;<br>  &#125;();<br><br>  <span class="hljs-keyword">var</span> _0x1dcc3f = <span class="hljs-title function_">_0x934239</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x555550 = _0x546611;<br>    <span class="hljs-keyword">var</span> _0x2c69d5 = &#123;&#125;;<br><br>    _0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">329</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x5ea69c, _0x459b8a</span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x268b2f = _0x555550;<br>      <span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x268b2f</span>(<span class="hljs-number">311</span>)](_0x5ea69c, _0x459b8a);<br>    &#125;;<br><br>    _0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">217</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x45c474, _0x5114ce, _0x3fc01c</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x45c474</span>(_0x5114ce, _0x3fc01c);<br>    &#125;;<br><br>    _0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">280</span>)] = <span class="hljs-string">&quot;11HDESaAhiHHugDz&quot;</span>;<br><br>    _0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">286</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x396996, _0x1cd67c, _0x1ef3c7</span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x474d80 = _0x555550;<br>      <span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x474d80</span>(<span class="hljs-number">239</span>)](_0x396996, _0x1cd67c, _0x1ef3c7);<br>    &#125;;<br><br>    _0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">275</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x28a204, _0x31537c</span>) &#123;<br>      <span class="hljs-keyword">return</span> _0x28a204 + _0x31537c;<br>    &#125;;<br><br>    _0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">193</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x3d7eaf, _0x4f951b</span>) &#123;<br>      <span class="hljs-keyword">return</span> _0x3d7eaf + _0x4f951b;<br>    &#125;;<br><br>    _0x2c69d5[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">218</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x16a4c3, _0x29de33</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x16a4c3</span>(_0x29de33);<br>    &#125;;<br><br>    <span class="hljs-keyword">var</span> _0x20df7e = _0x2c69d5;<br><br>    <span class="hljs-keyword">var</span> _0x573eca;<br><br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">if</span> (_0x40bb32[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">288</span>)](<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">203</span>), <span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">189</span>))) &#123;<br>        <span class="hljs-keyword">var</span> _0x392df6 = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x3f54d0</span>();<br><br>        <span class="hljs-keyword">if</span> (_0x392df6[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">260</span>)] = !<span class="hljs-number">0</span>, _0x392df6[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">261</span>)] = <span class="hljs-number">0</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> !== _0xc76ff9) <span class="hljs-keyword">var</span> _0x1b1764 = <span class="hljs-title function_">_0x138795</span>(_0x2eba03);<span class="hljs-keyword">else</span> _0x1b1764 = <span class="hljs-title function_">_0x5a371a</span>(_0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">280</span>)]);<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x51bb89, _0x2a0af8</span>) &#123;<br>          <span class="hljs-keyword">var</span> _0x2393ca = _0x555550;<br>          <span class="hljs-literal">null</span> == _0x51bb89 &amp;&amp; <span class="hljs-title function_">_0x296202</span>(<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">202</span>));<br>          <span class="hljs-literal">null</span> != _0x2a0af8 &amp;&amp; _0x20df7e[<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">329</span>)](<span class="hljs-number">16</span>, _0x2a0af8[<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">210</span>)]) || <span class="hljs-title function_">_0x522ba7</span>(<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">206</span>));<br>          _0x51bb89[<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">261</span>)] = <span class="hljs-number">0</span>;<br><br>          _0x20df7e[<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">217</span>)](_0x1bac0a, _0x51bb89.<span class="hljs-property">sk</span>, _0x2a0af8);<br><br>          _0x51bb89.<span class="hljs-property">sk</span> = _0x51bb89.<span class="hljs-property">sk</span>[<span class="hljs-title function_">_0x2393ca</span>(<span class="hljs-number">269</span>)]();<br>        &#125;(_0x392df6, _0x1b1764), <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x376f68</span>) &#123;<br>          <span class="hljs-keyword">var</span> _0x1b95b9 = _0x555550;<br><br>          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _0x5c25ec = <span class="hljs-string">&quot;&quot;</span>, _0x327654 = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x532d8c</span>(_0x376f68), _0x1039fe = _0x327654[<span class="hljs-title function_">_0x1b95b9</span>(<span class="hljs-number">299</span>)], _0x216ff3 = <span class="hljs-number">0</span>; _0x216ff3 &lt; _0x1039fe; _0x216ff3++) _0x5c25ec += _0x4f64b5[<span class="hljs-title function_">_0x1b95b9</span>(<span class="hljs-number">229</span>)](_0x327654[_0x216ff3]);<br><br>          <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0xeefd2c</span>(<span class="hljs-title function_">_0x1bd4c2</span>(_0x5c25ec));<br>        &#125;(<span class="hljs-title function_">_0x279a35</span>(_0x392df6, _0x40cdcd.<span class="hljs-title function_">toByteArray</span>(_0x4e1833)));<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">var</span> _0x3ccfb0 = _0x40bb32[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">191</span>)](<span class="hljs-title class_">Function</span>, <span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">211</span>) + <span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">292</span>) + <span class="hljs-string">&quot;);&quot;</span>);<br><br>        _0x573eca = _0x40bb32.<span class="hljs-title function_">vbcNd</span>(_0x3ccfb0);<br>      &#125;<br>    &#125; <span class="hljs-keyword">catch</span> (_0x177925) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(_0x177925);<br>      <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;mxCkC&quot;</span> !== _0x40bb32[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">334</span>)]) <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x52284e</span>(_0x3ae3da.<span class="hljs-property">message</span>), <span class="hljs-literal">null</span>;<span class="hljs-keyword">else</span> _0x573eca = <span class="hljs-variable language_">window</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">var</span> _0x18cbaa = _0x573eca[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">317</span>)] = _0x573eca.<span class="hljs-property">console</span> || &#123;&#125;;<br><br>    <span class="hljs-keyword">var</span> _0x1d8ea7 = [<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">287</span>), <span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">230</span>), <span class="hljs-string">&quot;info&quot;</span>, _0x40bb32[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">198</span>)], <span class="hljs-string">&quot;exception&quot;</span>, <span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">205</span>), <span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">282</span>)];<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _0x503073 = <span class="hljs-number">0</span>; _0x40bb32[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">221</span>)](_0x503073, _0x1d8ea7[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">210</span>)]); _0x503073++) &#123;<br>      <span class="hljs-keyword">if</span> (_0x40bb32[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">288</span>)](_0x40bb32.<span class="hljs-property">aIThM</span>, <span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">302</span>))) &#123;<br>        <span class="hljs-keyword">var</span> _0x40372a = _0x934239.<span class="hljs-property">constructor</span>[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">197</span>)][<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">235</span>)](_0x934239);<br><br>        <span class="hljs-keyword">var</span> _0x24a860 = _0x1d8ea7[_0x503073];<br><br>        <span class="hljs-keyword">var</span> _0x2b958e = _0x18cbaa[_0x24a860] || _0x40372a;<br><br>        _0x40372a[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">306</span>)] = _0x934239[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">235</span>)](_0x934239);<br>        _0x40372a[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">240</span>)] = _0x2b958e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">240</span>)][<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">235</span>)](_0x2b958e);<br>        _0x18cbaa[_0x24a860] = _0x40372a;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">for</span> (_0xa95f37 = <span class="hljs-number">0</span>, _0x35c5b1 = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_0xe6a0c8</span>(<span class="hljs-number">36</span>), _0x56c817[<span class="hljs-number">0</span>] = _0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">286</span>)](_0x394f50, _0xc0501, <span class="hljs-number">0</span>), _0x1b4572[<span class="hljs-number">1</span>] = <span class="hljs-title function_">_0x805fb</span>(_0x562c29, <span class="hljs-number">4</span>), _0x101001[<span class="hljs-number">2</span>] = <span class="hljs-title function_">_0xcb191d</span>(_0x559f75, <span class="hljs-number">8</span>), _0x54c2cf[<span class="hljs-number">3</span>] = <span class="hljs-title function_">_0x32da34</span>(_0x22e3ae, <span class="hljs-number">12</span>); _0x50e3a4 &lt; <span class="hljs-number">32</span>;) &#123;<br>          _0x39abd7[_0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">275</span>)](_0x1ca163, <span class="hljs-number">4</span>)] = (_0x1e9c30 = _0x34cd7b[_0x377bf8], _0x564863 = _0x659d93[_0x3546df + <span class="hljs-number">1</span>], _0x383f30 = _0x21c533[_0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">193</span>)](_0x3f282d, <span class="hljs-number">2</span>)], _0x308eee = _0xbd5a2f[_0x4a8578 + <span class="hljs-number">3</span>], _0x4dfcc0 = _0xc1ddc5[_0x180f66], _0x123758 = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, _0x42dbca = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, _0x4abc7a = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, _0xadb805 = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, _0x1e9c30 ^ (_0x123758 = _0x564863 ^ _0x383f30 ^ _0x308eee ^ _0x4dfcc0, _0x4abc7a = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x1073b6</span>(<span class="hljs-number">4</span>), _0xadb805 = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x591930</span>(<span class="hljs-number">4</span>), <span class="hljs-title function_">_0x152e78</span>(_0x123758, _0x4abc7a, <span class="hljs-number">0</span>), _0xadb805[<span class="hljs-number">0</span>] = <span class="hljs-title function_">_0x46c43f</span>(_0x4abc7a[<span class="hljs-number">0</span>]), _0xadb805[<span class="hljs-number">1</span>] = _0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">218</span>)](_0x1dbd57, _0x4abc7a[<span class="hljs-number">1</span>]), _0xadb805[<span class="hljs-number">3</span>] = _0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">218</span>)](_0x35402b, _0x4abc7a[<span class="hljs-number">2</span>]), _0xadb805[<span class="hljs-number">2</span>] = <span class="hljs-title function_">_0x201e3c</span>(_0x4abc7a[<span class="hljs-number">3</span>]), (_0x42dbca = <span class="hljs-title function_">_0x4ef04c</span>(_0xadb805, <span class="hljs-number">0</span>)) ^ _0x20df7e[<span class="hljs-title function_">_0x555550</span>(<span class="hljs-number">286</span>)](_0x533f58, _0x42dbca, <span class="hljs-number">2</span>) ^ <span class="hljs-title function_">_0x52eff3</span>(_0x42dbca, <span class="hljs-number">10</span>) ^ <span class="hljs-title function_">_0x3a0748</span>(_0x42dbca, <span class="hljs-number">18</span>) ^ <span class="hljs-title function_">_0x3ce0ac</span>(_0x42dbca, <span class="hljs-number">24</span>)));<br>          _0x37f3a2++;<br>        &#125;<br><br>        <span class="hljs-keyword">var</span> _0x1e9c30;<br><br>        <span class="hljs-keyword">var</span> _0x564863;<br><br>        <span class="hljs-keyword">var</span> _0x383f30;<br><br>        <span class="hljs-keyword">var</span> _0x308eee;<br><br>        <span class="hljs-keyword">var</span> _0x4dfcc0;<br><br>        <span class="hljs-keyword">var</span> _0x123758;<br><br>        <span class="hljs-keyword">var</span> _0x42dbca;<br><br>        <span class="hljs-keyword">var</span> _0x4abc7a;<br><br>        <span class="hljs-keyword">var</span> _0xadb805;<br><br>        <span class="hljs-title function_">_0x1e3a22</span>(_0x490453[<span class="hljs-number">35</span>], _0x1ef8e6, <span class="hljs-number">0</span>);<br><br>        <span class="hljs-title function_">_0x56712e</span>(_0x530a18[<span class="hljs-number">34</span>], _0x19cda8, <span class="hljs-number">4</span>);<br><br>        <span class="hljs-title function_">_0xb9f3c6</span>(_0x4d9783[<span class="hljs-number">33</span>], _0x54710f, <span class="hljs-number">8</span>);<br><br>        <span class="hljs-title function_">_0x238c35</span>(_0x377f1d[<span class="hljs-number">32</span>], _0x4d32a9, <span class="hljs-number">12</span>);<br>      &#125;<br>    &#125;<br>  &#125;);<br><br>  _0x40bb32[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">336</span>)](_0x1dcc3f);<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x123d36</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x9233f2 = _0x546611;<br>    <span class="hljs-variable language_">this</span>[<span class="hljs-title function_">_0x9233f2</span>(<span class="hljs-number">261</span>)] = <span class="hljs-number">1</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sk</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">32</span>);<br>    <span class="hljs-variable language_">this</span>[<span class="hljs-title function_">_0x9233f2</span>(<span class="hljs-number">260</span>)] = !<span class="hljs-number">0</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x2916a0</span>(<span class="hljs-params">_0x5557e9, _0x2a02f6</span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x5c1533 = _0x546611;<br>    <span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x5c1533</span>(<span class="hljs-number">208</span>)](_0x40bb32[<span class="hljs-title function_">_0x5c1533</span>(<span class="hljs-number">190</span>)](<span class="hljs-number">255</span>, _0x5557e9[_0x2a02f6]), <span class="hljs-number">24</span>) | (<span class="hljs-number">255</span> &amp; _0x5557e9[_0x2a02f6 + <span class="hljs-number">1</span>]) &lt;&lt; <span class="hljs-number">16</span> | _0x40bb32[<span class="hljs-title function_">_0x5c1533</span>(<span class="hljs-number">324</span>)](<span class="hljs-number">255</span> &amp; _0x5557e9[_0x2a02f6 + <span class="hljs-number">2</span>], <span class="hljs-number">8</span>) | <span class="hljs-number">255</span> &amp; _0x5557e9[_0x2a02f6 + <span class="hljs-number">3</span>];<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x5b65b6</span>(<span class="hljs-params">_0x4f3580, _0x241e6a, _0x5bae00</span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x43d103 = _0x546611;<br>    _0x241e6a[_0x5bae00] = <span class="hljs-number">255</span> &amp; _0x40bb32.<span class="hljs-title function_">ujsRG</span>(_0x4f3580, <span class="hljs-number">24</span>);<br>    _0x241e6a[_0x5bae00 + <span class="hljs-number">1</span>] = _0x40bb32[<span class="hljs-title function_">_0x43d103</span>(<span class="hljs-number">255</span>)](<span class="hljs-number">255</span>, _0x4f3580 &gt;&gt; <span class="hljs-number">16</span>);<br>    _0x241e6a[_0x5bae00 + <span class="hljs-number">2</span>] = <span class="hljs-number">255</span> &amp; _0x40bb32[<span class="hljs-title function_">_0x43d103</span>(<span class="hljs-number">258</span>)](_0x4f3580, <span class="hljs-number">8</span>);<br>    _0x241e6a[_0x40bb32[<span class="hljs-title function_">_0x43d103</span>(<span class="hljs-number">340</span>)](_0x5bae00, <span class="hljs-number">3</span>)] = _0x40bb32.<span class="hljs-title function_">wsLWY</span>(<span class="hljs-number">255</span>, _0x4f3580);<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x4bb945</span>(<span class="hljs-params">_0x40e48f, _0x179dd7</span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x4ae478 = _0x546611;<br>    <span class="hljs-keyword">var</span> _0x254cee = &#123;&#125;;<br>    _0x254cee[<span class="hljs-title function_">_0x4ae478</span>(<span class="hljs-number">333</span>)] = <span class="hljs-title function_">_0x4ae478</span>(<span class="hljs-number">225</span>);<br>    <span class="hljs-keyword">var</span> _0x2f8b77 = _0x254cee;<br>    <span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x4ae478</span>(<span class="hljs-number">257</span>)](<span class="hljs-keyword">function</span> (<span class="hljs-params">_0x132e5b, _0xf75d80</span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x4f37a8 = _0x4ae478;<br>      <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x4f37a8</span>(<span class="hljs-number">225</span>) === _0x2f8b77[<span class="hljs-title function_">_0x4f37a8</span>(<span class="hljs-number">333</span>)] ? _0x132e5b &lt;&lt; _0xf75d80 : _0x43d6be[<span class="hljs-number">255</span> &amp; _0x4b747a];<br>    &#125;(_0x40e48f, _0x179dd7), _0x40e48f &gt;&gt; <span class="hljs-number">32</span> - _0x179dd7);<br>  &#125;<br><br>  <span class="hljs-keyword">var</span> _0x3252b4 = [<span class="hljs-number">214</span>, <span class="hljs-number">145</span>, <span class="hljs-number">233</span>, <span class="hljs-number">254</span>, <span class="hljs-number">204</span>, <span class="hljs-number">225</span>, <span class="hljs-number">61</span>, <span class="hljs-number">183</span>, <span class="hljs-number">22</span>, <span class="hljs-number">182</span>, <span class="hljs-number">20</span>, <span class="hljs-number">194</span>, <span class="hljs-number">40</span>, <span class="hljs-number">251</span>, <span class="hljs-number">44</span>, <span class="hljs-number">5</span>, <span class="hljs-number">43</span>, <span class="hljs-number">103</span>, <span class="hljs-number">154</span>, <span class="hljs-number">118</span>, <span class="hljs-number">42</span>, <span class="hljs-number">190</span>, <span class="hljs-number">4</span>, <span class="hljs-number">195</span>, <span class="hljs-number">170</span>, <span class="hljs-number">68</span>, <span class="hljs-number">19</span>, <span class="hljs-number">38</span>, <span class="hljs-number">73</span>, <span class="hljs-number">134</span>, <span class="hljs-number">6</span>, <span class="hljs-number">153</span>, <span class="hljs-number">156</span>, <span class="hljs-number">66</span>, <span class="hljs-number">80</span>, <span class="hljs-number">244</span>, <span class="hljs-number">145</span>, <span class="hljs-number">239</span>, <span class="hljs-number">152</span>, <span class="hljs-number">122</span>, <span class="hljs-number">51</span>, <span class="hljs-number">84</span>, <span class="hljs-number">11</span>, <span class="hljs-number">67</span>, <span class="hljs-number">237</span>, <span class="hljs-number">207</span>, <span class="hljs-number">172</span>, <span class="hljs-number">98</span>, <span class="hljs-number">228</span>, <span class="hljs-number">179</span>, <span class="hljs-number">28</span>, <span class="hljs-number">169</span>, <span class="hljs-number">201</span>, <span class="hljs-number">8</span>, <span class="hljs-number">232</span>, <span class="hljs-number">149</span>, <span class="hljs-number">128</span>, <span class="hljs-number">223</span>, <span class="hljs-number">148</span>, <span class="hljs-number">250</span>, <span class="hljs-number">117</span>, <span class="hljs-number">143</span>, <span class="hljs-number">63</span>, <span class="hljs-number">166</span>, <span class="hljs-number">71</span>, <span class="hljs-number">7</span>, <span class="hljs-number">167</span>, <span class="hljs-number">252</span>, <span class="hljs-number">243</span>, <span class="hljs-number">115</span>, <span class="hljs-number">23</span>, <span class="hljs-number">186</span>, <span class="hljs-number">131</span>, <span class="hljs-number">89</span>, <span class="hljs-number">60</span>, <span class="hljs-number">25</span>, <span class="hljs-number">230</span>, <span class="hljs-number">133</span>, <span class="hljs-number">79</span>, <span class="hljs-number">168</span>, <span class="hljs-number">104</span>, <span class="hljs-number">107</span>, <span class="hljs-number">129</span>, <span class="hljs-number">178</span>, <span class="hljs-number">113</span>, <span class="hljs-number">100</span>, <span class="hljs-number">218</span>, <span class="hljs-number">139</span>, <span class="hljs-number">248</span>, <span class="hljs-number">235</span>, <span class="hljs-number">15</span>, <span class="hljs-number">75</span>, <span class="hljs-number">112</span>, <span class="hljs-number">86</span>, <span class="hljs-number">157</span>, <span class="hljs-number">53</span>, <span class="hljs-number">30</span>, <span class="hljs-number">36</span>, <span class="hljs-number">14</span>, <span class="hljs-number">94</span>, <span class="hljs-number">99</span>, <span class="hljs-number">88</span>, <span class="hljs-number">209</span>, <span class="hljs-number">162</span>, <span class="hljs-number">37</span>, <span class="hljs-number">34</span>, <span class="hljs-number">124</span>, <span class="hljs-number">59</span>, <span class="hljs-number">1</span>, <span class="hljs-number">33</span>, <span class="hljs-number">120</span>, <span class="hljs-number">135</span>, <span class="hljs-number">212</span>, <span class="hljs-number">0</span>, <span class="hljs-number">70</span>, <span class="hljs-number">87</span>, <span class="hljs-number">159</span>, <span class="hljs-number">211</span>, <span class="hljs-number">39</span>, <span class="hljs-number">82</span>, <span class="hljs-number">76</span>, <span class="hljs-number">54</span>, <span class="hljs-number">2</span>, <span class="hljs-number">231</span>, <span class="hljs-number">160</span>, <span class="hljs-number">196</span>, <span class="hljs-number">200</span>, <span class="hljs-number">158</span>, <span class="hljs-number">234</span>, <span class="hljs-number">191</span>, <span class="hljs-number">138</span>, <span class="hljs-number">210</span>, <span class="hljs-number">64</span>, <span class="hljs-number">199</span>, <span class="hljs-number">56</span>, <span class="hljs-number">181</span>, <span class="hljs-number">163</span>, <span class="hljs-number">247</span>, <span class="hljs-number">242</span>, <span class="hljs-number">206</span>, <span class="hljs-number">249</span>, <span class="hljs-number">97</span>, <span class="hljs-number">21</span>, <span class="hljs-number">161</span>, <span class="hljs-number">224</span>, <span class="hljs-number">174</span>, <span class="hljs-number">93</span>, <span class="hljs-number">164</span>, <span class="hljs-number">155</span>, <span class="hljs-number">52</span>, <span class="hljs-number">26</span>, <span class="hljs-number">85</span>, <span class="hljs-number">173</span>, <span class="hljs-number">147</span>, <span class="hljs-number">50</span>, <span class="hljs-number">48</span>, <span class="hljs-number">245</span>, <span class="hljs-number">140</span>, <span class="hljs-number">177</span>, <span class="hljs-number">227</span>, <span class="hljs-number">29</span>, <span class="hljs-number">246</span>, <span class="hljs-number">226</span>, <span class="hljs-number">46</span>, <span class="hljs-number">130</span>, <span class="hljs-number">102</span>, <span class="hljs-number">202</span>, <span class="hljs-number">96</span>, <span class="hljs-number">192</span>, <span class="hljs-number">41</span>, <span class="hljs-number">35</span>, <span class="hljs-number">171</span>, <span class="hljs-number">13</span>, <span class="hljs-number">83</span>, <span class="hljs-number">78</span>, <span class="hljs-number">111</span>, <span class="hljs-number">213</span>, <span class="hljs-number">219</span>, <span class="hljs-number">55</span>, <span class="hljs-number">69</span>, <span class="hljs-number">222</span>, <span class="hljs-number">253</span>, <span class="hljs-number">142</span>, <span class="hljs-number">47</span>, <span class="hljs-number">3</span>, <span class="hljs-number">255</span>, <span class="hljs-number">106</span>, <span class="hljs-number">114</span>, <span class="hljs-number">109</span>, <span class="hljs-number">108</span>, <span class="hljs-number">91</span>, <span class="hljs-number">81</span>, <span class="hljs-number">141</span>, <span class="hljs-number">27</span>, <span class="hljs-number">175</span>, <span class="hljs-number">146</span>, <span class="hljs-number">187</span>, <span class="hljs-number">221</span>, <span class="hljs-number">188</span>, <span class="hljs-number">127</span>, <span class="hljs-number">17</span>, <span class="hljs-number">217</span>, <span class="hljs-number">92</span>, <span class="hljs-number">65</span>, <span class="hljs-number">31</span>, <span class="hljs-number">16</span>, <span class="hljs-number">90</span>, <span class="hljs-number">216</span>, <span class="hljs-number">10</span>, <span class="hljs-number">193</span>, <span class="hljs-number">49</span>, <span class="hljs-number">136</span>, <span class="hljs-number">165</span>, <span class="hljs-number">205</span>, <span class="hljs-number">123</span>, <span class="hljs-number">189</span>, <span class="hljs-number">45</span>, <span class="hljs-number">116</span>, <span class="hljs-number">208</span>, <span class="hljs-number">18</span>, <span class="hljs-number">184</span>, <span class="hljs-number">229</span>, <span class="hljs-number">180</span>, <span class="hljs-number">176</span>, <span class="hljs-number">137</span>, <span class="hljs-number">105</span>, <span class="hljs-number">151</span>, <span class="hljs-number">74</span>, <span class="hljs-number">12</span>, <span class="hljs-number">150</span>, <span class="hljs-number">119</span>, <span class="hljs-number">126</span>, <span class="hljs-number">101</span>, <span class="hljs-number">185</span>, <span class="hljs-number">241</span>, <span class="hljs-number">9</span>, <span class="hljs-number">197</span>, <span class="hljs-number">110</span>, <span class="hljs-number">198</span>, <span class="hljs-number">132</span>, <span class="hljs-number">24</span>, <span class="hljs-number">240</span>, <span class="hljs-number">125</span>, <span class="hljs-number">236</span>, <span class="hljs-number">58</span>, <span class="hljs-number">220</span>, <span class="hljs-number">77</span>, <span class="hljs-number">32</span>, <span class="hljs-number">121</span>, <span class="hljs-number">238</span>, <span class="hljs-number">95</span>, <span class="hljs-number">62</span>, <span class="hljs-number">215</span>, <span class="hljs-number">203</span>, <span class="hljs-number">57</span>, <span class="hljs-number">73</span>];<br>  <span class="hljs-keyword">var</span> _0x1586d9 = [<span class="hljs-number">462357</span>, <span class="hljs-number">472066609</span>, <span class="hljs-number">943670861</span>, <span class="hljs-number">1415275113</span>, <span class="hljs-number">1886879365</span>, <span class="hljs-number">2358483617</span>, <span class="hljs-number">2830087869</span>, <span class="hljs-number">3301692121</span>, <span class="hljs-number">3773296373</span>, <span class="hljs-number">4228057617</span>, <span class="hljs-number">404694573</span>, <span class="hljs-number">876298825</span>, <span class="hljs-number">1347903077</span>, <span class="hljs-number">1819507329</span>, <span class="hljs-number">2291111581</span>, <span class="hljs-number">2762715833</span>, <span class="hljs-number">3234320085</span>, <span class="hljs-number">3705924337</span>, <span class="hljs-number">4177462797</span>, <span class="hljs-number">337322537</span>, <span class="hljs-number">808926789</span>, <span class="hljs-number">1280531041</span>, <span class="hljs-number">1752135293</span>, <span class="hljs-number">2223739545</span>, <span class="hljs-number">2695343797</span>, <span class="hljs-number">3166948049</span>, <span class="hljs-number">3638552301</span>, <span class="hljs-number">4110090761</span>, <span class="hljs-number">269950501</span>, <span class="hljs-number">741554753</span>, <span class="hljs-number">1213159005</span>, <span class="hljs-number">1684763264</span>];<br>  <span class="hljs-keyword">var</span> _0x476a1a = [<span class="hljs-number">2746333894</span>, <span class="hljs-number">1453994832</span>, <span class="hljs-number">1736282519</span>, <span class="hljs-number">2993693405</span>];<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x1bb85d</span>(<span class="hljs-params">_0x5af03e</span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x4ea14c = _0x546611;<br>    <span class="hljs-keyword">return</span> _0x40bb32.<span class="hljs-property">bHwxf</span> === _0x40bb32[<span class="hljs-title function_">_0x4ea14c</span>(<span class="hljs-number">276</span>)] ? _0x53c978 : _0x3252b4[_0x40bb32.<span class="hljs-title class_">IKPqy</span>(<span class="hljs-number">255</span>, _0x5af03e)];<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x4bb41b</span>(<span class="hljs-params">_0x1e84ff, _0x187630</span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x5931dc = _0x546611;<br><br>    <span class="hljs-keyword">var</span> _0x20a9c0;<br><br>    <span class="hljs-keyword">var</span> _0x1de98a;<br><br>    <span class="hljs-keyword">var</span> _0x18aa83;<br><br>    <span class="hljs-keyword">var</span> _0x5f2f42;<br><br>    <span class="hljs-keyword">var</span> _0x773d79 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">4</span>);<br><br>    <span class="hljs-keyword">var</span> _0x41d1b8 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">36</span>);<br><br>    <span class="hljs-keyword">var</span> _0x3c5877 = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">for</span> (_0x773d79[<span class="hljs-number">0</span>] = <span class="hljs-title function_">_0x2916a0</span>(_0x187630, <span class="hljs-number">0</span>), _0x773d79[<span class="hljs-number">1</span>] = <span class="hljs-title function_">_0x2916a0</span>(_0x187630, <span class="hljs-number">4</span>), _0x773d79[<span class="hljs-number">2</span>] = _0x40bb32.<span class="hljs-title function_">pBbbx</span>(_0x2916a0, _0x187630, <span class="hljs-number">8</span>), _0x773d79[<span class="hljs-number">3</span>] = <span class="hljs-title function_">_0x2916a0</span>(_0x187630, <span class="hljs-number">12</span>), _0x41d1b8[<span class="hljs-number">0</span>] = _0x40bb32[<span class="hljs-title function_">_0x5931dc</span>(<span class="hljs-number">295</span>)](_0x773d79[<span class="hljs-number">0</span>], _0x476a1a[<span class="hljs-number">0</span>]), _0x41d1b8[<span class="hljs-number">1</span>] = _0x773d79[<span class="hljs-number">1</span>] ^ _0x476a1a[<span class="hljs-number">1</span>], _0x41d1b8[<span class="hljs-number">2</span>] = _0x773d79[<span class="hljs-number">2</span>] ^ _0x476a1a[<span class="hljs-number">2</span>], _0x41d1b8[<span class="hljs-number">3</span>] = _0x773d79[<span class="hljs-number">3</span>] ^ _0x476a1a[<span class="hljs-number">3</span>]; _0x3c5877 &lt; <span class="hljs-number">32</span>; _0x3c5877++) &#123;<br>      _0x41d1b8[_0x3c5877 + <span class="hljs-number">4</span>] = _0x41d1b8[_0x3c5877] ^ (_0x20a9c0 = _0x41d1b8[_0x3c5877 + <span class="hljs-number">1</span>] ^ _0x41d1b8[_0x3c5877 + <span class="hljs-number">2</span>] ^ _0x41d1b8[_0x40bb32[<span class="hljs-title function_">_0x5931dc</span>(<span class="hljs-number">294</span>)](_0x3c5877, <span class="hljs-number">3</span>)] ^ _0x1586d9[_0x3c5877], <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, _0x5f2f42 = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, _0x18aa83 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">4</span>), _0x5f2f42 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">4</span>), <span class="hljs-title function_">_0x5b65b6</span>(_0x20a9c0, _0x18aa83, <span class="hljs-number">0</span>), _0x5f2f42[<span class="hljs-number">0</span>] = <span class="hljs-title function_">_0x1bb85d</span>(_0x18aa83[<span class="hljs-number">0</span>]), _0x5f2f42[<span class="hljs-number">1</span>] = <span class="hljs-title function_">_0x1bb85d</span>(_0x18aa83[<span class="hljs-number">1</span>]), _0x5f2f42[<span class="hljs-number">2</span>] = <span class="hljs-title function_">_0x1bb85d</span>(_0x18aa83[<span class="hljs-number">2</span>]), _0x5f2f42[<span class="hljs-number">3</span>] = <span class="hljs-title function_">_0x1bb85d</span>(_0x18aa83[<span class="hljs-number">3</span>]), (_0x1de98a = <span class="hljs-title function_">_0x2916a0</span>(_0x5f2f42, <span class="hljs-number">0</span>)) ^ <span class="hljs-title function_">_0x4bb945</span>(_0x1de98a, <span class="hljs-number">13</span>) ^ <span class="hljs-title function_">_0x4bb945</span>(_0x1de98a, <span class="hljs-number">23</span>));<br>      _0x1e84ff[_0x3c5877] = _0x41d1b8[_0x3c5877 + <span class="hljs-number">4</span>];<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x46c93d</span>(<span class="hljs-params">_0xf38bf4, _0x31ceb7, _0x497fef</span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x5dfa7e = _0x546611;<br><br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, ulbuf = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">36</span>), ulbuf[<span class="hljs-number">0</span>] = <span class="hljs-title function_">_0x2916a0</span>(_0x31ceb7, <span class="hljs-number">0</span>), ulbuf[<span class="hljs-number">1</span>] = <span class="hljs-title function_">_0x2916a0</span>(_0x31ceb7, <span class="hljs-number">4</span>), ulbuf[<span class="hljs-number">2</span>] = <span class="hljs-title function_">_0x2916a0</span>(_0x31ceb7, <span class="hljs-number">8</span>), ulbuf[<span class="hljs-number">3</span>] = _0x40bb32.<span class="hljs-title function_">pBbbx</span>(_0x2916a0, _0x31ceb7, <span class="hljs-number">12</span>); i &lt; <span class="hljs-number">32</span>;) &#123;<br>      ulbuf[_0x40bb32.<span class="hljs-title class_">YroQf</span>(i, <span class="hljs-number">4</span>)] = (_0x29823c = ulbuf[i], _0x525507 = ulbuf[i + <span class="hljs-number">1</span>], _0x3fd608 = ulbuf[i + <span class="hljs-number">2</span>], _0x27d46c = ulbuf[_0x40bb32[<span class="hljs-title function_">_0x5dfa7e</span>(<span class="hljs-number">250</span>)](i, <span class="hljs-number">3</span>)], _0x4e2309 = _0xf38bf4[i], _0x37467e = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, _0x23f72d = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, _0x330b57 = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, _0x2d5ae4 = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>, _0x29823c ^ (_0x37467e = _0x40bb32[<span class="hljs-title function_">_0x5dfa7e</span>(<span class="hljs-number">305</span>)](_0x525507 ^ _0x3fd608 ^ _0x27d46c, _0x4e2309), _0x330b57 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">4</span>), _0x2d5ae4 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">4</span>), <span class="hljs-title function_">_0x5b65b6</span>(_0x37467e, _0x330b57, <span class="hljs-number">0</span>), _0x2d5ae4[<span class="hljs-number">0</span>] = <span class="hljs-title function_">_0x1bb85d</span>(_0x330b57[<span class="hljs-number">0</span>]), _0x2d5ae4[<span class="hljs-number">1</span>] = <span class="hljs-title function_">_0x1bb85d</span>(_0x330b57[<span class="hljs-number">1</span>]), _0x2d5ae4[<span class="hljs-number">3</span>] = <span class="hljs-title function_">_0x1bb85d</span>(_0x330b57[<span class="hljs-number">2</span>]), _0x2d5ae4[<span class="hljs-number">2</span>] = <span class="hljs-title function_">_0x1bb85d</span>(_0x330b57[<span class="hljs-number">3</span>]), _0x40bb32.<span class="hljs-title function_">sDqJj</span>(_0x40bb32.<span class="hljs-title function_">sDqJj</span>(_0x40bb32[<span class="hljs-title function_">_0x5dfa7e</span>(<span class="hljs-number">318</span>)](_0x23f72d = <span class="hljs-title function_">_0x2916a0</span>(_0x2d5ae4, <span class="hljs-number">0</span>), <span class="hljs-title function_">_0x4bb945</span>(_0x23f72d, <span class="hljs-number">2</span>)) ^ <span class="hljs-title function_">_0x4bb945</span>(_0x23f72d, <span class="hljs-number">10</span>), <span class="hljs-title function_">_0x4bb945</span>(_0x23f72d, <span class="hljs-number">18</span>)), _0x40bb32[<span class="hljs-title function_">_0x5dfa7e</span>(<span class="hljs-number">273</span>)](_0x4bb945, _0x23f72d, <span class="hljs-number">24</span>))));<br>      i++;<br>    &#125;<br><br>    <span class="hljs-keyword">var</span> _0x29823c;<br><br>    <span class="hljs-keyword">var</span> _0x525507;<br><br>    <span class="hljs-keyword">var</span> _0x3fd608;<br><br>    <span class="hljs-keyword">var</span> _0x27d46c;<br><br>    <span class="hljs-keyword">var</span> _0x4e2309;<br><br>    <span class="hljs-keyword">var</span> _0x37467e;<br><br>    <span class="hljs-keyword">var</span> _0x23f72d;<br><br>    <span class="hljs-keyword">var</span> _0x330b57;<br><br>    <span class="hljs-keyword">var</span> _0x2d5ae4;<br><br>    _0x40bb32[<span class="hljs-title function_">_0x5dfa7e</span>(<span class="hljs-number">244</span>)](_0x5b65b6, ulbuf[<span class="hljs-number">35</span>], _0x497fef, <span class="hljs-number">0</span>);<br><br>    _0x40bb32[<span class="hljs-title function_">_0x5dfa7e</span>(<span class="hljs-number">244</span>)](_0x5b65b6, ulbuf[<span class="hljs-number">34</span>], _0x497fef, <span class="hljs-number">4</span>);<br><br>    <span class="hljs-title function_">_0x5b65b6</span>(ulbuf[<span class="hljs-number">33</span>], _0x497fef, <span class="hljs-number">8</span>);<br><br>    <span class="hljs-title function_">_0x5b65b6</span>(ulbuf[<span class="hljs-number">32</span>], _0x497fef, <span class="hljs-number">12</span>);<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x2bd34</span>(<span class="hljs-params">_0x5626f2, _0x1c6c42</span>) &#123;<br>    <span class="hljs-keyword">var</span> _0xb0c898 = _0x546611;<br>    <span class="hljs-keyword">var</span> _0x1c4d9a = &#123;&#125;;<br><br>    _0x1c4d9a.<span class="hljs-property">iHzdy</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0xebda1a, _0x55e636</span>) &#123;<br>      <span class="hljs-keyword">return</span> _0xebda1a &amp; _0x55e636;<br>    &#125;;<br><br>    _0x1c4d9a.<span class="hljs-property">mhbZS</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x1b3d02, _0x204606</span>) &#123;<br>      <span class="hljs-keyword">return</span> _0x1b3d02 &amp; _0x204606;<br>    &#125;;<br><br>    _0x1c4d9a.<span class="hljs-property">QSTVa</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x29c865, _0x579357</span>) &#123;<br>      <span class="hljs-keyword">return</span> _0x29c865 | _0x579357;<br>    &#125;;<br><br>    <span class="hljs-keyword">var</span> _0x3d9622 = _0x1c4d9a;<br>    <span class="hljs-keyword">if</span> (_0x40bb32[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">311</span>)](<span class="hljs-literal">null</span>, _0x5626f2)) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">var</span> _0xae042e = [];<br><br>    <span class="hljs-keyword">if</span> (_0xae042e = _0xae042e[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">224</span>)](_0x5626f2), <span class="hljs-number">1</span> == _0x1c6c42) &#123;<br>      <span class="hljs-keyword">if</span> (_0x40bb32[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">195</span>)] === <span class="hljs-string">&quot;MERGR&quot;</span>) &#123;<br>        <span class="hljs-keyword">var</span> _0x1ffb2a;<br><br>        <span class="hljs-keyword">var</span> _0x1a933a;<br><br>        <span class="hljs-keyword">var</span> _0x5a57ec = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x4e3dd5</span>();<br><br>        _0x1ffb2a = _0x5dfbbc.<span class="hljs-property">length</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _0x55e152 = <span class="hljs-number">0</span>; _0x55e152 &lt; _0x1ffb2a; _0x55e152++) <span class="hljs-keyword">if</span> ((_0x1a933a = _0x5b0d32[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">251</span>)](_0x55e152)) &gt;= <span class="hljs-number">65536</span> &amp;&amp; _0x1a933a &lt;= <span class="hljs-number">1114111</span>) &#123;<br>          _0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">231</span>)](_0x1a933a &gt;&gt; <span class="hljs-number">18</span> &amp; <span class="hljs-number">7</span> | <span class="hljs-number">240</span>);<br><br>          _0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">231</span>)](_0x3d9622[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">233</span>)](_0x1a933a &gt;&gt; <span class="hljs-number">12</span>, <span class="hljs-number">63</span>) | <span class="hljs-number">128</span>);<br><br>          _0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">231</span>)](_0x1a933a &gt;&gt; <span class="hljs-number">6</span> &amp; <span class="hljs-number">63</span> | <span class="hljs-number">128</span>);<br><br>          _0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">231</span>)](_0x3d9622[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">331</span>)](<span class="hljs-number">63</span>, _0x1a933a) | <span class="hljs-number">128</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">if</span> (_0x1a933a &gt;= <span class="hljs-number">2048</span> &amp;&amp; _0x1a933a &lt;= <span class="hljs-number">65535</span>) &#123;<br>            _0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">231</span>)](_0x3d9622[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">301</span>)](_0x1a933a &gt;&gt; <span class="hljs-number">12</span> &amp; <span class="hljs-number">15</span>, <span class="hljs-number">224</span>));<br><br>            _0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">231</span>)](_0x3d9622[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">301</span>)](_0x1a933a &gt;&gt; <span class="hljs-number">6</span> &amp; <span class="hljs-number">63</span>, <span class="hljs-number">128</span>));<br><br>            _0x5a57ec.<span class="hljs-title function_">push</span>(<span class="hljs-number">63</span> &amp; _0x1a933a | <span class="hljs-number">128</span>);<br>          &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> (_0x1a933a &gt;= <span class="hljs-number">128</span> &amp;&amp; _0x1a933a &lt;= <span class="hljs-number">2047</span>) &#123;<br>              _0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">231</span>)](_0x1a933a &gt;&gt; <span class="hljs-number">6</span> &amp; <span class="hljs-number">31</span> | <span class="hljs-number">192</span>);<br><br>              _0x5a57ec.<span class="hljs-title function_">push</span>(<span class="hljs-number">63</span> &amp; _0x1a933a | <span class="hljs-number">128</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>              _0x5a57ec[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">231</span>)](<span class="hljs-number">255</span> &amp; _0x1a933a);<br>            &#125;<br>          &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> _0x5a57ec;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">var</span> _0x475c50 = <span class="hljs-number">16</span> - _0x5626f2[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">210</span>)] % <span class="hljs-number">16</span>;<br><br>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; _0x475c50; i++) _0xae042e[_0x5626f2[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">210</span>)] + i] = _0x475c50;<br>      &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">321</span>) !== <span class="hljs-string">&quot;aWiBC&quot;</span>) &#123;<br>        <span class="hljs-keyword">var</span> _0x1a69f4 = _0x33488b[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">271</span>)](_0x54b6e2, <span class="hljs-variable language_">arguments</span>);<br><br>        <span class="hljs-keyword">return</span> _0x12b4c7 = <span class="hljs-literal">null</span>, _0x1a69f4;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        _0x475c50 = _0x5626f2[_0x5626f2[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">210</span>)] - <span class="hljs-number">1</span>];<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _0x3b67d2 = <span class="hljs-number">0</span>; _0x3b67d2 &lt; _0x475c50; _0x3b67d2++) _0xae042e[<span class="hljs-title function_">_0xb0c898</span>(<span class="hljs-number">309</span>)]();<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> _0xae042e;<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x77573f</span>(<span class="hljs-params">_0x11f115, _0x24d6f1</span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x1237c3 = _0x546611;<br>    _0x40bb32.<span class="hljs-title function_">yccGl</span>(_0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">338</span>)](<span class="hljs-literal">null</span>, _0x24d6f1), _0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">335</span>)](<span class="hljs-string">&quot;&quot;</span>, _0x24d6f1)) &amp;&amp; <span class="hljs-title class_">Error</span>(_0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">293</span>)]);<br>    _0x11f115.<span class="hljs-property">isPadding</span> &amp;&amp; _0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">335</span>)](<span class="hljs-number">1</span>, _0x11f115[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">261</span>)]) &amp;&amp; (_0x24d6f1 = <span class="hljs-title function_">_0x2bd34</span>(_0x24d6f1, <span class="hljs-number">1</span>));<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _0x1d3a77 = _0x24d6f1[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">210</span>)], _0x5f4f34 = [], _0x5dfa69 = <span class="hljs-number">0</span>; _0x5dfa69 &lt; _0x1d3a77; _0x5dfa69 += <span class="hljs-number">16</span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x17972b = [];<br>      <span class="hljs-keyword">var</span> _0x380dc2 = [];<br><br>      _0x17972b[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">231</span>)](_0x24d6f1[_0x5dfa69 + <span class="hljs-number">0</span>], _0x24d6f1[_0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">250</span>)](_0x5dfa69, <span class="hljs-number">1</span>)], _0x24d6f1[_0x5dfa69 + <span class="hljs-number">2</span>], _0x24d6f1[_0x5dfa69 + <span class="hljs-number">3</span>], _0x24d6f1[_0x5dfa69 + <span class="hljs-number">4</span>], _0x24d6f1[_0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">250</span>)](_0x5dfa69, <span class="hljs-number">5</span>)], _0x24d6f1[_0x5dfa69 + <span class="hljs-number">6</span>], _0x24d6f1[_0x5dfa69 + <span class="hljs-number">7</span>], _0x24d6f1[_0x5dfa69 + <span class="hljs-number">8</span>], _0x24d6f1[_0x5dfa69 + <span class="hljs-number">9</span>], _0x24d6f1[_0x5dfa69 + <span class="hljs-number">10</span>], _0x24d6f1[_0x5dfa69 + <span class="hljs-number">11</span>], _0x24d6f1[_0x5dfa69 + <span class="hljs-number">12</span>], _0x24d6f1[_0x5dfa69 + <span class="hljs-number">13</span>], _0x24d6f1[_0x40bb32[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">262</span>)](_0x5dfa69, <span class="hljs-number">14</span>)], _0x24d6f1[_0x5dfa69 + <span class="hljs-number">15</span>]);<br><br>      <span class="hljs-title function_">_0x46c93d</span>(_0x11f115.<span class="hljs-property">sk</span>, _0x17972b, _0x380dc2);<br><br>      _0x5f4f34 = _0x5f4f34[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">224</span>)](_0x380dc2);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> _0x11f115.<span class="hljs-property">isPadding</span> &amp;&amp; <span class="hljs-number">0</span> == _0x11f115[<span class="hljs-title function_">_0x1237c3</span>(<span class="hljs-number">261</span>)] &amp;&amp; (_0x5f4f34 = <span class="hljs-title function_">_0x2bd34</span>(_0x5f4f34, <span class="hljs-number">0</span>)), _0x5f4f34;<br>  &#125;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x92504a</span>(<span class="hljs-params">_0x48e3c6</span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x349d56 = _0x546611;<br><br>    <span class="hljs-keyword">var</span> _0x3f9115;<br><br>    <span class="hljs-keyword">var</span> _0x4d538d;<br><br>    <span class="hljs-keyword">var</span> _0x4590e3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>();<br><br>    _0x3f9115 = _0x48e3c6[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">210</span>)];<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _0x49daf9 = <span class="hljs-number">0</span>; _0x49daf9 &lt; _0x3f9115; _0x49daf9++) <span class="hljs-keyword">if</span> ((_0x4d538d = _0x48e3c6.<span class="hljs-title function_">charCodeAt</span>(_0x49daf9)) &gt;= <span class="hljs-number">65536</span> &amp;&amp; _0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">274</span>)](_0x4d538d, <span class="hljs-number">1114111</span>)) &#123;<br>      _0x4590e3[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">231</span>)](_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">258</span>)](_0x4d538d, <span class="hljs-number">18</span>) &amp; <span class="hljs-number">7</span> | <span class="hljs-number">240</span>);<br><br>      _0x4590e3.<span class="hljs-title function_">push</span>(_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">238</span>)](_0x4d538d &gt;&gt; <span class="hljs-number">12</span>, <span class="hljs-number">63</span>) | <span class="hljs-number">128</span>);<br><br>      _0x4590e3[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">231</span>)](_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">238</span>)](_0x4d538d &gt;&gt; <span class="hljs-number">6</span>, <span class="hljs-number">63</span>) | <span class="hljs-number">128</span>);<br><br>      _0x4590e3.<span class="hljs-title function_">push</span>(<span class="hljs-number">63</span> &amp; _0x4d538d | <span class="hljs-number">128</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">if</span> (_0x4d538d &gt;= <span class="hljs-number">2048</span> &amp;&amp; _0x40bb32.<span class="hljs-title function_">dcpRD</span>(_0x4d538d, <span class="hljs-number">65535</span>)) &#123;<br>        _0x4590e3.<span class="hljs-title function_">push</span>(_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">268</span>)](_0x4d538d, <span class="hljs-number">12</span>) &amp; <span class="hljs-number">15</span> | <span class="hljs-number">224</span>);<br><br>        _0x4590e3.<span class="hljs-title function_">push</span>(_0x4d538d &gt;&gt; <span class="hljs-number">6</span> &amp; <span class="hljs-number">63</span> | <span class="hljs-number">128</span>);<br><br>        _0x4590e3[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">231</span>)](<span class="hljs-number">63</span> &amp; _0x4d538d | <span class="hljs-number">128</span>);<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">if</span> (_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">314</span>)](_0x4d538d, <span class="hljs-number">128</span>) &amp;&amp; _0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">274</span>)](_0x4d538d, <span class="hljs-number">2047</span>)) &#123;<br>          _0x4590e3[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">231</span>)](_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">264</span>)](_0x4d538d &gt;&gt; <span class="hljs-number">6</span>, <span class="hljs-number">31</span>) | <span class="hljs-number">192</span>);<br><br>          _0x4590e3[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">231</span>)](_0x40bb32[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">257</span>)](<span class="hljs-number">63</span> &amp; _0x4d538d, <span class="hljs-number">128</span>));<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          _0x4590e3[<span class="hljs-title function_">_0x349d56</span>(<span class="hljs-number">231</span>)](<span class="hljs-number">255</span> &amp; _0x4d538d);<br>        &#125;<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> _0x4590e3;<br>  &#125;<br><br>  <span class="hljs-variable language_">window</span>[<span class="hljs-title function_">_0x546611</span>(<span class="hljs-number">247</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x2a9f50, _0x13ed87</span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x1ae254 = _0x546611;<br>    <span class="hljs-keyword">var</span> _0x4609e2 = &#123;&#125;;<br><br>    _0x4609e2[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">214</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x3ca93a, _0x41138d</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x3ca93a</span>(_0x41138d);<br>    &#125;;<br><br>    _0x4609e2.<span class="hljs-property">LIgbg</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x4c470a, _0x44af8c</span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x5a7c22 = _0x1ae254;<br>      <span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x5a7c22</span>(<span class="hljs-number">298</span>)](_0x4c470a, _0x44af8c);<br>    &#125;;<br><br>    _0x4609e2.<span class="hljs-property">jQeKF</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0xff5997</span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x5d1dd3 = _0x1ae254;<br>      <span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x5d1dd3</span>(<span class="hljs-number">336</span>)](_0xff5997);<br>    &#125;;<br><br>    <span class="hljs-keyword">var</span> _0x1b609f = _0x4609e2;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">266</span>) !== <span class="hljs-string">&quot;VHqLW&quot;</span>) &#123;<br>      <span class="hljs-keyword">var</span> _0x793f29 = pENlpK[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">214</span>)](_0x430449, pENlpK[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">228</span>)](<span class="hljs-string">&quot;return (function() &#123;&#125;.constructor(&quot;</span><span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span><span class="hljs-string">&quot;)( )&quot;</span>, <span class="hljs-string">&quot;);&quot;</span>));<br><br>      _0x8cc5c0 = pENlpK.<span class="hljs-title function_">jQeKF</span>(_0x793f29);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">var</span> _0x3f814b = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x123d36</span>();<br><br>      <span class="hljs-keyword">if</span> (_0x3f814b[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">260</span>)] = !<span class="hljs-number">0</span>, _0x3f814b[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">261</span>)] = <span class="hljs-number">1</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> !== _0x13ed87) <span class="hljs-keyword">var</span> _0x583225 = <span class="hljs-title function_">_0x92504a</span>(_0x13ed87);<span class="hljs-keyword">else</span> _0x583225 = <span class="hljs-title function_">_0x92504a</span>(<span class="hljs-string">&quot;11HDESaAhiHHugDz&quot;</span>);<br>      !<span class="hljs-keyword">function</span> (<span class="hljs-params">_0x53d439, _0xb2eb7f</span>) &#123;<br>        <span class="hljs-keyword">var</span> _0xe68de8 = _0x1ae254;<br>        <span class="hljs-literal">null</span> == _0x53d439 &amp;&amp; <span class="hljs-title class_">Error</span>(<span class="hljs-title function_">_0xe68de8</span>(<span class="hljs-number">202</span>));<br>        <span class="hljs-literal">null</span> != _0xb2eb7f &amp;&amp; <span class="hljs-number">16</span> == _0xb2eb7f[<span class="hljs-title function_">_0xe68de8</span>(<span class="hljs-number">210</span>)] || _0x40bb32[<span class="hljs-title function_">_0xe68de8</span>(<span class="hljs-number">191</span>)](<span class="hljs-title class_">Error</span>, <span class="hljs-title function_">_0xe68de8</span>(<span class="hljs-number">206</span>));<br>        _0x53d439[<span class="hljs-title function_">_0xe68de8</span>(<span class="hljs-number">261</span>)] = <span class="hljs-number">1</span>;<br><br>        <span class="hljs-title function_">_0x4bb41b</span>(_0x53d439.<span class="hljs-property">sk</span>, _0xb2eb7f);<br>      &#125;(_0x3f814b, _0x583225);<br><br>      <span class="hljs-keyword">var</span> _0xf82aae = <span class="hljs-title function_">_0x77573f</span>(_0x3f814b, _0x40bb32[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">322</span>)](_0x92504a, _0x2a9f50));<br><br>      <span class="hljs-keyword">var</span> _0x5e2ba8 = base64js[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">248</span>)](_0xf82aae);<br><br>      <span class="hljs-keyword">return</span> _0x40bb32[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">215</span>)](<span class="hljs-literal">null</span>, _0x5e2ba8) &amp;&amp; _0x5e2ba8[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">339</span>)]()[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">210</span>)] &gt; <span class="hljs-number">0</span> &amp;&amp; _0x5e2ba8[<span class="hljs-title function_">_0x1ae254</span>(<span class="hljs-number">291</span>)](/(s*|t|r|<br>)/g, <span class="hljs-string">&quot;&quot;</span>), _0x5e2ba8;<br>    &#125;<br>  &#125;;<br><br>  <span class="hljs-variable language_">window</span>.<span class="hljs-property">MuData_KXC</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x5e66aa, _0x43f5ba</span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x4001dd = _0x546611;<br>    <span class="hljs-keyword">var</span> _0x73c8ae = &#123;&#125;;<br>    _0x73c8ae.<span class="hljs-property">Oflfj</span> = _0x40bb32[<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">207</span>)];<br>    <span class="hljs-keyword">var</span> _0x3a56f5 = _0x73c8ae;<br><br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-keyword">var</span> _0x21fbad = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_0x123d36</span>();<br><br>      <span class="hljs-keyword">if</span> (_0x21fbad[<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">260</span>)] = !<span class="hljs-number">0</span>, _0x21fbad[<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">261</span>)] = <span class="hljs-number">0</span>, <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> !== _0x43f5ba) <span class="hljs-keyword">var</span> _0x1f5250 = _0x40bb32[<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">200</span>)](_0x92504a, _0x43f5ba);<span class="hljs-keyword">else</span> _0x1f5250 = <span class="hljs-title function_">_0x92504a</span>(<span class="hljs-string">&quot;11HDESaAhiHHugDz&quot;</span>);<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x3ca6b6, _0x42649f</span>) &#123;<br>        <span class="hljs-keyword">var</span> _0x33eb31 = _0x4001dd;<br>        <span class="hljs-literal">null</span> == _0x3ca6b6 &amp;&amp; <span class="hljs-title class_">Error</span>(<span class="hljs-title function_">_0x33eb31</span>(<span class="hljs-number">202</span>));<br>        <span class="hljs-literal">null</span> != _0x42649f &amp;&amp; <span class="hljs-number">16</span> == _0x42649f[<span class="hljs-title function_">_0x33eb31</span>(<span class="hljs-number">210</span>)] || <span class="hljs-title class_">Error</span>(_0x40bb32[<span class="hljs-title function_">_0x33eb31</span>(<span class="hljs-number">313</span>)]);<br>        _0x3ca6b6[<span class="hljs-title function_">_0x33eb31</span>(<span class="hljs-number">261</span>)] = <span class="hljs-number">0</span>;<br><br>        <span class="hljs-title function_">_0x4bb41b</span>(_0x3ca6b6.<span class="hljs-property">sk</span>, _0x42649f);<br><br>        _0x3ca6b6.<span class="hljs-property">sk</span> = _0x3ca6b6.<span class="hljs-property">sk</span>[<span class="hljs-title function_">_0x33eb31</span>(<span class="hljs-number">269</span>)]();<br>      &#125;(_0x21fbad, _0x1f5250), <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x5329c3</span>) &#123;<br>        <span class="hljs-keyword">var</span> _0x58448b = _0x4001dd;<br>        <span class="hljs-keyword">if</span> (_0x40bb32.<span class="hljs-title function_">ffBwx</span>(_0x40bb32.<span class="hljs-property">nSwqq</span>, <span class="hljs-title function_">_0x58448b</span>(<span class="hljs-number">213</span>))) <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x30b923</span>) &#123;&#125;[<span class="hljs-title function_">_0x58448b</span>(<span class="hljs-number">304</span>)](<span class="hljs-title function_">_0x58448b</span>(<span class="hljs-number">337</span>))[<span class="hljs-title function_">_0x58448b</span>(<span class="hljs-number">271</span>)](vBRwPh.<span class="hljs-property">Oflfj</span>);<span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> _0x5c03f8 = <span class="hljs-string">&quot;&quot;</span>, _0x184bf1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(_0x5329c3), _0x196644 = _0x184bf1[<span class="hljs-title function_">_0x58448b</span>(<span class="hljs-number">299</span>)], _0x186cc1 = <span class="hljs-number">0</span>; _0x40bb32.<span class="hljs-title class_">Vcbyb</span>(_0x186cc1, _0x196644); _0x186cc1++) _0x5c03f8 += <span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(_0x184bf1[_0x186cc1]);<br><br>          <span class="hljs-keyword">return</span> <span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">escape</span>(_0x5c03f8));<br>        &#125;<br>      &#125;(<span class="hljs-title function_">_0x77573f</span>(_0x21fbad, base64js[<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">341</span>)](_0x5e66aa)));<br>    &#125; <span class="hljs-keyword">catch</span> (_0x32b20a) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(_0x32b20a);<br>      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">237</span>) !== <span class="hljs-string">&quot;GiveU&quot;</span>) <span class="hljs-title function_">_0x1e3c61</span>();<span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-title class_">Error</span>(_0x32b20a[<span class="hljs-title function_">_0x4001dd</span>(<span class="hljs-number">187</span>)]), <span class="hljs-literal">null</span>;<br>    &#125;<br>  &#125;;<br>&#125;();<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">a7_0x3a83</span>(<span class="hljs-params">_0x48e416, _0x539714</span>) &#123;<br>  <span class="hljs-keyword">return</span> a7_0x3a83 = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x3fd90e, _0x220fe2</span>) &#123;<br>    _0x3fd90e = _0x3fd90e - <span class="hljs-number">185</span>;<br>    <span class="hljs-keyword">var</span> _0x345c54 = a7_0x2b5d[_0x3fd90e];<br>    <span class="hljs-keyword">return</span> _0x345c54;<br>  &#125;, <span class="hljs-title function_">a7_0x3a83</span>(_0x48e416, _0x539714);<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">_0xdc5479</span>(<span class="hljs-params">_0xc4ac8</span>) &#123;<br>  <span class="hljs-keyword">var</span> _0x5e1481 = a7_0x3a83;<br>  <span class="hljs-keyword">var</span> _0x152d0e = &#123;&#125;;<br><br>  _0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">316</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x161fa5, _0x184963</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x161fa5 !== _0x184963;<br>  &#125;;<br><br>  _0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">201</span>)] = <span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">252</span>);<br><br>  _0x152d0e.<span class="hljs-property">KSAJu</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x3bf73c, _0x3774e9</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x3bf73c + _0x3774e9;<br>  &#125;;<br><br>  _0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">232</span>)] = <span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">319</span>);<br><br>  _0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">234</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x227bc6, _0x5e823d</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x227bc6 + _0x5e823d;<br>  &#125;;<br><br>  _0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">328</span>)] = <span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">272</span>);<br>  _0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">310</span>)] = <span class="hljs-string">&quot;stateObject&quot;</span>;<br><br>  _0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">212</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x194170, _0x41e550</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x194170</span>(_0x41e550);<br>  &#125;;<br><br>  _0x152d0e.<span class="hljs-property">NrpeA</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x117898, _0x26f71c</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x117898 | _0x26f71c;<br>  &#125;;<br><br>  _0x152d0e.<span class="hljs-property">jNWkq</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x533302, _0x57f749</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x533302 &lt;&lt; _0x57f749;<br>  &#125;;<br><br>  _0x152d0e.<span class="hljs-property">swSJq</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x475689, _0x4edf8f</span>) &#123;<br>    <span class="hljs-keyword">return</span> _0x475689 !== _0x4edf8f;<br>  &#125;;<br><br>  _0x152d0e[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">249</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x307dff, _0x532f38</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x307dff</span>(_0x532f38);<br>  &#125;;<br><br>  <span class="hljs-keyword">var</span> _0x3ec91b = _0x152d0e;<br><br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">_0x20d39b</span>(<span class="hljs-params">_0x3d5fd6</span>) &#123;<br>    <span class="hljs-keyword">var</span> _0x372b19 = _0x5e1481;<br>    <span class="hljs-keyword">var</span> _0x592849 = &#123;&#125;;<br><br>    _0x592849[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">267</span>)] = <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x4cf138, _0x1dde32</span>) &#123;<br>      <span class="hljs-keyword">return</span> _0x4cf138 | _0x1dde32;<br>    &#125;;<br><br>    <span class="hljs-keyword">var</span> _0x338386 = _0x592849;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> _0x3d5fd6 === <span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">256</span>)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">_0x529e2b</span>) &#123;&#125;.<span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-string">&quot;while (true) &#123;&#125;&quot;</span></span>).<span class="hljs-title function_">apply</span>(<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">226</span>));<span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">if</span> (_0x3ec91b.<span class="hljs-title function_">ouQaI</span>(<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">312</span>), _0x3ec91b[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">201</span>)])) &#123;<br>        <span class="hljs-keyword">if</span> (_0x3ec91b.<span class="hljs-title class_">KSAJu</span>(<span class="hljs-string">&quot;&quot;</span>, _0x3d5fd6 / _0x3d5fd6).<span class="hljs-property">length</span> !== <span class="hljs-number">1</span> || _0x3d5fd6 % <span class="hljs-number">20</span> === <span class="hljs-number">0</span>) &#123;<br>          <span class="hljs-keyword">if</span> (_0x3ec91b.<span class="hljs-property">xujqS</span> === <span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">315</span>)) <span class="hljs-keyword">return</span> _0x338386[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">267</span>)](<span class="hljs-keyword">function</span> (<span class="hljs-params">_0x27df87, _0x45968a</span>) &#123;<br>            <span class="hljs-keyword">return</span> _0x27df87 &lt;&lt; _0x45968a;<br>          &#125;(_0x498948, _0x3dc0b2), _0xb49acd &gt;&gt; <span class="hljs-number">32</span> - _0x1e8f01);<span class="hljs-keyword">else</span> (<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">return</span> !![];<br>          &#125;)[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">304</span>)](_0x3ec91b[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">234</span>)](_0x3ec91b[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">328</span>)], <span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">283</span>)))[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">259</span>)](<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">303</span>));<br>        &#125; <span class="hljs-keyword">else</span> (<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>          <span class="hljs-keyword">return</span> ![];<br>        &#125;)[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">304</span>)](<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">272</span>) + <span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">283</span>))[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">271</span>)](_0x3ec91b[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">310</span>)]);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-title function_">_0x2a836a</span>(<span class="hljs-string">&quot;0&quot;</span>);<br>    &#125;<br><br>    _0x3ec91b[<span class="hljs-title function_">_0x372b19</span>(<span class="hljs-number">212</span>)](_0x20d39b, ++_0x3d5fd6);<br>  &#125;<br><br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">if</span> (_0x3ec91b[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">199</span>)](<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">308</span>), <span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">308</span>))) &#123;<br>      <span class="hljs-keyword">if</span> (_0x1c03d7) &#123;<br>        <span class="hljs-keyword">var</span> _0x5007b9 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>          <span class="hljs-keyword">var</span> _0x3754e6 = _0x5e1481;<br><br>          <span class="hljs-keyword">if</span> (_0x31fcbb) &#123;<br>            <span class="hljs-keyword">var</span> _0x5a99d2 = _0x274ddb[<span class="hljs-title function_">_0x3754e6</span>(<span class="hljs-number">271</span>)](_0x12bde4, <span class="hljs-variable language_">arguments</span>);<br><br>            <span class="hljs-keyword">return</span> _0x48728f = <span class="hljs-literal">null</span>, _0x5a99d2;<br>          &#125;<br>        &#125;;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">var</span> _0x5007b9 = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;&#125;;<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> _0x58fc2a = ![], _0x5007b9;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">if</span> (_0xc4ac8) <span class="hljs-keyword">return</span> <span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">216</span>) !== <span class="hljs-string">&quot;rXsbL&quot;</span> ? _0x20d39b : _0x3ec91b.<span class="hljs-title class_">NrpeA</span>((<span class="hljs-number">255</span> &amp; _0x427acb[_0x1f8bc4]) &lt;&lt; <span class="hljs-number">24</span>, _0x3ec91b[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">277</span>)](<span class="hljs-number">255</span> &amp; _0xc83323[_0x30e192 + <span class="hljs-number">1</span>], <span class="hljs-number">16</span>)) | (<span class="hljs-number">255</span> &amp; _0xd5d23[_0x1739cd + <span class="hljs-number">2</span>]) &lt;&lt; <span class="hljs-number">8</span> | <span class="hljs-number">255</span> &amp; _0x39cb7c[_0x33d10b + <span class="hljs-number">3</span>];<span class="hljs-keyword">else</span> _0x3ec91b[<span class="hljs-title function_">_0x5e1481</span>(<span class="hljs-number">249</span>)](_0x20d39b, <span class="hljs-number">0</span>);<br>    &#125;<br>  &#125; <span class="hljs-keyword">catch</span> (_0x5edede) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(_0x5edede);<br>  &#125;<br>&#125;<br><br><span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-title function_">_0xdc5479</span>();<br>&#125;, <span class="hljs-number">4000</span>);<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">loadAESDecryptStr</span>(<span class="hljs-params">str</span>) &#123;<br>  <span class="hljs-keyword">var</span> result = <span class="hljs-title class_">MuData</span>_KXC(str, <span class="hljs-string">&quot;0123456789abcdef&quot;</span>);<br>  <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure><p>在线解OB混淆</p><table><thead><tr><th>解混淆工具</th><th>网址</th><th>特点</th></tr></thead><tbody><tr><td>de4js</td><td><a href="https://lelinhtinh.github.io/de4js/">https://lelinhtinh.github.io/de4js/</a></td><td>类型多自动检测</td></tr><tr><td>jsnice</td><td><a href="http://www.jsnice.org/">http://www.jsnice.org/</a></td><td>有类型提示 OB反混淆效果好</td></tr></tbody></table>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>termux折腾指南</title>
    <link href="/2022/06/28/termux%E6%8A%98%E8%85%BE%E6%8C%87%E5%8D%97/"/>
    <url>/2022/06/28/termux%E6%8A%98%E8%85%BE%E6%8C%87%E5%8D%97/</url>
    
    <content type="html"><![CDATA[<h1 id="Termux-安装"><a href="#Termux-安装" class="headerlink" title="Termux 安装"></a>Termux 安装</h1><h3 id="1安装ssh-并设置开始自启动"><a href="#1安装ssh-并设置开始自启动" class="headerlink" title="1安装ssh 并设置开始自启动"></a>1安装ssh 并设置开始自启动</h3><p><a href="https://f-droid.org/packages/com.termux/">F-droid 安装</a></p><p>手机端执行命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell">pkg install openssh<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">查看手机端ip 可以使用其他方法</span><br>ifconfig<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"> 手机上termux查看用户名</span> <br>whoami <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">ua_103</span><br>输入命令 passwd  # termux设置密码<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment"># 电脑连接手机  手机上termux开启的sshd服务用的是8022端口，而不是常用的22端口</span></span><br>ssh ua_103@192.168.0.80<br><br><span class="hljs-meta prompt_"> </span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">第四步：termux设置自动开启ssh</span><br>echo &quot;sshd&quot; &gt;&gt; ~/.bashrc <br></code></pre></td></tr></table></figure><h1 id="换源"><a href="#换源" class="headerlink" title="换源"></a>换源</h1><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">命令行输入 termux-change-repo   <span class="hljs-meta"># 推荐使用</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">pkg install vim <br><br>vim /data/data/com.termux/files/usr/etc/apt/sources.list<br><br>deb https://mirrors.ustc.edu.cn/termux/apt/termux-main stable main<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">注释掉之前的</span><br>pkg update    # 更新源<br><br><br><br></code></pre></td></tr></table></figure><p>换源</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-string">&quot;pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple&quot;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>终端</tag>
      
      <tag>shell</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>AES_CBC_PKCS7算法加解密Python实现</title>
    <link href="/2022/06/11/AES-CBC-PKCS7%E7%AE%97%E6%B3%95%E5%8A%A0%E8%A7%A3%E5%AF%86Python%E5%AE%9E%E7%8E%B0/"/>
    <url>/2022/06/11/AES-CBC-PKCS7%E7%AE%97%E6%B3%95%E5%8A%A0%E8%A7%A3%E5%AF%86Python%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> base64<br><br><span class="hljs-keyword">from</span> Crypto.Cipher <span class="hljs-keyword">import</span> AES<br><span class="hljs-keyword">from</span> cryptography.hazmat.primitives <span class="hljs-keyword">import</span> padding<br><span class="hljs-keyword">from</span> cryptography.hazmat.primitives.ciphers <span class="hljs-keyword">import</span> algorithms<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">AES/CBC/PKCS7Padding 加密解密</span><br><span class="hljs-string">环境需求:</span><br><span class="hljs-string">pip3 install pycryptodome==3.9.0</span><br><span class="hljs-string"></span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PrpCrypt</span>(<span class="hljs-title class_ inherited__">object</span>):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, key=<span class="hljs-string">&#x27;0000000000000000&#x27;</span></span>):<br>        self.key = key.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br>        self.mode = AES.MODE_CBC<br>        self.iv = <span class="hljs-string">&quot;98d71fe589499967&quot;</span>.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)  <span class="hljs-comment"># b&#x27;0102030405060708&#x27;</span><br>        <span class="hljs-comment"># block_size 128位</span><br><br>    <span class="hljs-comment"># 加密函数，如果text不足16位就用空格补足为16位，</span><br>    <span class="hljs-comment"># 如果大于16但是不是16的倍数，那就补足为16的倍数。</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encrypt</span>(<span class="hljs-params">self, text</span>):<br>        cryptor = AES.new(self.key, self.mode, self.iv)<br>        text = text.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><br>        <span class="hljs-comment"># 这里密钥key 长度必须为16（AES-128）,24（AES-192）,或者32 （AES-256）Bytes 长度</span><br>        <span class="hljs-comment"># 目前AES-128 足够目前使用</span><br><br>        text = self.pkcs7_padding(text)<br>        self.ciphertext = cryptor.encrypt(text)<br><br>        <span class="hljs-comment"># 因为AES加密时候得到的字符串不一定是ascii字符集的，输出到终端或者保存时候可能存在问题</span><br>        <span class="hljs-comment"># 所以这里统一把加密后的字符串转化为base64字符</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(base64.b64encode(self.ciphertext),<span class="hljs-string">&#x27;utf-8&#x27;</span>)<br><br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pkcs7_padding</span>(<span class="hljs-params">data</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">isinstance</span>(data, <span class="hljs-built_in">bytes</span>):<br>            data = data.encode()<br><br>        padder = padding.PKCS7(algorithms.AES.block_size).padder()<br><br>        padded_data = padder.update(data) + padder.finalize()<br><br>        <span class="hljs-keyword">return</span> padded_data<br><br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pkcs7_unpadding</span>(<span class="hljs-params">padded_data</span>):<br>        unpadder = padding.PKCS7(algorithms.AES.block_size).unpadder()<br>        data = unpadder.update(padded_data)<br>        <span class="hljs-keyword">try</span>:<br>            uppadded_data = data + unpadder.finalize()<br>        <span class="hljs-keyword">except</span> ValueError:<br>            <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">&#x27;无效的加密信息!&#x27;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> uppadded_data<br><br>    <span class="hljs-comment"># 解密后，去掉补足的空格用strip() 去掉</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decrypt</span>(<span class="hljs-params">self, text</span>):<br>        <span class="hljs-comment">#  偏移量&#x27;iv&#x27;</span><br>        cryptor = AES.new(self.key, self.mode, self.iv)<br>        plain_text = cryptor.decrypt(base64.b64decode(text))<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">bytes</span>.decode(plain_text).rstrip(<span class="hljs-string">&quot;\x01&quot;</span>). \<br>            rstrip(<span class="hljs-string">&quot;\x02&quot;</span>).rstrip(<span class="hljs-string">&quot;\x03&quot;</span>).rstrip(<span class="hljs-string">&quot;\x04&quot;</span>).rstrip(<span class="hljs-string">&quot;\x05&quot;</span>). \<br>            rstrip(<span class="hljs-string">&quot;\x06&quot;</span>).rstrip(<span class="hljs-string">&quot;\x07&quot;</span>).rstrip(<span class="hljs-string">&quot;\x08&quot;</span>).rstrip(<span class="hljs-string">&quot;\x09&quot;</span>). \<br>            rstrip(<span class="hljs-string">&quot;\x0a&quot;</span>).rstrip(<span class="hljs-string">&quot;\x0b&quot;</span>).rstrip(<span class="hljs-string">&quot;\x0c&quot;</span>).rstrip(<span class="hljs-string">&quot;\x0d&quot;</span>). \<br>            rstrip(<span class="hljs-string">&quot;\x0e&quot;</span>).rstrip(<span class="hljs-string">&quot;\x0f&quot;</span>).rstrip(<span class="hljs-string">&quot;\x10&quot;</span>)<br><br><br><span class="hljs-comment"># 加解密</span><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    pc = PrpCrypt(<span class="hljs-string">&#x27;7fb498553e3c462988c3b9573692bd5f&#x27;</span>)  <span class="hljs-comment"># 初始化密钥</span><br>    a = <span class="hljs-string">&quot;1654912813&quot;</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;加密前：%s&quot;</span> % a)<br>    b = pc.encrypt(a)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;加密后：%s&quot;</span> % b)<br>    data = <span class="hljs-string">&quot;&quot;&quot;c6AN9oA6Gr8sb+zv5XB44GAoQ8rZaAVHdepoWQw+uQOD5I0751nnE6aoMjGvPw6Bgs2OhGZ</span><br><span class="hljs-string">S9eqYOhzZoUUw3rw2RABCm2cRmhqx9DfqjTJ1gwe+CT1JxaZCVyI/Nv/Iv7HX/D9PiEp1vJx4mTIpVvAD/LlGkSvXsaF3Bhrx6xf0</span><br><span class="hljs-string">1/5zTua7t4AKf3PYyhkFz/lgWUxCUHW/SgnYaBos9PqtJcX2TBWY31uOu+f759PAiuby65u1QEBuMkidTPgxzJI0ig9VBkuwtjJ//</span><br><span class="hljs-string">XiRHcesOPJJhzTFzpyZF0fOo3gj7DaSt33GdQbqT46oXoObN32kyWyPwyQv6+wmqB2IgrWSWMrX2J/Ty351zgW88qB04IZx1JYH/b</span><br><span class="hljs-string">lTBJtDekYJTW99wDWpxQ46UPW8IPtgYNjSz5NWdDbPdj0kOnzeCg4l3lyLkLu92aN/OBBApL44Ls8vYuu5GevhpwcoTZOJgTDwrIl</span><br><span class="hljs-string">FgZN8amx0OD9AgPL98SOPx/2xLp2WJ9FpVN69Li++BBgb0xcHRmERIGpCSGXx2tmWKb5aXXCsBY66PI0iM0eQ2QfhCjPnd1g+8yzD</span><br><span class="hljs-string">acCRJypXnfGRpWEMLP3lHNk07pHZniu3gsNo+wiB++JO6xISmo9R1GEFM999whGuDE5Av8zt95b+Pk/7Av0r9eFJ0zdZJX/AIEW4j</span><br><span class="hljs-string">5qVCm6T2PUq1PtzTkXA8RVGMYrmc1edbhu6zHNXU4puYLShSeYrT1iDFoyA0MX3M05J3XO792heyS98R51N8TjKZs2VSQFkLFH3lK</span><br><span class="hljs-string">diWmuGvwbZirTc4/ZN71V+1Jfic7UakLDguZ3HtBJhdxLgrK8NLnci0aEokoc/ax9t2qyAtcJYsU7UH9X6bNI95lhHCnx60+4HTVb</span><br><span class="hljs-string">skjPtyvau2Zebi0FlocH4Nj+VCCt3atAT93Y0OrsI3xMg8nL2alWjwXVTXv0nh+o5nL/tOCyWUB3WdLb8wvgzIJGyIhpJNfzC7hyS</span><br><span class="hljs-string">gO+CkxBLg8EyFf9h0kQS6Qwi9wTZSFsDhaFAE19UeCgyZbU0mlWXqBYHgwJ9Nw8gAo9LwoJ+u70Ch/GobBlSiBp4MzJjPpjmG9Gu7</span><br><span class="hljs-string">+jiSaapm8DcFIkxRFTKxUNZs/dcIO63hbMLwajRVZJDboh1FYPZcN7SJ0mmRuS0so+X7XYHM+JidpQVm5wMSWZBIy0e670Zgm9plU</span><br><span class="hljs-string">qcRaF03JDseRmkKwqpBrsbt11kPCZI4IFPw6M5sUT30ODzV87hNqIh/Jis0rXzRhp2PFkODlwdZigK9Bl5/CI4gWOJ+Ei1BNVLj1d</span><br><span class="hljs-string">G9DjpNznmt99XsDAM7Dpl6+F4Glar6mo76zMHtm6UQ1u6vTOoy4a707BllO76Bx8xgFd1ETI9glhWAE68XXy8LHjBouLBcw2PV6oQ</span><br><span class="hljs-string">ItSjTJ4ciX093F2eHpeX6/Hgxp7tTrtg3joWqKefpm+iCPKb4bCYhyLKIhh2BiSe/aABLWdwLZOezq1lGgnO5C7Qug8RMKbLodWyR</span><br><span class="hljs-string">L3w0eTJQ7bx+LUth9kekEcXRjDjKVTShlJCauvg7BECrtSAXkHq8fayMvs7EvzzpcC39iVWqWlNDYaV1Q+mg2HHpk1tyyNbd6R+dN</span><br><span class="hljs-string">6oo/0upaGvDLA7QvygqSn61vWNBYA0KG+mlnNTaOFcV7flX3rL38SaF+rZ48r+DkTin9jdtOQ2V2piFGxBvil4xIpzFPl3nyX/U6g</span><br><span class="hljs-string">e1DOFdryHoj348wm1Cws=&quot;&quot;&quot;</span><br>    <span class="hljs-built_in">print</span>(pc.decrypt(data))<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>AES</tag>
      
      <tag>安全</tag>
      
      <tag>算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>APP端的混淆</title>
    <link href="/2022/06/01/APP%E7%AB%AF%E7%9A%84%E6%B7%B7%E6%B7%86/"/>
    <url>/2022/06/01/APP%E7%AB%AF%E7%9A%84%E6%B7%B7%E6%B7%86/</url>
    
    <content type="html"><![CDATA[<p>群里看到的个反编译出来的东西</p><p>相比之下字节的同志们的are you sb 真的是小菜一碟.</p><p><img src="https://s2.loli.net/2022/06/01/f1CW7ml9E2ZXNHg.jpg"></p>]]></content>
    
    
    
    <tags>
      
      <tag>趣闻</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>卡兄卡弟APP抓包和分析</title>
    <link href="/2022/05/30/%E5%8D%A1%E5%85%84%E5%8D%A1%E5%BC%9FAPP%E6%8A%93%E5%8C%85%E5%92%8C%E5%88%86%E6%9E%90/"/>
    <url>/2022/05/30/%E5%8D%A1%E5%85%84%E5%8D%A1%E5%BC%9FAPP%E6%8A%93%E5%8C%85%E5%92%8C%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<p>卡兄卡弟 一个做卡车垂直领域的APP,用户的话是卡车司机,修理站,汽修站之类的.<a href="https://www.wlnl504.com/">官网在这里</a></p><p>想要爬取附近补胎,修理,等首页上的六个分类</p><p>只有APP页面无其他客户端</p><p>我在官网下的APP是加了爱加密商业版的壳,这个是一个二代壳,frida-dexdump 对这个无效</p><p>然后在网上找了几个下 发现这个APP 之前叫 <code>拉那儿</code> </p><p>用手机号验证码注册成为卡车司机,然后点击页面,抓包分析的话能抓到包 然后使用mitmproxy 把复制curl请求,使用工具转为requests</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><br>headers = &#123;<br>    <span class="hljs-string">&#x27;Host&#x27;</span>: <span class="hljs-string">&#x27;47.106.123.30:8070&#x27;</span>,<br>    <span class="hljs-string">&#x27;Connection&#x27;</span>: <span class="hljs-string">&#x27;Keep-Alive&#x27;</span>,<br>    <span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;okhttp/3.12.0&#x27;</span>,<br>&#125;<br><br>data = &#123;<br>    <span class="hljs-string">&#x27;oneselfType&#x27;</span>: <span class="hljs-string">&#x27;1&#x27;</span>,<br>    <span class="hljs-string">&#x27;key&#x27;</span>: <span class="hljs-string">&#x27;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJBUFAiLCJpc3MiOiJTZXJ2aWNlIiwiZXhwIjoxNzE2OTYyMzcxLCJ1c2VySWQiOiI1N2VjNjI3ZS05ZWRhLTRiMTgtOGJmMS1lN2MxNmVmMjhmOTYiLCJpYXQiOjE2NTM4MDM5NzEsInRva2VuIjoiMTY1MzgwMzk3MDg4NiJ9.JLHyQkDp4iowlrVhKkvTTJ3us7LoPyBY3ISMBZzJbiQ&#x27;</span>,<br>    <span class="hljs-string">&#x27;friendRelationId&#x27;</span>: <span class="hljs-string">&#x27;null&#x27;</span>,<br>    <span class="hljs-string">&#x27;locationX&#x27;</span>: <span class="hljs-string">&#x27;121.516538&#x27;</span>,<br>    <span class="hljs-string">&#x27;locationY&#x27;</span>: <span class="hljs-string">&#x27;31.123457&#x27;</span>,<br>    <span class="hljs-string">&#x27;userType&#x27;</span>: <span class="hljs-string">&#x27;4&#x27;</span>,<br>    <span class="hljs-string">&quot;pageId&quot;</span>: <span class="hljs-number">1</span><br>&#125;<br><br><span class="hljs-comment"># 附近补胎  usertype:4</span><br><span class="hljs-comment"># 找修理 usertype:3</span><br><span class="hljs-comment"># 油罐车 usertype:6</span><br><span class="hljs-comment"># 配件店 2</span><br><span class="hljs-comment"># 审车 5</span><br><span class="hljs-comment"># 吊车 7</span><br>response = requests.post(<span class="hljs-string">&#x27;http://47.106.123.30:8070/app/api/usercompany/finsCompanyListAndVipCompany&#x27;</span>, headers=headers,<br>                         data=data)<br><span class="hljs-built_in">print</span>(response.json()[<span class="hljs-string">&#x27;data&#x27;</span>])<br><br></code></pre></td></tr></table></figure><p>key的话我看着好像是jwt 的签名</p><p>key的第一部分使用base64 解密工具的解密为<code>&#123;&quot;typ&quot;:&quot;JWT&quot;,&quot;alg&quot;:&quot;HS256&quot;&#125;</code></p><p>第二部分的解密为</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;aud&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;APP&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;iss&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;Service&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;exp&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1716962371</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;userId&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;57ec627e-9eda-4b18-8bf1-e7c16ef28f96&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;iat&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1653803971</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;token&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;1653803970886&quot;</span><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><code>exp</code> 为过期时间</p><p>看<code>userID</code>后端的数据局应该是非关系型数据库 </p><p>在token 没有重新签发和过期之前该请求都是可以重放的.</p><p>难道说这个APP这么简单?</p><p>APP 每一分钟会往<code>/app/api/location/set</code>网址发送一个本机定位其中参数为</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">key</span>:       eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJBUFAiLCJpc3MiOiJTZXJ2aWNlIiwiZXhwIjoxNzE2OTYyMzcxLCJ1c2VySWQiOiI1N2VjNjI3ZS05ZWRhLTRiMTgtOGJmMS1lN2MxNmVmMjhmOTYiLCJpYXQiOjE2NTM4MDM5NzEsInRva2VuIjoiMTY1MzgwMzk3MDg4NiJ9.JLHyQkDp4iowlrVhKkvTTJ3us7LoPyBY3ISMBZzJbiQ<br><span class="hljs-attribute">locationX</span>: <span class="hljs-number">121</span>.<span class="hljs-number">51653</span><br><span class="hljs-attribute">locationY</span>: <span class="hljs-number">31</span>.<span class="hljs-number">123457</span><br><span class="hljs-attribute">source</span>:    <span class="hljs-number">1</span><br><span class="hljs-attribute">address</span>:   xxxxx<br></code></pre></td></tr></table></figure><p>就是手机定位的经纬度,着验证的频率是1分钟1次可以有网络波动的error发生,但是阈值多少没有测试出来.</p><p>APP没有明显的列表页,请求的内容是根据经纬度参数来决定的,要抓数据就要遍历整个中国的经纬度地址.</p><p>数据返回结果有个界限,和本机相距40-50公里的样子就不返回数据了,要请求的话就只有换定位.</p><p>数据重复的话就直接吧距离定的小一些返回的数据根据数据库中的id去重</p><p>那也就有另一个问题就是手机移动定位改的太快,太频繁会导致当前登录的用户成为可疑用户.</p>]]></content>
    
    
    
    <tags>
      
      <tag>spider</tag>
      
      <tag>APP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>selenium行为链</title>
    <link href="/2022/05/29/selenium%E8%A1%8C%E4%B8%BA%E9%93%BE%E5%88%9D%E5%A7%8B%E5%8C%96-%E8%A7%A3%E5%86%B3%E5%8D%A1%E9%A1%BF%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2022/05/29/selenium%E8%A1%8C%E4%B8%BA%E9%93%BE%E5%88%9D%E5%A7%8B%E5%8C%96-%E8%A7%A3%E5%86%B3%E5%8D%A1%E9%A1%BF%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h1 id="问题的引出"><a href="#问题的引出" class="headerlink" title="问题的引出"></a>问题的引出</h1><p>Selenium 做模拟滑块的时候能感觉到明显的卡顿</p><h1 id="查找原因"><a href="#查找原因" class="headerlink" title="查找原因"></a>查找原因</h1><p><a href="https://www.cnblogs.com/jiyu-hlzy/p/12149641.html">这个博文</a>中有个测试,我自己写了下确实是这样,但是他的解决方式我不能接受,直接修改源代码的话机器多了根本不行的.</p><p>然后在这个<a href="https://github.com/ultrafunkamsterdam/undetected-chromedriver/issues/541">issues</a>上看到了作者的相关回答,可以在行为链的时候赋值一个参数做到这样,然后在去看<code>ActionChains</code>的定义的话确实有这可以这样初始化.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ActionChains</span>:<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, driver, duration=<span class="hljs-number">250</span></span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        Creates a new ActionChains.</span><br><span class="hljs-string"></span><br><span class="hljs-string">        :Args:</span><br><span class="hljs-string">         - driver: The WebDriver instance which performs user actions.</span><br><span class="hljs-string">         - duration: override the default 250 msecs of DEFAULT_MOVE_DURATION in PointerInput</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        self._driver = driver<br>        self._actions = []<br>        self.w3c_actions = ActionBuilder(driver, duration=duration)<br></code></pre></td></tr></table></figure><p><strong>那思路就明确可以不用修改源文件直接在初始化的时候传参数就可以了</strong></p><h1 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h1><p>action_chains 动作可以不附加在元素上执行 而且不会报错,这里我就打开百度跑下看看效果</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver<br><span class="hljs-keyword">from</span> selenium.webdriver.chrome.service <span class="hljs-keyword">import</span> Service<br><span class="hljs-keyword">from</span> selenium.webdriver.common.action_chains <span class="hljs-keyword">import</span> ActionChains<br><span class="hljs-keyword">from</span> selenium.webdriver.support.ui <span class="hljs-keyword">import</span> WebDriverWait<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Search</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        option = webdriver.ChromeOptions()<br>        option.add_argument(<span class="hljs-string">&#x27;--disable-dev-shm-usage&#x27;</span>)<br>        option.add_argument(<span class="hljs-string">&#x27;--disable-gpu&#x27;</span>)<br>        option.add_argument(<span class="hljs-string">&#x27;--incognito&#x27;</span>)  <span class="hljs-comment"># 隐身模式</span><br>        option.add_argument(<span class="hljs-string">&#x27;--no-sandbox&#x27;</span>)  <span class="hljs-comment"># root用户不加这条会无法运行</span><br>        option.add_argument(<span class="hljs-string">&#x27;headless&#x27;</span>)  <span class="hljs-comment"># root用户不加这条会无法运行</span><br>        option.binary_location = <span class="hljs-string">r&#x27;/Applications/Chrome.app/Contents/MacOS/Google Chrome&#x27;</span>  <span class="hljs-comment"># mac 下的谷歌路径</span><br>        <span class="hljs-comment"># option.add_argument(f&#x27;--proxy-server=https://&#123;proxy&#125;&#x27;)</span><br>        option.add_argument(<br>            <span class="hljs-string">&#x27;User-Agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.100 Safari/537.36&#x27;</span>)<br>        option.add_experimental_option(<span class="hljs-string">&#x27;excludeSwitches&#x27;</span>, [<span class="hljs-string">&#x27;enable-automation&#x27;</span>])<br><br>        service = Service(DRIVER_PATH)<br>        self.driver = webdriver.Chrome(service=service, options=option)<br>        self.wait = WebDriverWait(self.driver, <span class="hljs-number">10</span>)<br>        self.action_chains = ActionChains(self.driver, duration=<span class="hljs-number">1</span>)<br>        self.url = <span class="hljs-string">&quot;https://www.baidu.com&quot;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__del__</span>(<span class="hljs-params">self</span>):<br>        self.driver.close()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">self</span>)<br>        self.driver.get(self.url)<br>        self.driver.set_window_size(<span class="hljs-number">1907</span>, <span class="hljs-number">1035</span>)<br><br>        start_time = time.time()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">21</span>):<br>            self.action_chains.move_by_offset(xoffset=<span class="hljs-number">0</span>, yoffset=<span class="hljs-number">0</span>).perform()<br>            now_time = time.time()<br>            hs = <span class="hljs-built_in">round</span>((now_time - start_time), <span class="hljs-number">3</span>)<br>            start_time = now_time<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;i&#125;</span> ,<span class="hljs-subst">&#123;hs&#125;</span>&#x27;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    s = Search()<br>    s.main()<br>    <span class="hljs-keyword">del</span> s<br><br></code></pre></td></tr></table></figure><p>结果的话确实比之前的间隔短</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs text">1 ,0.046<br>2 ,0.037<br>3 ,0.077<br>4 ,0.007<br>5 ,0.019<br>6 ,0.015<br>7 ,0.017<br>8 ,0.017<br>9 ,0.017<br>10 ,0.016<br>11 ,0.018<br>12 ,0.015<br>13 ,0.017<br>14 ,0.018<br>15 ,0.015<br>16 ,0.016<br>17 ,0.019<br>18 ,0.017<br>19 ,0.015<br>20 ,0.017<br></code></pre></td></tr></table></figure><p>这个库的作者也贴了一段代码,大致思路就是把move_by_offset 通过更多的step 来让滑块更精细</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> selenium.webdriver.common.action_chains <span class="hljs-keyword">import</span> ActionChains<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedActionChains</span>(<span class="hljs-title class_ inherited__">ActionChains</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">smooth_move_by_offset</span>(<span class="hljs-params">self, dx, dy, n_step=<span class="hljs-number">50</span></span>):<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_displacements</span>():<br>            step_x = dx / n_step<br>            step_y = dy / n_step<br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_step):<br>                <span class="hljs-keyword">yield</span> (<br>                    <span class="hljs-built_in">round</span>((i + <span class="hljs-number">1</span>) * step_x) - <span class="hljs-built_in">round</span>(i * step_x),<br>                    <span class="hljs-built_in">round</span>((i + <span class="hljs-number">1</span>) * step_y) - <span class="hljs-built_in">round</span>(i * step_y),<br>                )<br><br>        <span class="hljs-comment"># pylint: disable=protected-access</span><br>        self.w3c_actions.pointer_action._duration = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> ddx, ddy <span class="hljs-keyword">in</span> get_displacements():<br>            self.w3c_actions.pointer_action.move_by(ddx, ddy)<br><br>        <span class="hljs-keyword">return</span> self<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>selenium</tag>
      
      <tag>spider</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>天某查数据接口</title>
    <link href="/2022/05/25/%E5%A4%A9%E6%9F%90%E6%9F%A5%E6%95%B0%E6%8D%AE%E6%8E%A5%E5%8F%A3/"/>
    <url>/2022/05/25/%E5%A4%A9%E6%9F%90%E6%9F%A5%E6%95%B0%E6%8D%AE%E6%8E%A5%E5%8F%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="天某查反爬虫方式"><a href="#天某查反爬虫方式" class="headerlink" title="天某查反爬虫方式"></a>天某查反爬虫方式</h1><table><thead><tr><th>用户鉴权</th><th>IP限制</th><th>登录验证码</th><th>风控行为识别</th><th>核心数据是否要求VIP</th><th></th></tr></thead><tbody><tr><td>登录才能访问</td><td>50次/IP</td><td>极验验证码</td><td>跳转到<a href="http://antirobot.tianyancha.com/captcha/verify">这个页面</a> 过简单的行为验证码</td><td>风险 财务 等数据要求</td><td></td></tr></tbody></table><p>新闻数据库为非核心数据库,可以实现免费注册账号之后,维护一个Cookie 池只做验证Cookie有效性 登录天眼查保存Cookie的功能.</p><h1 id="Cookie-说明"><a href="#Cookie-说明" class="headerlink" title="Cookie 说明"></a>Cookie 说明</h1><h2 id="Cookie-获取"><a href="#Cookie-获取" class="headerlink" title="Cookie 获取"></a>Cookie 获取</h2><h3 id="1-浏览器控制台"><a href="#1-浏览器控制台" class="headerlink" title="1 浏览器控制台"></a>1 浏览器控制台</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span><br></code></pre></td></tr></table></figure><h3 id="2-执行脚本"><a href="#2-执行脚本" class="headerlink" title="2 执行脚本"></a>2 执行脚本</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getCookie</span>(<span class="hljs-params"></span>)&#123; <span class="hljs-keyword">var</span> cookie=<span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>;<span class="hljs-keyword">return</span> cookie&#125;;<span class="hljs-title function_">getCookie</span>()<br></code></pre></td></tr></table></figure><h2 id="Cookie-转换"><a href="#Cookie-转换" class="headerlink" title="Cookie 转换"></a>Cookie 转换</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> ast<br><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">import</span> requests<br><br>cookie_str = <span class="hljs-string">&#x27;jsid=SEO-GOOGLE-ALL-SY-000001; TYCID=d0744580d32e11ecbe3dc57af635e3b5; _bl_uid=kClIm3eg51L9ntdFR83tdgvvzR99; ssuid=2090654984; _ga=GA1.2.1966907517.1652495881; csrfToken=_lgILD0y0X2VvYCH9WYiZ-Hd; bannerFlag=true; sensorsdata2015jssdkcross=%7B%22distinct_id%22%3A%22219960049%22%2C%22first_id%22%3A%22180c06dc366a4a-06f8cd088f5a2d-34726702-2073600-180c06dc36710b1%22%2C%22props%22%3A%7B%22%24latest_traffic_source_type%22%3A%22%E7%9B%B4%E6%8E%A5%E6%B5%81%E9%87%8F%22%2C%22%24latest_search_keyword%22%3A%22%E6%9C%AA%E5%8F%96%E5%88%B0%E5%80%BC_%E7%9B%B4%E6%8E%A5%E6%89%93%E5%BC%80%22%2C%22%24latest_referrer%22%3A%22%22%7D%2C%22%24device_id%22%3A%22180c06dc366a4a-06f8cd088f5a2d-34726702-2073600-180c06dc36710b1%22%2C%22identities%22%3A%22eyIkaWRlbnRpdHlfbG9naW5faWQiOiIyMTk5NjAwNDkiLCIkaWRlbnRpdHlfY29va2llX2lkIjoiMTgwZjNiODFjMDUzNzAtMGY2ZTVhOTljZjhhMDItMWU1MzU2MzMtMjA3MzYwMC0xODBmM2I4MWMwNjEwMzIifQ%3D%3D%22%2C%22history_login_id%22%3A%7B%22name%22%3A%22%24identity_login_id%22%2C%22value%22%3A%22219960049%22%7D%7D; tyc-user-info=%7B%22state%22%3A%220%22%2C%22vipManager%22%3A%220%22%2C%22mobile%22%3A%2218827603962%22%7D; tyc-user-info-save-time=1653356441552; auth_token=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxODgyNzYwMzk2MiIsImlhdCI6MTY1MzM1NjQ0MSwiZXhwIjoxNjU1OTQ4NDQxfQ._mF-UJeQsLBiSbKQnneoOw-yjGQ0qkYuDatYz-gB6-oNaEGXKkU4pcrU8Uvr_EdQzKKv5uS8slHip0jI45SCFw; Hm_lvt_e92c8d65d92d534b0fc290df538b4758=1652495864,1653380493; _gid=GA1.2.1692265788.1653380495; cloud_token=db89f11129774239b2c8b18b49170bbb; RTYCID=388134f9c83749119ab300c6c7f2a879; Hm_lpvt_e92c8d65d92d534b0fc290df538b4758=1653381048&#x27;</span><br><br><br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">tran_cookies_str_to_dict</span>(<span class="hljs-params">cookie_str</span>):<br>    first = re.sub(<span class="hljs-string">&quot;(.*?)=(.*?); &quot;</span>, <span class="hljs-string">&#x27;&quot;\\1&quot;:&quot;\\2&quot;,\n&#x27;</span>, cookie_str)<br>    sec = re.sub(<span class="hljs-string">&quot;,\n([^\&quot;]*?)=(.*)&quot;</span>, <span class="hljs-string">&#x27;,\n&quot;\\1&quot;:&quot;\\2&quot;&#x27;</span>, first)<br>    sec = <span class="hljs-string">&quot;&#123;&quot;</span> + sec + <span class="hljs-string">&quot;&#125;&quot;</span><br>    <span class="hljs-keyword">return</span> ast.literal_eval(sec)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-built_in">print</span>(tran_cookies_str_to_dict(cookie_str))<br></code></pre></td></tr></table></figure><h3 id="Cookie-有效期默认为1个月-暂不清楚是否在过期前重新签发"><a href="#Cookie-有效期默认为1个月-暂不清楚是否在过期前重新签发" class="headerlink" title="Cookie 有效期默认为1个月 暂不清楚是否在过期前重新签发"></a>Cookie 有效期默认为1个月 暂不清楚是否在过期前重新签发</h3><h1 id="天某查新闻接口说明"><a href="#天某查新闻接口说明" class="headerlink" title="天某查新闻接口说明"></a>天某查新闻接口说明</h1><p>请求天眼查新闻页面的代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">import</span> requests<br><br><br><br>cookies = &#123;<br>    <span class="hljs-string">&#x27;auth_token&#x27;</span>: <span class="hljs-string">&#x27;eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxODgyNzYwMzk2MiIsImlhdCI6MTY1MzM1NjQ0MSwiZXhwIjoxNjU1OTQ4NDQxfQ._mF-UJeQsLBiSbKQnneoOw-yjGQ0qkYuDatYz-gB6-oNaEGXKkU4pcrU8Uvr_EdQzKKv5uS8slHip0jI45SCFw&#x27;</span>,<br>&#125;<br><br>headers = &#123;<br>    <span class="hljs-string">&#x27;authority&#x27;</span>: <span class="hljs-string">&#x27;www.tianyancha.com&#x27;</span>,<br>    <span class="hljs-string">&#x27;accept&#x27;</span>: <span class="hljs-string">&#x27;*/*&#x27;</span>,<br>    <span class="hljs-string">&#x27;accept-language&#x27;</span>: <span class="hljs-string">&#x27;zh,zh-CN;q=0.9&#x27;</span>,<br>    <span class="hljs-string">&#x27;dnt&#x27;</span>: <span class="hljs-string">&#x27;1&#x27;</span>,<br>    <span class="hljs-string">&#x27;referer&#x27;</span>: <span class="hljs-string">&#x27;https://www.tianyancha.com/company/11684584&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-ch-ua&#x27;</span>: <span class="hljs-string">&#x27;&quot; Not A;Brand&quot;;v=&quot;99&quot;, &quot;Chromium&quot;;v=&quot;101&quot;, &quot;Google Chrome&quot;;v=&quot;101&quot;&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-ch-ua-mobile&#x27;</span>: <span class="hljs-string">&#x27;?0&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-ch-ua-platform&#x27;</span>: <span class="hljs-string">&#x27;&quot;macOS&quot;&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-fetch-dest&#x27;</span>: <span class="hljs-string">&#x27;empty&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-fetch-mode&#x27;</span>: <span class="hljs-string">&#x27;cors&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-fetch-site&#x27;</span>: <span class="hljs-string">&#x27;same-origin&#x27;</span>,<br>    <span class="hljs-string">&#x27;user-agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.0.0 Safari/537.36&#x27;</span>,<br>    <span class="hljs-string">&#x27;x-requested-with&#x27;</span>: <span class="hljs-string">&#x27;XMLHttpRequest&#x27;</span>,<br>&#125;<br><br>params = &#123;<br>    <span class="hljs-string">&#x27;TABLE_DIM_NAME&#x27;</span>: <span class="hljs-string">&#x27;findNewsCount&#x27;</span>,<br>    <span class="hljs-string">&#x27;ps&#x27;</span>: <span class="hljs-string">&#x27;10&#x27;</span>,<br>    <span class="hljs-string">&#x27;pn&#x27;</span>: <span class="hljs-string">&#x27;10&#x27;</span>,<br>    <span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-string">&#x27;11684584&#x27;</span>,<br>    <span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;中航重机股份有限公司&#x27;</span>,<br>    <span class="hljs-string">&#x27;companyBizType&#x27;</span>: <span class="hljs-string">&#x27;8&#x27;</span>,<br>    <span class="hljs-string">&#x27;_&#x27;</span>: <span class="hljs-string">&#x27;1653380498166&#x27;</span>,<br>&#125;<br><br>response = requests.get(<span class="hljs-string">&#x27;https://www.tianyancha.com/pagination/findNewsCount.xhtml&#x27;</span>, params=params, cookies=cookies,<br>                        headers=headers)<br><span class="hljs-built_in">print</span>(response.text)<br><br></code></pre></td></tr></table></figure><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus">cookies 是从浏览器获取到的cookie转换过来的,cookie中除了auth_token 之外其余都是可选的,auth_token的一般是由服务端来签发的,这个不知道具体算法是没有办法生成的,只能通过其他方式登录天眼查之后保存这个字段使用<br><br><br>params<span class="hljs-selector-class">.TABLE_DIM_NAME</span>: 数据表名称  relatedAnnouncement为公告研报 findNewsCount 新闻舆情<br>params<span class="hljs-selector-class">.id</span> 天眼查的数据库中该公司的名称<br>params<span class="hljs-selector-class">.name</span> 查询公司的名字<br>params<span class="hljs-selector-class">.ps</span> pagesize 页面大小<br>params<span class="hljs-selector-class">.pn</span> pagenumber 页码<br><br>params<span class="hljs-selector-class">.name</span> 和 params<span class="hljs-selector-class">.id</span> 是一一对应的<br>params<span class="hljs-selector-class">.companyBizType</span> <span class="hljs-selector-attr">[可选]</span>未知参数<br>params._  <span class="hljs-selector-attr">[可选]</span>时间戳<br></code></pre></td></tr></table></figure><h1 id="天某查网页接口返回数据说明"><a href="#天某查网页接口返回数据说明" class="headerlink" title="天某查网页接口返回数据说明"></a>天某查网页接口返回数据说明</h1><p>返回的数据不是<code>json</code>格式的,是渲染好的前端网页代码的一部分,借助三方库能够实现返回数据的解析</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> parsel <span class="hljs-keyword">import</span> Selector<br><span class="hljs-keyword">import</span> requests<br><br><br><br>cookies = &#123;<br>    <span class="hljs-string">&#x27;auth_token&#x27;</span>: <span class="hljs-string">&#x27;eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxODgyNzYwMzk2MiIsImlhdCI6MTY1MzM1NjQ0MSwiZXhwIjoxNjU1OTQ4NDQxfQ._mF-UJeQsLBiSbKQnneoOw-yjGQ0qkYuDatYz-gB6-oNaEGXKkU4pcrU8Uvr_EdQzKKv5uS8slHip0jI45SCFw&#x27;</span>,<br>&#125;<br><br>headers = &#123;<br>    <span class="hljs-string">&#x27;authority&#x27;</span>: <span class="hljs-string">&#x27;www.tianyancha.com&#x27;</span>,<br>    <span class="hljs-string">&#x27;accept&#x27;</span>: <span class="hljs-string">&#x27;*/*&#x27;</span>,<br>    <span class="hljs-string">&#x27;accept-language&#x27;</span>: <span class="hljs-string">&#x27;zh,zh-CN;q=0.9&#x27;</span>,<br>    <span class="hljs-string">&#x27;dnt&#x27;</span>: <span class="hljs-string">&#x27;1&#x27;</span>,<br>    <span class="hljs-string">&#x27;referer&#x27;</span>: <span class="hljs-string">&#x27;https://www.tianyancha.com/company/11684584&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-ch-ua&#x27;</span>: <span class="hljs-string">&#x27;&quot; Not A;Brand&quot;;v=&quot;99&quot;, &quot;Chromium&quot;;v=&quot;101&quot;, &quot;Google Chrome&quot;;v=&quot;101&quot;&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-ch-ua-mobile&#x27;</span>: <span class="hljs-string">&#x27;?0&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-ch-ua-platform&#x27;</span>: <span class="hljs-string">&#x27;&quot;macOS&quot;&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-fetch-dest&#x27;</span>: <span class="hljs-string">&#x27;empty&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-fetch-mode&#x27;</span>: <span class="hljs-string">&#x27;cors&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-fetch-site&#x27;</span>: <span class="hljs-string">&#x27;same-origin&#x27;</span>,<br>    <span class="hljs-string">&#x27;user-agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.0.0 Safari/537.36&#x27;</span>,<br>    <span class="hljs-string">&#x27;x-requested-with&#x27;</span>: <span class="hljs-string">&#x27;XMLHttpRequest&#x27;</span>,<br>&#125;<br><br>params = &#123;<br>    <span class="hljs-string">&#x27;TABLE_DIM_NAME&#x27;</span>: <span class="hljs-string">&#x27;findNewsCount&#x27;</span>,<br>    <span class="hljs-string">&#x27;ps&#x27;</span>: <span class="hljs-string">&#x27;10&#x27;</span>,<br>    <span class="hljs-string">&#x27;pn&#x27;</span>: <span class="hljs-string">&#x27;10&#x27;</span>,<br>    <span class="hljs-string">&#x27;id&#x27;</span>: <span class="hljs-string">&#x27;11684584&#x27;</span>,<br>    <span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;中航重机股份有限公司&#x27;</span>,<br>    <span class="hljs-string">&#x27;companyBizType&#x27;</span>: <span class="hljs-string">&#x27;8&#x27;</span>,<br>    <span class="hljs-string">&#x27;_&#x27;</span>: <span class="hljs-string">&#x27;1653380498166&#x27;</span>,<br>&#125;<br><br>response = requests.get(<span class="hljs-string">&#x27;https://www.tianyancha.com/pagination/findNewsCount.xhtml&#x27;</span>, params=params, cookies=cookies,<br>                        headers=headers)<br><br>selector = Selector(text=response.text)<br><br>news_contents = selector.xpath(<span class="hljs-string">&#x27;//div[@class=&quot;company-news-content&quot;]&#x27;</span>)<br><span class="hljs-keyword">for</span> content <span class="hljs-keyword">in</span> news_contents:<br>    link = content.xpath(<span class="hljs-string">&#x27;.//div[1]/a/@href&#x27;</span>).extract()<br>    title = content.xpath(<span class="hljs-string">&#x27;.//div[1]/a/text()&#x27;</span>).extract()<br>    tags = content.xpath(<span class="hljs-string">&#x27;./div[@class=&quot;news-tags&quot;]//span/text()&#x27;</span>).extract()<br>    abstract_news = content.xpath(<span class="hljs-string">&#x27;./div[@class=&quot;abstracts -new&quot;]//text()&#x27;</span>).extract()<br>    abstract = content.xpath(<span class="hljs-string">&#x27;./div[@class=&quot;abstracts &quot;]//text()&#x27;</span>).extract()<br>    source = content.xpath(<span class="hljs-string">&#x27;./div[@class=&quot;infos&quot;]/span[1]/text()&#x27;</span>).extract()<br>    time_ = content.xpath(<span class="hljs-string">&#x27;./div[@class=&quot;infos&quot;]/span[2]/text()&#x27;</span>).extract()<br>    company = content.xpath(<span class="hljs-string">&#x27;./div[@class=&quot;infos&quot;]/span[3]/a//text()&#x27;</span>).extract()<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> abstract_news:<br>        abstract_news = abstract<br>    <span class="hljs-built_in">print</span>(company)<br>    <br>    <br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>python</tag>
      
      <tag>spider</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>docker运行dp可视化教程</title>
    <link href="/2022/05/25/%E4%BD%BF%E7%94%A8docker%20%E8%BF%90%E8%A1%8Cdp/"/>
    <url>/2022/05/25/%E4%BD%BF%E7%94%A8docker%20%E8%BF%90%E8%A1%8Cdp/</url>
    
    <content type="html"><![CDATA[<h2 id="docker运行dp可视化教程"><a href="#docker运行dp可视化教程" class="headerlink" title="docker运行dp可视化教程"></a>docker运行dp可视化教程</h2><p>可在web界面可视化linux终端，对dp运行的浏览器进行手动处理机器验证。</p><h2 id="拉取镜像并运行"><a href="#拉取镜像并运行" class="headerlink" title="拉取镜像并运行"></a>拉取镜像并运行</h2><p>该镜像包含：vnc，web可视化，谷歌浏览器，python3.8</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">命令：<br>docker run -name dp -d -p 6080:80 -p 5900:5900 -e VNC_PASSWORD=mypassword -e HTTP_PASSWORD=mypassword -v /dev/shm:/dev/shm -v $&#123;PWD&#125;/code:/root/code cdwen/dp_visible:v1<br><br>输出：<br>2a4a06a81dfb626487852ac861a7d6d890330cf6df3f8eda33789962018621d8<br></code></pre></td></tr></table></figure><p>参数说明</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">-d     #后台运行<br>6080   #web端口<br>5900   #vnc端口<br>VNC_PASSWORD    #vnc密码<br>HTTP_PASSWORD   #web页面密码<br>-v $&#123;PWD&#125;/code:/root/code     #将当前路径下的code目录挂载到容器的/root/code目录<br></code></pre></td></tr></table></figure><h2 id="访问web界面"><a href="#访问web界面" class="headerlink" title="访问web界面"></a>访问web界面</h2><p>访问web界面：http://主机ip/6080</p><p>我的虚拟机ip是：172.10.12.21所以访问地址是<a href="http://172.10.12.21:6080/">http://172.10.12.21:6080</a></p><p>账户：root</p><p>密码：mypassword</p><p><img src="https://s2.loli.net/2024/03/22/ufJWKrmYPiqVe4U.png" alt="1710301301874"></p><p>web界面效果</p><p><img src="https://s2.loli.net/2024/03/22/tX5O6W9ArkKwmsH.png" alt="1710301359928"></p><h2 id="拷贝代码到容器内"><a href="#拷贝代码到容器内" class="headerlink" title="拷贝代码到容器内"></a>拷贝代码到容器内</h2><p>1、可以看到我们宿主机的当前目录下是生成了一个code目录</p><p><img src="https://s2.loli.net/2024/03/22/2kayIRDxTlz3oMe.png" alt="1710301466838"></p><p>2、我们将代码都放入到宿主机的code目录中，我将main.py脚本放入到code目录中</p><p><img src="https://s2.loli.net/2024/03/22/7Q4p5rNIdaMKPhx.png" alt="1710301521106"></p><p>3、回到web页面，我们打开终端命令行工具</p><p><img src="https://s2.loli.net/2024/03/22/15IxT3dp7SsFC8b.png" alt="1710301612352"></p><p><img src="https://s2.loli.net/2024/03/22/7pYDKSbnEmMosF8.png" alt="1710301627065"></p><p>在终端工具中进入code目录</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cd /root/code<br></code></pre></td></tr></table></figure><p>可以看到code目录中有我们拷贝进去的main.py文件</p><p><img src="https://s2.loli.net/2024/03/22/AQECk6NrxIL31i9.png" alt="1710301687304"></p><h2 id="运行代码"><a href="#运行代码" class="headerlink" title="运行代码"></a>运行代码</h2><p>容器内：/root/code/main.py，代码内容</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># -*- coding:utf-8 -*-</span><br><span class="hljs-keyword">from</span> DrissionPage <span class="hljs-keyword">import</span> ChromiumPage<br><span class="hljs-keyword">from</span> DataRecorder <span class="hljs-keyword">import</span> Recorder<br><br><span class="hljs-comment"># 创建页面对象</span><br>page = ChromiumPage()<br><span class="hljs-comment"># 创建记录器对象</span><br>recorder = Recorder(<span class="hljs-string">&#x27;data.csv&#x27;</span>)<br><span class="hljs-comment"># 访问网页</span><br>page.get(<span class="hljs-string">&#x27;https://www.maoyan.com/board/4&#x27;</span>)<br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    <span class="hljs-comment"># 遍历页面上所有 dd 元素</span><br>    <span class="hljs-keyword">for</span> mov <span class="hljs-keyword">in</span> page.eles(<span class="hljs-string">&#x27;t:dd&#x27;</span>):<br>        <span class="hljs-comment"># 获取需要的信息</span><br>        num = mov(<span class="hljs-string">&#x27;t:i&#x27;</span>).text<br>        score = mov(<span class="hljs-string">&#x27;.score&#x27;</span>).text<br>        title = mov(<span class="hljs-string">&#x27;@data-act=boarditem-click&#x27;</span>).attr(<span class="hljs-string">&#x27;title&#x27;</span>)<br>        star = mov(<span class="hljs-string">&#x27;.star&#x27;</span>).text<br>        time = mov(<span class="hljs-string">&#x27;.releasetime&#x27;</span>).text<br>        <span class="hljs-comment"># 写入到记录器</span><br>        recorder.add_data((num, title, star, time, score))<br><br>    <span class="hljs-comment"># 获取下一页按钮，有就点击</span><br>    btn = page(<span class="hljs-string">&#x27;下一页&#x27;</span>, timeout=<span class="hljs-number">2</span>)<br>    <span class="hljs-keyword">if</span> btn:<br>        btn.click()<br>        page.wait.load_start()<br>    <span class="hljs-comment"># 没有则退出程序</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">break</span><br><br>recorder.record()<br></code></pre></td></tr></table></figure><p>运行main.py</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">python main.py<br></code></pre></td></tr></table></figure><p>脚本成功控制浏览器</p><p><img src="https://s2.loli.net/2024/03/22/HCU2IEoTnAzS1m8.png" alt="1710301800656"></p><p><img src="https://s2.loli.net/2024/03/22/mVaOqjWxzRUy4ic.png" alt="1710301864935"></p><h2 id="修改configs-ini"><a href="#修改configs-ini" class="headerlink" title="修改configs.ini"></a>修改configs.ini</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs awk">configs.ini默认路径：<br><br><span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/lib/</span>python3.<span class="hljs-number">8</span><span class="hljs-regexp">/dist-packages/</span>DrissionPage<span class="hljs-regexp">/_configs/</span>configs.ini<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>docker</tag>
      
      <tag>爬虫</tag>
      
      <tag>dp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>某赚钱APP逆向</title>
    <link href="/2022/05/25/%E6%9F%90%E8%B5%9A%E9%92%B1APP%E9%80%86%E5%90%91/"/>
    <url>/2022/05/25/%E6%9F%90%E8%B5%9A%E9%92%B1APP%E9%80%86%E5%90%91/</url>
    
    <content type="html"><![CDATA[<p>拿到一个要 <a href="http://www.uwws.cn/jiandan.html?Promocode=292147&channel=jiandan">逆向的APP</a> 目标是大厅中的数据接口,可以不登录</p><h1 id="抓包分析"><a href="#抓包分析" class="headerlink" title="抓包分析"></a>抓包分析</h1><p>首先不登录的情况对APP 进行抓包 </p><p>我常用的是mitmproxy的sock5模式+Postern vpn 转发</p><p><img src="https://s2.loli.net/2022/05/25/YNVAeQZOCubPskg.png"></p><p>看到post请求加密了 header中有timespan和时间戳相关的参数和authorization 参数</p><p>然后复制为curl 然后通过<a href="https://curlconverter.com/">工具转换</a>成python 的requests的请求格式 运行下代码发现返回如下结果:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;StateCode&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1051</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;errorMessage&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;InnerData&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;PropId&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;PropType&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;ShowDelay&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;FinishAchieveMent&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;FinishAchieveMentName&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;AppendAchieveId&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">0</span><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>不支持重放的请求中post 携带的数据应该有时间戳参数</p><p>使用frida 的Hook 脚本进行Hook 看看用下函数加密用的的是什么算法</p><p><img src="https://s2.loli.net/2022/05/25/dhjlW62mNUZDYXR.png"><br><img src="https://s2.loli.net/2022/05/25/QsWywoCbu5HPh9x.png"></p><p>加密参数是也正是请求参数</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;categoryIds&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;hallType&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">2.0</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;hideTask&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;isFilterSubmited&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;pageIndex&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1.0</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;pageSize&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">20.0</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;treatmentType&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">1.0</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;ClientTime&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">20220525145054</span><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>使用脚本没有Hook到IV向量,最终要确定下加密模式和有无IV,这个可以使用加密前后的数据来和doFinal 的结果对比一下可以算出来</p><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="逆向分析"><a href="#逆向分析" class="headerlink" title="逆向分析"></a>逆向分析</h1><p>使用jadx 进行反编译出错, 换了1.2,1.3,1.4的版本之后之后还是不行.编译出来的函数没有办法正常显示. </p><p>开始我还以为有啥反爬新招式但是在github上找了下好像是版本的问题,<a href="https://github.com/skylot/jadx/issues/1385">jadx issue 1385</a></p><p>接着使用jeb3对函数进行反编译跟踪 通过抓包定位出来的函数Authorization参数定位到关键函数</p><p>HTTP request 中的Header最终发请求的时候是要转换成大写的,搜索的时候可以大小写都试一下,然后看下这个包是不是目标APP的包就可以了. 比如 alipay.sdk 或者tecent<br>开头的包,如果你不是抓这样两个公司相关的产品可以忽略不看的,只关注这个包是怎么写的.</p><p>最终定位到如下的包</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> android.text.TextUtils;<br><span class="hljs-keyword">import</span> com.cq.jdcover.app.b;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> okhttp3.Interceptor$Chain;<br><span class="hljs-keyword">import</span> okhttp3.Interceptor;<br><span class="hljs-keyword">import</span> okhttp3.Request;<br><span class="hljs-keyword">import</span> okhttp3.Response;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">bc0$a</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> &#123;<br>    bc0$a(bc0 arg1) &#123;<br>        <span class="hljs-built_in">super</span>();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Response <span class="hljs-title function_">intercept</span><span class="hljs-params">(Chain arg7)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-type">Request</span> <span class="hljs-variable">v0</span> <span class="hljs-operator">=</span> arg7.request();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">v1</span> <span class="hljs-operator">=</span> b.provideDemoRepository().getToken();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">v2</span> <span class="hljs-operator">=</span> b.provideDemoRepository().getAchievementIds();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">v4</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;0&quot;</span>;<br>        <span class="hljs-keyword">if</span>(((TextUtils.isEmpty(((CharSequence)v1))) || (v1.equals(v4))) &amp;&amp; (arg7.request().url().url().getPath().toLowerCase().contains(<span class="hljs-string">&quot;wecatbound&quot;</span>))) &#123;<br>            v1 = b.provideDemoRepository().getTempToken();<br>        &#125;<br><br>        <span class="hljs-keyword">if</span>(TextUtils.isEmpty(((CharSequence)v1))) &#123;<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            v4 = v1;<br>        &#125;<br><br>        <span class="hljs-keyword">if</span>(v2 == <span class="hljs-literal">null</span>) &#123;<br>            v2 = <span class="hljs-string">&quot;NoData&quot;</span>;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> arg7.proceed(v0.newBuilder().header(<span class="hljs-string">&quot;Authorization&quot;</span>, v4).header(<span class="hljs-string">&quot;AchievementIds&quot;</span>, v2).build());<br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">package</span> com.cq.jdcover.app;<br><br><span class="hljs-keyword">import</span> bc0;<br><span class="hljs-keyword">import</span> di;<br><span class="hljs-keyword">import</span> ei;<br><span class="hljs-keyword">import</span> fi;<br><span class="hljs-keyword">import</span> vh;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">b</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">b</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> vh <span class="hljs-title function_">provideDemoRepository</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">vh</span> <span class="hljs-variable">v0</span> <span class="hljs-operator">=</span> vh.getInstance();<br>        <span class="hljs-keyword">if</span>(v0 != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> v0;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> vh.getInstance(di.getInstance(bc0.getInstance().create(ei.class)), fi.getInstance());<br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><p>provideDemoRepository() 应该是一个运行时的实例,去找函数定义的时候没有找到实现,就直接使用RPC的方式来调用</p><h1 id="RPC-调用实现"><a href="#RPC-调用实现" class="headerlink" title="RPC 调用实现"></a>RPC 调用实现</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//hook.js</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">sign</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> sign;<br>    <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">perform</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">const</span> b = <span class="hljs-title class_">Java</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">&quot;com.cq.jdcover.app.b&quot;</span>);<br>        sign = b.<span class="hljs-title function_">provideDemoRepository</span>().<span class="hljs-title function_">getToken</span>();<br>    &#125;)<br><br>    <span class="hljs-keyword">return</span> sign<br>&#125;<br><br>rpc.<span class="hljs-property">exports</span> = &#123;<br>    <span class="hljs-attr">sign</span>: sign<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># server.py</span><br><br><span class="hljs-keyword">import</span> frida<br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><br>hook = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;hook.js&#x27;</span>, <span class="hljs-string">&#x27;r&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>).read()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">on_message</span>(<span class="hljs-params">message, data</span>):<br>    <span class="hljs-keyword">if</span> message[<span class="hljs-string">&#x27;type&#x27;</span>] == <span class="hljs-string">&#x27;send&#x27;</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;send message:<span class="hljs-subst">&#123;message[<span class="hljs-string">&#x27;payload&#x27;</span>]&#125;</span>&quot;</span>)<br>    <span class="hljs-keyword">elif</span> message[<span class="hljs-string">&#x27;type&#x27;</span>] == <span class="hljs-string">&#x27;error&#x27;</span>:<br>        <span class="hljs-built_in">print</span>(message[<span class="hljs-string">&#x27;stack&#x27;</span>])<br><br><br>deviceManage = frida.get_usb_device()<br>front_app = deviceManage.get_frontmost_application()<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;===正在运行的应用为：&quot;</span>, front_app)<br>process = deviceManage.attach(front_app.pid)<br><br>script = process.create_script(hook)<br>script.on(<span class="hljs-string">&#x27;message&#x27;</span>, on_message)<br>script.load()<br><br>app = Flask(__name__)<br><br><br><span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">&#x27;/sign&#x27;</span>, methods=[<span class="hljs-string">&#x27;get&#x27;</span>]</span>)  </span><span class="hljs-comment"># data解密</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">sign</span>():<br>    _sign = script.exports.sign()<br><br>    <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&#x27;token&#x27;</span>: _sign&#125;<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    app.run()<br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-comment"># -*- coding:utf-8 -*-</span><br><br><span class="hljs-keyword">import</span> base64<br><br><span class="hljs-keyword">from</span> Crypto.Cipher <span class="hljs-keyword">import</span> AES<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">EncryptDate</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, key</span>):<br>        self.key = key  <span class="hljs-comment"># 初始化密钥</span><br>        self.length = <span class="hljs-number">16</span>  <span class="hljs-comment"># 初始化数据块大小</span><br>        self.aes = AES.new(self.key, AES.MODE_ECB)  <span class="hljs-comment"># 初始化AES,ECB模式的实例</span><br>        self.unpad = <span class="hljs-keyword">lambda</span> date: date[<span class="hljs-number">0</span>:-<span class="hljs-built_in">ord</span>(date[-<span class="hljs-number">1</span>])]  <span class="hljs-comment"># 截断函数，去除填充的字符</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pad</span>(<span class="hljs-params">self, text</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        #填充函数，使被加密数据的字节码长度是block_size的整数倍</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        count = <span class="hljs-built_in">len</span>(text.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>))<br>        add = self.length - (count % self.length)<br>        entext = text + (<span class="hljs-built_in">chr</span>(add) * add)<br>        <span class="hljs-keyword">return</span> entext<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">encrypt</span>(<span class="hljs-params">self, encrData</span>):  <span class="hljs-comment"># 加密函数</span><br>        a = self.pad(encrData)<br>        res = self.aes.encrypt(a.encode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br>        msg = <span class="hljs-built_in">str</span>(base64.b64encode(res), encoding=<span class="hljs-string">&quot;utf8&quot;</span>)<br>        <span class="hljs-keyword">return</span> msg<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decrypt</span>(<span class="hljs-params">self, decrData</span>):  <span class="hljs-comment"># 解密函数</span><br>        res = base64.decodebytes(decrData.encode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br>        msg = self.aes.decrypt(res).decode(<span class="hljs-string">&quot;utf-8&quot;</span>)<br>        <span class="hljs-keyword">return</span> self.unpad(msg)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">enc_data</span>(<span class="hljs-params">text</span>):<br>    aes_key = <span class="hljs-string">&quot;SFV2fb8D09jreH2Xdf2M0FGk5Di2DX5O&quot;</span><br>    eg = EncryptDate(aes_key.encode(<span class="hljs-string">&quot;utf-8&quot;</span>))<br>    encrypt_data = eg.encrypt(text)<br>    <span class="hljs-keyword">return</span> encrypt_data<br><br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># client.py</span><br><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<br><br><span class="hljs-keyword">import</span> requests<br><br><span class="hljs-keyword">from</span> enc <span class="hljs-keyword">import</span> enc_data<br><br>url = <span class="hljs-string">&#x27;http://127.0.0.1:5000/sign&#x27;</span><br><br>t = datetime.now()<br>ts = t.timestamp()<br>str_t = <span class="hljs-built_in">str</span>(t)<br>day, time_ = str_t.split()<br>day = day.replace(<span class="hljs-string">&#x27;-&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<br>time_ = time_.split(<span class="hljs-string">&#x27;.&#x27;</span>)[<span class="hljs-number">0</span>].replace(<span class="hljs-string">&quot;:&quot;</span>, <span class="hljs-string">&#x27;&#x27;</span>)<br>daytime_ = day + time_<br>timespan = <span class="hljs-built_in">int</span>(ts * <span class="hljs-number">1000</span>)<br><br>res = requests.get(url)<br>token = res.json()[<span class="hljs-string">&#x27;token&#x27;</span>]<br><br>headers = &#123;<br>    <span class="hljs-string">&#x27;channel&#x27;</span>: <span class="hljs-string">&#x27;jiandan&#x27;</span>,<br>    <span class="hljs-string">&#x27;pkgname&#x27;</span>: <span class="hljs-string">&#x27;com.cq.jdcover&#x27;</span>,<br>    <span class="hljs-string">&#x27;encryption&#x27;</span>: <span class="hljs-string">&#x27;1&#x27;</span>,<br>    <span class="hljs-string">&#x27;timezoom&#x27;</span>: <span class="hljs-string">&#x27;GMT+08:00&#x27;</span>,<br>    <span class="hljs-string">&#x27;timespan&#x27;</span>: <span class="hljs-built_in">str</span>(timespan),<br>    <span class="hljs-string">&#x27;authorization&#x27;</span>: token,<br>    <span class="hljs-string">&#x27;achievementids&#x27;</span>: <span class="hljs-string">&#x27;NoData&#x27;</span>,<br>    <span class="hljs-string">&#x27;content-type&#x27;</span>: <span class="hljs-string">&#x27;application/json; charset=UTF-8&#x27;</span>,<br>    <span class="hljs-string">&#x27;user-agent&#x27;</span>: <span class="hljs-string">&#x27;okhttp/3.10.0&#x27;</span>,<br>&#125;<br><br>para = <span class="hljs-string">&#x27;&#123;&quot;categoryIds&quot;:[],&quot;hallType&quot;:2.0,&quot;hideTask&quot;:false,&quot;isFilterSubmited&quot;:false,&quot;pageIndex&quot;:1.0,&quot;pageSize&quot;:20.0,&quot;treatmentType&quot;:1.0,&quot;ClientTime&quot;:&#x27;</span> + <span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;<span class="hljs-built_in">str</span>(daytime_)&#125;</span>&#x27;</span> + <span class="hljs-string">&#x27;&#125;&#x27;</span><br>enc_data = enc_data(para)<br><br>res = requests.post(<span class="hljs-string">&#x27;https://www.cqsslhj.com/Tasks/NewTask/GetHallTasks&#x27;</span>, headers=headers,<br>                    data=enc_data)<br><br><span class="hljs-built_in">print</span>(res.text)<br><br></code></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/05/25/LyxDtUFpg5jh3Cs.png"></p><p>发请求的时候注意下timespan 和daytime 的格式就可以了 这个APP就分析到这里了  </p>]]></content>
    
    
    
    <tags>
      
      <tag>爬虫</tag>
      
      <tag>spider</tag>
      
      <tag>逆向</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Mac下配置代理的使用</title>
    <link href="/2022/05/04/Mac%E4%B8%8B%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86/"/>
    <url>/2022/05/04/Mac%E4%B8%8B%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="Mac代理客户端"><a href="#Mac代理客户端" class="headerlink" title="Mac代理客户端"></a>Mac代理客户端</h1><p>Ssr v2rayu clash 和服务端建立连接核心功能无差异,只不过在其他功能上不同开发者有不同的功能实现.</p><h1 id="系统全局代理"><a href="#系统全局代理" class="headerlink" title="系统全局代理"></a>系统全局代理</h1><p>系统层面的代理可以在<code>系统偏好设置</code>-&gt; <code>网络</code> -&gt;<code>选中连接的网络</code> -&gt; <code>高级</code> -&gt; <code>代理</code>页面配置</p><h1 id="命令行代理配置"><a href="#命令行代理配置" class="headerlink" title="命令行代理配置"></a>命令行代理配置</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">会话级别配置代理 关闭/新建 终端恢复</span><br>export http_proxy=&quot;http://username:password@proxyServer:port/&quot;<br>export https_proxy=&quot;http://username:password@proxyServer:port/&quot;<br>export ftp_proxy=&quot;http://username:password@proxyServer:port/&quot;<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">会话级别解除代理 关闭/新建终端恢复</span><br>unset http_proxy<br>unset https_proxy<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">全局代理配置</span><br>cat   &gt;&gt;  /etc/profile  &lt;&lt; EOF<br><br>export  http_proxy=&quot;http://username:password@proxyServer:port/&quot;<br>export  https_proxy=&quot;http://username:password@proxyServer:port/&quot;<br>export ftp_proxy=&quot;http://username:password@proxyServer:port/&quot;<br>export no_proxy=&quot;127.0.0.1,192.168.1.1/16,*.example.com&quot;<br><br>EOF<br></code></pre></td></tr></table></figure><h1 id="Proxychains代理安装配置"><a href="#Proxychains代理安装配置" class="headerlink" title="Proxychains代理安装配置"></a>Proxychains代理安装配置</h1><p>ProxyChains 是一个强制应用的 TCP 连接通过代理的工具，支持 Tor、HTTP、与 Socks 代理。ProxyChains 会将当前应用的 TCP 连接转发至代理，而非全局代理。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell">brew install proxychains-ng<br>vim /usr/local/etc/proxychains.conf<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"> GG  按需添加</span> <br><span class="hljs-meta prompt_"># </span><span class="language-bash"> socks5 127.0.0.1 9050</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"> http    127.0.0.1 4321</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"> 注释掉 proxy_dns</span><br><br>cat &gt;&gt; ~/.zshrc &lt;&lt; EOF <br>alias pcf=&quot;proxychains4&quot;<br>EOF<br><br>source ~/.zshrc<br><br></code></pre></td></tr></table></figure><h1 id="Tor-代理安装配置"><a href="#Tor-代理安装配置" class="headerlink" title="Tor 代理安装配置"></a>Tor 代理安装配置</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">brew install tor<br><br>vim /usr/local/etc/tor/torrc<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash"> SOCKS5Proxy 127.0.0.1:1080</span> <br><span class="hljs-meta prompt_"># </span><span class="language-bash">填到末尾 上面这个代理是上级代理</span><br><br>brew services start tor # 启动tor<br><br>[参考文章](https://y1ng.org/2020/10/05/%E5%9C%A8macOS%E4%B8%8A%E8%AE%BE%E7%BD%AETor%E4%BB%A3%E7%90%86/)<br></code></pre></td></tr></table></figure><h1 id="无界面SSR客户端-privoxy-cntlm"><a href="#无界面SSR客户端-privoxy-cntlm" class="headerlink" title="无界面SSR客户端+privoxy+ cntlm"></a>无界面SSR客户端+privoxy+ cntlm</h1><ul><li>SSR 客户提供和SSR服务端的连接并提供下级代理</li><li>privoxy 连接上级SSR 给的端口, 提供pac 服务,过滤网页内容，管理cookies，控制访问，除广告、横幅、弹出窗口 等功能</li><li>cntlm 对privoxy 的上级代理再进行身份认证</li></ul><p><strong>cntlm 的默认端口在服务端经常被扫描建议换个非默认端口运行这个服务</strong> </p><p>​    其实本地运行的ssr-ng 或者v2rayU 已经实现了类似的功能,提供下级代理,Pac 请求和http代理二级服务,但是ssr-ng 的提供的HTTP代理端口只能在本地使用,本机如果没有公网IP的话,如果想在外面使用需要加一个本地端口转发.</p><p>​    这个方案可以在服务器上跑,资源消耗也不是太多,如果需要匿名性可以在中间再套一层tor代理,服务器有公网IP,可以做到在任意的机器上使用代理.</p><p>​    </p><p>​    具体搭建我就不写了这个方案我现在用的比较少了,我把我当时搭建这个服务时候参考的几篇文章贴出来,有需要的可以根据自己的需求求定制.</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>www.qcmoke.site<span class="hljs-regexp">/linux/</span>linux_proxy.html<br>https:<span class="hljs-regexp">//</span>www.dazhuanlan.com<span class="hljs-regexp">/2019/</span><span class="hljs-number">12</span><span class="hljs-regexp">/09/</span><span class="hljs-number">5</span>dee47bd4e49a/<br>https:<span class="hljs-regexp">//</span>blog.csdn.net<span class="hljs-regexp">/fjdjfkdjfkdjfkd/</span>article<span class="hljs-regexp">/details/</span><span class="hljs-number">104978032</span><br>https:<span class="hljs-regexp">//</span>blog.csdn.net<span class="hljs-regexp">/yljphp/</span>article<span class="hljs-regexp">/details/</span><span class="hljs-number">90411642</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>proxy</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
